

(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === "object" && typeof module === "object")
    module.exports = factory();
  else if (typeof define === "function" && define.amd) define([], factory);
  else if (typeof exports === "object") exports["frontend"] = factory();
  else root["frontend"] = factory();
})(this, () => {
  

  return /******/ (() => {
    // webpackBootstrap
    /******/ "use strict";
    /******/ var __webpack_modules__ = {
      /***/ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js":
        /*!************************************************************************************************************!*\
  !*** ./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js ***!
  \************************************************************************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ AfkLogic: () => /* binding */ Ct,
            /* harmony export */ AfkTimedOutEvent: () => /* binding */ ft,
            /* harmony export */ AfkWarningActivateEvent: () =>
              /* binding */ Tt,
            /* harmony export */ AfkWarningDeactivateEvent: () =>
              /* binding */ Et,
            /* harmony export */ AfkWarningUpdateEvent: () => /* binding */ yt,
            /* harmony export */ AggregatedStats: () => /* binding */ bt,
            /* harmony export */ CandidatePairStats: () => /* binding */ Mt,
            /* harmony export */ CandidateStat: () => /* binding */ wt,
            /* harmony export */ Config: () => /* binding */ Pt,
            /* harmony export */ ControlSchemeType: () => /* binding */ kt,
            /* harmony export */ DataChannelCloseEvent: () => /* binding */ Rt,
            /* harmony export */ DataChannelErrorEvent: () => /* binding */ Lt,
            /* harmony export */ DataChannelOpenEvent: () => /* binding */ xt,
            /* harmony export */ DataChannelStats: () => /* binding */ At,
            /* harmony export */ EncoderSettings: () => /* binding */ Ft,
            /* harmony export */ EventEmitter: () => /* binding */ Dt,
            /* harmony export */ Flags: () => /* binding */ Ot,
            /* harmony export */ HideFreezeFrameEvent: () => /* binding */ Ut,
            /* harmony export */ InboundAudioStats: () => /* binding */ It,
            /* harmony export */ InboundVideoStats: () => /* binding */ zt,
            /* harmony export */ InitialSettings: () => /* binding */ Gt,
            /* harmony export */ InitialSettingsEvent: () => /* binding */ Bt,
            /* harmony export */ LatencyTestResultEvent: () => /* binding */ _t,
            /* harmony export */ LatencyTestResults: () => /* binding */ Wt,
            /* harmony export */ LoadFreezeFrameEvent: () => /* binding */ Ht,
            /* harmony export */ Logger: () => /* binding */ Vt,
            /* harmony export */ MessageRecv: () => /* binding */ Nt,
            /* harmony export */ MessageSend: () => /* binding */ Kt,
            /* harmony export */ MessageStreamerList: () => /* binding */ Qt,
            /* harmony export */ NumericParameters: () => /* binding */ $t,
            /* harmony export */ OptionParameters: () => /* binding */ qt,
            /* harmony export */ OutBoundVideoStats: () => /* binding */ Xt,
            /* harmony export */ PixelStreaming: () => /* binding */ jt,
            /* harmony export */ PlayStreamErrorEvent: () => /* binding */ Yt,
            /* harmony export */ PlayStreamEvent: () => /* binding */ Jt,
            /* harmony export */ PlayStreamRejectedEvent: () =>
              /* binding */ Zt,
            /* harmony export */ SettingBase: () => /* binding */ es,
            /* harmony export */ SettingFlag: () => /* binding */ ts,
            /* harmony export */ SettingNumber: () => /* binding */ ss,
            /* harmony export */ SettingOption: () => /* binding */ ns,
            /* harmony export */ SettingText: () => /* binding */ rs,
            /* harmony export */ SettingsChangedEvent: () => /* binding */ is,
            /* harmony export */ SignallingProtocol: () => /* binding */ os,
            /* harmony export */ StatsReceivedEvent: () => /* binding */ as,
            /* harmony export */ StreamLoadingEvent: () => /* binding */ ls,
            /* harmony export */ StreamerListMessageEvent: () =>
              /* binding */ ds,
            /* harmony export */ TextParameters: () => /* binding */ cs,
            /* harmony export */ UnquantizedAndDenormalizeUnsigned: () =>
              /* binding */ hs,
            /* harmony export */ VideoEncoderAvgQPEvent: () => /* binding */ gs,
            /* harmony export */ VideoInitializedEvent: () => /* binding */ us,
            /* harmony export */ WebRTCSettings: () => /* binding */ ms,
            /* harmony export */ WebRtcAutoConnectEvent: () => /* binding */ Ss,
            /* harmony export */ WebRtcConnectedEvent: () => /* binding */ ps,
            /* harmony export */ WebRtcConnectingEvent: () => /* binding */ vs,
            /* harmony export */ WebRtcDisconnectedEvent: () =>
              /* binding */ Cs,
            /* harmony export */ WebRtcFailedEvent: () => /* binding */ fs,
            /* harmony export */ WebRtcPlayerController: () => /* binding */ Ts,
            /* harmony export */ WebRtcSdpEvent: () => /* binding */ Es,
            /* harmony export */ WebSocketController: () => /* binding */ ys,
            /* harmony export */ WebXRController: () => /* binding */ bs,
            /* harmony export */ XrFrameEvent: () => /* binding */ Ms,
            /* harmony export */ XrSessionEndedEvent: () => /* binding */ ws,
            /* harmony export */ XrSessionStartedEvent: () => /* binding */ Ps,
            /* harmony export */
          });
          /* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
          /* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default =
            /*#__PURE__*/ __webpack_require__.n(
              sdp__WEBPACK_IMPORTED_MODULE_0__
            );
          var t,
            s,
            n = {
              d: (e, t) => {
                for (var s in t)
                  n.o(t, s) &&
                    !n.o(e, s) &&
                    Object.defineProperty(e, s, { enumerable: !0, get: t[s] });
              },
              o: (e, t) => Object.prototype.hasOwnProperty.call(e, t),
            },
            r = {};
          n.d(r, {
            Dz: () => me,
            g$: () => A,
            Lt: () => R,
            Q9: () => x,
            qf: () => L,
            hV: () => Me,
            z$: () => Te,
            J0: () => fe,
            De: () => ge,
            $C: () => ue,
            al: () => _,
            _W: () => W,
            tz: () => B,
            Nu: () => Ce,
            zg: () => Oe,
            vp: () => ne,
            vU: () => re,
            wF: () => q,
            rv: () => pe,
            Nh: () => ve,
            ss: () => Fe,
            qW: () => J,
            QL: () => Y,
            cf: () => Ie,
            eM: () => $,
            Yd: () => i,
            iM: () => p,
            qy: () => o,
            ce: () => v,
            sK: () => oe,
            Ok: () => ce,
            q5: () => Ee,
            g: () => vt,
            xl: () => N,
            I: () => K,
            bx: () => Q,
            Ib: () => b,
            Az: () => M,
            Iw: () => w,
            qY: () => k,
            db: () => P,
            mR: () => Z,
            Tn: () => C,
            rV: () => X,
            gh: () => V,
            i5: () => j,
            x_: () => le,
            Am: () => dt,
            eR: () => F,
            r8: () => H,
            u3: () => Ue,
            vd: () => O,
            iV: () => I,
            jZ: () => U,
            SW: () => G,
            ZH: () => z,
            Ni: () => ht,
            lh: () => D,
            bq: () => f,
            $f: () => St,
            eu: () => se,
            Ax: () => te,
            Mc: () => ee,
          });
          class i {
            static GetStackTrace() {
              const e = new Error();
              let t = "No Stack Available for this browser";
              return (
                e.stack && (t = e.stack.toString().replace(/Error/g, "")), t
              );
            }
            static SetLoggerVerbosity(e) {
              null != this.verboseLogLevel && (this.verboseLogLevel = e);
            }
            static Log(e, t, s) {
              if (s > this.verboseLogLevel) return;
              const n = `Level: Log\nMsg: ${t}\nCaller: ${e}`;
              console.log(n);
            }
            static Info(e, t, s) {
              if (s > this.verboseLogLevel) return;
              const n = `Level: Info\nMsg: ${t}`;
              console.info(n);
            }
            static Error(e, t) {
              const s = `Level: Error\nMsg: ${t}\nCaller: ${e}`;
              console.error(s);
            }
            static Warning(e, t) {
              const s = `Level: Warning\nCaller: ${e}\nMsg: ${t}`;
              console.warn(s);
            }
          }
          (i.verboseLogLevel = 5),
            (function (e) {
              (e.LIST_STREAMERS = "listStreamers"),
                (e.SUBSCRIBE = "subscribe"),
                (e.UNSUBSCRIBE = "unsubscribe"),
                (e.ICE_CANDIDATE = "iceCandidate"),
                (e.OFFER = "offer"),
                (e.ANSWER = "answer"),
                (e.DATACHANNELREQUEST = "dataChannelRequest"),
                (e.SFURECVDATACHANNELREADY = "peerDataChannelsReady"),
                (e.PONG = "pong");
            })(t || (t = {}));
          class o {
            payload() {
              return (
                i.Log(
                  i.GetStackTrace(),
                  "Sending => \n" + JSON.stringify(this, void 0, 4),
                  6
                ),
                JSON.stringify(this)
              );
            }
          }
          class a extends o {
            constructor() {
              super(), (this.type = t.LIST_STREAMERS);
            }
          }
          class l extends o {
            constructor(e) {
              super(), (this.type = t.SUBSCRIBE), (this.streamerId = e);
            }
          }
          class d extends o {
            constructor() {
              super(), (this.type = t.UNSUBSCRIBE);
            }
          }
          class c extends o {
            constructor(e) {
              super(), (this.type = t.PONG), (this.time = e);
            }
          }
          class h extends o {
            constructor(e) {
              super(),
                (this.type = t.OFFER),
                e && ((this.type = e.type), (this.sdp = e.sdp));
            }
          }
          class g extends o {
            constructor(e) {
              super(),
                (this.type = t.ANSWER),
                e && ((this.type = e.type), (this.sdp = e.sdp));
            }
          }
          class u extends o {
            constructor() {
              super(), (this.type = t.DATACHANNELREQUEST);
            }
          }
          class m extends o {
            constructor() {
              super(), (this.type = t.SFURECVDATACHANNELREADY);
            }
          }
          class S {
            constructor(e) {
              (this.type = t.ICE_CANDIDATE), (this.candidate = e);
            }
            payload() {
              return (
                i.Log(
                  i.GetStackTrace(),
                  "Sending => \n" + JSON.stringify(this, void 0, 4),
                  6
                ),
                JSON.stringify(this)
              );
            }
          }
          !(function (e) {
            (e.CONFIG = "config"),
              (e.STREAMER_LIST = "streamerList"),
              (e.PLAYER_COUNT = "playerCount"),
              (e.OFFER = "offer"),
              (e.ANSWER = "answer"),
              (e.ICE_CANDIDATE = "iceCandidate"),
              (e.PEER_DATA_CHANNELS = "peerDataChannels"),
              (e.PING = "ping"),
              (e.WARNING = "warning");
          })(s || (s = {}));
          class p {}
          class v extends p {}
          class C {
            constructor() {
              this.FromUEMessageHandlers = new Map();
            }
            addMessageHandler(e, t) {
              this.FromUEMessageHandlers.set(e, t);
            }
            handleMessage(e, t) {
              this.FromUEMessageHandlers.has(e)
                ? this.FromUEMessageHandlers.get(e)(t)
                : i.Error(
                    i.GetStackTrace(),
                    `Message type of ${e} does not have a message handler registered on the frontend - ignoring message.`
                  );
            }
            static setupDefaultHandlers(e) {
              e.signallingProtocol.addMessageHandler(s.PING, (t) => {
                const n = new c(new Date().getTime()).payload();
                i.Log(i.GetStackTrace(), s.PING + ": " + t, 6),
                  e.webSocket.send(n);
              }),
                e.signallingProtocol.addMessageHandler(s.CONFIG, (t) => {
                  i.Log(i.GetStackTrace(), s.CONFIG, 6);
                  const n = JSON.parse(t);
                  e.onConfig(n);
                }),
                e.signallingProtocol.addMessageHandler(s.STREAMER_LIST, (t) => {
                  i.Log(i.GetStackTrace(), s.STREAMER_LIST, 6);
                  const n = JSON.parse(t);
                  e.onStreamerList(n);
                }),
                e.signallingProtocol.addMessageHandler(s.PLAYER_COUNT, (e) => {
                  i.Log(i.GetStackTrace(), s.PLAYER_COUNT, 6);
                  const t = JSON.parse(e);
                  i.Log(i.GetStackTrace(), "Player Count: " + t.count, 6);
                }),
                e.signallingProtocol.addMessageHandler(s.ANSWER, (t) => {
                  i.Log(i.GetStackTrace(), s.ANSWER, 6);
                  const n = JSON.parse(t);
                  e.onWebRtcAnswer(n);
                }),
                e.signallingProtocol.addMessageHandler(s.OFFER, (t) => {
                  i.Log(i.GetStackTrace(), s.OFFER, 6);
                  const n = JSON.parse(t);
                  e.onWebRtcOffer(n);
                }),
                e.signallingProtocol.addMessageHandler(s.ICE_CANDIDATE, (t) => {
                  i.Log(i.GetStackTrace(), s.ICE_CANDIDATE, 6);
                  const n = JSON.parse(t);
                  e.onIceCandidate(n.candidate);
                }),
                e.signallingProtocol.addMessageHandler(s.WARNING, (e) => {
                  i.Warning(i.GetStackTrace(), `Warning received: ${e}`);
                }),
                e.signallingProtocol.addMessageHandler(
                  s.PEER_DATA_CHANNELS,
                  (t) => {
                    i.Log(i.GetStackTrace(), s.PEER_DATA_CHANNELS, 6);
                    const n = JSON.parse(t);
                    e.onWebRtcPeerDataChannels(n);
                  }
                );
            }
          }
          class f {
            constructor() {
              (this.WS_OPEN_STATE = 1),
                (this.onOpen = new EventTarget()),
                (this.onClose = new EventTarget()),
                (this.signallingProtocol = new C()),
                C.setupDefaultHandlers(this);
            }
            connect(e) {
              i.Log(i.GetStackTrace(), e, 6);
              try {
                return (
                  (this.webSocket = new WebSocket(e)),
                  (this.webSocket.onopen = (e) => this.handleOnOpen(e)),
                  (this.webSocket.onerror = () => this.handleOnError()),
                  (this.webSocket.onclose = (e) => this.handleOnClose(e)),
                  (this.webSocket.onmessage = (e) => this.handleOnMessage(e)),
                  (this.webSocket.onmessagebinary = (e) =>
                    this.handleOnMessageBinary(e)),
                  !0
                );
              } catch (e) {
                return i.Error(e, e), !1;
              }
            }
            handleOnMessageBinary(e) {
              e &&
                e.data &&
                e.data
                  .text()
                  .then((e) => {
                    const t = new MessageEvent("messageFromBinary", {
                      data: e,
                    });
                    this.handleOnMessage(t);
                  })
                  .catch((e) => {
                    i.Error(
                      i.GetStackTrace(),
                      `Failed to parse binary blob from websocket, reason: ${e}`
                    );
                  });
            }
            handleOnMessage(e) {
              if (e.data && e.data instanceof Blob)
                return void this.handleOnMessageBinary(e);
              const t = JSON.parse(e.data);
              i.Log(
                i.GetStackTrace(),
                "received => \n" +
                  JSON.stringify(JSON.parse(e.data), void 0, 4),
                6
              ),
                this.signallingProtocol.handleMessage(t.type, e.data);
            }
            handleOnOpen(e) {
              i.Log(
                i.GetStackTrace(),
                "Connected to the signalling server via WebSocket",
                6
              ),
                this.onOpen.dispatchEvent(new Event("open"));
            }
            handleOnError() {
              i.Error(i.GetStackTrace(), "WebSocket error");
            }
            handleOnClose(e) {
              this.onWebSocketOncloseOverlayMessage(e),
                i.Log(
                  i.GetStackTrace(),
                  "Disconnected to the signalling server via WebSocket: " +
                    JSON.stringify(e.code) +
                    " - " +
                    e.reason
                ),
                this.onClose.dispatchEvent(new Event("close"));
            }
            requestStreamerList() {
              const e = new a();
              this.webSocket.send(e.payload());
            }
            sendSubscribe(e) {
              const t = new l(e);
              this.webSocket.send(t.payload());
            }
            sendUnsubscribe() {
              const e = new d();
              this.webSocket.send(e.payload());
            }
            sendWebRtcOffer(e) {
              const t = new h(e);
              this.webSocket.send(t.payload());
            }
            sendWebRtcAnswer(e) {
              const t = new g(e);
              this.webSocket.send(t.payload());
            }
            sendWebRtcDatachannelRequest() {
              const e = new u();
              this.webSocket.send(e.payload());
            }
            sendSFURecvDataChannelReady() {
              const e = new m();
              this.webSocket.send(e.payload());
            }
            sendIceCandidate(e) {
              if (
                (i.Log(i.GetStackTrace(), "Sending Ice Candidate"),
                this.webSocket &&
                  this.webSocket.readyState === this.WS_OPEN_STATE)
              ) {
                const t = new S(e);
                this.webSocket.send(t.payload());
              }
            }
            close() {
              this.webSocket.close();
            }
            onWebSocketOncloseOverlayMessage(e) {}
            onConfig(e) {}
            onStreamerList(e) {}
            onIceCandidate(e) {}
            onWebRtcAnswer(e) {}
            onWebRtcOffer(e) {}
            onWebRtcPeerDataChannels(e) {}
          }
          class T {
            constructor(e) {
              (this.videoElementProvider = e),
                (this.audioElement = document.createElement("Audio"));
            }
            handleOnTrack(e) {
              i.Log(
                i.GetStackTrace(),
                "handleOnTrack " + JSON.stringify(e.streams),
                6
              );
              const t = this.videoElementProvider.getVideoElement();
              if (
                (e.track &&
                  i.Log(
                    i.GetStackTrace(),
                    "Got track - " +
                      e.track.kind +
                      " id=" +
                      e.track.id +
                      " readyState=" +
                      e.track.readyState,
                    6
                  ),
                "audio" != e.track.kind)
              )
                return "video" == e.track.kind && t.srcObject !== e.streams[0]
                  ? ((t.srcObject = e.streams[0]),
                    void i.Log(
                      i.GetStackTrace(),
                      "Set video source from video track ontrack."
                    ))
                  : void 0;
              this.CreateAudioTrack(e.streams[0]);
            }
            CreateAudioTrack(e) {
              const t = this.videoElementProvider.getVideoElement();
              t.srcObject != e &&
                t.srcObject &&
                t.srcObject !== e &&
                ((this.audioElement.srcObject = e),
                i.Log(
                  i.GetStackTrace(),
                  "Created new audio element to play separate audio stream."
                ));
            }
          }
          class E {
            constructor(e) {
              (this.freezeFrameHeight = 0),
                (this.freezeFrameWidth = 0),
                (this.rootDiv = e),
                (this.rootElement = document.createElement("div")),
                (this.rootElement.id = "freezeFrame"),
                (this.rootElement.style.display = "none"),
                (this.rootElement.style.pointerEvents = "none"),
                (this.rootElement.style.position = "absolute"),
                (this.rootElement.style.zIndex = "20"),
                (this.imageElement = document.createElement("img")),
                (this.imageElement.style.position = "absolute"),
                this.rootElement.appendChild(this.imageElement),
                this.rootDiv.appendChild(this.rootElement);
            }
            setElementForShow() {
              this.rootElement.style.display = "block";
            }
            setElementForHide() {
              this.rootElement.style.display = "none";
            }
            updateImageElementSource(e) {
              const t = btoa(
                e.reduce((e, t) => e + String.fromCharCode(t), "")
              );
              this.imageElement.src = "data:image/jpeg;base64," + t;
            }
            setDimensionsFromElementAndResize() {
              (this.freezeFrameHeight = this.imageElement.naturalHeight),
                (this.freezeFrameWidth = this.imageElement.naturalWidth),
                this.resize();
            }
            resize() {
              if (0 !== this.freezeFrameWidth && 0 !== this.freezeFrameHeight) {
                let e = 0,
                  t = 0,
                  s = 0,
                  n = 0;
                const r = this.rootDiv.clientWidth / this.rootDiv.clientHeight,
                  i = this.freezeFrameWidth / this.freezeFrameHeight;
                r < i
                  ? ((e = this.rootDiv.clientWidth),
                    (t = Math.floor(this.rootDiv.clientWidth / i)),
                    (s = Math.floor(0.5 * (this.rootDiv.clientHeight - t))),
                    (n = 0))
                  : ((e = Math.floor(this.rootDiv.clientHeight * i)),
                    (t = this.rootDiv.clientHeight),
                    (s = 0),
                    (n = Math.floor(0.5 * (this.rootDiv.clientWidth - e)))),
                  (this.rootElement.style.width =
                    this.rootDiv.offsetWidth + "px"),
                  (this.rootElement.style.height =
                    this.rootDiv.offsetHeight + "px"),
                  (this.rootElement.style.left = "0px"),
                  (this.rootElement.style.top = "0px"),
                  (this.imageElement.style.width = e + "px"),
                  (this.imageElement.style.height = t + "px"),
                  (this.imageElement.style.left = n + "px"),
                  (this.imageElement.style.top = s + "px");
              }
            }
          }
          class y {
            constructor(e) {
              (this.receiving = !1),
                (this.size = 0),
                (this.jpeg = void 0),
                (this.valid = !1),
                (this.freezeFrameDelay = 50),
                (this.freezeFrame = new E(e));
            }
            showFreezeFrame() {
              this.valid && this.freezeFrame.setElementForShow();
            }
            hideFreezeFrame() {
              (this.valid = !1), this.freezeFrame.setElementForHide();
            }
            updateFreezeFrameAndShow(e, t) {
              this.freezeFrame.updateImageElementSource(e),
                (this.freezeFrame.imageElement.onload = () => {
                  this.freezeFrame.setDimensionsFromElementAndResize(), t();
                });
            }
            processFreezeFrameMessage(e, t) {
              this.receiving ||
                ((this.receiving = !0),
                (this.valid = !1),
                (this.size = 0),
                (this.jpeg = void 0)),
                (this.size = new DataView(e.slice(1, 5).buffer).getInt32(
                  0,
                  !0
                ));
              const s = e.slice(5);
              if (this.jpeg) {
                const e = new Uint8Array(this.jpeg.length + s.length);
                e.set(this.jpeg, 0),
                  e.set(s, this.jpeg.length),
                  (this.jpeg = e);
              } else
                (this.jpeg = s),
                  (this.receiving = !0),
                  i.Log(
                    i.GetStackTrace(),
                    `received first chunk of freeze frame: ${this.jpeg.length}/${this.size}`,
                    6
                  );
              this.jpeg.length === this.size
                ? ((this.receiving = !1),
                  (this.valid = !0),
                  i.Log(
                    i.GetStackTrace(),
                    `received complete freeze frame ${this.size}`,
                    6
                  ),
                  this.updateFreezeFrameAndShow(this.jpeg, t))
                : this.jpeg.length > this.size &&
                  (i.Error(
                    i.GetStackTrace(),
                    `received bigger freeze frame than advertised: ${this.jpeg.length}/${this.size}`
                  ),
                  (this.jpeg = void 0),
                  (this.receiving = !1));
            }
          }
          class b {
            constructor(e, t, s, n, r = () => {}) {
              (this.onChange = r),
                (this.onChangeEmit = () => {}),
                (this.id = e),
                (this.description = s),
                (this.label = t),
                (this.value = n);
            }
            set label(e) {
              (this._label = e), this.onChangeEmit(this._value);
            }
            get label() {
              return this._label;
            }
            get value() {
              return this._value;
            }
            set value(e) {
              (this._value = e),
                this.onChange(this._value, this),
                this.onChangeEmit(this._value);
            }
          }
          class M extends b {
            constructor(e, t, s, n, r, i = () => {}) {
              super(e, t, s, n, i);
              const o = new URLSearchParams(window.location.search);
              if (r && o.has(this.id)) {
                const e = this.getUrlParamFlag();
                this.flag = e;
              } else this.flag = n;
              this.useUrlParams = r;
            }
            getUrlParamFlag() {
              const e = new URLSearchParams(window.location.search);
              return (
                !!e.has(this.id) &&
                "false" !== e.get(this.id) &&
                "False" !== e.get(this.id)
              );
            }
            updateURLParams() {
              if (this.useUrlParams) {
                const e = new URLSearchParams(window.location.search);
                !0 === this.flag
                  ? e.set(this.id, "true")
                  : e.set(this.id, "false"),
                  window.history.replaceState(
                    {},
                    "",
                    "" !== e.toString()
                      ? `${location.pathname}?${e}`
                      : `${location.pathname}`
                  );
              }
            }
            enable() {
              this.flag = !0;
            }
            get flag() {
              return !!this.value;
            }
            set flag(e) {
              this.value = e;
            }
          }
          class w extends b {
            constructor(e, t, s, n, r, i, o, a = () => {}) {
              super(e, t, s, i, a), (this._min = n), (this._max = r);
              const l = new URLSearchParams(window.location.search);
              if (o && l.has(this.id)) {
                const e = Number.parseInt(l.get(this.id));
                this.number = Number.isNaN(e) ? i : e;
              } else this.number = i;
              this.useUrlParams = o;
            }
            updateURLParams() {
              if (this.useUrlParams) {
                const e = new URLSearchParams(window.location.search);
                e.set(this.id, this.number.toString()),
                  window.history.replaceState(
                    {},
                    "",
                    "" !== e.toString()
                      ? `${location.pathname}?${e}`
                      : `${location.pathname}`
                  );
              }
            }
            set number(e) {
              this.value = this.clamp(e);
            }
            get number() {
              return this.value;
            }
            clamp(e) {
              return Math.max(Math.min(this._max, e), this._min);
            }
            get min() {
              return this._min;
            }
            get max() {
              return this._max;
            }
            addOnChangedListener(e) {
              this.onChange = e;
            }
          }
          class P extends b {
            constructor(e, t, s, n, r, i = () => {}) {
              super(e, t, s, n, i);
              const o = new URLSearchParams(window.location.search);
              if (r && o.has(this.id)) {
                const e = this.getUrlParamText();
                this.text = e;
              } else this.text = n;
              this.useUrlParams = r;
            }
            getUrlParamText() {
              var e;
              const t = new URLSearchParams(window.location.search);
              return t.has(this.id) &&
                null !== (e = t.get(this.id)) &&
                void 0 !== e
                ? e
                : "";
            }
            updateURLParams() {
              if (this.useUrlParams) {
                const e = new URLSearchParams(window.location.search);
                e.set(this.id, this.text),
                  window.history.replaceState(
                    {},
                    "",
                    "" !== e.toString()
                      ? `${location.pathname}?${e}`
                      : `${location.pathname}`
                  );
              }
            }
            get text() {
              return this.value;
            }
            set text(e) {
              this.value = e;
            }
          }
          class k extends b {
            constructor(e, t, s, n, r, i, o = () => {}) {
              super(e, t, s, [n, n], o), (this.options = r);
              const a = new URLSearchParams(window.location.search),
                l = i && a.has(this.id) ? this.getUrlParamText() : n;
              (this.selected = l), (this.useUrlParams = i);
            }
            getUrlParamText() {
              var e;
              const t = new URLSearchParams(window.location.search);
              return t.has(this.id) &&
                null !== (e = t.get(this.id)) &&
                void 0 !== e
                ? e
                : "";
            }
            updateURLParams() {
              if (this.useUrlParams) {
                const e = new URLSearchParams(window.location.search);
                e.set(this.id, this.selected),
                  window.history.replaceState(
                    {},
                    "",
                    "" !== e.toString()
                      ? `${location.pathname}?${e}`
                      : `${location.pathname}`
                  );
              }
            }
            addOnChangedListener(e) {
              this.onChange = e;
            }
            get options() {
              return this._options;
            }
            set options(e) {
              (this._options = e), this.onChangeEmit(this.selected);
            }
            get selected() {
              return this.value;
            }
            set selected(e) {
              const t = this.options.filter((t) => -1 !== t.indexOf(e));
              t.length && (this.value = t[0]);
            }
          }
          class R extends Event {
            constructor(e) {
              super("afkWarningActivate"), (this.data = e);
            }
          }
          class L extends Event {
            constructor(e) {
              super("afkWarningUpdate"), (this.data = e);
            }
          }
          class x extends Event {
            constructor() {
              super("afkWarningDeactivate");
            }
          }
          class A extends Event {
            constructor() {
              super("afkTimedOut");
            }
          }
          class F extends Event {
            constructor(e) {
              super("videoEncoderAvgQP"), (this.data = e);
            }
          }
          class D extends Event {
            constructor() {
              super("webRtcSdp");
            }
          }
          class O extends Event {
            constructor() {
              super("webRtcAutoConnect");
            }
          }
          class U extends Event {
            constructor() {
              super("webRtcConnecting");
            }
          }
          class I extends Event {
            constructor() {
              super("webRtcConnected");
            }
          }
          class z extends Event {
            constructor() {
              super("webRtcFailed");
            }
          }
          class G extends Event {
            constructor(e) {
              super("webRtcDisconnected"), (this.data = e);
            }
          }
          class B extends Event {
            constructor(e) {
              super("dataChannelOpen"), (this.data = e);
            }
          }
          class _ extends Event {
            constructor(e) {
              super("dataChannelClose"), (this.data = e);
            }
          }
          class W extends Event {
            constructor(e) {
              super("dataChannelError"), (this.data = e);
            }
          }
          class H extends Event {
            constructor() {
              super("videoInitialized");
            }
          }
          class V extends Event {
            constructor() {
              super("streamLoading");
            }
          }
          class N extends Event {
            constructor(e) {
              super("playStreamError"), (this.data = e);
            }
          }
          class K extends Event {
            constructor() {
              super("playStream");
            }
          }
          class Q extends Event {
            constructor(e) {
              super("playStreamRejected"), (this.data = e);
            }
          }
          class $ extends Event {
            constructor(e) {
              super("loadFreezeFrame"), (this.data = e);
            }
          }
          class q extends Event {
            constructor() {
              super("hideFreezeFrame");
            }
          }
          class X extends Event {
            constructor(e) {
              super("statsReceived"), (this.data = e);
            }
          }
          class j extends Event {
            constructor(e) {
              super("streamerListMessage"), (this.data = e);
            }
          }
          class Y extends Event {
            constructor(e) {
              super("latencyTestResult"), (this.data = e);
            }
          }
          class J extends Event {
            constructor(e) {
              super("initialSettings"), (this.data = e);
            }
          }
          class Z extends Event {
            constructor(e) {
              super("settingsChanged"), (this.data = e);
            }
          }
          class ee extends Event {
            constructor() {
              super("xrSessionStarted");
            }
          }
          class te extends Event {
            constructor() {
              super("xrSessionEnded");
            }
          }
          class se extends Event {
            constructor(e) {
              super("xrFrame"), (this.data = e);
            }
          }
          class ne extends EventTarget {
            dispatchEvent(e) {
              return super.dispatchEvent(e);
            }
            addEventListener(e, t) {
              super.addEventListener(e, t);
            }
            removeEventListener(e, t) {
              super.removeEventListener(e, t);
            }
          }
          class re {}
          (re.AutoConnect = "AutoConnect"),
            (re.AutoPlayVideo = "AutoPlayVideo"),
            (re.AFKDetection = "TimeoutIfIdle"),
            (re.BrowserSendOffer = "OfferToReceive"),
            (re.HoveringMouseMode = "HoveringMouse"),
            (re.ForceMonoAudio = "ForceMonoAudio"),
            (re.ForceTURN = "ForceTURN"),
            (re.FakeMouseWithTouches = "FakeMouseWithTouches"),
            (re.IsQualityController = "ControlsQuality"),
            (re.MatchViewportResolution = "MatchViewportRes"),
            (re.PreferSFU = "preferSFU"),
            (re.StartVideoMuted = "StartVideoMuted"),
            (re.SuppressBrowserKeys = "SuppressBrowserKeys"),
            (re.UseMic = "UseMic"),
            (re.KeyboardInput = "KeyboardInput"),
            (re.MouseInput = "MouseInput"),
            (re.TouchInput = "TouchInput"),
            (re.GamepadInput = "GamepadInput"),
            (re.XRControllerInput = "XRControllerInput");
          const ie = (e) =>
            Object.getOwnPropertyNames(re).some((t) => re[t] === e);
          class oe {}
          (oe.AFKTimeoutSecs = "AFKTimeout"),
            (oe.MinQP = "MinQP"),
            (oe.MaxQP = "MaxQP"),
            (oe.WebRTCFPS = "WebRTCFPS"),
            (oe.WebRTCMinBitrate = "WebRTCMinBitrate"),
            (oe.WebRTCMaxBitrate = "WebRTCMaxBitrate");
          const ae = (e) =>
            Object.getOwnPropertyNames(oe).some((t) => oe[t] === e);
          class le {}
          le.SignallingServerUrl = "ss";
          const de = (e) =>
            Object.getOwnPropertyNames(le).some((t) => le[t] === e);
          class ce {}
          (ce.PreferredCodec = "PreferredCodec"),
            (ce.StreamerId = "StreamerId");
          const he = (e) =>
            Object.getOwnPropertyNames(ce).some((t) => ce[t] === e);
          class ge {
            constructor(e = {}) {
              (this.flags = new Map()),
                (this.numericParameters = new Map()),
                (this.textParameters = new Map()),
                (this.optionParameters = new Map());
              const { initialSettings: t, useUrlParams: s } = e;
              (this._useUrlParams = !!s),
                this.populateDefaultSettings(this._useUrlParams),
                t && this.setSettings(t);
            }
            get useUrlParams() {
              return this._useUrlParams;
            }
            populateDefaultSettings(e) {
              this.textParameters.set(
                le.SignallingServerUrl,
                new P(
                  le.SignallingServerUrl,
                  "Signalling url",
                  "Url of the signalling server",
                  ("https:" === location.protocol ? "wss://" : "ws://") +
                    window.location.hostname +
                    ("80" === window.location.port ||
                    "" === window.location.port
                      ? ""
                      : `:${window.location.port}`),
                  e
                )
              ),
                this.optionParameters.set(
                  ce.StreamerId,
                  new k(
                    ce.StreamerId,
                    "Streamer ID",
                    "The ID of the streamer to stream.",
                    "",
                    [],
                    e
                  )
                ),
                this.optionParameters.set(
                  ce.PreferredCodec,
                  new k(
                    ce.PreferredCodec,
                    "Preferred Codec",
                    "The preferred codec to be used during codec negotiation",
                    "H264 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f",
                    (function () {
                      const e = [];
                      if (!RTCRtpReceiver.getCapabilities)
                        return e.push("Only available on Chrome"), e;
                      const t = /(VP\d|H26\d|AV1).*/;
                      return (
                        RTCRtpReceiver.getCapabilities("video").codecs.forEach(
                          (s) => {
                            const n =
                              s.mimeType.split("/")[1] +
                              " " +
                              (s.sdpFmtpLine || "");
                            null !== t.exec(n) && e.push(n);
                          }
                        ),
                        e
                      );
                    })(),
                    e
                  )
                ),
                this.flags.set(
                  re.AutoConnect,
                  new M(
                    re.AutoConnect,
                    "Auto connect to stream",
                    "Whether we should attempt to auto connect to the signalling server or show a click to start prompt.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.AutoPlayVideo,
                  new M(
                    re.AutoPlayVideo,
                    "Auto play video",
                    "When video is ready automatically start playing it as opposed to showing a play button.",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.BrowserSendOffer,
                  new M(
                    re.BrowserSendOffer,
                    "Browser send offer",
                    "Browser will initiate the WebRTC handshake by sending the offer to the streamer",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.UseMic,
                  new M(
                    re.UseMic,
                    "Use microphone",
                    "Make browser request microphone access and open an input audio track.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.StartVideoMuted,
                  new M(
                    re.StartVideoMuted,
                    "Start video muted",
                    "Video will start muted if true.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.SuppressBrowserKeys,
                  new M(
                    re.SuppressBrowserKeys,
                    "Suppress browser keys",
                    "Suppress certain browser keys that we use in UE, for example F5 to show shader complexity instead of refresh the page.",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.PreferSFU,
                  new M(
                    re.PreferSFU,
                    "Prefer SFU",
                    "Try to connect to the SFU instead of P2P.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.IsQualityController,
                  new M(
                    re.IsQualityController,
                    "Is quality controller?",
                    "True if this peer controls stream quality",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.ForceMonoAudio,
                  new M(
                    re.ForceMonoAudio,
                    "Force mono audio",
                    "Force browser to request mono audio in the SDP",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.ForceTURN,
                  new M(
                    re.ForceTURN,
                    "Force TURN",
                    "Only generate TURN/Relayed ICE candidates.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.AFKDetection,
                  new M(
                    re.AFKDetection,
                    "AFK if idle",
                    "Timeout the experience if user is AFK for a period.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.MatchViewportResolution,
                  new M(
                    re.MatchViewportResolution,
                    "Match viewport resolution",
                    "Pixel Streaming will be instructed to dynamically resize the video stream to match the size of the video element.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.HoveringMouseMode,
                  new M(
                    re.HoveringMouseMode,
                    "Control Scheme: Locked Mouse",
                    "Either locked mouse, where the pointer is consumed by the video and locked to it, or hovering mouse, where the mouse is not consumed.",
                    !1,
                    e,
                    (e, t) => {
                      t.label = `Control Scheme: ${
                        e ? "Hovering" : "Locked"
                      } Mouse`;
                    }
                  )
                ),
                this.flags.set(
                  re.FakeMouseWithTouches,
                  new M(
                    re.FakeMouseWithTouches,
                    "Fake mouse with touches",
                    "A single finger touch is converted into a mouse event. This allows a non-touch application to be controlled partially via a touch device.",
                    !1,
                    e
                  )
                ),
                this.flags.set(
                  re.KeyboardInput,
                  new M(
                    re.KeyboardInput,
                    "Keyboard input",
                    "If enabled, send keyboard events to streamer",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.MouseInput,
                  new M(
                    re.MouseInput,
                    "Mouse input",
                    "If enabled, send mouse events to streamer",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.TouchInput,
                  new M(
                    re.TouchInput,
                    "Touch input",
                    "If enabled, send touch events to streamer",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.GamepadInput,
                  new M(
                    re.GamepadInput,
                    "Gamepad input",
                    "If enabled, send gamepad events to streamer",
                    !0,
                    e
                  )
                ),
                this.flags.set(
                  re.XRControllerInput,
                  new M(
                    re.XRControllerInput,
                    "XR controller input",
                    "If enabled, send XR controller events to streamer",
                    !0,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.AFKTimeoutSecs,
                  new w(
                    oe.AFKTimeoutSecs,
                    "AFK timeout",
                    "The time (in seconds) it takes for the application to time out if AFK timeout is enabled.",
                    0,
                    600,
                    120,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.MinQP,
                  new w(
                    oe.MinQP,
                    "Min QP",
                    "The lower bound for the quantization parameter (QP) of the encoder. 0 = Best quality, 51 = worst quality.",
                    0,
                    51,
                    0,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.MaxQP,
                  new w(
                    oe.MaxQP,
                    "Max QP",
                    "The upper bound for the quantization parameter (QP) of the encoder. 0 = Best quality, 51 = worst quality.",
                    0,
                    51,
                    51,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.WebRTCFPS,
                  new w(
                    oe.WebRTCFPS,
                    "Max FPS",
                    "The maximum FPS that WebRTC will try to transmit frames at.",
                    1,
                    999,
                    60,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.WebRTCMinBitrate,
                  new w(
                    oe.WebRTCMinBitrate,
                    "Min Bitrate (kbps)",
                    "The minimum bitrate that WebRTC should use.",
                    0,
                    5e5,
                    0,
                    e
                  )
                ),
                this.numericParameters.set(
                  oe.WebRTCMaxBitrate,
                  new w(
                    oe.WebRTCMaxBitrate,
                    "Max Bitrate (kbps)",
                    "The maximum bitrate that WebRTC should use.",
                    0,
                    5e5,
                    0,
                    e
                  )
                );
            }
            _addOnNumericSettingChangedListener(e, t) {
              this.numericParameters.has(e) &&
                this.numericParameters.get(e).addOnChangedListener(t);
            }
            _addOnOptionSettingChangedListener(e, t) {
              this.optionParameters.has(e) &&
                this.optionParameters.get(e).addOnChangedListener(t);
            }
            getNumericSettingValue(e) {
              if (this.numericParameters.has(e))
                return this.numericParameters.get(e).number;
              throw new Error(
                `There is no numeric setting with the id of ${e}`
              );
            }
            getTextSettingValue(e) {
              if (this.textParameters.has(e))
                return this.textParameters.get(e).value;
              throw new Error(
                `There is no numeric setting with the id of ${e}`
              );
            }
            setNumericSetting(e, t) {
              if (!this.numericParameters.has(e))
                throw new Error(
                  `There is no numeric setting with the id of ${e}`
                );
              this.numericParameters.get(e).number = t;
            }
            _addOnSettingChangedListener(e, t) {
              this.flags.has(e) && (this.flags.get(e).onChange = t);
            }
            _addOnTextSettingChangedListener(e, t) {
              this.textParameters.has(e) &&
                (this.textParameters.get(e).onChange = t);
            }
            getSettingOption(e) {
              return this.optionParameters.get(e);
            }
            isFlagEnabled(e) {
              return this.flags.get(e).flag;
            }
            setFlagEnabled(e, t) {
              this.flags.has(e)
                ? (this.flags.get(e).flag = t)
                : i.Warning(
                    i.GetStackTrace(),
                    `Cannot toggle flag called ${e} - it does not exist in the Config.flags map.`
                  );
            }
            setTextSetting(e, t) {
              this.textParameters.has(e)
                ? (this.textParameters.get(e).text = t)
                : i.Warning(
                    i.GetStackTrace(),
                    `Cannot set text setting called ${e} - it does not exist in the Config.textParameters map.`
                  );
            }
            setOptionSettingOptions(e, t) {
              this.optionParameters.has(e)
                ? (this.optionParameters.get(e).options = t)
                : i.Warning(
                    i.GetStackTrace(),
                    `Cannot set text setting called ${e} - it does not exist in the Config.optionParameters map.`
                  );
            }
            setOptionSettingValue(e, t) {
              this.optionParameters.has(e)
                ? (this.optionParameters.get(e).selected = t)
                : i.Warning(
                    i.GetStackTrace(),
                    `Cannot set text setting called ${e} - it does not exist in the Config.enumParameters map.`
                  );
            }
            setFlagLabel(e, t) {
              this.flags.has(e)
                ? (this.flags.get(e).label = t)
                : i.Warning(
                    i.GetStackTrace(),
                    `Cannot set label for flag called ${e} - it does not exist in the Config.flags map.`
                  );
            }
            setSettings(e) {
              for (const t of Object.keys(e))
                ie(t)
                  ? this.setFlagEnabled(t, e[t])
                  : ae(t)
                  ? this.setNumericSetting(t, e[t])
                  : de(t)
                  ? this.setTextSetting(t, e[t])
                  : he(t) && this.setOptionSettingValue(t, e[t]);
            }
            getSettings() {
              const e = {};
              for (const [t, s] of this.flags.entries()) e[t] = s.flag;
              for (const [t, s] of this.numericParameters.entries())
                e[t] = s.number;
              for (const [t, s] of this.textParameters.entries()) e[t] = s.text;
              for (const [t, s] of this.optionParameters.entries())
                e[t] = s.selected;
              return e;
            }
            getFlags() {
              return Array.from(this.flags.values());
            }
            getTextSettings() {
              return Array.from(this.textParameters.values());
            }
            getNumericSettings() {
              return Array.from(this.numericParameters.values());
            }
            getOptionSettings() {
              return Array.from(this.optionParameters.values());
            }
            _registerOnChangeEvents(e) {
              for (const t of this.flags.keys()) {
                const s = this.flags.get(t);
                s &&
                  (s.onChangeEmit = (t) =>
                    e.dispatchEvent(
                      new Z({ id: s.id, type: "flag", value: t, target: s })
                    ));
              }
              for (const t of this.numericParameters.keys()) {
                const s = this.numericParameters.get(t);
                s &&
                  (s.onChangeEmit = (t) =>
                    e.dispatchEvent(
                      new Z({ id: s.id, type: "number", value: t, target: s })
                    ));
              }
              for (const t of this.textParameters.keys()) {
                const s = this.textParameters.get(t);
                s &&
                  (s.onChangeEmit = (t) =>
                    e.dispatchEvent(
                      new Z({ id: s.id, type: "text", value: t, target: s })
                    ));
              }
              for (const t of this.optionParameters.keys()) {
                const s = this.optionParameters.get(t);
                s &&
                  (s.onChangeEmit = (t) =>
                    e.dispatchEvent(
                      new Z({ id: s.id, type: "option", value: t, target: s })
                    ));
              }
            }
          }
          var ue;
          !(function (e) {
            (e[(e.LockedMouse = 0)] = "LockedMouse"),
              (e[(e.HoveringMouse = 1)] = "HoveringMouse");
          })(ue || (ue = {}));
          class me {
            constructor(e, t, s) {
              (this.closeTimeout = 10),
                (this.active = !1),
                (this.countdownActive = !1),
                (this.warnTimer = void 0),
                (this.countDown = 0),
                (this.countDownTimer = void 0),
                (this.config = e),
                (this.pixelStreaming = t),
                (this.onDismissAfk = s),
                (this.onAFKTimedOutCallback = () => {
                  console.log(
                    "AFK timed out, did you want to override this callback?"
                  );
                });
            }
            onAfkClick() {
              clearInterval(this.countDownTimer),
                (this.active || this.countdownActive) &&
                  (this.startAfkWarningTimer(),
                  this.pixelStreaming.dispatchEvent(new x()));
            }
            startAfkWarningTimer() {
              this.config.getNumericSettingValue(oe.AFKTimeoutSecs) > 0 &&
              this.config.isFlagEnabled(re.AFKDetection)
                ? (this.active = !0)
                : (this.active = !1),
                this.resetAfkWarningTimer();
            }
            stopAfkWarningTimer() {
              (this.active = !1),
                (this.countdownActive = !1),
                clearInterval(this.warnTimer),
                clearInterval(this.countDownTimer);
            }
            pauseAfkWarningTimer() {
              this.active = !1;
            }
            resetAfkWarningTimer() {
              this.active &&
                this.config.isFlagEnabled(re.AFKDetection) &&
                (clearTimeout(this.warnTimer),
                (this.warnTimer = setTimeout(
                  () => this.activateAfkEvent(),
                  1e3 * this.config.getNumericSettingValue(oe.AFKTimeoutSecs)
                )));
            }
            activateAfkEvent() {
              this.pauseAfkWarningTimer(),
                this.pixelStreaming.dispatchEvent(
                  new R({
                    countDown: this.countDown,
                    dismissAfk: this.onDismissAfk,
                  })
                ),
                (this.countDown = this.closeTimeout),
                (this.countdownActive = !0),
                this.pixelStreaming.dispatchEvent(
                  new L({ countDown: this.countDown })
                ),
                this.config.isFlagEnabled(re.HoveringMouseMode) ||
                  (document.exitPointerLock && document.exitPointerLock()),
                (this.countDownTimer = setInterval(() => {
                  this.countDown--,
                    0 == this.countDown
                      ? (this.pixelStreaming.dispatchEvent(new A()),
                        this.onAFKTimedOutCallback(),
                        i.Log(
                          i.GetStackTrace(),
                          "You have been disconnected due to inactivity"
                        ),
                        this.stopAfkWarningTimer())
                      : this.pixelStreaming.dispatchEvent(
                          new L({ countDown: this.countDown })
                        );
                }, 1e3));
            }
          }
          class Se {
            constructor() {
              this.isReceivingFreezeFrame = !1;
            }
            getDataChannelInstance() {
              return this;
            }
            createDataChannel(e, t, s) {
              (this.peerConnection = e),
                (this.label = t),
                (this.datachannelOptions = s),
                null == s &&
                  ((this.datachannelOptions = {}),
                  (this.datachannelOptions.ordered = !0)),
                (this.dataChannel = this.peerConnection.createDataChannel(
                  this.label,
                  this.datachannelOptions
                )),
                this.setupDataChannel();
            }
            setupDataChannel() {
              (this.dataChannel.binaryType = "arraybuffer"),
                (this.dataChannel.onopen = (e) => this.handleOnOpen(e)),
                (this.dataChannel.onclose = (e) => this.handleOnClose(e)),
                (this.dataChannel.onmessage = (e) => this.handleOnMessage(e)),
                (this.dataChannel.onerror = (e) => this.handleOnError(e));
            }
            handleOnOpen(e) {
              var t;
              i.Log(
                i.GetStackTrace(),
                `Data Channel (${this.label}) opened.`,
                7
              ),
                this.onOpen(
                  null === (t = this.dataChannel) || void 0 === t
                    ? void 0
                    : t.label,
                  e
                );
            }
            handleOnClose(e) {
              var t;
              i.Log(
                i.GetStackTrace(),
                `Data Channel (${this.label}) closed.`,
                7
              ),
                this.onClose(
                  null === (t = this.dataChannel) || void 0 === t
                    ? void 0
                    : t.label,
                  e
                );
            }
            handleOnMessage(e) {
              i.Log(
                i.GetStackTrace(),
                `Data Channel (${this.label}) message: ${e}`,
                8
              );
            }
            handleOnError(e) {
              var t;
              i.Log(
                i.GetStackTrace(),
                `Data Channel (${this.label}) error: ${e}`,
                7
              ),
                this.onError(
                  null === (t = this.dataChannel) || void 0 === t
                    ? void 0
                    : t.label,
                  e
                );
            }
            onOpen(e, t) {}
            onClose(e, t) {}
            onError(e, t) {}
          }
          class pe {}
          class ve {}
          class Ce {}
          class fe {}
          class Te {}
          class Ee {}
          class ye {}
          class be {}
          class Me {
            constructor() {
              (this.inboundVideoStats = new ve()),
                (this.inboundAudioStats = new pe()),
                (this.candidatePair = new Te()),
                (this.DataChannelStats = new Ce()),
                (this.outBoundVideoStats = new Ee()),
                (this.sessionStats = new ye()),
                (this.streamStats = new be()),
                (this.codecs = new Map());
            }
            processStats(e) {
              (this.localCandidates = new Array()),
                (this.remoteCandidates = new Array()),
                e.forEach((e) => {
                  switch (e.type) {
                    case "candidate-pair":
                      this.handleCandidatePair(e);
                      break;
                    case "certificate":
                    case "media-source":
                    case "outbound-rtp":
                    case "peer-connection":
                    case "remote-inbound-rtp":
                    case "transport":
                      break;
                    case "codec":
                      this.handleCodec(e);
                      break;
                    case "data-channel":
                      this.handleDataChannel(e);
                      break;
                    case "inbound-rtp":
                      this.handleInBoundRTP(e);
                      break;
                    case "local-candidate":
                      this.handleLocalCandidate(e);
                      break;
                    case "remote-candidate":
                      this.handleRemoteCandidate(e);
                      break;
                    case "remote-outbound-rtp":
                      this.handleRemoteOutBound(e);
                      break;
                    case "track":
                      this.handleTrack(e);
                      break;
                    case "stream":
                      this.handleStream(e);
                      break;
                    default:
                      i.Error(i.GetStackTrace(), "unhandled Stat Type"),
                        i.Log(i.GetStackTrace(), e);
                  }
                });
            }
            handleStream(e) {
              this.streamStats = e;
            }
            handleCandidatePair(e) {
              (this.candidatePair.bytesReceived = e.bytesReceived),
                (this.candidatePair.bytesSent = e.bytesSent),
                (this.candidatePair.localCandidateId = e.localCandidateId),
                (this.candidatePair.remoteCandidateId = e.remoteCandidateId),
                (this.candidatePair.nominated = e.nominated),
                (this.candidatePair.readable = e.readable),
                (this.candidatePair.selected = e.selected),
                (this.candidatePair.writable = e.writable),
                (this.candidatePair.state = e.state),
                (this.candidatePair.currentRoundTripTime =
                  e.currentRoundTripTime);
            }
            handleDataChannel(e) {
              (this.DataChannelStats.bytesReceived = e.bytesReceived),
                (this.DataChannelStats.bytesSent = e.bytesSent),
                (this.DataChannelStats.dataChannelIdentifier =
                  e.dataChannelIdentifier),
                (this.DataChannelStats.id = e.id),
                (this.DataChannelStats.label = e.label),
                (this.DataChannelStats.messagesReceived = e.messagesReceived),
                (this.DataChannelStats.messagesSent = e.messagesSent),
                (this.DataChannelStats.protocol = e.protocol),
                (this.DataChannelStats.state = e.state),
                (this.DataChannelStats.timestamp = e.timestamp);
            }
            handleLocalCandidate(e) {
              const t = new fe();
              (t.label = "local-candidate"),
                (t.address = e.address),
                (t.port = e.port),
                (t.protocol = e.protocol),
                (t.candidateType = e.candidateType),
                (t.id = e.id),
                this.localCandidates.push(t);
            }
            handleRemoteCandidate(e) {
              const t = new fe();
              (t.label = "local-candidate"),
                (t.address = e.address),
                (t.port = e.port),
                (t.protocol = e.protocol),
                (t.id = e.id),
                (t.candidateType = e.candidateType),
                this.remoteCandidates.push(t);
            }
            handleInBoundRTP(e) {
              switch (e.kind) {
                case "video":
                  (this.inboundVideoStats = e),
                    null != this.lastVideoStats &&
                      ((this.inboundVideoStats.bitrate =
                        (8 *
                          (this.inboundVideoStats.bytesReceived -
                            this.lastVideoStats.bytesReceived)) /
                        (this.inboundVideoStats.timestamp -
                          this.lastVideoStats.timestamp)),
                      (this.inboundVideoStats.bitrate = Math.floor(
                        this.inboundVideoStats.bitrate
                      ))),
                    (this.lastVideoStats = Object.assign(
                      {},
                      this.inboundVideoStats
                    ));
                  break;
                case "audio":
                  (this.inboundAudioStats = e),
                    null != this.lastAudioStats &&
                      ((this.inboundAudioStats.bitrate =
                        (8 *
                          (this.inboundAudioStats.bytesReceived -
                            this.lastAudioStats.bytesReceived)) /
                        (this.inboundAudioStats.timestamp -
                          this.lastAudioStats.timestamp)),
                      (this.inboundAudioStats.bitrate = Math.floor(
                        this.inboundAudioStats.bitrate
                      ))),
                    (this.lastAudioStats = Object.assign(
                      {},
                      this.inboundAudioStats
                    ));
                  break;
                default:
                  i.Log(i.GetStackTrace(), "Kind is not handled");
              }
            }
            handleRemoteOutBound(e) {
              "video" === e.kind &&
                ((this.outBoundVideoStats.bytesSent = e.bytesSent),
                (this.outBoundVideoStats.id = e.id),
                (this.outBoundVideoStats.localId = e.localId),
                (this.outBoundVideoStats.packetsSent = e.packetsSent),
                (this.outBoundVideoStats.remoteTimestamp = e.remoteTimestamp),
                (this.outBoundVideoStats.timestamp = e.timestamp));
            }
            handleTrack(e) {
              "track" !== e.type ||
                ("video_label" !== e.trackIdentifier && "video" !== e.kind) ||
                ((this.inboundVideoStats.framesDropped = e.framesDropped),
                (this.inboundVideoStats.framesReceived = e.framesReceived),
                (this.inboundVideoStats.frameHeight = e.frameHeight),
                (this.inboundVideoStats.frameWidth = e.frameWidth));
            }
            handleCodec(e) {
              const t = e.id,
                s = `${e.mimeType.replace("video/", "").replace("audio/", "")}${
                  e.sdpFmtpLine ? ` ${e.sdpFmtpLine}` : ""
                }`;
              this.codecs.set(t, s);
            }
            handleSessionStatistics(e, t, s) {
              const n = Date.now() - e;
              this.sessionStats.runTime = new Date(n)
                .toISOString()
                .substr(11, 8)
                .toString();
              const r = null === t ? "Not sent yet" : t ? "true" : "false";
              (this.sessionStats.controlsStreamInput = r),
                (this.sessionStats.videoEncoderAvgQP = s);
            }
            isNumber(e) {
              return "number" == typeof e && isFinite(e);
            }
          }
          const we =
            ((Pe = {
              parseRtpParameters: () =>
                sdp__WEBPACK_IMPORTED_MODULE_0__.parseRtpParameters,
              splitSections: () =>
                sdp__WEBPACK_IMPORTED_MODULE_0__.splitSections,
            }),
            (ke = {}),
            n.d(ke, Pe),
            ke);
          var Pe,
            ke,
            Re,
            Le,
            xe = function (e, t, s, n) {
              return new (s || (s = Promise))(function (r, i) {
                function o(e) {
                  try {
                    l(n.next(e));
                  } catch (e) {
                    i(e);
                  }
                }
                function a(e) {
                  try {
                    l(n.throw(e));
                  } catch (e) {
                    i(e);
                  }
                }
                function l(e) {
                  var t;
                  e.done
                    ? r(e.value)
                    : ((t = e.value),
                      t instanceof s
                        ? t
                        : new s(function (e) {
                            e(t);
                          })).then(o, a);
                }
                l((n = n.apply(e, t || [])).next());
              });
            };
          class Ae {
            constructor(e, t, s) {
              (this.config = t), this.createPeerConnection(e, s);
            }
            createPeerConnection(e, t) {
              this.config.isFlagEnabled(re.ForceTURN) &&
                ((e.iceTransportPolicy = "relay"),
                i.Log(
                  i.GetStackTrace(),
                  "Forcing TURN usage by setting ICE Transport Policy in peer connection config."
                )),
                (this.peerConnection = new RTCPeerConnection(e)),
                (this.peerConnection.onsignalingstatechange = (e) =>
                  this.handleSignalStateChange(e)),
                (this.peerConnection.oniceconnectionstatechange = (e) =>
                  this.handleIceConnectionStateChange(e)),
                (this.peerConnection.onicegatheringstatechange = (e) =>
                  this.handleIceGatheringStateChange(e)),
                (this.peerConnection.ontrack = (e) => this.handleOnTrack(e)),
                (this.peerConnection.onicecandidate = (e) =>
                  this.handleIceCandidate(e)),
                (this.peerConnection.ondatachannel = (e) =>
                  this.handleDataChannel(e)),
                (this.aggregatedStats = new Me()),
                (this.preferredCodec = t),
                (this.updateCodecSelection = !0);
            }
            createOffer(e, t) {
              return xe(this, void 0, void 0, function* () {
                i.Log(i.GetStackTrace(), "Create Offer", 6);
                const s =
                    "localhost" === location.hostname ||
                    "127.0.0.1" === location.hostname,
                  n = "https:" === location.protocol;
                let r = t.isFlagEnabled(re.UseMic);
                !r ||
                  s ||
                  n ||
                  ((r = !1),
                  i.Error(
                    i.GetStackTrace(),
                    "Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access."
                  ),
                  i.Error(
                    i.GetStackTrace(),
                    "For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'"
                  )),
                  this.setupTransceiversAsync(r).finally(() => {
                    this.peerConnection
                      .createOffer(e)
                      .then((e) => {
                        this.showTextOverlayConnecting(),
                          (e.sdp = this.mungeSDP(e.sdp, r)),
                          this.peerConnection.setLocalDescription(e),
                          this.onSendWebRTCOffer(e);
                      })
                      .catch(() => {
                        this.showTextOverlaySetupFailure();
                      });
                  });
              });
            }
            receiveOffer(e, t) {
              return xe(this, void 0, void 0, function* () {
                i.Log(i.GetStackTrace(), "Receive Offer", 6),
                  this.peerConnection.setRemoteDescription(e).then(() => {
                    const e =
                        "localhost" === location.hostname ||
                        "127.0.0.1" === location.hostname,
                      s = "https:" === location.protocol;
                    let n = t.isFlagEnabled(re.UseMic);
                    !n ||
                      e ||
                      s ||
                      ((n = !1),
                      i.Error(
                        i.GetStackTrace(),
                        "Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access."
                      ),
                      i.Error(
                        i.GetStackTrace(),
                        "For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'"
                      )),
                      this.setupTransceiversAsync(n).finally(() => {
                        this.peerConnection
                          .createAnswer()
                          .then(
                            (e) => (
                              (e.sdp = this.mungeSDP(e.sdp, n)),
                              this.peerConnection.setLocalDescription(e)
                            )
                          )
                          .then(() => {
                            this.onSendWebRTCAnswer(
                              this.peerConnection.currentLocalDescription
                            );
                          })
                          .catch(() => {
                            i.Error(i.GetStackTrace(), "createAnswer() failed");
                          });
                      });
                  }),
                  this.config.setOptionSettingOptions(
                    ce.PreferredCodec,
                    this.parseAvailableCodecs(e).filter((e) =>
                      this.config
                        .getSettingOption(ce.PreferredCodec)
                        .options.includes(e)
                    )
                  );
              });
            }
            receiveAnswer(e) {
              this.peerConnection.setRemoteDescription(e),
                this.config.setOptionSettingOptions(
                  ce.PreferredCodec,
                  this.parseAvailableCodecs(e).filter((e) =>
                    this.config
                      .getSettingOption(ce.PreferredCodec)
                      .options.includes(e)
                  )
                );
            }
            generateStats() {
              this.peerConnection.getStats(null).then((e) => {
                this.aggregatedStats.processStats(e),
                  this.onVideoStats(this.aggregatedStats),
                  this.updateCodecSelection &&
                    this.config.setOptionSettingValue(
                      ce.PreferredCodec,
                      this.aggregatedStats.codecs.get(
                        this.aggregatedStats.inboundVideoStats.codecId
                      )
                    );
              });
            }
            close() {
              this.peerConnection &&
                (this.peerConnection.close(), (this.peerConnection = null));
            }
            mungeSDP(e, t) {
              const s = e;
              s.replace(
                /(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm,
                "$1;x-google-start-bitrate=10000;x-google-max-bitrate=100000\r\n"
              );
              let n = "";
              return (
                (n += "maxaveragebitrate=510000;"),
                t && (n += "sprop-maxcapturerate=48000;"),
                (n += this.config.isFlagEnabled(re.ForceMonoAudio)
                  ? "stereo=0;"
                  : "stereo=1;"),
                (n += "useinbandfec=1"),
                s.replace("useinbandfec=1", n),
                s
              );
            }
            handleOnIce(e) {
              i.Log(i.GetStackTrace(), "peerconnection handleOnIce", 6),
                this.config.isFlagEnabled(re.ForceTURN) &&
                e.candidate.indexOf("relay") < 0
                  ? i.Info(
                      i.GetStackTrace(),
                      `Dropping candidate because it was not TURN relay. | Type= ${e.type} | Protocol= ${e.protocol} | Address=${e.address} | Port=${e.port} |`,
                      6
                    )
                  : this.peerConnection.addIceCandidate(e);
            }
            handleSignalStateChange(e) {
              i.Log(i.GetStackTrace(), "signaling state change: " + e, 6);
            }
            handleIceConnectionStateChange(e) {
              i.Log(i.GetStackTrace(), "ice connection state change: " + e, 6),
                this.onIceConnectionStateChange(e);
            }
            handleIceGatheringStateChange(e) {
              i.Log(
                i.GetStackTrace(),
                "ice gathering state change: " + JSON.stringify(e),
                6
              );
            }
            handleOnTrack(e) {
              this.onTrack(e);
            }
            handleIceCandidate(e) {
              this.onPeerIceCandidate(e);
            }
            handleDataChannel(e) {
              this.onDataChannel(e);
            }
            onTrack(e) {}
            onIceConnectionStateChange(e) {}
            onPeerIceCandidate(e) {}
            onDataChannel(e) {}
            setupTransceiversAsync(e) {
              return xe(this, void 0, void 0, function* () {
                const t = this.peerConnection.getTransceivers().length > 0;
                if (
                  (this.peerConnection.addTransceiver("video", {
                    direction: "recvonly",
                  }),
                  RTCRtpReceiver.getCapabilities && "" != this.preferredCodec)
                )
                  for (const e of this.peerConnection.getTransceivers())
                    if (
                      e &&
                      e.receiver &&
                      e.receiver.track &&
                      "video" === e.receiver.track.kind
                    ) {
                      const t = this.preferredCodec.split(" "),
                        s = [
                          {
                            mimeType: "video/" + t[0],
                            clockRate: 9e4,
                            sdpFmtpLine: t[1] ? t[1] : "",
                          },
                        ];
                      this.config
                        .getSettingOption(ce.PreferredCodec)
                        .options.filter((e) => e != this.preferredCodec)
                        .forEach((e) => {
                          const t = e.split(" ");
                          s.push({
                            mimeType: "video/" + t[0],
                            clockRate: 9e4,
                            sdpFmtpLine: t[1] ? t[1] : "",
                          });
                        });
                      for (const e of s)
                        "" === e.sdpFmtpLine && delete e.sdpFmtpLine;
                      e.setCodecPreferences(s);
                    }
                if (e) {
                  const s = {
                      video: !1,
                      audio: !!e && {
                        autoGainControl: !1,
                        channelCount: 1,
                        echoCancellation: !1,
                        latency: 0,
                        noiseSuppression: !1,
                        sampleRate: 48e3,
                        sampleSize: 16,
                        volume: 1,
                      },
                    },
                    n = yield navigator.mediaDevices.getUserMedia(s);
                  if (n)
                    if (t) {
                      for (const e of this.peerConnection.getTransceivers())
                        if (
                          e &&
                          e.receiver &&
                          e.receiver.track &&
                          "audio" === e.receiver.track.kind
                        )
                          for (const t of n.getTracks())
                            t.kind &&
                              "audio" == t.kind &&
                              (e.sender.replaceTrack(t),
                              (e.direction = "sendrecv"));
                    } else
                      for (const e of n.getTracks())
                        e.kind &&
                          "audio" == e.kind &&
                          this.peerConnection.addTransceiver(e, {
                            direction: "sendrecv",
                          });
                  else
                    this.peerConnection.addTransceiver("audio", {
                      direction: "recvonly",
                    });
                } else this.peerConnection.addTransceiver("audio", { direction: "recvonly" });
              });
            }
            onVideoStats(e) {}
            onSendWebRTCOffer(e) {}
            onSendWebRTCAnswer(e) {}
            showTextOverlayConnecting() {}
            showTextOverlaySetupFailure() {}
            parseAvailableCodecs(e) {
              if (!RTCRtpReceiver.getCapabilities)
                return ["Only available on Chrome"];
              const t = [],
                s = (0, we.splitSections)(e.sdp);
              return (
                s.shift(),
                s.forEach((e) => {
                  const { codecs: s } = (0, we.parseRtpParameters)(e),
                    n = /(VP\d|H26\d|AV1).*/;
                  s.forEach((e) => {
                    const s =
                      e.name +
                      " " +
                      Object.keys(e.parameters || {})
                        .map((t) => t + "=" + e.parameters[t])
                        .join(";");
                    if (null !== n.exec(s)) {
                      "VP9" == e.name && (e.parameters = { "profile-id": "0" });
                      const s =
                        e.name +
                        " " +
                        Object.keys(e.parameters || {})
                          .map((t) => t + "=" + e.parameters[t])
                          .join(";");
                      t.push(s);
                    }
                  });
                }),
                t
              );
            }
          }
          class Fe {
            constructor() {
              (this.PixelStreamingSettings = new De()),
                (this.EncoderSettings = new Oe()),
                (this.WebRTCSettings = new Ue());
            }
            ueCompatible() {
              null != this.WebRTCSettings.MaxFPS &&
                (this.WebRTCSettings.FPS = this.WebRTCSettings.MaxFPS);
            }
          }
          class De {}
          class Oe {}
          class Ue {}
          class Ie {
            constructor() {
              (this.ReceiptTimeMs = null),
                (this.TransmissionTimeMs = null),
                (this.PreCaptureTimeMs = null),
                (this.PostCaptureTimeMs = null),
                (this.PreEncodeTimeMs = null),
                (this.PostEncodeTimeMs = null),
                (this.EncodeMs = null),
                (this.CaptureToSendMs = null),
                (this.testStartTimeMs = 0),
                (this.browserReceiptTimeMs = 0),
                (this.latencyExcludingDecode = 0),
                (this.testDuration = 0),
                (this.networkLatency = 0),
                (this.browserSendLatency = 0),
                (this.frameDisplayDeltaTimeMs = 0),
                (this.endToEndLatency = 0),
                (this.encodeLatency = 0);
            }
            setFrameDisplayDeltaTime(e) {
              0 == this.frameDisplayDeltaTimeMs &&
                (this.frameDisplayDeltaTimeMs = Math.round(e));
            }
            processFields() {
              null != this.EncodeMs ||
                (null == this.PreEncodeTimeMs &&
                  null == this.PostEncodeTimeMs) ||
                (i.Log(
                  i.GetStackTrace(),
                  `Setting Encode Ms \n ${this.PostEncodeTimeMs} \n ${this.PreEncodeTimeMs}`,
                  6
                ),
                (this.EncodeMs = this.PostEncodeTimeMs - this.PreEncodeTimeMs)),
                null != this.CaptureToSendMs ||
                  (null == this.PreCaptureTimeMs &&
                    null == this.PostCaptureTimeMs) ||
                  (i.Log(
                    i.GetStackTrace(),
                    `Setting CaptureToSendMs Ms \n ${this.PostCaptureTimeMs} \n ${this.PreCaptureTimeMs}`,
                    6
                  ),
                  (this.CaptureToSendMs =
                    this.PostCaptureTimeMs - this.PreCaptureTimeMs));
            }
          }
          class ze {
            static setExtensionFromBytes(e, t) {
              t.receiving ||
                ((t.mimetype = ""),
                (t.extension = ""),
                (t.receiving = !0),
                (t.valid = !1),
                (t.size = 0),
                (t.data = []),
                (t.timestampStart = new Date().getTime()),
                i.Log(i.GetStackTrace(), "Received first chunk of file", 6));
              const s = new TextDecoder("utf-16").decode(e.slice(1));
              i.Log(i.GetStackTrace(), s, 6), (t.extension = s);
            }
            static setMimeTypeFromBytes(e, t) {
              t.receiving ||
                ((t.mimetype = ""),
                (t.extension = ""),
                (t.receiving = !0),
                (t.valid = !1),
                (t.size = 0),
                (t.data = []),
                (t.timestampStart = new Date().getTime()),
                i.Log(i.GetStackTrace(), "Received first chunk of file", 6));
              const s = new TextDecoder("utf-16").decode(e.slice(1));
              i.Log(i.GetStackTrace(), s, 6), (t.mimetype = s);
            }
            static setContentsFromBytes(e, t) {
              if (!t.receiving) return;
              t.size = Math.ceil(
                new DataView(e.slice(1, 5).buffer).getInt32(0, !0) / 16379
              );
              const s = e.slice(5);
              if (
                (t.data.push(s),
                i.Log(
                  i.GetStackTrace(),
                  `Received file chunk: ${t.data.length}/${t.size}`,
                  6
                ),
                t.data.length === t.size)
              ) {
                (t.receiving = !1),
                  (t.valid = !0),
                  i.Log(i.GetStackTrace(), "Received complete file", 6);
                const e = new Date().getTime() - t.timestampStart,
                  s = Math.round((16 * t.size * 1024) / e);
                i.Log(
                  i.GetStackTrace(),
                  `Average transfer bitrate: ${s}kb/s over ${e / 1e3} seconds`,
                  6
                );
                const n = new Blob(t.data, { type: t.mimetype }),
                  r = document.createElement("a");
                r.setAttribute("href", URL.createObjectURL(n)),
                  r.setAttribute("download", `transfer.${t.extension}`),
                  document.body.append(r),
                  r.remove();
              } else
                t.data.length > t.size &&
                  ((t.receiving = !1),
                  i.Error(
                    i.GetStackTrace(),
                    `Received bigger file than advertised: ${t.data.length}/${t.size}`
                  ));
            }
          }
          class Ge {
            constructor() {
              (this.mimetype = ""),
                (this.extension = ""),
                (this.receiving = !1),
                (this.size = 0),
                (this.data = []),
                (this.valid = !1);
            }
          }
          class Be {}
          (Be.mainButton = 0),
            (Be.auxiliaryButton = 1),
            (Be.secondaryButton = 2),
            (Be.fourthButton = 3),
            (Be.fifthButton = 4);
          class _e {}
          (_e.primaryButton = 1),
            (_e.secondaryButton = 2),
            (_e.auxiliaryButton = 4),
            (_e.fourthButton = 8),
            (_e.fifthButton = 16);
          class We {
            constructor() {
              this.unregisterCallbacks = [];
            }
            addUnregisterCallback(e) {
              this.unregisterCallbacks.push(e);
            }
            unregisterAll() {
              for (const e of this.unregisterCallbacks) e();
              this.unregisterCallbacks = [];
            }
          }
          class He {
            constructor(e, t, s) {
              (this.touchEventListenerTracker = new We()),
                (this.toStreamerMessagesProvider = e),
                (this.videoElementProvider = t),
                (this.coordinateConverter = s);
              const n = (e) => this.onTouchStart(e),
                r = (e) => this.onTouchEnd(e),
                i = (e) => this.onTouchMove(e);
              document.addEventListener("touchstart", n, { passive: !1 }),
                document.addEventListener("touchend", r, { passive: !1 }),
                document.addEventListener("touchmove", i, { passive: !1 }),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("touchstart", n)
                ),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("touchend", r)
                ),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("touchmove", i)
                );
            }
            unregisterTouchEvents() {
              this.touchEventListenerTracker.unregisterAll();
            }
            setVideoElementParentClientRect(e) {
              this.videoElementParentClientRect = e;
            }
            onTouchStart(e) {
              if (this.videoElementProvider.isVideoReady()) {
                if (null == this.fakeTouchFinger) {
                  const t = e.changedTouches[0];
                  this.fakeTouchFinger = new Ve(
                    t.identifier,
                    t.clientX - this.videoElementParentClientRect.left,
                    t.clientY - this.videoElementParentClientRect.top
                  );
                  const s = this.videoElementProvider.getVideoParentElement(),
                    n = new MouseEvent("mouseenter", t);
                  s.dispatchEvent(n);
                  const r =
                    this.coordinateConverter.normalizeAndQuantizeUnsigned(
                      this.fakeTouchFinger.x,
                      this.fakeTouchFinger.y
                    );
                  this.toStreamerMessagesProvider.toStreamerHandlers.get(
                    "MouseDown"
                  )([Be.mainButton, r.x, r.y]);
                }
                e.preventDefault();
              }
            }
            onTouchEnd(e) {
              if (!this.videoElementProvider.isVideoReady()) return;
              const t = this.videoElementProvider.getVideoParentElement(),
                s = this.toStreamerMessagesProvider.toStreamerHandlers;
              for (let n = 0; n < e.changedTouches.length; n++) {
                const r = e.changedTouches[n];
                if (r.identifier === this.fakeTouchFinger.id) {
                  const e = r.clientX - this.videoElementParentClientRect.left,
                    n = r.clientY - this.videoElementParentClientRect.top,
                    i = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                      e,
                      n
                    );
                  s.get("MouseUp")([Be.mainButton, i.x, i.y]);
                  const o = new MouseEvent("mouseleave", r);
                  t.dispatchEvent(o), (this.fakeTouchFinger = null);
                  break;
                }
              }
              e.preventDefault();
            }
            onTouchMove(e) {
              if (!this.videoElementProvider.isVideoReady()) return;
              const t = this.toStreamerMessagesProvider.toStreamerHandlers;
              for (let s = 0; s < e.touches.length; s++) {
                const n = e.touches[s];
                if (n.identifier === this.fakeTouchFinger.id) {
                  const e = n.clientX - this.videoElementParentClientRect.left,
                    s = n.clientY - this.videoElementParentClientRect.top,
                    r = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                      e,
                      s
                    ),
                    i = this.coordinateConverter.normalizeAndQuantizeSigned(
                      e - this.fakeTouchFinger.x,
                      s - this.fakeTouchFinger.y
                    );
                  t.get("MouseMove")([r.x, r.y, i.x, i.y]),
                    (this.fakeTouchFinger.x = e),
                    (this.fakeTouchFinger.y = s);
                  break;
                }
              }
              e.preventDefault();
            }
          }
          class Ve {
            constructor(e, t, s) {
              (this.id = e), (this.x = t), (this.y = s);
            }
          }
          class Ne {}
          (Ne.backSpace = 8),
            (Ne.shift = 16),
            (Ne.control = 17),
            (Ne.alt = 18),
            (Ne.rightShift = 253),
            (Ne.rightControl = 254),
            (Ne.rightAlt = 255);
          class Ke {
            constructor(e, t, s) {
              (this.keyboardEventListenerTracker = new We()),
                (this.CodeToKeyCode = {
                  Escape: 27,
                  Digit0: 48,
                  Digit1: 49,
                  Digit2: 50,
                  Digit3: 51,
                  Digit4: 52,
                  Digit5: 53,
                  Digit6: 54,
                  Digit7: 55,
                  Digit8: 56,
                  Digit9: 57,
                  Minus: 173,
                  Equal: 187,
                  Backspace: 8,
                  Tab: 9,
                  KeyQ: 81,
                  KeyW: 87,
                  KeyE: 69,
                  KeyR: 82,
                  KeyT: 84,
                  KeyY: 89,
                  KeyU: 85,
                  KeyI: 73,
                  KeyO: 79,
                  KeyP: 80,
                  BracketLeft: 219,
                  BracketRight: 221,
                  Enter: 13,
                  ControlLeft: 17,
                  KeyA: 65,
                  KeyS: 83,
                  KeyD: 68,
                  KeyF: 70,
                  KeyG: 71,
                  KeyH: 72,
                  KeyJ: 74,
                  KeyK: 75,
                  KeyL: 76,
                  Semicolon: 186,
                  Quote: 222,
                  Backquote: 192,
                  ShiftLeft: 16,
                  Backslash: 220,
                  KeyZ: 90,
                  KeyX: 88,
                  KeyC: 67,
                  KeyV: 86,
                  KeyB: 66,
                  KeyN: 78,
                  KeyM: 77,
                  Comma: 188,
                  Period: 190,
                  Slash: 191,
                  ShiftRight: 253,
                  AltLeft: 18,
                  Space: 32,
                  CapsLock: 20,
                  F1: 112,
                  F2: 113,
                  F3: 114,
                  F4: 115,
                  F5: 116,
                  F6: 117,
                  F7: 118,
                  F8: 119,
                  F9: 120,
                  F10: 121,
                  F11: 122,
                  F12: 123,
                  Pause: 19,
                  ScrollLock: 145,
                  NumpadDivide: 111,
                  NumpadMultiply: 106,
                  NumpadSubtract: 109,
                  NumpadAdd: 107,
                  NumpadDecimal: 110,
                  Numpad9: 105,
                  Numpad8: 104,
                  Numpad7: 103,
                  Numpad6: 102,
                  Numpad5: 101,
                  Numpad4: 100,
                  Numpad3: 99,
                  Numpad2: 98,
                  Numpad1: 97,
                  Numpad0: 96,
                  NumLock: 144,
                  ControlRight: 254,
                  AltRight: 255,
                  Home: 36,
                  End: 35,
                  ArrowUp: 38,
                  ArrowLeft: 37,
                  ArrowRight: 39,
                  ArrowDown: 40,
                  PageUp: 33,
                  PageDown: 34,
                  Insert: 45,
                  Delete: 46,
                  ContextMenu: 93,
                }),
                (this.toStreamerMessagesProvider = e),
                (this.config = t),
                (this.activeKeysProvider = s);
            }
            registerKeyBoardEvents() {
              const e = (e) => this.handleOnKeyDown(e),
                t = (e) => this.handleOnKeyUp(e),
                s = (e) => this.handleOnKeyPress(e);
              document.addEventListener("keydown", e),
                document.addEventListener("keyup", t),
                document.addEventListener("keypress", s),
                this.keyboardEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("keydown", e)
                ),
                this.keyboardEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("keyup", t)
                ),
                this.keyboardEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("keypress", s)
                );
            }
            unregisterKeyBoardEvents() {
              this.keyboardEventListenerTracker.unregisterAll();
            }
            handleOnKeyDown(e) {
              const t = this.getKeycode(e);
              t &&
                (i.Log(
                  i.GetStackTrace(),
                  `key down ${t}, repeat = ${e.repeat}`,
                  6
                ),
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "KeyDown"
                )([this.getKeycode(e), e.repeat ? 1 : 0]),
                this.activeKeysProvider.getActiveKeys().push(t),
                t === Ne.backSpace &&
                  document.dispatchEvent(
                    new KeyboardEvent("keypress", { charCode: Ne.backSpace })
                  ),
                this.config.isFlagEnabled(re.SuppressBrowserKeys) &&
                  this.isKeyCodeBrowserKey(t) &&
                  e.preventDefault());
            }
            handleOnKeyUp(e) {
              const t = this.getKeycode(e);
              t &&
                (i.Log(i.GetStackTrace(), `key up ${t}`, 6),
                this.toStreamerMessagesProvider.toStreamerHandlers.get("KeyUp")(
                  [t, e.repeat ? 1 : 0]
                ),
                this.config.isFlagEnabled(re.SuppressBrowserKeys) &&
                  this.isKeyCodeBrowserKey(t) &&
                  e.preventDefault());
            }
            handleOnKeyPress(e) {
              if (!("charCode" in e))
                return void i.Warning(
                  i.GetStackTrace(),
                  "KeyboardEvent.charCode is deprecated in this browser, cannot send key press."
                );
              const t = e.charCode;
              i.Log(i.GetStackTrace(), `key press ${t}`, 6),
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "KeyPress"
                )([t]);
            }
            getKeycode(e) {
              if (!("keyCode" in e)) {
                const t = e;
                return t.code in this.CodeToKeyCode
                  ? this.CodeToKeyCode[t.code]
                  : (i.Warning(
                      i.GetStackTrace(),
                      `Keyboard code of ${t.code} is not supported in our mapping, ignoring this key.`
                    ),
                    null);
              }
              return e.keyCode === Ne.shift && "ShiftRight" === e.code
                ? Ne.rightShift
                : e.keyCode === Ne.control && "ControlRight" === e.code
                ? Ne.rightControl
                : e.keyCode === Ne.alt && "AltRight" === e.code
                ? Ne.rightAlt
                : e.keyCode;
            }
            isKeyCodeBrowserKey(e) {
              return (e >= 112 && e <= 123) || 9 === e;
            }
          }
          class Qe {
            constructor(e, t, s) {
              (this.x = 0),
                (this.y = 0),
                (this.updateMouseMovePositionEvent = (e) => {
                  this.updateMouseMovePosition(e);
                }),
                (this.mouseEventListenerTracker = new We()),
                (this.videoElementProvider = e),
                (this.mouseController = t),
                (this.activeKeysProvider = s);
              const n = this.videoElementProvider.getVideoParentElement();
              (this.x = n.getBoundingClientRect().width / 2),
                (this.y = n.getBoundingClientRect().height / 2),
                (this.coord =
                  this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                    this.x,
                    this.y
                  ));
            }
            unregisterMouseEvents() {
              this.mouseEventListenerTracker.unregisterAll();
            }
            lockStateChange() {
              const e = this.videoElementProvider.getVideoParentElement(),
                t =
                  this.mouseController.toStreamerMessagesProvider
                    .toStreamerHandlers;
              if (
                document.pointerLockElement === e ||
                document.mozPointerLockElement === e
              )
                i.Log(i.GetStackTrace(), "Pointer locked", 6),
                  document.addEventListener(
                    "mousemove",
                    this.updateMouseMovePositionEvent,
                    !1
                  ),
                  this.mouseEventListenerTracker.addUnregisterCallback(() =>
                    document.removeEventListener(
                      "mousemove",
                      this.updateMouseMovePositionEvent,
                      !1
                    )
                  );
              else {
                i.Log(
                  i.GetStackTrace(),
                  "The pointer lock status is now unlocked",
                  6
                ),
                  document.removeEventListener(
                    "mousemove",
                    this.updateMouseMovePositionEvent,
                    !1
                  );
                let e = this.activeKeysProvider.getActiveKeys();
                const s = new Set(e),
                  n = [];
                s.forEach((e) => {
                  n[e];
                }),
                  n.forEach((e) => {
                    t.get("KeyUp")([e]);
                  }),
                  (e = []);
              }
            }
            updateMouseMovePosition(e) {
              if (!this.videoElementProvider.isVideoReady()) return;
              const t =
                  this.mouseController.toStreamerMessagesProvider
                    .toStreamerHandlers,
                s =
                  this.videoElementProvider.getVideoParentElement().clientWidth,
                n =
                  this.videoElementProvider.getVideoParentElement()
                    .clientHeight;
              (this.x += e.movementX),
                (this.y += e.movementY),
                this.x > s && (this.x -= s),
                this.y > n && (this.y -= n),
                this.x < 0 && (this.x = s + this.x),
                this.y < 0 && (this.y = n - this.y),
                (this.coord =
                  this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                    this.x,
                    this.y
                  ));
              const r =
                this.mouseController.coordinateConverter.normalizeAndQuantizeSigned(
                  e.movementX,
                  e.movementY
                );
              t.get("MouseMove")([this.coord.x, this.coord.y, r.x, r.y]);
            }
            handleMouseDown(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseDown"
                )([e.button, this.coord.x, this.coord.y]);
            }
            handleMouseUp(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseUp"
                )([e.button, this.coord.x, this.coord.y]);
            }
            handleMouseWheel(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseWheel"
                )([e.wheelDelta, this.coord.x, this.coord.y]);
            }
            handleMouseDouble(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseDouble"
                )([e.button, this.coord.x, this.coord.y]);
            }
            handlePressMouseButtons(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.pressMouseButtons(
                  e.buttons,
                  this.x,
                  this.y
                );
            }
            handleReleaseMouseButtons(e) {
              this.videoElementProvider.isVideoReady() &&
                this.mouseController.releaseMouseButtons(
                  e.buttons,
                  this.x,
                  this.y
                );
            }
          }
          class $e {
            constructor(e) {
              this.mouseController = e;
            }
            unregisterMouseEvents() {}
            updateMouseMovePosition(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              i.Log(i.GetStackTrace(), "MouseMove", 6);
              const t =
                  this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                    e.offsetX,
                    e.offsetY
                  ),
                s =
                  this.mouseController.coordinateConverter.normalizeAndQuantizeSigned(
                    e.movementX,
                    e.movementY
                  );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseMove"
              )([t.x, t.y, s.x, s.y]),
                e.preventDefault();
            }
            handleMouseDown(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              i.Log(i.GetStackTrace(), "onMouse Down", 6);
              const t =
                this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                  e.offsetX,
                  e.offsetY
                );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseDown"
              )([e.button, t.x, t.y]),
                e.preventDefault();
            }
            handleMouseUp(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              const t =
                this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                  e.offsetX,
                  e.offsetY
                );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseUp"
              )([e.button, t.x, t.y]),
                e.preventDefault();
            }
            handleContextMenu(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              const t =
                this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                  e.offsetX,
                  e.offsetY
                );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseUp"
              )([e.button, t.x, t.y]),
                e.preventDefault();
            }
            handleMouseWheel(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              const t =
                this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                  e.offsetX,
                  e.offsetY
                );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseWheel"
              )([e.wheelDelta, t.x, t.y]),
                e.preventDefault();
            }
            handleMouseDouble(e) {
              if (!this.mouseController.videoElementProvider.isVideoReady())
                return;
              const t =
                this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(
                  e.offsetX,
                  e.offsetY
                );
              this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get(
                "MouseDouble"
              )([e.button, t.x, t.y]);
            }
            handlePressMouseButtons(e) {
              this.mouseController.videoElementProvider.isVideoReady() &&
                this.mouseController.pressMouseButtons(
                  e.buttons,
                  e.offsetX,
                  e.offsetY
                );
            }
            handleReleaseMouseButtons(e) {
              this.mouseController.videoElementProvider.isVideoReady() &&
                this.mouseController.releaseMouseButtons(
                  e.buttons,
                  e.offsetX,
                  e.offsetY
                );
            }
          }
          class qe {
            constructor(e, t, s, n) {
              (this.mouseEventListenerTracker = new We()),
                (this.toStreamerMessagesProvider = e),
                (this.coordinateConverter = s),
                (this.videoElementProvider = t),
                (this.activeKeysProvider = n),
                this.registerMouseEnterAndLeaveEvents();
            }
            unregisterMouseEvents() {
              this.mouseEventListenerTracker.unregisterAll();
            }
            registerLockedMouseEvents(e) {
              const t = this.videoElementProvider.getVideoParentElement(),
                s = new Qe(
                  this.videoElementProvider,
                  e,
                  this.activeKeysProvider
                );
              if (
                ((t.requestPointerLock =
                  t.requestPointerLock || t.mozRequestPointerLock),
                (document.exitPointerLock =
                  document.exitPointerLock || document.mozExitPointerLock),
                t.requestPointerLock)
              ) {
                const e = () => {
                  t.requestPointerLock();
                };
                t.addEventListener("click", e),
                  this.mouseEventListenerTracker.addUnregisterCallback(() =>
                    t.removeEventListener("click", e)
                  );
              }
              const n = () => s.lockStateChange();
              document.addEventListener("pointerlockchange", n, !1),
                document.addEventListener("mozpointerlockchange", n, !1),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("pointerlockchange", n, !1)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("mozpointerlockchange", n, !1)
                );
              const r = (e) => s.handleMouseDown(e),
                i = (e) => s.handleMouseUp(e),
                o = (e) => s.handleMouseWheel(e),
                a = (e) => s.handleMouseDouble(e);
              t.addEventListener("mousedown", r),
                t.addEventListener("mouseup", i),
                t.addEventListener("wheel", o),
                t.addEventListener("dblclick", a),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("mousedown", r)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("mouseup", i)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("wheel", o)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("dblclick", a)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  s.unregisterMouseEvents()
                );
            }
            registerHoveringMouseEvents(e) {
              const t = this.videoElementProvider.getVideoParentElement(),
                s = new $e(e),
                n = (e) => s.updateMouseMovePosition(e),
                r = (e) => s.handleMouseDown(e),
                i = (e) => s.handleMouseUp(e),
                o = (e) => s.handleContextMenu(e),
                a = (e) => s.handleMouseWheel(e),
                l = (e) => s.handleMouseDouble(e);
              t.addEventListener("mousemove", n),
                t.addEventListener("mousedown", r),
                t.addEventListener("mouseup", i),
                t.addEventListener("contextmenu", o),
                t.addEventListener("wheel", a),
                t.addEventListener("dblclick", l),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("mousemove", n)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("mousedown", r)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("mouseup", i)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("contextmenu", o)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("wheel", a)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  t.removeEventListener("dblclick", l)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  s.unregisterMouseEvents()
                );
            }
            registerMouseEnterAndLeaveEvents() {
              const e = this.videoElementProvider.getVideoParentElement(),
                t = (e) => {
                  this.videoElementProvider.isVideoReady() &&
                    (i.Log(i.GetStackTrace(), "Mouse Entered", 6),
                    this.sendMouseEnter(),
                    this.pressMouseButtons(e.buttons, e.x, e.y));
                },
                s = (e) => {
                  this.videoElementProvider.isVideoReady() &&
                    (i.Log(i.GetStackTrace(), "Mouse Left", 6),
                    this.sendMouseLeave(),
                    this.releaseMouseButtons(e.buttons, e.x, e.y));
                };
              e.addEventListener("mouseenter", t),
                e.addEventListener("mouseleave", s),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  e.removeEventListener("mouseenter", t)
                ),
                this.mouseEventListenerTracker.addUnregisterCallback(() =>
                  e.removeEventListener("mouseleave", s)
                );
            }
            releaseMouseButtons(e, t, s) {
              const n = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                t,
                s
              );
              e & _e.primaryButton && this.sendMouseUp(Be.mainButton, n.x, n.y),
                e & _e.secondaryButton &&
                  this.sendMouseUp(Be.secondaryButton, n.x, n.y),
                e & _e.auxiliaryButton &&
                  this.sendMouseUp(Be.auxiliaryButton, n.x, n.y),
                e & _e.fourthButton &&
                  this.sendMouseUp(Be.fourthButton, n.x, n.y),
                e & _e.fifthButton &&
                  this.sendMouseUp(Be.fifthButton, n.x, n.y);
            }
            pressMouseButtons(e, t, s) {
              if (!this.videoElementProvider.isVideoReady()) return;
              const n = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                t,
                s
              );
              e & _e.primaryButton &&
                this.sendMouseDown(Be.mainButton, n.x, n.y),
                e & _e.secondaryButton &&
                  this.sendMouseDown(Be.secondaryButton, n.x, n.y),
                e & _e.auxiliaryButton &&
                  this.sendMouseDown(Be.auxiliaryButton, n.x, n.y),
                e & _e.fourthButton &&
                  this.sendMouseDown(Be.fourthButton, n.x, n.y),
                e & _e.fifthButton &&
                  this.sendMouseDown(Be.fifthButton, n.x, n.y);
            }
            sendMouseEnter() {
              this.videoElementProvider.isVideoReady() &&
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseEnter"
                )();
            }
            sendMouseLeave() {
              this.videoElementProvider.isVideoReady() &&
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseLeave"
                )();
            }
            sendMouseDown(e, t, s) {
              this.videoElementProvider.isVideoReady() &&
                (i.Log(
                  i.GetStackTrace(),
                  `mouse button ${e} down at (${t}, ${s})`,
                  6
                ),
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "MouseDown"
                )([e, t, s]));
            }
            sendMouseUp(e, t, s) {
              if (!this.videoElementProvider.isVideoReady()) return;
              i.Log(
                i.GetStackTrace(),
                `mouse button ${e} up at (${t}, ${s})`,
                6
              );
              const n = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                t,
                s
              );
              this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseUp")(
                [e, n.x, n.y]
              );
            }
          }
          class Xe {
            constructor(e, t, s) {
              (this.fingers = [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]),
                (this.fingerIds = new Map()),
                (this.maxByteValue = 255),
                (this.touchEventListenerTracker = new We()),
                (this.toStreamerMessagesProvider = e),
                (this.videoElementProvider = t),
                (this.coordinateConverter = s),
                (this.videoElementParent = t.getVideoElement());
              const n = (e) => this.onTouchStart(e),
                r = (e) => this.onTouchEnd(e),
                o = (e) => this.onTouchMove(e);
              this.videoElementParent.addEventListener("touchstart", n, {
                passive: !1,
              }),
                this.videoElementParent.addEventListener("touchend", r, {
                  passive: !1,
                }),
                this.videoElementParent.addEventListener("touchmove", o, {
                  passive: !1,
                }),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  this.videoElementParent.removeEventListener("touchstart", n)
                ),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  this.videoElementParent.removeEventListener("touchend", r)
                ),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  this.videoElementParent.removeEventListener("touchmove", o)
                ),
                i.Log(i.GetStackTrace(), "Touch Events Registered", 6);
              const a = (e) => {
                e.preventDefault();
              };
              document.addEventListener("touchmove", a, { passive: !1 }),
                this.touchEventListenerTracker.addUnregisterCallback(() =>
                  document.removeEventListener("touchmove", a)
                );
            }
            unregisterTouchEvents() {
              this.touchEventListenerTracker.unregisterAll();
            }
            rememberTouch(e) {
              const t = this.fingers.pop();
              void 0 === t &&
                i.Log(i.GetStackTrace(), "exhausted touch identifiers", 6),
                this.fingerIds.set(e.identifier, t);
            }
            forgetTouch(e) {
              this.fingers.push(this.fingerIds.get(e.identifier)),
                this.fingers.sort(function (e, t) {
                  return t - e;
                }),
                this.fingerIds.delete(e.identifier);
            }
            onTouchStart(e) {
              if (this.videoElementProvider.isVideoReady()) {
                for (let t = 0; t < e.changedTouches.length; t++)
                  this.rememberTouch(e.changedTouches[t]);
                i.Log(i.GetStackTrace(), "touch start", 6),
                  this.emitTouchData("TouchStart", e.changedTouches),
                  e.preventDefault();
              }
            }
            onTouchEnd(e) {
              if (this.videoElementProvider.isVideoReady()) {
                i.Log(i.GetStackTrace(), "touch end", 6),
                  this.emitTouchData("TouchEnd", e.changedTouches);
                for (let t = 0; t < e.changedTouches.length; t++)
                  this.forgetTouch(e.changedTouches[t]);
                e.preventDefault();
              }
            }
            onTouchMove(e) {
              this.videoElementProvider.isVideoReady() &&
                (i.Log(i.GetStackTrace(), "touch move", 6),
                this.emitTouchData("TouchMove", e.touches),
                e.preventDefault());
            }
            emitTouchData(e, t) {
              if (!this.videoElementProvider.isVideoReady()) return;
              const s = this.videoElementProvider.getVideoParentElement(),
                n = this.toStreamerMessagesProvider.toStreamerHandlers;
              for (let r = 0; r < t.length; r++) {
                const o = 1,
                  a = t[r],
                  l = a.clientX - s.offsetLeft,
                  d = a.clientY - s.offsetTop;
                i.Log(
                  i.GetStackTrace(),
                  `F${this.fingerIds.get(a.identifier)}=(${l}, ${d})`,
                  6
                );
                const c = this.coordinateConverter.normalizeAndQuantizeUnsigned(
                  l,
                  d
                );
                switch (e) {
                  case "TouchStart":
                    n.get("TouchStart")([
                      o,
                      c.x,
                      c.y,
                      this.fingerIds.get(a.identifier),
                      this.maxByteValue * a.force,
                      c.inRange ? 1 : 0,
                    ]);
                    break;
                  case "TouchEnd":
                    n.get("TouchEnd")([
                      o,
                      c.x,
                      c.y,
                      this.fingerIds.get(a.identifier),
                      this.maxByteValue * a.force,
                      c.inRange ? 1 : 0,
                    ]);
                    break;
                  case "TouchMove":
                    n.get("TouchMove")([
                      o,
                      c.x,
                      c.y,
                      this.fingerIds.get(a.identifier),
                      this.maxByteValue * a.force,
                      c.inRange ? 1 : 0,
                    ]);
                }
              }
            }
          }
          class je {
            constructor(e) {
              (this.gamePadEventListenerTracker = new We()),
                (this.toStreamerMessagesProvider = e),
                (this.requestAnimationFrame = (
                  window.mozRequestAnimationFrame ||
                  window.webkitRequestAnimationFrame ||
                  window.requestAnimationFrame
                ).bind(window));
              const t = window;
              if ("GamepadEvent" in t) {
                const e = (e) => this.gamePadConnectHandler(e),
                  t = (e) => this.gamePadDisconnectHandler(e);
                window.addEventListener("gamepadconnected", e),
                  window.addEventListener("gamepaddisconnected", t),
                  this.gamePadEventListenerTracker.addUnregisterCallback(() =>
                    window.removeEventListener("gamepadconnected", e)
                  ),
                  this.gamePadEventListenerTracker.addUnregisterCallback(() =>
                    window.removeEventListener("gamepaddisconnected", t)
                  );
              } else if ("WebKitGamepadEvent" in t) {
                const e = (e) => this.gamePadConnectHandler(e),
                  t = (e) => this.gamePadDisconnectHandler(e);
                window.addEventListener("webkitgamepadconnected", e),
                  window.addEventListener("webkitgamepaddisconnected", t),
                  this.gamePadEventListenerTracker.addUnregisterCallback(() =>
                    window.removeEventListener("webkitgamepadconnected", e)
                  ),
                  this.gamePadEventListenerTracker.addUnregisterCallback(() =>
                    window.removeEventListener("webkitgamepaddisconnected", t)
                  );
              }
              this.controllers = [];
              for (const e of navigator.getGamepads())
                e &&
                  this.gamePadConnectHandler(
                    new GamepadEvent("gamepadconnected", { gamepad: e })
                  );
            }
            unregisterGamePadEvents() {
              this.gamePadEventListenerTracker.unregisterAll(),
                (this.controllers = []);
            }
            gamePadConnectHandler(e) {
              i.Log(i.GetStackTrace(), "Gamepad connect handler", 6);
              const t = e.gamepad,
                s = { currentState: t, prevState: t };
              this.controllers.push(s),
                (this.controllers[t.index].currentState = t),
                (this.controllers[t.index].prevState = t),
                i.Log(i.GetStackTrace(), "gamepad: " + t.id + " connected", 6),
                this.requestAnimationFrame(() => this.updateStatus());
            }
            gamePadDisconnectHandler(e) {
              i.Log(i.GetStackTrace(), "Gamepad disconnect handler", 6),
                i.Log(
                  i.GetStackTrace(),
                  "gamepad: " + e.gamepad.id + " disconnected",
                  6
                ),
                delete this.controllers[e.gamepad.index],
                (this.controllers = this.controllers.filter(
                  (e) => void 0 !== e
                ));
            }
            scanGamePads() {
              const e = navigator.getGamepads
                ? navigator.getGamepads()
                : navigator.webkitGetGamepads
                ? navigator.webkitGetGamepads()
                : [];
              for (let t = 0; t < e.length; t++)
                e[t] &&
                  e[t].index in this.controllers &&
                  (this.controllers[e[t].index].currentState = e[t]);
            }
            updateStatus() {
              this.scanGamePads();
              const e = this.toStreamerMessagesProvider.toStreamerHandlers;
              for (const t of this.controllers) {
                const s = this.controllers.indexOf(t),
                  n = t.currentState;
                for (let n = 0; n < t.currentState.buttons.length; n++) {
                  const r = t.currentState.buttons[n],
                    i = t.prevState.buttons[n];
                  r.pressed
                    ? n == Re.LeftTrigger
                      ? e.get("GamepadAnalog")([s, 5, r.value])
                      : n == Re.RightTrigger
                      ? e.get("GamepadAnalog")([s, 6, r.value])
                      : e.get("GamepadButtonPressed")([s, n, i.pressed ? 1 : 0])
                    : !r.pressed &&
                      i.pressed &&
                      (n == Re.LeftTrigger
                        ? e.get("GamepadAnalog")([s, 5, 0])
                        : n == Re.RightTrigger
                        ? e.get("GamepadAnalog")([s, 6, 0])
                        : e.get("GamepadButtonReleased")([s, n]));
                }
                for (let t = 0; t < n.axes.length; t += 2) {
                  const r = parseFloat(n.axes[t].toFixed(4)),
                    i = -parseFloat(n.axes[t + 1].toFixed(4));
                  e.get("GamepadAnalog")([s, t + 1, r]),
                    e.get("GamepadAnalog")([s, t + 2, i]);
                }
                this.controllers[s].prevState = n;
              }
              this.controllers.length > 0 &&
                this.requestAnimationFrame(() => this.updateStatus());
            }
          }
          !(function (e) {
            (e[(e.RightClusterBottomButton = 0)] = "RightClusterBottomButton"),
              (e[(e.RightClusterRightButton = 1)] = "RightClusterRightButton"),
              (e[(e.RightClusterLeftButton = 2)] = "RightClusterLeftButton"),
              (e[(e.RightClusterTopButton = 3)] = "RightClusterTopButton"),
              (e[(e.LeftShoulder = 4)] = "LeftShoulder"),
              (e[(e.RightShoulder = 5)] = "RightShoulder"),
              (e[(e.LeftTrigger = 6)] = "LeftTrigger"),
              (e[(e.RightTrigger = 7)] = "RightTrigger"),
              (e[(e.SelectOrBack = 8)] = "SelectOrBack"),
              (e[(e.StartOrForward = 9)] = "StartOrForward"),
              (e[(e.LeftAnalogPress = 10)] = "LeftAnalogPress"),
              (e[(e.RightAnalogPress = 11)] = "RightAnalogPress"),
              (e[(e.LeftClusterTopButton = 12)] = "LeftClusterTopButton"),
              (e[(e.LeftClusterBottomButton = 13)] = "LeftClusterBottomButton"),
              (e[(e.LeftClusterLeftButton = 14)] = "LeftClusterLeftButton"),
              (e[(e.LeftClusterRightButton = 15)] = "LeftClusterRightButton"),
              (e[(e.CentreButton = 16)] = "CentreButton"),
              (e[(e.LeftStickHorizontal = 0)] = "LeftStickHorizontal"),
              (e[(e.LeftStickVertical = 1)] = "LeftStickVertical"),
              (e[(e.RightStickHorizontal = 2)] = "RightStickHorizontal"),
              (e[(e.RightStickVertical = 3)] = "RightStickVertical");
          })(Re || (Re = {}));
          class Ye {
            constructor(e, t, s) {
              (this.activeKeys = new Je()),
                (this.toStreamerMessagesProvider = e),
                (this.videoElementProvider = t),
                (this.coordinateConverter = s);
            }
            registerKeyBoard(e) {
              i.Log(i.GetStackTrace(), "Register Keyboard Events", 7);
              const t = new Ke(
                this.toStreamerMessagesProvider,
                e,
                this.activeKeys
              );
              return t.registerKeyBoardEvents(), t;
            }
            registerMouse(e) {
              i.Log(i.GetStackTrace(), "Register Mouse Events", 7);
              const t = new qe(
                this.toStreamerMessagesProvider,
                this.videoElementProvider,
                this.coordinateConverter,
                this.activeKeys
              );
              switch (e) {
                case ue.LockedMouse:
                  t.registerLockedMouseEvents(t);
                  break;
                case ue.HoveringMouse:
                  t.registerHoveringMouseEvents(t);
                  break;
                default:
                  i.Info(
                    i.GetStackTrace(),
                    "unknown Control Scheme Type Defaulting to Locked Mouse Events"
                  ),
                    t.registerLockedMouseEvents(t);
              }
              return t;
            }
            registerTouch(e, t) {
              if ((i.Log(i.GetStackTrace(), "Registering Touch", 6), e)) {
                const e = new He(
                  this.toStreamerMessagesProvider,
                  this.videoElementProvider,
                  this.coordinateConverter
                );
                return e.setVideoElementParentClientRect(t), e;
              }
              return new Xe(
                this.toStreamerMessagesProvider,
                this.videoElementProvider,
                this.coordinateConverter
              );
            }
            registerGamePad() {
              return (
                i.Log(i.GetStackTrace(), "Register Game Pad", 7),
                new je(this.toStreamerMessagesProvider)
              );
            }
          }
          class Je {
            constructor() {
              (this.activeKeys = []), (this.activeKeys = []);
            }
            getActiveKeys() {
              return this.activeKeys;
            }
          }
          class Ze {
            constructor(e, t) {
              (this.lastTimeResized = new Date().getTime()),
                (this.videoElement = document.createElement("video")),
                (this.config = t),
                (this.videoElement.id = "streamingVideo"),
                (this.videoElement.disablePictureInPicture = !0),
                (this.videoElement.playsInline = !0),
                (this.videoElement.style.width = "100%"),
                (this.videoElement.style.height = "100%"),
                (this.videoElement.style.position = "absolute"),
                (this.videoElement.style.pointerEvents = "all"),
                e.appendChild(this.videoElement),
                (this.onResizePlayerCallback = () => {
                  console.log(
                    "Resolution changed, restyling player, did you forget to override this function?"
                  );
                }),
                (this.onMatchViewportResolutionCallback = () => {
                  console.log(
                    "Resolution changed and match viewport resolution is turned on, did you forget to override this function?"
                  );
                }),
                (this.videoElement.onclick = () => {
                  this.videoElement.paused && this.videoElement.play();
                }),
                (this.videoElement.onloadedmetadata = () => {
                  this.onVideoInitialized();
                }),
                window.addEventListener(
                  "resize",
                  () => this.resizePlayerStyle(),
                  !0
                ),
                window.addEventListener("orientationchange", () =>
                  this.onOrientationChange()
                );
            }
            play() {
              return (
                (this.videoElement.muted = this.config.isFlagEnabled(
                  re.StartVideoMuted
                )),
                (this.videoElement.autoplay = this.config.isFlagEnabled(
                  re.AutoPlayVideo
                )),
                this.videoElement.play()
              );
            }
            isPaused() {
              return this.videoElement.paused;
            }
            isVideoReady() {
              return (
                void 0 !== this.videoElement.readyState &&
                this.videoElement.readyState > 0
              );
            }
            hasVideoSource() {
              return (
                void 0 !== this.videoElement.srcObject &&
                null !== this.videoElement.srcObject
              );
            }
            getVideoElement() {
              return this.videoElement;
            }
            getVideoParentElement() {
              return this.videoElement.parentElement;
            }
            setVideoEnabled(e) {
              this.videoElement.srcObject
                .getTracks()
                .forEach((t) => (t.enabled = e));
            }
            onVideoInitialized() {}
            onOrientationChange() {
              clearTimeout(this.orientationChangeTimeout),
                (this.orientationChangeTimeout = window.setTimeout(() => {
                  this.resizePlayerStyle();
                }, 500));
            }
            resizePlayerStyle() {
              const e = this.getVideoParentElement();
              e &&
                (this.updateVideoStreamSize(),
                e.classList.contains("fixed-size") ||
                  this.resizePlayerStyleToFillParentElement(),
                this.onResizePlayerCallback());
            }
            resizePlayerStyleToFillParentElement() {
              this.getVideoParentElement().setAttribute(
                "style",
                "top: 0px; left: 0px; width: 100%; height: 100%; cursor: default;"
              );
            }
            updateVideoStreamSize() {
              if (this.config.isFlagEnabled(re.MatchViewportResolution))
                if (new Date().getTime() - this.lastTimeResized > 1e3) {
                  const e = this.getVideoParentElement();
                  if (!e) return;
                  this.onMatchViewportResolutionCallback(
                    e.clientWidth,
                    e.clientHeight
                  ),
                    (this.lastTimeResized = new Date().getTime());
                } else
                  i.Log(i.GetStackTrace(), "Resizing too often - skipping", 6),
                    clearTimeout(this.resizeTimeoutHandle),
                    (this.resizeTimeoutHandle = window.setTimeout(
                      () => this.updateVideoStreamSize,
                      1e3
                    ));
            }
          }
          class et {
            constructor() {
              (this.map = new Map()), (this.reverseMap = new Map());
            }
            getFromKey(e) {
              return this.map.get(e);
            }
            getFromValue(e) {
              return this.reverseMap.get(e);
            }
            add(e, t) {
              this.map.set(e, t), this.reverseMap.set(t, e);
            }
            remove(e, t) {
              this.map.delete(e), this.reverseMap.delete(t);
            }
          }
          class tt {
            constructor() {
              (this.toStreamerHandlers = new Map()),
                (this.fromStreamerHandlers = new Map()),
                (this.toStreamerMessages = new et()),
                (this.fromStreamerMessages = new et());
            }
            populateDefaultProtocol() {
              this.toStreamerMessages.add("IFrameRequest", {
                id: 0,
                byteLength: 0,
                structure: [],
              }),
                this.toStreamerMessages.add("RequestQualityControl", {
                  id: 1,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("FpsRequest", {
                  id: 2,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("AverageBitrateRequest", {
                  id: 3,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("StartStreaming", {
                  id: 4,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("StopStreaming", {
                  id: 5,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("LatencyTest", {
                  id: 6,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("RequestInitialSettings", {
                  id: 7,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("TestEcho", {
                  id: 8,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("UIInteraction", {
                  id: 50,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("Command", {
                  id: 51,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("KeyDown", {
                  id: 60,
                  byteLength: 2,
                  structure: ["uint8", "uint8"],
                }),
                this.toStreamerMessages.add("KeyUp", {
                  id: 61,
                  byteLength: 1,
                  structure: ["uint8"],
                }),
                this.toStreamerMessages.add("KeyPress", {
                  id: 62,
                  byteLength: 2,
                  structure: ["uint16"],
                }),
                this.toStreamerMessages.add("MouseEnter", {
                  id: 70,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("MouseLeave", {
                  id: 71,
                  byteLength: 0,
                  structure: [],
                }),
                this.toStreamerMessages.add("MouseDown", {
                  id: 72,
                  byteLength: 5,
                  structure: ["uint8", "uint16", "uint16"],
                }),
                this.toStreamerMessages.add("MouseUp", {
                  id: 73,
                  byteLength: 5,
                  structure: ["uint8", "uint16", "uint16"],
                }),
                this.toStreamerMessages.add("MouseMove", {
                  id: 74,
                  byteLength: 8,
                  structure: ["uint16", "uint16", "int16", "int16"],
                }),
                this.toStreamerMessages.add("MouseWheel", {
                  id: 75,
                  byteLength: 6,
                  structure: ["int16", "uint16", "uint16"],
                }),
                this.toStreamerMessages.add("MouseDouble", {
                  id: 76,
                  byteLength: 5,
                  structure: ["uint8", "uint16", "uint16"],
                }),
                this.toStreamerMessages.add("TouchStart", {
                  id: 80,
                  byteLength: 8,
                  structure: [
                    "uint8",
                    "uint16",
                    "uint16",
                    "uint8",
                    "uint8",
                    "uint8",
                  ],
                }),
                this.toStreamerMessages.add("TouchEnd", {
                  id: 81,
                  byteLength: 8,
                  structure: [
                    "uint8",
                    "uint16",
                    "uint16",
                    "uint8",
                    "uint8",
                    "uint8",
                  ],
                }),
                this.toStreamerMessages.add("TouchMove", {
                  id: 82,
                  byteLength: 8,
                  structure: [
                    "uint8",
                    "uint16",
                    "uint16",
                    "uint8",
                    "uint8",
                    "uint8",
                  ],
                }),
                this.toStreamerMessages.add("GamepadButtonPressed", {
                  id: 90,
                  byteLength: 3,
                  structure: ["uint8", "uint8", "uint8"],
                }),
                this.toStreamerMessages.add("GamepadButtonReleased", {
                  id: 91,
                  byteLength: 3,
                  structure: ["uint8", "uint8", "uint8"],
                }),
                this.toStreamerMessages.add("GamepadAnalog", {
                  id: 92,
                  byteLength: 10,
                  structure: ["uint8", "uint8", "double"],
                }),
                this.fromStreamerMessages.add("QualityControlOwnership", 0),
                this.fromStreamerMessages.add("Response", 1),
                this.fromStreamerMessages.add("Command", 2),
                this.fromStreamerMessages.add("FreezeFrame", 3),
                this.fromStreamerMessages.add("UnfreezeFrame", 4),
                this.fromStreamerMessages.add("VideoEncoderAvgQP", 5),
                this.fromStreamerMessages.add("LatencyTest", 6),
                this.fromStreamerMessages.add("InitialSettings", 7),
                this.fromStreamerMessages.add("FileExtension", 8),
                this.fromStreamerMessages.add("FileMimeType", 9),
                this.fromStreamerMessages.add("FileContents", 10),
                this.fromStreamerMessages.add("TestEcho", 11),
                this.fromStreamerMessages.add("InputControlOwnership", 12),
                this.fromStreamerMessages.add("Protocol", 255);
            }
            registerMessageHandler(e, t, s) {
              switch (e) {
                case Le.ToStreamer:
                  this.toStreamerHandlers.set(t, s);
                  break;
                case Le.FromStreamer:
                  this.fromStreamerHandlers.set(t, s);
                  break;
                default:
                  i.Log(i.GetStackTrace(), `Unknown message direction ${e}`);
              }
            }
          }
          !(function (e) {
            (e[(e.ToStreamer = 0)] = "ToStreamer"),
              (e[(e.FromStreamer = 1)] = "FromStreamer");
          })(Le || (Le = {}));
          class st {
            constructor() {
              this.responseEventListeners = new Map();
            }
            addResponseEventListener(e, t) {
              this.responseEventListeners.set(e, t);
            }
            removeResponseEventListener(e) {
              this.responseEventListeners.delete(e);
            }
            onResponse(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.Response",
                6
              );
              const t = new TextDecoder("utf-16").decode(e.slice(1));
              i.Log(i.GetStackTrace(), t, 6),
                this.responseEventListeners.forEach((e) => {
                  e(t);
                });
            }
          }
          class nt {
            constructor(e, t) {
              (this.dataChannelSender = e),
                (this.toStreamerMessagesMapProvider = t);
            }
            sendLatencyTest(e) {
              this.sendDescriptor("LatencyTest", e);
            }
            emitCommand(e) {
              this.sendDescriptor("Command", e);
            }
            emitUIInteraction(e) {
              this.sendDescriptor("UIInteraction", e);
            }
            sendDescriptor(e, t) {
              const s = JSON.stringify(t),
                n =
                  this.toStreamerMessagesMapProvider.toStreamerMessages.getFromKey(
                    e
                  );
              void 0 === n &&
                i.Error(
                  i.GetStackTrace(),
                  `Attempted to emit descriptor with message type: ${e}, but the frontend hasn't been configured to send such a message. Check you've added the message type in your cpp`
                ),
                i.Log(i.GetStackTrace(), "Sending: " + t, 6);
              const r = new DataView(new ArrayBuffer(3 + 2 * s.length));
              let o = 0;
              r.setUint8(o, n.id), o++, r.setUint16(o, s.length, !0), (o += 2);
              for (let e = 0; e < s.length; e++)
                r.setUint16(o, s.charCodeAt(e), !0), (o += 2);
              this.dataChannelSender.canSend()
                ? this.dataChannelSender.sendData(r.buffer)
                : i.Info(
                    i.GetStackTrace(),
                    `Data channel cannot send yet, skipping sending descriptor message: ${e} - ${s}`
                  );
            }
          }
          class rt {
            constructor(e, t) {
              (this.dataChannelSender = e),
                (this.toStreamerMessagesMapProvider = t);
            }
            sendMessageToStreamer(e, t) {
              void 0 === t && (t = []);
              const s =
                this.toStreamerMessagesMapProvider.toStreamerMessages.getFromKey(
                  e
                );
              if (void 0 === s)
                return void i.Error(
                  i.GetStackTrace(),
                  `Attempted to send a message to the streamer with message type: ${e}, but the frontend hasn't been configured to send such a message. Check you've added the message type in your cpp`
                );
              const n = new DataView(new ArrayBuffer(s.byteLength + 1));
              n.setUint8(0, s.id);
              let r = 1;
              t.forEach((e, t) => {
                switch (s.structure[t]) {
                  case "uint8":
                    n.setUint8(r, e), (r += 1);
                    break;
                  case "uint16":
                    n.setUint16(r, e, !0), (r += 2);
                    break;
                  case "int16":
                    n.setInt16(r, e, !0), (r += 2);
                    break;
                  case "float":
                    n.setFloat32(r, e, !0), (r += 4);
                    break;
                  case "double":
                    n.setFloat64(r, e, !0), (r += 8);
                }
              }),
                this.dataChannelSender.canSend()
                  ? this.dataChannelSender.sendData(n.buffer)
                  : i.Info(
                      i.GetStackTrace(),
                      `Data channel cannot send yet, skipping sending message: ${e} - ${new Uint8Array(
                        n.buffer
                      )}`
                    );
            }
          }
          class it {
            constructor(e) {
              this.sendMessageController = e;
            }
            SendRequestQualityControl() {
              this.sendMessageController.sendMessageToStreamer(
                "RequestQualityControl"
              );
            }
            SendMaxFpsRequest() {
              this.sendMessageController.sendMessageToStreamer("FpsRequest");
            }
            SendAverageBitrateRequest() {
              this.sendMessageController.sendMessageToStreamer(
                "AverageBitrateRequest"
              );
            }
            SendStartStreaming() {
              this.sendMessageController.sendMessageToStreamer(
                "StartStreaming"
              );
            }
            SendStopStreaming() {
              this.sendMessageController.sendMessageToStreamer("StopStreaming");
            }
            SendRequestInitialSettings() {
              this.sendMessageController.sendMessageToStreamer(
                "RequestInitialSettings"
              );
            }
          }
          class ot {
            constructor(e) {
              this.dataChannelProvider = e;
            }
            canSend() {
              return (
                void 0 !==
                  this.dataChannelProvider.getDataChannelInstance()
                    .dataChannel &&
                "open" ==
                  this.dataChannelProvider.getDataChannelInstance().dataChannel
                    .readyState
              );
            }
            sendData(e) {
              const t = this.dataChannelProvider.getDataChannelInstance();
              "open" == t.dataChannel.readyState
                ? (t.dataChannel.send(e),
                  i.Log(
                    i.GetStackTrace(),
                    `Message Sent: ${new Uint8Array(e)}`,
                    6
                  ),
                  this.resetAfkWarningTimerOnDataSend())
                : i.Error(
                    i.GetStackTrace(),
                    `Message Failed: ${new Uint8Array(e)}`
                  );
            }
            resetAfkWarningTimerOnDataSend() {}
          }
          class at {
            constructor(e) {
              (this.videoElementProvider = e),
                (this.normalizeAndQuantizeUnsignedFunc = () => {
                  throw new Error(
                    "Normalize and quantize unsigned, method not implemented."
                  );
                }),
                (this.normalizeAndQuantizeSignedFunc = () => {
                  throw new Error(
                    "Normalize and unquantize signed, method not implemented."
                  );
                }),
                (this.denormalizeAndUnquantizeUnsignedFunc = () => {
                  throw new Error(
                    "Denormalize and unquantize unsigned, method not implemented."
                  );
                });
            }
            normalizeAndQuantizeUnsigned(e, t) {
              return this.normalizeAndQuantizeUnsignedFunc(e, t);
            }
            unquantizeAndDenormalizeUnsigned(e, t) {
              return this.denormalizeAndUnquantizeUnsignedFunc(e, t);
            }
            normalizeAndQuantizeSigned(e, t) {
              return this.normalizeAndQuantizeSignedFunc(e, t);
            }
            setupNormalizeAndQuantize() {
              if (
                ((this.videoElementParent =
                  this.videoElementProvider.getVideoParentElement()),
                (this.videoElement =
                  this.videoElementProvider.getVideoElement()),
                this.videoElementParent && this.videoElement)
              ) {
                const e =
                    this.videoElementParent.clientHeight /
                    this.videoElementParent.clientWidth,
                  t =
                    this.videoElement.videoHeight /
                    this.videoElement.videoWidth;
                e > t
                  ? (i.Log(
                      i.GetStackTrace(),
                      "Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio",
                      6
                    ),
                    (this.ratio = e / t),
                    (this.normalizeAndQuantizeUnsignedFunc = (e, t) =>
                      this.normalizeAndQuantizeUnsignedPlayerBigger(e, t)),
                    (this.normalizeAndQuantizeSignedFunc = (e, t) =>
                      this.normalizeAndQuantizeSignedPlayerBigger(e, t)),
                    (this.denormalizeAndUnquantizeUnsignedFunc = (e, t) =>
                      this.denormalizeAndUnquantizeUnsignedPlayerBigger(e, t)))
                  : (i.Log(
                      i.GetStackTrace(),
                      "Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio",
                      6
                    ),
                    (this.ratio = t / e),
                    (this.normalizeAndQuantizeUnsignedFunc = (e, t) =>
                      this.normalizeAndQuantizeUnsignedPlayerSmaller(e, t)),
                    (this.normalizeAndQuantizeSignedFunc = (e, t) =>
                      this.normalizeAndQuantizeSignedPlayerSmaller(e, t)),
                    (this.denormalizeAndUnquantizeUnsignedFunc = (e, t) =>
                      this.denormalizeAndUnquantizeUnsignedPlayerSmaller(
                        e,
                        t
                      )));
              }
            }
            normalizeAndQuantizeUnsignedPlayerBigger(e, t) {
              const s = e / this.videoElementParent.clientWidth,
                n =
                  this.ratio *
                    (t / this.videoElementParent.clientHeight - 0.5) +
                  0.5;
              return s < 0 || s > 1 || n < 0 || n > 1
                ? new lt(!1, 65535, 65535)
                : new lt(!0, 65536 * s, 65536 * n);
            }
            denormalizeAndUnquantizeUnsignedPlayerBigger(e, t) {
              const s = e / 65536,
                n = (t / 65536 - 0.5) / this.ratio + 0.5;
              return new dt(
                s * this.videoElementParent.clientWidth,
                n * this.videoElementParent.clientHeight
              );
            }
            normalizeAndQuantizeSignedPlayerBigger(e, t) {
              const s = e / (0.5 * this.videoElementParent.clientWidth),
                n =
                  (this.ratio * t) /
                  (0.5 * this.videoElementParent.clientHeight);
              return new ct(32767 * s, 32767 * n);
            }
            normalizeAndQuantizeUnsignedPlayerSmaller(e, t) {
              const s =
                  this.ratio * (e / this.videoElementParent.clientWidth - 0.5) +
                  0.5,
                n = t / this.videoElementParent.clientHeight;
              return s < 0 || s > 1 || n < 0 || n > 1
                ? new lt(!1, 65535, 65535)
                : new lt(!0, 65536 * s, 65536 * n);
            }
            denormalizeAndUnquantizeUnsignedPlayerSmaller(e, t) {
              const s = (e / 65536 - 0.5) / this.ratio + 0.5,
                n = t / 65536;
              return new dt(
                s * this.videoElementParent.clientWidth,
                n * this.videoElementParent.clientHeight
              );
            }
            normalizeAndQuantizeSignedPlayerSmaller(e, t) {
              const s =
                  (this.ratio * e) /
                  (0.5 * this.videoElementParent.clientWidth),
                n = t / (0.5 * this.videoElementParent.clientHeight);
              return new ct(32767 * s, 32767 * n);
            }
          }
          class lt {
            constructor(e, t, s) {
              (this.inRange = e), (this.x = t), (this.y = s);
            }
          }
          class dt {
            constructor(e, t) {
              (this.x = e), (this.y = t);
            }
          }
          class ct {
            constructor(e, t) {
              (this.x = e), (this.y = t);
            }
          }
          class ht {
            constructor(e, t) {
              (this.shouldShowPlayOverlay = !0),
                (this.config = e),
                (this.pixelStreaming = t),
                (this.responseController = new st()),
                (this.file = new Ge()),
                (this.sdpConstraints = {
                  offerToReceiveAudio: !0,
                  offerToReceiveVideo: !0,
                }),
                (this.afkController = new me(
                  this.config,
                  this.pixelStreaming,
                  this.onAfkTriggered.bind(this)
                )),
                (this.afkController.onAFKTimedOutCallback = () => {
                  this.setDisconnectMessageOverride(
                    "You have been disconnected due to inactivity"
                  ),
                    this.closeSignalingServer();
                }),
                (this.freezeFrameController = new y(
                  this.pixelStreaming.videoElementParent
                )),
                (this.videoPlayer = new Ze(
                  this.pixelStreaming.videoElementParent,
                  this.config
                )),
                (this.videoPlayer.onVideoInitialized = () =>
                  this.handleVideoInitialized()),
                (this.videoPlayer.onMatchViewportResolutionCallback = (
                  e,
                  t
                ) => {
                  const s = { "Resolution.Width": e, "Resolution.Height": t };
                  this.sendDescriptorController.emitCommand(s);
                }),
                (this.videoPlayer.onResizePlayerCallback = () => {
                  this.setUpMouseAndFreezeFrame();
                }),
                (this.streamController = new T(this.videoPlayer)),
                (this.coordinateConverter = new at(this.videoPlayer)),
                (this.sendrecvDataChannelController = new Se()),
                (this.recvDataChannelController = new Se()),
                this.registerDataChannelEventEmitters(
                  this.sendrecvDataChannelController
                ),
                this.registerDataChannelEventEmitters(
                  this.recvDataChannelController
                ),
                (this.dataChannelSender = new ot(
                  this.sendrecvDataChannelController
                )),
                (this.dataChannelSender.resetAfkWarningTimerOnDataSend = () =>
                  this.afkController.resetAfkWarningTimer()),
                (this.streamMessageController = new tt()),
                (this.webSocketController = new f()),
                (this.webSocketController.onConfig = (e) =>
                  this.handleOnConfigMessage(e)),
                (this.webSocketController.onStreamerList = (e) =>
                  this.handleStreamerListMessage(e)),
                (this.webSocketController.onWebSocketOncloseOverlayMessage = (
                  e
                ) => {
                  this.pixelStreaming._onDisconnect(
                    `Websocket disconnect (${e.code}) ${
                      "" != e.reason ? "- " + e.reason : ""
                    }`
                  ),
                    this.setVideoEncoderAvgQP(0);
                }),
                this.webSocketController.onOpen.addEventListener("open", () => {
                  this.webSocketController.requestStreamerList();
                }),
                this.webSocketController.onClose.addEventListener(
                  "close",
                  () => {
                    this.afkController.stopAfkWarningTimer(),
                      this.statsTimerHandle &&
                        void 0 !== this.statsTimerHandle &&
                        window.clearInterval(this.statsTimerHandle);
                  }
                ),
                (this.sendDescriptorController = new nt(
                  this.dataChannelSender,
                  this.streamMessageController
                )),
                (this.sendMessageController = new rt(
                  this.dataChannelSender,
                  this.streamMessageController
                )),
                (this.toStreamerMessagesController = new it(
                  this.sendMessageController
                )),
                this.registerMessageHandlers(),
                this.streamMessageController.populateDefaultProtocol(),
                (this.inputClassesFactory = new Ye(
                  this.streamMessageController,
                  this.videoPlayer,
                  this.coordinateConverter
                )),
                (this.isUsingSFU = !1),
                (this.isQualityController = !1),
                (this.preferredCodec = ""),
                this.config._addOnOptionSettingChangedListener(
                  ce.StreamerId,
                  (e) => {
                    this.peerConnectionController.peerConnection.close(),
                      this.peerConnectionController.createPeerConnection(
                        this.peerConfig,
                        this.preferredCodec
                      ),
                      this.webSocketController.sendSubscribe(e);
                  }
                ),
                this.setVideoEncoderAvgQP(-1),
                (this.signallingUrlBuilder = () => {
                  let e = this.config.getTextSettingValue(
                    le.SignallingServerUrl
                  );
                  return (
                    this.config.isFlagEnabled(re.BrowserSendOffer) &&
                      (e += "?" + re.BrowserSendOffer + "=true"),
                    e
                  );
                });
            }
            requestUnquantizedAndDenormalizeUnsigned(e, t) {
              return this.coordinateConverter.unquantizeAndDenormalizeUnsigned(
                e,
                t
              );
            }
            handleOnMessage(e) {
              const t = new Uint8Array(e.data);
              i.Log(i.GetStackTrace(), "Message incoming:" + t, 6);
              const s =
                this.streamMessageController.fromStreamerMessages.getFromValue(
                  t[0]
                );
              this.streamMessageController.fromStreamerHandlers.get(s)(e.data);
            }
            registerMessageHandlers() {
              this.streamMessageController.registerMessageHandler(
                Le.FromStreamer,
                "QualityControlOwnership",
                (e) => this.onQualityControlOwnership(e)
              ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "Response",
                  (e) => this.responseController.onResponse(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "Command",
                  (e) => {
                    this.onCommand(e);
                  }
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "FreezeFrame",
                  (e) => this.onFreezeFrameMessage(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "UnfreezeFrame",
                  () => this.invalidateFreezeFrameAndEnableVideo()
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "VideoEncoderAvgQP",
                  (e) => this.handleVideoEncoderAvgQP(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "LatencyTest",
                  (e) => this.handleLatencyTestResult(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "InitialSettings",
                  (e) => this.handleInitialSettings(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "FileExtension",
                  (e) => this.onFileExtension(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "FileMimeType",
                  (e) => this.onFileMimeType(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "FileContents",
                  (e) => this.onFileContents(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "TestEcho",
                  () => {}
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "InputControlOwnership",
                  (e) => this.onInputControlOwnership(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.FromStreamer,
                  "Protocol",
                  (e) => this.onProtocolMessage(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "IFrameRequest",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "IFrameRequest"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "RequestQualityControl",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "RequestQualityControl"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "FpsRequest",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "FpsRequest"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "AverageBitrateRequest",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "AverageBitrateRequest"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "StartStreaming",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "StartStreaming"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "StopStreaming",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "StopStreaming"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "LatencyTest",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "LatencyTest"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "RequestInitialSettings",
                  () =>
                    this.sendMessageController.sendMessageToStreamer(
                      "RequestInitialSettings"
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "TestEcho",
                  () => {}
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "UIInteraction",
                  (e) => this.sendDescriptorController.emitUIInteraction(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "Command",
                  (e) => this.sendDescriptorController.emitCommand(e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "KeyDown",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "KeyDown",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "KeyUp",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer("KeyUp", e)
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "KeyPress",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "KeyPress",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseEnter",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseEnter",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseLeave",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseLeave",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseDown",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseDown",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseUp",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseUp",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseMove",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseMove",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseWheel",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseWheel",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "MouseDouble",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "MouseDouble",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "TouchStart",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "TouchStart",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "TouchEnd",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "TouchEnd",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "TouchMove",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "TouchMove",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "GamepadButtonPressed",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "GamepadButtonPressed",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "GamepadButtonReleased",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "GamepadButtonReleased",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "GamepadAnalog",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "GamepadAnalog",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRHMDTransform",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRHMDTransform",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRControllerTransform",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRControllerTransform",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRSystem",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRSystem",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRButtonTouched",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRButtonTouched",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRButtonPressed",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRButtonPressed",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRButtonReleased",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRButtonReleased",
                      e
                    )
                ),
                this.streamMessageController.registerMessageHandler(
                  Le.ToStreamer,
                  "XRAnalog",
                  (e) =>
                    this.sendMessageController.sendMessageToStreamer(
                      "XRAnalog",
                      e
                    )
                );
            }
            onCommand(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.Command",
                6
              );
              const t = new TextDecoder("utf-16").decode(e.slice(1));
              i.Log(i.GetStackTrace(), "Data Channel Command: " + t, 6);
              const s = JSON.parse(t);
              "onScreenKeyboard" === s.command &&
                this.pixelStreaming._activateOnScreenKeyboard(s);
            }
            onProtocolMessage(e) {
              try {
                const t = new TextDecoder("utf-16").decode(e.slice(1)),
                  s = JSON.parse(t);
                Object.prototype.hasOwnProperty.call(s, "Direction") ||
                  i.Error(
                    i.GetStackTrace(),
                    "Malformed protocol received. Ensure the protocol message contains a direction"
                  );
                const n = s.Direction;
                delete s.Direction,
                  i.Log(
                    i.GetStackTrace(),
                    `Received new ${
                      n == Le.FromStreamer ? "FromStreamer" : "ToStreamer"
                    } protocol. Updating existing protocol...`
                  ),
                  Object.keys(s).forEach((e) => {
                    const t = s[e];
                    switch (n) {
                      case Le.ToStreamer:
                        if (
                          !Object.prototype.hasOwnProperty.call(t, "id") ||
                          !Object.prototype.hasOwnProperty.call(t, "byteLength")
                        )
                          return void i.Error(
                            i.GetStackTrace(),
                            `ToStreamer->${e} protocol definition was malformed as it didn't contain at least an id and a byteLength\n\n                                           Definition was: ${JSON.stringify(
                              t,
                              null,
                              2
                            )}`
                          );
                        if (
                          t.byteLength > 0 &&
                          !Object.prototype.hasOwnProperty.call(t, "structure")
                        )
                          return void i.Error(
                            i.GetStackTrace(),
                            `ToStreamer->${e} protocol definition was malformed as it specified a byteLength but no accompanying structure`
                          );
                        this.streamMessageController.toStreamerHandlers.get(e)
                          ? this.streamMessageController.toStreamerMessages.add(
                              e,
                              t
                            )
                          : i.Error(
                              i.GetStackTrace(),
                              `There was no registered handler for "${e}" - try adding one using registerMessageHandler(MessageDirection.ToStreamer, "${e}", myHandler)`
                            );
                        break;
                      case Le.FromStreamer:
                        if (!Object.prototype.hasOwnProperty.call(t, "id"))
                          return void i.Error(
                            i.GetStackTrace(),
                            `FromStreamer->${e} protocol definition was malformed as it didn't contain at least an id\n\n                            Definition was: ${JSON.stringify(
                              t,
                              null,
                              2
                            )}`
                          );
                        this.streamMessageController.fromStreamerHandlers.get(e)
                          ? this.streamMessageController.fromStreamerMessages.add(
                              e,
                              t.id
                            )
                          : i.Error(
                              i.GetStackTrace(),
                              `There was no registered handler for "${t}" - try adding one using registerMessageHandler(MessageDirection.FromStreamer, "${e}", myHandler)`
                            );
                        break;
                      default:
                        i.Error(i.GetStackTrace(), `Unknown direction: ${n}`);
                    }
                  }),
                  this.toStreamerMessagesController.SendRequestInitialSettings(),
                  this.toStreamerMessagesController.SendRequestQualityControl();
              } catch (e) {
                i.Log(i.GetStackTrace(), e);
              }
            }
            onInputControlOwnership(e) {
              const t = new Uint8Array(e);
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.InputControlOwnership",
                6
              );
              const s = new Boolean(t[1]).valueOf();
              i.Log(
                i.GetStackTrace(),
                `Received input controller message - will your input control the stream: ${s}`
              ),
                this.pixelStreaming._onInputControlOwnership(s);
            }
            onAfkTriggered() {
              this.afkController.onAfkClick(),
                this.videoPlayer.isPaused() &&
                  this.videoPlayer.hasVideoSource() &&
                  this.playStream();
            }
            setAfkEnabled(e) {
              e
                ? this.onAfkTriggered()
                : this.afkController.stopAfkWarningTimer();
            }
            restartStreamAutomatically() {
              if (this.webSocketController)
                if (
                  this.webSocketController.webSocket &&
                  this.webSocketController.webSocket.readyState !==
                    WebSocket.CLOSED
                ) {
                  (this.pixelStreaming._showActionOrErrorOnDisconnect = !1),
                    this.setDisconnectMessageOverride("Restarting stream..."),
                    this.closeSignalingServer();
                  const e = setTimeout(() => {
                    this.pixelStreaming._onWebRtcAutoConnect(),
                      this.connectToSignallingServer(),
                      clearTimeout(e);
                  }, 3e3);
                } else
                  i.Log(
                    i.GetStackTrace(),
                    "A websocket connection has not been made yet so we will start the stream"
                  ),
                    this.pixelStreaming._onWebRtcAutoConnect(),
                    this.connectToSignallingServer();
              else
                i.Log(
                  i.GetStackTrace(),
                  "The Web Socket Controller does not exist so this will not work right now."
                );
            }
            loadFreezeFrameOrShowPlayOverlay() {
              this.pixelStreaming.dispatchEvent(
                new $({
                  shouldShowPlayOverlay: this.shouldShowPlayOverlay,
                  isValid: this.freezeFrameController.valid,
                  jpegData: this.freezeFrameController.jpeg,
                })
              ),
                !0 === this.shouldShowPlayOverlay
                  ? (i.Log(i.GetStackTrace(), "showing play overlay"),
                    this.resizePlayerStyle())
                  : (i.Log(i.GetStackTrace(), "showing freeze frame"),
                    this.freezeFrameController.showFreezeFrame()),
                setTimeout(() => {
                  this.videoPlayer.setVideoEnabled(!1);
                }, this.freezeFrameController.freezeFrameDelay);
            }
            onFreezeFrameMessage(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.FreezeFrame",
                6
              );
              const t = new Uint8Array(e);
              this.freezeFrameController.processFreezeFrameMessage(t, () =>
                this.loadFreezeFrameOrShowPlayOverlay()
              );
            }
            invalidateFreezeFrameAndEnableVideo() {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.FreezeFrame",
                6
              ),
                setTimeout(() => {
                  this.pixelStreaming.dispatchEvent(new q()),
                    this.freezeFrameController.hideFreezeFrame();
                }, this.freezeFrameController.freezeFrameDelay),
                this.videoPlayer.getVideoElement() &&
                  this.videoPlayer.setVideoEnabled(!0);
            }
            onFileExtension(e) {
              const t = new Uint8Array(e);
              ze.setExtensionFromBytes(t, this.file);
            }
            onFileMimeType(e) {
              const t = new Uint8Array(e);
              ze.setMimeTypeFromBytes(t, this.file);
            }
            onFileContents(e) {
              const t = new Uint8Array(e);
              ze.setContentsFromBytes(t, this.file);
            }
            playStream() {
              if (!this.videoPlayer.getVideoElement()) {
                const e =
                  "Could not play video stream because the video player was not initialized correctly.";
                return (
                  this.pixelStreaming.dispatchEvent(new N({ message: e })),
                  i.Error(i.GetStackTrace(), e),
                  this.setDisconnectMessageOverride(
                    "Stream not initialized correctly"
                  ),
                  void this.closeSignalingServer()
                );
              }
              this.videoPlayer.hasVideoSource()
                ? (this.setTouchInputEnabled(
                    this.config.isFlagEnabled(re.TouchInput)
                  ),
                  this.pixelStreaming.dispatchEvent(new K()),
                  this.streamController.audioElement.srcObject
                    ? ((this.streamController.audioElement.muted =
                        this.config.isFlagEnabled(re.StartVideoMuted)),
                      this.streamController.audioElement
                        .play()
                        .then(() => {
                          this.playVideo();
                        })
                        .catch((e) => {
                          i.Log(i.GetStackTrace(), e),
                            i.Log(
                              i.GetStackTrace(),
                              "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay."
                            ),
                            this.pixelStreaming.dispatchEvent(
                              new Q({ reason: e })
                            );
                        }))
                    : this.playVideo(),
                  (this.shouldShowPlayOverlay = !1),
                  this.freezeFrameController.showFreezeFrame())
                : i.Warning(
                    i.GetStackTrace(),
                    "Cannot play stream, the video element has no srcObject to play."
                  );
            }
            playVideo() {
              this.videoPlayer.play().catch((e) => {
                this.streamController.audioElement.srcObject &&
                  this.streamController.audioElement.pause(),
                  i.Log(i.GetStackTrace(), e),
                  i.Log(
                    i.GetStackTrace(),
                    "Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay."
                  ),
                  this.pixelStreaming.dispatchEvent(new Q({ reason: e }));
              });
            }
            autoPlayVideoOrSetUpPlayOverlay() {
              this.config.isFlagEnabled(re.AutoPlayVideo) && this.playStream(),
                this.resizePlayerStyle();
            }
            connectToSignallingServer() {
              const e = this.signallingUrlBuilder();
              this.webSocketController.connect(e);
            }
            startSession(e) {
              if (
                ((this.peerConfig = e),
                this.config.isFlagEnabled(re.ForceTURN) &&
                  !this.checkTurnServerAvailability(e))
              )
                return (
                  i.Info(
                    i.GetStackTrace(),
                    "No turn server was found in the Peer Connection Options. TURN cannot be forced, closing connection. Please use STUN instead"
                  ),
                  this.setDisconnectMessageOverride(
                    "TURN cannot be forced, closing connection. Please use STUN instead."
                  ),
                  void this.closeSignalingServer()
                );
              (this.peerConnectionController = new Ae(
                this.peerConfig,
                this.config,
                this.preferredCodec
              )),
                (this.peerConnectionController.onVideoStats = (e) =>
                  this.handleVideoStats(e)),
                (this.peerConnectionController.onSendWebRTCOffer = (e) =>
                  this.handleSendWebRTCOffer(e)),
                (this.peerConnectionController.onSendWebRTCAnswer = (e) =>
                  this.handleSendWebRTCAnswer(e)),
                (this.peerConnectionController.onPeerIceCandidate = (e) =>
                  this.handleSendIceCandidate(e)),
                (this.peerConnectionController.onDataChannel = (e) =>
                  this.handleDataChannel(e)),
                (this.peerConnectionController.showTextOverlayConnecting = () =>
                  this.pixelStreaming._onWebRtcConnecting()),
                (this.peerConnectionController.showTextOverlaySetupFailure =
                  () => this.pixelStreaming._onWebRtcFailed());
              let t = !1;
              (this.peerConnectionController.onIceConnectionStateChange =
                () => {
                  !t &&
                    ["connected", "completed"].includes(
                      this.peerConnectionController.peerConnection
                        .iceConnectionState
                    ) &&
                    (this.pixelStreaming._onWebRtcConnected(), (t = !0));
                }),
                (this.peerConnectionController.onTrack = (e) =>
                  this.streamController.handleOnTrack(e)),
                this.config.isFlagEnabled(re.BrowserSendOffer) &&
                  (this.sendrecvDataChannelController.createDataChannel(
                    this.peerConnectionController.peerConnection,
                    "cirrus",
                    this.datachannelOptions
                  ),
                  (this.sendrecvDataChannelController.handleOnMessage = (e) =>
                    this.handleOnMessage(e)),
                  this.peerConnectionController.createOffer(
                    this.sdpConstraints,
                    this.config
                  ));
            }
            checkTurnServerAvailability(e) {
              if (!e.iceServers)
                return (
                  i.Info(i.GetStackTrace(), "A turn sever was not found"), !1
                );
              for (const t of e.iceServers)
                for (const e of t.urls)
                  if (e.includes("turn"))
                    return (
                      i.Log(
                        i.GetStackTrace(),
                        `A turn sever was found at ${e}`
                      ),
                      !0
                    );
              return (
                i.Info(i.GetStackTrace(), "A turn sever was not found"), !1
              );
            }
            handleOnConfigMessage(e) {
              this.resizePlayerStyle(),
                this.startSession(e.peerConnectionOptions),
                (this.webSocketController.onWebRtcAnswer = (e) =>
                  this.handleWebRtcAnswer(e)),
                (this.webSocketController.onWebRtcOffer = (e) =>
                  this.handleWebRtcOffer(e)),
                (this.webSocketController.onWebRtcPeerDataChannels = (e) =>
                  this.handleWebRtcSFUPeerDatachannels(e)),
                (this.webSocketController.onIceCandidate = (e) =>
                  this.handleIceCandidate(e));
            }
            handleStreamerListMessage(e) {
              i.Log(i.GetStackTrace(), `Got streamer list ${e.ids}`, 6);
              const t = [...e.ids];
              t.unshift(""),
                this.config.setOptionSettingOptions(ce.StreamerId, t);
              const s = new URLSearchParams(window.location.search);
              let n = null;
              1 == e.ids.length
                ? (n = e.ids[0])
                : this.config.isFlagEnabled(re.PreferSFU) &&
                  e.ids.includes("SFU")
                ? (n = "SFU")
                : s.has(ce.StreamerId) &&
                  e.ids.includes(s.get(ce.StreamerId)) &&
                  (n = s.get(ce.StreamerId)),
                null !== n &&
                  this.config.setOptionSettingValue(ce.StreamerId, n),
                this.pixelStreaming.dispatchEvent(
                  new j({ messageStreamerList: e, autoSelectedStreamerId: n })
                );
            }
            handleWebRtcAnswer(e) {
              i.Log(i.GetStackTrace(), `Got answer sdp ${e.sdp}`, 6);
              const t = { sdp: e.sdp, type: "answer" };
              this.peerConnectionController.receiveAnswer(t),
                this.handlePostWebrtcNegotiation();
            }
            handleWebRtcOffer(e) {
              i.Log(i.GetStackTrace(), `Got offer sdp ${e.sdp}`, 6),
                (this.isUsingSFU = !!e.sfu && e.sfu),
                this.isUsingSFU &&
                  (this.peerConnectionController.preferredCodec = "");
              const t = { sdp: e.sdp, type: "offer" };
              this.peerConnectionController.receiveOffer(t, this.config),
                this.handlePostWebrtcNegotiation();
            }
            handleWebRtcSFUPeerDatachannels(e) {
              const t = { ordered: !0, negotiated: !0, id: e.sendStreamId },
                s = e.sendStreamId != e.recvStreamId;
              if (
                (this.sendrecvDataChannelController.createDataChannel(
                  this.peerConnectionController.peerConnection,
                  s ? "send-datachannel" : "datachannel",
                  t
                ),
                s)
              ) {
                const t = { ordered: !0, negotiated: !0, id: e.recvStreamId };
                this.recvDataChannelController.createDataChannel(
                  this.peerConnectionController.peerConnection,
                  "recv-datachannel",
                  t
                ),
                  (this.recvDataChannelController.handleOnOpen = () =>
                    this.webSocketController.sendSFURecvDataChannelReady()),
                  (this.recvDataChannelController.handleOnMessage = (e) =>
                    this.handleOnMessage(e));
              } else
                this.sendrecvDataChannelController.handleOnMessage = (e) =>
                  this.handleOnMessage(e);
            }
            handlePostWebrtcNegotiation() {
              this.afkController.startAfkWarningTimer(),
                this.pixelStreaming._onWebRtcSdp(),
                this.statsTimerHandle &&
                  void 0 !== this.statsTimerHandle &&
                  window.clearInterval(this.statsTimerHandle),
                (this.statsTimerHandle = window.setInterval(
                  () => this.getStats(),
                  1e3
                )),
                this.setMouseInputEnabled(
                  this.config.isFlagEnabled(re.MouseInput)
                ),
                this.setKeyboardInputEnabled(
                  this.config.isFlagEnabled(re.KeyboardInput)
                ),
                this.setGamePadInputEnabled(
                  this.config.isFlagEnabled(re.GamepadInput)
                );
            }
            handleIceCandidate(e) {
              i.Log(i.GetStackTrace(), "Web RTC Controller: onWebRtcIce", 6);
              const t = new RTCIceCandidate(e);
              this.peerConnectionController.handleOnIce(t);
            }
            handleSendIceCandidate(e) {
              i.Log(i.GetStackTrace(), "OnIceCandidate", 6),
                e.candidate &&
                  e.candidate.candidate &&
                  this.webSocketController.sendIceCandidate(e.candidate);
            }
            handleDataChannel(e) {
              i.Log(
                i.GetStackTrace(),
                "Data channel created for us by browser as we are a receiving peer.",
                6
              ),
                (this.sendrecvDataChannelController.dataChannel = e.channel),
                this.sendrecvDataChannelController.setupDataChannel(),
                (this.sendrecvDataChannelController.handleOnMessage = (e) =>
                  this.handleOnMessage(e));
            }
            handleSendWebRTCOffer(e) {
              i.Log(i.GetStackTrace(), "Sending the offer to the Server", 6),
                this.webSocketController.sendWebRtcOffer(e);
            }
            handleSendWebRTCAnswer(e) {
              i.Log(i.GetStackTrace(), "Sending the answer to the Server", 6),
                this.webSocketController.sendWebRtcAnswer(e),
                this.isUsingSFU &&
                  this.webSocketController.sendWebRtcDatachannelRequest();
            }
            setUpMouseAndFreezeFrame() {
              (this.videoElementParentClientRect = this.videoPlayer
                .getVideoParentElement()
                .getBoundingClientRect()),
                this.coordinateConverter.setupNormalizeAndQuantize(),
                this.freezeFrameController.freezeFrame.resize();
            }
            closeSignalingServer() {
              this.webSocketController.close();
            }
            closePeerConnection() {
              this.peerConnectionController.close();
            }
            close() {
              this.closeSignalingServer(), this.closePeerConnection();
            }
            getStats() {
              this.peerConnectionController.generateStats();
            }
            sendLatencyTest() {
              (this.latencyStartTime = Date.now()),
                this.sendDescriptorController.sendLatencyTest({
                  StartTime: this.latencyStartTime,
                });
            }
            sendEncoderMinQP(e) {
              i.Log(i.GetStackTrace(), `MinQP=${e}\n`, 6),
                null != e &&
                  this.sendDescriptorController.emitCommand({
                    "Encoder.MinQP": e,
                  });
            }
            sendEncoderMaxQP(e) {
              i.Log(i.GetStackTrace(), `MaxQP=${e}\n`, 6),
                null != e &&
                  this.sendDescriptorController.emitCommand({
                    "Encoder.MaxQP": e,
                  });
            }
            sendWebRTCMinBitrate(e) {
              i.Log(i.GetStackTrace(), `WebRTC Min Bitrate=${e}`, 6),
                null != e &&
                  this.sendDescriptorController.emitCommand({
                    "WebRTC.MinBitrate": e,
                  });
            }
            sendWebRTCMaxBitrate(e) {
              i.Log(i.GetStackTrace(), `WebRTC Max Bitrate=${e}`, 6),
                null != e &&
                  this.sendDescriptorController.emitCommand({
                    "WebRTC.MaxBitrate": e,
                  });
            }
            sendWebRTCFps(e) {
              i.Log(i.GetStackTrace(), `WebRTC FPS=${e}`, 6),
                null != e &&
                  (this.sendDescriptorController.emitCommand({
                    "WebRTC.Fps": e,
                  }),
                  this.sendDescriptorController.emitCommand({
                    "WebRTC.MaxFps": e,
                  }));
            }
            sendShowFps() {
              i.Log(
                i.GetStackTrace(),
                "----   Sending show stat to UE   ----",
                6
              ),
                this.sendDescriptorController.emitCommand({ "stat.fps": "" });
            }
            sendIframeRequest() {
              i.Log(
                i.GetStackTrace(),
                "----   Sending Request for an IFrame  ----",
                6
              ),
                this.streamMessageController.toStreamerHandlers.get(
                  "IFrameRequest"
                )();
            }
            emitUIInteraction(e) {
              i.Log(
                i.GetStackTrace(),
                "----   Sending custom UIInteraction message   ----",
                6
              ),
                this.sendDescriptorController.emitUIInteraction(e);
            }
            emitCommand(e) {
              i.Log(
                i.GetStackTrace(),
                "----   Sending custom Command message   ----",
                6
              ),
                this.sendDescriptorController.emitCommand(e);
            }
            emitConsoleCommand(e) {
              i.Log(
                i.GetStackTrace(),
                "----   Sending custom Command:ConsoleCommand message   ----",
                6
              ),
                this.sendDescriptorController.emitCommand({
                  ConsoleCommand: e,
                });
            }
            sendRequestQualityControlOwnership() {
              i.Log(
                i.GetStackTrace(),
                "----   Sending Request to Control Quality  ----",
                6
              ),
                this.toStreamerMessagesController.SendRequestQualityControl();
            }
            handleLatencyTestResult(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.latencyTest",
                6
              );
              const t = new TextDecoder("utf-16").decode(e.slice(1)),
                s = new Ie();
              Object.assign(s, JSON.parse(t)),
                s.processFields(),
                (s.testStartTimeMs = this.latencyStartTime),
                (s.browserReceiptTimeMs = Date.now()),
                (s.latencyExcludingDecode = ~~(
                  s.browserReceiptTimeMs - s.testStartTimeMs
                )),
                (s.testDuration = ~~(s.TransmissionTimeMs - s.ReceiptTimeMs)),
                (s.networkLatency = ~~(
                  s.latencyExcludingDecode - s.testDuration
                )),
                s.frameDisplayDeltaTimeMs &&
                  s.browserReceiptTimeMs &&
                  (s.endToEndLatency =
                    (s.frameDisplayDeltaTimeMs,
                    s.networkLatency,
                    ~~+s.CaptureToSendMs)),
                this.pixelStreaming._onLatencyTestResult(s);
            }
            handleInitialSettings(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.InitialSettings",
                6
              );
              const t = new TextDecoder("utf-16").decode(e.slice(1)),
                s = JSON.parse(t),
                n = new Fe();
              s.Encoder && (n.EncoderSettings = s.Encoder),
                s.WebRTC && (n.WebRTCSettings = s.WebRTC),
                s.PixelStreaming &&
                  (n.PixelStreamingSettings = s.PixelStreaming),
                s.ConfigOptions &&
                  this.config.setFlagEnabled(
                    re.HoveringMouseMode,
                    !!s.ConfigOptions.DefaultToHover
                  ),
                n.ueCompatible(),
                i.Log(i.GetStackTrace(), t, 6),
                this.pixelStreaming._onInitialSettings(n);
            }
            handleVideoEncoderAvgQP(e) {
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.VideoEncoderAvgQP",
                6
              );
              const t = Number(new TextDecoder("utf-16").decode(e.slice(1)));
              this.setVideoEncoderAvgQP(t);
            }
            handleVideoInitialized() {
              this.pixelStreaming._onVideoInitialized(),
                this.autoPlayVideoOrSetUpPlayOverlay(),
                this.resizePlayerStyle(),
                this.videoPlayer.updateVideoStreamSize();
            }
            onQualityControlOwnership(e) {
              const t = new Uint8Array(e);
              i.Log(
                i.GetStackTrace(),
                "DataChannelReceiveMessageType.QualityControlOwnership",
                6
              ),
                (this.isQualityController = new Boolean(t[1]).valueOf()),
                i.Log(
                  i.GetStackTrace(),
                  `Received quality controller message, will control quality: ${this.isQualityController}`
                ),
                this.pixelStreaming._onQualityControlOwnership(
                  this.isQualityController
                );
            }
            handleVideoStats(e) {
              this.pixelStreaming._onVideoStats(e);
            }
            resizePlayerStyle() {
              this.videoPlayer.resizePlayerStyle();
            }
            getDisconnectMessageOverride() {
              return this.disconnectMessageOverride;
            }
            setDisconnectMessageOverride(e) {
              this.disconnectMessageOverride = e;
            }
            setPreferredCodec(e) {
              (this.preferredCodec = e),
                this.peerConnectionController &&
                  ((this.peerConnectionController.preferredCodec = e),
                  (this.peerConnectionController.updateCodecSelection = !1));
            }
            setVideoEncoderAvgQP(e) {
              (this.videoAvgQp = e),
                this.pixelStreaming._onVideoEncoderAvgQP(this.videoAvgQp);
            }
            setKeyboardInputEnabled(e) {
              var t;
              null === (t = this.keyboardController) ||
                void 0 === t ||
                t.unregisterKeyBoardEvents(),
                e &&
                  (this.keyboardController =
                    this.inputClassesFactory.registerKeyBoard(this.config));
            }
            setMouseInputEnabled(e) {
              var t;
              if (
                (null === (t = this.mouseController) ||
                  void 0 === t ||
                  t.unregisterMouseEvents(),
                e)
              ) {
                const e = this.config.isFlagEnabled(re.HoveringMouseMode)
                  ? ue.HoveringMouse
                  : ue.LockedMouse;
                this.mouseController =
                  this.inputClassesFactory.registerMouse(e);
              }
            }
            setTouchInputEnabled(e) {
              var t;
              null === (t = this.touchController) ||
                void 0 === t ||
                t.unregisterTouchEvents(),
                e &&
                  (this.touchController =
                    this.inputClassesFactory.registerTouch(
                      this.config.isFlagEnabled(re.FakeMouseWithTouches),
                      this.videoElementParentClientRect
                    ));
            }
            setGamePadInputEnabled(e) {
              var t;
              null === (t = this.gamePadController) ||
                void 0 === t ||
                t.unregisterGamePadEvents(),
                e &&
                  (this.gamePadController =
                    this.inputClassesFactory.registerGamePad());
            }
            registerDataChannelEventEmitters(e) {
              (e.onOpen = (e, t) =>
                this.pixelStreaming.dispatchEvent(
                  new B({ label: e, event: t })
                )),
                (e.onClose = (e, t) =>
                  this.pixelStreaming.dispatchEvent(
                    new _({ label: e, event: t })
                  )),
                (e.onError = (e, t) =>
                  this.pixelStreaming.dispatchEvent(
                    new W({ label: e, event: t })
                  ));
            }
          }
          class gt {
            static vertexShader() {
              return "\n\t\tattribute vec2 a_position;\n\t\tattribute vec2 a_texCoord;\n\n\t\t// input\n\t\tuniform vec2 u_resolution;\n\t\tuniform vec4 u_offset;\n\n\t\t//\n\t\tvarying vec2 v_texCoord;\n\n\t\tvoid main() {\n\t\t   // convert the rectangle from pixels to 0.0 to 1.0\n\t\t   vec2 zeroToOne = a_position / u_resolution;\n\n\t\t   // convert from 0->1 to 0->2\n\t\t   vec2 zeroToTwo = zeroToOne * 2.0;\n\n\t\t   // convert from 0->2 to -1->+1 (clipspace)\n\t\t   vec2 clipSpace = zeroToTwo - 1.0;\n\n\t\t   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\t\t   // pass the texCoord to the fragment shader\n\t\t   // The GPU will interpolate this value between points.\n\t\t   v_texCoord = (a_texCoord * u_offset.xy) + u_offset.zw;\n\t\t}\n\t\t";
            }
            static fragmentShader() {
              return "\n\t\tprecision mediump float;\n\n\t\t// our texture\n\t\tuniform sampler2D u_image;\n\n\t\t// the texCoords passed in from the vertex shader.\n\t\tvarying vec2 v_texCoord;\n\n\t\tvoid main() {\n\t\t   gl_FragColor = texture2D(u_image, v_texCoord);\n\t\t}\n\t\t";
            }
          }
          class ut {
            static deepCopyGamepad(e) {
              return JSON.parse(
                JSON.stringify({
                  buttons: e.buttons.map((e) =>
                    JSON.parse(
                      JSON.stringify({ pressed: e.pressed, touched: e.touched })
                    )
                  ),
                  axes: e.axes,
                })
              );
            }
          }
          class mt {
            constructor(e) {
              (this.toStreamerMessagesProvider = e), (this.controllers = []);
            }
            updateStatus(e, t, s) {
              if (e.gamepad) {
                const n = t.getPose(e.gripSpace, s);
                if (!n) return;
                let r = 0;
                e.profiles.includes("htc-vive")
                  ? (r = 1)
                  : e.profiles.includes("oculus-touch") && (r = 2),
                  this.toStreamerMessagesProvider.toStreamerHandlers.get(
                    "XRSystem"
                  )([r]);
                let i = 2;
                switch (e.handedness) {
                  case "left":
                    i = 0;
                    break;
                  case "right":
                    i = 1;
                }
                const o = n.transform.matrix,
                  a = [];
                for (let e = 0; e < 16; e++) a[e] = new Float32Array([o[e]])[0];
                this.toStreamerMessagesProvider.toStreamerHandlers.get(
                  "XRControllerTransform"
                )([
                  a[0],
                  a[4],
                  a[8],
                  a[12],
                  a[1],
                  a[5],
                  a[9],
                  a[13],
                  a[2],
                  a[6],
                  a[10],
                  a[14],
                  a[3],
                  a[7],
                  a[11],
                  a[15],
                  i,
                ]),
                  void 0 === this.controllers[i] &&
                    ((this.controllers[i] = {
                      prevState: void 0,
                      currentState: void 0,
                    }),
                    (this.controllers[i].prevState = ut.deepCopyGamepad(
                      e.gamepad
                    ))),
                  (this.controllers[i].currentState = ut.deepCopyGamepad(
                    e.gamepad
                  ));
                const l = this.controllers[i],
                  d = l.currentState,
                  c = l.prevState;
                for (let e = 0; e < d.buttons.length; e++) {
                  const t = d.buttons[e],
                    s = c.buttons[e];
                  t.pressed
                    ? this.toStreamerMessagesProvider.toStreamerHandlers.get(
                        "XRButtonPressed"
                      )([i, e, s.pressed ? 1 : 0])
                    : !t.pressed &&
                      s.pressed &&
                      this.toStreamerMessagesProvider.toStreamerHandlers.get(
                        "XRButtonReleased"
                      )([i, e, 0]),
                    t.touched && !t.pressed
                      ? this.toStreamerMessagesProvider.toStreamerHandlers.get(
                          "XRButtonPressed"
                        )([i, 3, s.touched ? 1 : 0])
                      : !t.touched &&
                        s.touched &&
                        this.toStreamerMessagesProvider.toStreamerHandlers.get(
                          "XRButtonReleased"
                        )([i, 3, 0]);
                }
                for (let e = 0; e < d.axes.length; e++)
                  this.toStreamerMessagesProvider.toStreamerHandlers.get(
                    "XRAnalog"
                  )([i, e, d.axes[e]]);
                this.controllers[i].prevState = d;
              }
            }
          }
          class St {
            constructor(e) {
              (this.xrSession = null),
                (this.webRtcController = e),
                (this.xrControllers = []),
                (this.xrGamepadController = new mt(
                  this.webRtcController.streamMessageController
                )),
                (this.onSessionEnded = new EventTarget()),
                (this.onSessionStarted = new EventTarget()),
                (this.onFrame = new EventTarget());
            }
            xrClicked() {
              this.xrSession
                ? this.xrSession.end()
                : navigator.xr.requestSession("immersive-vr").then((e) => {
                    this.onXrSessionStarted(e);
                  });
            }
            onXrSessionEnded() {
              i.Log(i.GetStackTrace(), "XR Session ended"),
                (this.xrSession = null),
                this.onSessionEnded.dispatchEvent(new Event("xrSessionEnded"));
            }
            onXrSessionStarted(e) {
              i.Log(i.GetStackTrace(), "XR Session started"),
                (this.xrSession = e),
                this.xrSession.addEventListener("end", () => {
                  this.onXrSessionEnded();
                });
              const t = document.createElement("canvas");
              (this.gl = t.getContext("webgl2", { xrCompatible: !0 })),
                this.xrSession.updateRenderState({
                  baseLayer: new XRWebGLLayer(this.xrSession, this.gl),
                });
              const s = this.gl.createShader(this.gl.VERTEX_SHADER);
              this.gl.shaderSource(s, gt.vertexShader()),
                this.gl.compileShader(s);
              const n = this.gl.createShader(this.gl.FRAGMENT_SHADER);
              this.gl.shaderSource(n, gt.fragmentShader()),
                this.gl.compileShader(n);
              const r = this.gl.createProgram();
              this.gl.attachShader(r, s),
                this.gl.attachShader(r, n),
                this.gl.linkProgram(r),
                this.gl.useProgram(r),
                (this.positionLocation = this.gl.getAttribLocation(
                  r,
                  "a_position"
                )),
                (this.texcoordLocation = this.gl.getAttribLocation(
                  r,
                  "a_texCoord"
                )),
                (this.positionBuffer = this.gl.createBuffer()),
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionBuffer),
                this.gl.enableVertexAttribArray(this.positionLocation);
              const o = this.gl.createTexture();
              this.gl.bindTexture(this.gl.TEXTURE_2D, o),
                this.gl.texParameteri(
                  this.gl.TEXTURE_2D,
                  this.gl.TEXTURE_WRAP_S,
                  this.gl.CLAMP_TO_EDGE
                ),
                this.gl.texParameteri(
                  this.gl.TEXTURE_2D,
                  this.gl.TEXTURE_WRAP_T,
                  this.gl.CLAMP_TO_EDGE
                ),
                this.gl.texParameteri(
                  this.gl.TEXTURE_2D,
                  this.gl.TEXTURE_MIN_FILTER,
                  this.gl.NEAREST
                ),
                this.gl.texParameteri(
                  this.gl.TEXTURE_2D,
                  this.gl.TEXTURE_MAG_FILTER,
                  this.gl.NEAREST
                ),
                (this.texcoordBuffer = this.gl.createBuffer()),
                (this.resolutionLocation = this.gl.getUniformLocation(
                  r,
                  "u_resolution"
                )),
                (this.offsetLocation = this.gl.getUniformLocation(
                  r,
                  "u_offset"
                )),
                e.requestReferenceSpace("local").then((e) => {
                  (this.xrRefSpace = e),
                    this.xrSession.requestAnimationFrame((e, t) =>
                      this.onXrFrame(e, t)
                    );
                }),
                this.onSessionStarted.dispatchEvent(
                  new Event("xrSessionStarted")
                );
            }
            onXrFrame(e, t) {
              const s = t.getViewerPose(this.xrRefSpace);
              if (s) {
                const e = s.transform.matrix,
                  t = [];
                for (let s = 0; s < 16; s++) t[s] = new Float32Array([e[s]])[0];
                this.webRtcController.streamMessageController.toStreamerHandlers.get(
                  "XRHMDTransform"
                )([
                  t[0],
                  t[4],
                  t[8],
                  t[12],
                  t[1],
                  t[5],
                  t[9],
                  t[13],
                  t[2],
                  t[6],
                  t[10],
                  t[14],
                  t[3],
                  t[7],
                  t[11],
                  t[15],
                ]);
                const n = this.xrSession.renderState.baseLayer;
                this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, n.framebuffer),
                  this.gl.texImage2D(
                    this.gl.TEXTURE_2D,
                    0,
                    this.gl.RGBA,
                    this.gl.RGBA,
                    this.gl.UNSIGNED_BYTE,
                    this.webRtcController.videoPlayer.getVideoElement()
                  ),
                  this.render(
                    this.webRtcController.videoPlayer.getVideoElement()
                  );
              }
              this.webRtcController.config.isFlagEnabled(
                re.XRControllerInput
              ) &&
                this.xrSession.inputSources.forEach((e, s, n) => {
                  this.xrGamepadController.updateStatus(e, t, this.xrRefSpace);
                }, this),
                this.xrSession.requestAnimationFrame((e, t) =>
                  this.onXrFrame(e, t)
                ),
                this.onFrame.dispatchEvent(new se({ time: e, frame: t }));
            }
            render(e) {
              if (!this.gl) return;
              const t = this.xrSession.renderState.baseLayer;
              let s, n, r, i, o;
              this.gl.viewport(0, 0, t.framebufferWidth, t.framebufferHeight),
                this.gl.uniform4f(this.offsetLocation, 1, 1, 0, 0),
                this.gl.bufferData(
                  this.gl.ARRAY_BUFFER,
                  new Float32Array([
                    0,
                    0,
                    e.videoWidth,
                    0,
                    0,
                    e.videoHeight,
                    0,
                    e.videoHeight,
                    e.videoWidth,
                    0,
                    e.videoWidth,
                    e.videoHeight,
                  ]),
                  this.gl.STATIC_DRAW
                ),
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.texcoordBuffer),
                this.gl.bufferData(
                  this.gl.ARRAY_BUFFER,
                  new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]),
                  this.gl.STATIC_DRAW
                ),
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionBuffer),
                (s = 2),
                (n = this.gl.FLOAT),
                (r = !1),
                (i = 0),
                (o = 0),
                this.gl.vertexAttribPointer(
                  this.positionLocation,
                  s,
                  n,
                  r,
                  i,
                  o
                ),
                this.gl.enableVertexAttribArray(this.texcoordLocation),
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.texcoordBuffer),
                (s = 2),
                (n = this.gl.FLOAT),
                (r = !1),
                (i = 0),
                (o = 0),
                this.gl.vertexAttribPointer(
                  this.texcoordLocation,
                  s,
                  n,
                  r,
                  i,
                  o
                ),
                this.gl.uniform2f(
                  this.resolutionLocation,
                  e.videoWidth,
                  e.videoHeight
                );
              const a = this.gl.TRIANGLES;
              (o = 0), this.gl.drawArrays(a, o, 6);
            }
            static isSessionSupported(e) {
              return navigator.xr
                ? navigator.xr.isSessionSupported(e)
                : new Promise(() => !1);
            }
          }
          class pt {
            constructor(e) {
              (this.editTextButton = null),
                (this.hiddenInput = null),
                "ontouchstart" in document.documentElement &&
                  this.createOnScreenKeyboardHelpers(e);
            }
            unquantizeAndDenormalizeUnsigned(e, t) {
              return null;
            }
            createOnScreenKeyboardHelpers(e) {
              this.hiddenInput ||
                ((this.hiddenInput = document.createElement("input")),
                (this.hiddenInput.id = "hiddenInput"),
                (this.hiddenInput.maxLength = 0),
                e.appendChild(this.hiddenInput)),
                this.editTextButton ||
                  ((this.editTextButton = document.createElement("button")),
                  (this.editTextButton.id = "editTextButton"),
                  (this.editTextButton.innerHTML = "edit text"),
                  e.appendChild(this.editTextButton),
                  this.editTextButton.classList.add("hiddenState"),
                  this.editTextButton.addEventListener("touchend", (e) => {
                    this.hiddenInput.focus(), e.preventDefault();
                  }));
            }
            showOnScreenKeyboard(e) {
              if (e.showOnScreenKeyboard) {
                this.editTextButton.classList.remove("hiddenState");
                const t = this.unquantizeAndDenormalizeUnsigned(e.x, e.y);
                (this.editTextButton.style.top = t.y.toString() + "px"),
                  (this.editTextButton.style.left =
                    (t.x - 40).toString() + "px");
              } else
                this.editTextButton.classList.add("hiddenState"),
                  this.hiddenInput.blur();
            }
          }
          class vt {
            constructor(e, t) {
              (this._showActionOrErrorOnDisconnect = !0),
                (this.allowConsoleCommands = !1),
                (this.config = e),
                (null == t ? void 0 : t.videoElementParent) &&
                  (this._videoElementParent = t.videoElementParent),
                (this._eventEmitter = new ne()),
                this.configureSettings(),
                this.setWebRtcPlayerController(new ht(this.config, this)),
                (this.onScreenKeyboardHelper = new pt(this.videoElementParent)),
                (this.onScreenKeyboardHelper.unquantizeAndDenormalizeUnsigned =
                  (e, t) =>
                    this._webRtcController.requestUnquantizedAndDenormalizeUnsigned(
                      e,
                      t
                    )),
                (this._activateOnScreenKeyboard = (e) =>
                  this.onScreenKeyboardHelper.showOnScreenKeyboard(e)),
                (this._webXrController = new St(this._webRtcController));
            }
            get videoElementParent() {
              return (
                this._videoElementParent ||
                  ((this._videoElementParent = document.createElement("div")),
                  (this._videoElementParent.id = "videoElementParent")),
                this._videoElementParent
              );
            }
            configureSettings() {
              this.config._addOnSettingChangedListener(
                re.IsQualityController,
                (e) => {
                  !0 !== e ||
                    this._webRtcController.isQualityController ||
                    this._webRtcController.sendRequestQualityControlOwnership();
                }
              ),
                this.config._addOnSettingChangedListener(
                  re.AFKDetection,
                  (e) => {
                    this._webRtcController.setAfkEnabled(e);
                  }
                ),
                this.config._addOnSettingChangedListener(
                  re.MatchViewportResolution,
                  () => {
                    this._webRtcController.videoPlayer.updateVideoStreamSize();
                  }
                ),
                this.config._addOnSettingChangedListener(
                  re.HoveringMouseMode,
                  (e) => {
                    this.config.setFlagLabel(
                      re.HoveringMouseMode,
                      `Control Scheme: ${e ? "Hovering" : "Locked"} Mouse`
                    ),
                      this._webRtcController.setMouseInputEnabled(
                        this.config.isFlagEnabled(re.MouseInput)
                      );
                  }
                ),
                this.config._addOnSettingChangedListener(
                  re.KeyboardInput,
                  (e) => {
                    this._webRtcController.setKeyboardInputEnabled(e);
                  }
                ),
                this.config._addOnSettingChangedListener(re.MouseInput, (e) => {
                  this._webRtcController.setMouseInputEnabled(e);
                }),
                this.config._addOnSettingChangedListener(re.TouchInput, (e) => {
                  this._webRtcController.setTouchInputEnabled(e);
                }),
                this.config._addOnSettingChangedListener(
                  re.GamepadInput,
                  (e) => {
                    this._webRtcController.setGamePadInputEnabled(e);
                  }
                ),
                this.config._addOnNumericSettingChangedListener(
                  oe.MinQP,
                  (e) => {
                    i.Log(
                      i.GetStackTrace(),
                      "--------  Sending MinQP  --------",
                      7
                    ),
                      this._webRtcController.sendEncoderMinQP(e),
                      i.Log(
                        i.GetStackTrace(),
                        "-------------------------------------------",
                        7
                      );
                  }
                ),
                this.config._addOnNumericSettingChangedListener(
                  oe.MaxQP,
                  (e) => {
                    i.Log(
                      i.GetStackTrace(),
                      "--------  Sending encoder settings  --------",
                      7
                    ),
                      this._webRtcController.sendEncoderMaxQP(e),
                      i.Log(
                        i.GetStackTrace(),
                        "-------------------------------------------",
                        7
                      );
                  }
                ),
                this.config._addOnNumericSettingChangedListener(
                  oe.WebRTCMinBitrate,
                  (e) => {
                    i.Log(
                      i.GetStackTrace(),
                      "--------  Sending web rtc settings  --------",
                      7
                    ),
                      this._webRtcController.sendWebRTCMinBitrate(1e3 * e),
                      i.Log(
                        i.GetStackTrace(),
                        "-------------------------------------------",
                        7
                      );
                  }
                ),
                this.config._addOnNumericSettingChangedListener(
                  oe.WebRTCMaxBitrate,
                  (e) => {
                    i.Log(
                      i.GetStackTrace(),
                      "--------  Sending web rtc settings  --------",
                      7
                    ),
                      this._webRtcController.sendWebRTCMaxBitrate(1e3 * e),
                      i.Log(
                        i.GetStackTrace(),
                        "-------------------------------------------",
                        7
                      );
                  }
                ),
                this.config._addOnNumericSettingChangedListener(
                  oe.WebRTCFPS,
                  (e) => {
                    i.Log(
                      i.GetStackTrace(),
                      "--------  Sending web rtc settings  --------",
                      7
                    ),
                      this._webRtcController.sendWebRTCFps(e),
                      i.Log(
                        i.GetStackTrace(),
                        "-------------------------------------------",
                        7
                      );
                  }
                ),
                this.config._addOnOptionSettingChangedListener(
                  ce.PreferredCodec,
                  (e) => {
                    this._webRtcController &&
                      this._webRtcController.setPreferredCodec(e);
                  }
                ),
                this.config._registerOnChangeEvents(this._eventEmitter);
            }
            _activateOnScreenKeyboard(e) {
              throw new Error("Method not implemented.");
            }
            _onInputControlOwnership(e) {
              this._inputController = e;
            }
            setWebRtcPlayerController(e) {
              (this._webRtcController = e),
                this._webRtcController.setPreferredCodec(
                  this.config.getSettingOption(ce.PreferredCodec).selected
                ),
                this._webRtcController.resizePlayerStyle(),
                this.checkForAutoConnect();
            }
            connect() {
              this._webRtcController.connectToSignallingServer();
            }
            reconnect() {
              this._webRtcController.restartStreamAutomatically();
            }
            disconnect() {
              this._webRtcController.close();
            }
            play() {
              this._onStreamLoading(), this._webRtcController.playStream();
            }
            checkForAutoConnect() {
              this.config.isFlagEnabled(re.AutoConnect) &&
                (this._onWebRtcAutoConnect(),
                this._webRtcController.connectToSignallingServer());
            }
            _onWebRtcAutoConnect() {
              this._eventEmitter.dispatchEvent(new O()),
                (this._showActionOrErrorOnDisconnect = !0);
            }
            _onWebRtcSdp() {
              this._eventEmitter.dispatchEvent(new D());
            }
            _onStreamLoading() {
              this._eventEmitter.dispatchEvent(new V());
            }
            _onDisconnect(e) {
              "" != this._webRtcController.getDisconnectMessageOverride() &&
                void 0 !==
                  this._webRtcController.getDisconnectMessageOverride() &&
                null != this._webRtcController.getDisconnectMessageOverride() &&
                ((e = this._webRtcController.getDisconnectMessageOverride()),
                this._webRtcController.setDisconnectMessageOverride("")),
                this._eventEmitter.dispatchEvent(
                  new G({
                    eventString: e,
                    showActionOrErrorOnDisconnect:
                      this._showActionOrErrorOnDisconnect,
                  })
                ),
                0 == this._showActionOrErrorOnDisconnect &&
                  (this._showActionOrErrorOnDisconnect = !0);
            }
            _onWebRtcConnecting() {
              this._eventEmitter.dispatchEvent(new U());
            }
            _onWebRtcConnected() {
              this._eventEmitter.dispatchEvent(new I());
            }
            _onWebRtcFailed() {
              this._eventEmitter.dispatchEvent(new z());
            }
            _onVideoInitialized() {
              this._eventEmitter.dispatchEvent(new H()),
                (this._videoStartTime = Date.now());
            }
            _onLatencyTestResult(e) {
              this._eventEmitter.dispatchEvent(new Y({ latencyTimings: e }));
            }
            _onVideoStats(e) {
              (this._videoStartTime && void 0 !== this._videoStartTime) ||
                (this._videoStartTime = Date.now()),
                e.handleSessionStatistics(
                  this._videoStartTime,
                  this._inputController,
                  this._webRtcController.videoAvgQp
                ),
                this._eventEmitter.dispatchEvent(new X({ aggregatedStats: e }));
            }
            _onVideoEncoderAvgQP(e) {
              this._eventEmitter.dispatchEvent(new F({ avgQP: e }));
            }
            _onInitialSettings(e) {
              var t;
              this._eventEmitter.dispatchEvent(new J({ settings: e })),
                e.PixelStreamingSettings &&
                  ((this.allowConsoleCommands =
                    null !==
                      (t =
                        e.PixelStreamingSettings.AllowPixelStreamingCommands) &&
                    void 0 !== t &&
                    t),
                  !1 === this.allowConsoleCommands &&
                    i.Info(
                      i.GetStackTrace(),
                      "-AllowPixelStreamingCommands=false, sending arbitrary console commands from browser to UE is disabled."
                    ));
              const s = this.config.useUrlParams,
                n = new URLSearchParams(window.location.search);
              e.EncoderSettings &&
                (this.config.setNumericSetting(
                  oe.MinQP,
                  s && n.has(oe.MinQP)
                    ? Number.parseInt(n.get(oe.MinQP))
                    : e.EncoderSettings.MinQP
                ),
                this.config.setNumericSetting(
                  oe.MaxQP,
                  s && n.has(oe.MaxQP)
                    ? Number.parseInt(n.get(oe.MaxQP))
                    : e.EncoderSettings.MaxQP
                )),
                e.WebRTCSettings &&
                  (this.config.setNumericSetting(
                    oe.WebRTCMinBitrate,
                    s && n.has(oe.WebRTCMinBitrate)
                      ? Number.parseInt(n.get(oe.WebRTCMinBitrate)) / 1e3
                      : e.WebRTCSettings.MinBitrate / 1e3
                  ),
                  this.config.setNumericSetting(
                    oe.WebRTCMaxBitrate,
                    s && n.has(oe.WebRTCMaxBitrate)
                      ? Number.parseInt(n.get(oe.WebRTCMaxBitrate)) / 1e3
                      : e.WebRTCSettings.MaxBitrate / 1e3
                  ),
                  this.config.setNumericSetting(
                    oe.WebRTCFPS,
                    s && n.has(oe.WebRTCFPS)
                      ? Number.parseInt(n.get(oe.WebRTCFPS))
                      : e.WebRTCSettings.FPS
                  ));
            }
            _onQualityControlOwnership(e) {
              this.config.setFlagEnabled(re.IsQualityController, e);
            }
            requestLatencyTest() {
              return (
                !!this._webRtcController.videoPlayer.isVideoReady() &&
                (this._webRtcController.sendLatencyTest(), !0)
              );
            }
            requestShowFps() {
              return (
                !!this._webRtcController.videoPlayer.isVideoReady() &&
                (this._webRtcController.sendShowFps(), !0)
              );
            }
            requestIframe() {
              return (
                !!this._webRtcController.videoPlayer.isVideoReady() &&
                (this._webRtcController.sendIframeRequest(), !0)
              );
            }
            emitUIInteraction(e) {
              return (
                !!this._webRtcController.videoPlayer.isVideoReady() &&
                (this._webRtcController.emitUIInteraction(e), !0)
              );
            }
            emitCommand(e) {
              return !(
                !this._webRtcController.videoPlayer.isVideoReady() ||
                (!this.allowConsoleCommands && "ConsoleCommand" in e) ||
                (this._webRtcController.emitCommand(e), 0)
              );
            }
            emitConsoleCommand(e) {
              return !(
                !this.allowConsoleCommands ||
                !this._webRtcController.videoPlayer.isVideoReady() ||
                (this._webRtcController.emitConsoleCommand(e), 0)
              );
            }
            addResponseEventListener(e, t) {
              this._webRtcController.responseController.addResponseEventListener(
                e,
                t
              );
            }
            removeResponseEventListener(e) {
              this._webRtcController.responseController.removeResponseEventListener(
                e
              );
            }
            dispatchEvent(e) {
              return this._eventEmitter.dispatchEvent(e);
            }
            addEventListener(e, t) {
              this._eventEmitter.addEventListener(e, t);
            }
            removeEventListener(e, t) {
              this._eventEmitter.removeEventListener(e, t);
            }
            toggleXR() {
              this.webXrController.xrClicked();
            }
            setSignallingUrlBuilder(e) {
              this._webRtcController.signallingUrlBuilder = e;
            }
            get webSocketController() {
              return this._webRtcController.webSocketController;
            }
            get webXrController() {
              return this._webXrController;
            }
          }
          var Ct = r.Dz,
            ft = r.g$,
            Tt = r.Lt,
            Et = r.Q9,
            yt = r.qf,
            bt = r.hV,
            Mt = r.z$,
            wt = r.J0,
            Pt = r.De,
            kt = r.$C,
            Rt = r.al,
            Lt = r._W,
            xt = r.tz,
            At = r.Nu,
            Ft = r.zg,
            Dt = r.vp,
            Ot = r.vU,
            Ut = r.wF,
            It = r.rv,
            zt = r.Nh,
            Gt = r.ss,
            Bt = r.qW,
            _t = r.QL,
            Wt = r.cf,
            Ht = r.eM,
            Vt = r.Yd,
            Nt = r.iM,
            Kt = r.qy,
            Qt = r.ce,
            $t = r.sK,
            qt = r.Ok,
            Xt = r.q5,
            jt = r.g,
            Yt = r.xl,
            Jt = r.I,
            Zt = r.bx,
            es = r.Ib,
            ts = r.Az,
            ss = r.Iw,
            ns = r.qY,
            rs = r.db,
            is = r.mR,
            os = r.Tn,
            as = r.rV,
            ls = r.gh,
            ds = r.i5,
            cs = r.x_,
            hs = r.Am,
            gs = r.eR,
            us = r.r8,
            ms = r.u3,
            Ss = r.vd,
            ps = r.iV,
            vs = r.jZ,
            Cs = r.SW,
            fs = r.ZH,
            Ts = r.Ni,
            Es = r.lh,
            ys = r.bq,
            bs = r.$f,
            Ms = r.eu,
            ws = r.Ax,
            Ps = r.Mc;

          /***/
        },

      /***/ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js":
        /*!******************************************************************************************************************!*\
  !*** ./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js ***!
  \******************************************************************************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ AFKOverlay: () => /* binding */ Q,
            /* harmony export */ ActionOverlay: () => /* binding */ W,
            /* harmony export */ Application: () => /* binding */ Z,
            /* harmony export */ ConfigUI: () => /* binding */ X,
            /* harmony export */ ConnectOverlay: () => /* binding */ j,
            /* harmony export */ DisconnectOverlay: () => /* binding */ q,
            /* harmony export */ ErrorOverlay: () => /* binding */ V,
            /* harmony export */ InfoOverlay: () => /* binding */ G,
            /* harmony export */ OverlayBase: () => /* binding */ J,
            /* harmony export */ PixelStreamingApplicationStyle: () =>
              /* binding */ Y,
            /* harmony export */ PlayOverlay: () => /* binding */ K,
            /* harmony export */ SettingUIBase: () => /* binding */ $,
            /* harmony export */ SettingUIFlag: () => /* binding */ tt,
            /* harmony export */ SettingUINumber: () => /* binding */ et,
            /* harmony export */ SettingUIOption: () => /* binding */ st,
            /* harmony export */ SettingUIText: () => /* binding */ it,
            /* harmony export */ TextOverlay: () => /* binding */ nt,
            /* harmony export */
          });
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js"
            );
          /* harmony import */ var jss__WEBPACK_IMPORTED_MODULE_1__ =
            __webpack_require__(
              /*! jss */ "./node_modules/jss/dist/jss.esm.js"
            );
          /* harmony import */ var jss_plugin_global__WEBPACK_IMPORTED_MODULE_2__ =
            __webpack_require__(
              /*! jss-plugin-global */ "./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js"
            );
          /* harmony import */ var jss_plugin_camel_case__WEBPACK_IMPORTED_MODULE_3__ =
            __webpack_require__(
              /*! jss-plugin-camel-case */ "./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js"
            );
          var n = {
              d: (t, e) => {
                for (var s in e)
                  n.o(e, s) &&
                    !n.o(t, s) &&
                    Object.defineProperty(t, s, { enumerable: !0, get: e[s] });
              },
              o: (t, e) => Object.prototype.hasOwnProperty.call(t, e),
            },
            o = {};
          n.d(o, {
            ym: () => v,
            EW: () => d,
            Mx: () => z,
            L3: () => R,
            rl: () => h,
            NR: () => m,
            f1: () => E,
            IY: () => p,
            RZ: () => c,
            XY: () => H,
            Fk: () => u,
            Zh: () => F,
            ek: () => A,
            MG: () => P,
            gE: () => M,
            tW: () => O,
            wr: () => g,
          });
          const l =
            ((a = {
              Flags: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Flags,
              Logger: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger,
              NumericParameters: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.NumericParameters,
              OptionParameters: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.OptionParameters,
              SettingFlag: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.SettingFlag,
              TextParameters: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.TextParameters,
              WebXRController: () =>
                _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.WebXRController,
            }),
            (r = {}),
            n.d(r, a),
            r);
          var a, r;
          class c {
            constructor(t, e, s) {
              (this.rootDiv = t),
                (this.rootElement = e),
                (this.textElement = s),
                this.rootElement.appendChild(this.textElement),
                this.hide(),
                this.rootDiv.appendChild(this.rootElement);
            }
            show() {
              this.rootElement.classList.remove("hiddenState");
            }
            hide() {
              this.rootElement.classList.add("hiddenState");
            }
          }
          class d extends c {
            constructor(t, e, s) {
              super(t, e, s),
                (this.onActionCallback = () => {
                  l.Logger.Info(
                    l.Logger.GetStackTrace(),
                    "Did you forget to set the onAction callback in your overlay?"
                  );
                });
            }
            update(t) {
              (null == t && null == t) || (this.textElement.innerHTML = t);
            }
            onAction(t) {
              this.onActionCallback = t;
            }
            activate() {
              this.onActionCallback();
            }
          }
          class h extends d {
            static createRootElement() {
              const t = document.createElement("div");
              return (
                (t.id = "connectOverlay"), (t.className = "clickableState"),( t.innerHTML = `
				<div class="controler-wrapper">
				<div class="wrapper">
				  <div class="control-box pc">
					<div class="top">
					  <div class="left">
						<img src="./images/keyboard.svg" alt="">
						<div class="para">
						  Use W, A, S, D to move around, Space bar to jump, Q for options
						  and E for emoticons.
						</div>
					  </div>
					  <div class="right">
						<img src="./images/mouse.svg" alt="">
						<div class="para">Right click and drag to look around.</div>
					  </div>
					</div>
					<div class="bottom">
					  <button class="btn" onclick="">Lets go</button>
					</div>
				  </div>
		  
				  <div class="control-box mobil">
					<div class="top">
					  <div class="left">
						<img src="./images/mDrag.png" alt="">
						<div class="para">Drag to look around</div>
					  </div>
					  <div class="right">
						<img src="./images/mmove.png" alt="">
						<div class="para">Move Forward, Backward Left and Right</div>
					  </div>
					</div>
					<div class="bottom">
					  <button class="btn" onclick="">Lets go</button>
					</div>
				  </div>
				</div>
			  </div>
		 
				`), t
              );
            }
            static createContentElement() {
              const t = document.createElement("div");
              return (
                (t.id = "connectButton"), (t.innerHTML = ""), t
              );
            }
            constructor(t) {
              super(t, h.createRootElement(), h.createContentElement()),
                this.rootElement.addEventListener("click", () => {
                  this.activate();
                });
            }
          }
          class m extends d {
            static createRootElement() {
              const t = document.createElement("div");
              return (
                (t.id = "disconnectOverlay"),
                (t.className = "clickableState"),
                t
              );
            }
            static createContentElement() {
              const t = document.createElement("div");
              return (
                (t.id = "disconnectButton"),
                (t.innerHTML = "Click To Restart"),
                t
              );
            }
            constructor(t) {
              super(t, m.createRootElement(), m.createContentElement()),
                this.rootElement.addEventListener("click", () => {
                  this.activate();
                });
            }
          }
          class u extends d {
            static createRootElement() {
              const t = document.createElement("div");
              return (
                (t.id = "playOverlay"), (t.className = "clickableState"), t
              );
            }
            static createContentElement() {
              const t = document.createElement("img");
              return (
                (t.id = "playButton"),
                (t.src =
                  "data:image/png;base64,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"),
                (t.alt = "Start Streaming"),
                t
              );
            }
            constructor(t) {
              super(t, u.createRootElement(), u.createContentElement()),
                this.rootElement.addEventListener("click", () => {
                  this.activate();
                });
            }
          }
          class g extends c {
            constructor(t, e, s) {
              super(t, e, s);
            }
            update(t) {
              (null == t && null == t) || (this.textElement.innerHTML = t);
            }
          }
          class p extends g {
            static createRootElement() {
              const t = document.createElement("div");
              return (
                (t.id = "infoOverlay"), (t.className = "textDisplayState"), t
              );
            }
            static createContentElement() {
              const t = document.createElement("div");
              return (t.id = "messageOverlayInner"), t;
            }
            constructor(t) {
              super(t, p.createRootElement(), p.createContentElement());
            }
          }
          class E extends g {
            static createRootElement() {
              const t = document.createElement("div");
              return (
                (t.id = "errorOverlay"), (t.className = "textDisplayState"), t
              );
            }
            static createContentElement() {
              const t = document.createElement("div");
              return (t.id = "errorOverlayInner"), t;
            }
            constructor(t) {
              super(t, E.createRootElement(), E.createContentElement());
            }
          }
          class v extends d {
            static createRootElement() {
              const t = document.createElement("div");
              return (t.id = "afkOverlay"), (t.className = "clickableState"), t;
            }
            static createContentElement() {
              const t = document.createElement("div");
              return (
                (t.id = "afkOverlayInner"),
                (t.innerHTML =
                  '<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber"></span> seconds<br>Click to continue<br></center>'),
                t
              );
            }
            constructor(t) {
              super(t, v.createRootElement(), v.createContentElement()),
                this.rootElement.addEventListener("click", () => {
                  this.activate();
                });
            }
            updateCountdown(t) {
              this.textElement.innerHTML = `<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber">${t}</span> seconds<br>Click to continue<br></center>`;
            }
          }
          class b {
            constructor() {
              (this.isFullscreen = !1),
                (this.rootElement.onclick = () => this.toggleFullscreen()),
                document.addEventListener(
                  "webkitfullscreenchange",
                  () => this.onFullscreenChange(),
                  !1
                ),
                document.addEventListener(
                  "mozfullscreenchange",
                  () => this.onFullscreenChange(),
                  !1
                ),
                document.addEventListener(
                  "fullscreenchange",
                  () => this.onFullscreenChange(),
                  !1
                ),
                document.addEventListener(
                  "MSFullscreenChange",
                  () => this.onFullscreenChange(),
                  !1
                );
            }
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("button")),
                  (this._rootElement.type = "button"),
                  this._rootElement.classList.add("UiTool"),
                  (this._rootElement.id = "fullscreen-btn"),
                  this._rootElement.appendChild(this.maximizeIcon),
                  this._rootElement.appendChild(this.minimizeIcon),
                  this._rootElement.appendChild(this.tooltipText)),
                this._rootElement
              );
            }
            get tooltipText() {
              return (
                this._tooltipText ||
                  ((this._tooltipText = document.createElement("span")),
                  this._tooltipText.classList.add("tooltiptext"),
                  (this._tooltipText.innerHTML = "Fullscreen")),
                this._tooltipText
              );
            }
            get maximizeIcon() {
              if (!this._maximizeIcon) {
                (this._maximizeIcon = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "svg"
                )),
                  this._maximizeIcon.setAttributeNS(null, "id", "maximizeIcon"),
                  this._maximizeIcon.setAttributeNS(null, "x", "0px"),
                  this._maximizeIcon.setAttributeNS(null, "y", "0px"),
                  this._maximizeIcon.setAttributeNS(
                    null,
                    "viewBox",
                    "0 0 384.97 384.97"
                  );
                const t = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "g"
                );
                t.classList.add("svgIcon"), this._maximizeIcon.appendChild(t);
                const e = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                e.setAttributeNS(
                  null,
                  "d",
                  "M384.97,12.03c0-6.713-5.317-12.03-12.03-12.03H264.847c-6.833,0-11.922,5.39-11.934,12.223c0,6.821,5.101,11.838,11.934,11.838h96.062l-0.193,96.519c0,6.833,5.197,12.03,12.03,12.03c6.833-0.012,12.03-5.197,12.03-12.03l0.193-108.369c0-0.036-0.012-0.06-0.012-0.084C384.958,12.09,384.97,12.066,384.97,12.03z"
                );
                const s = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                s.setAttributeNS(
                  null,
                  "d",
                  "M120.496,0H12.403c-0.036,0-0.06,0.012-0.096,0.012C12.283,0.012,12.247,0,12.223,0C5.51,0,0.192,5.317,0.192,12.03L0,120.399c0,6.833,5.39,11.934,12.223,11.934c6.821,0,11.838-5.101,11.838-11.934l0.192-96.339h96.242c6.833,0,12.03-5.197,12.03-12.03C132.514,5.197,127.317,0,120.496,0z"
                );
                const i = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                i.setAttributeNS(
                  null,
                  "d",
                  "M120.123,360.909H24.061v-96.242c0-6.833-5.197-12.03-12.03-12.03S0,257.833,0,264.667v108.092c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096c0,6.713,5.317,12.03,12.03,12.03h108.092c6.833,0,11.922-5.39,11.934-12.223C132.057,365.926,126.956,360.909,120.123,360.909z"
                );
                const n = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                n.setAttributeNS(
                  null,
                  "d",
                  "M372.747,252.913c-6.833,0-11.85,5.101-11.838,11.934v96.062h-96.242c-6.833,0-12.03,5.197-12.03,12.03s5.197,12.03,12.03,12.03h108.092c0.036,0,0.06-0.012,0.084-0.012c0.036-0.012,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V264.847C384.97,258.014,379.58,252.913,372.747,252.913z"
                ),
                  t.appendChild(e),
                  t.appendChild(s),
                  t.appendChild(i),
                  t.appendChild(n);
              }
              return this._maximizeIcon;
            }
            get minimizeIcon() {
              if (!this._minimizeIcon) {
                (this._minimizeIcon = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "svg"
                )),
                  this._minimizeIcon.setAttributeNS(null, "id", "minimizeIcon"),
                  this._minimizeIcon.setAttributeNS(null, "x", "0px"),
                  this._minimizeIcon.setAttributeNS(null, "y", "0px"),
                  this._minimizeIcon.setAttributeNS(
                    null,
                    "viewBox",
                    "0 0 385.331 385.331"
                  );
                const t = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "g"
                );
                t.classList.add("svgIcon"), this._minimizeIcon.appendChild(t);
                const e = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                e.setAttributeNS(
                  null,
                  "d",
                  "M264.943,156.665h108.273c6.833,0,11.934-5.39,11.934-12.211c0-6.833-5.101-11.85-11.934-11.838h-96.242V36.181c0-6.833-5.197-12.03-12.03-12.03s-12.03,5.197-12.03,12.03v108.273c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096C252.913,151.347,258.23,156.677,264.943,156.665z"
                );
                const s = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                s.setAttributeNS(
                  null,
                  "d",
                  "M120.291,24.247c-6.821,0-11.838,5.113-11.838,11.934v96.242H12.03c-6.833,0-12.03,5.197-12.03,12.03c0,6.833,5.197,12.03,12.03,12.03h108.273c0.036,0,0.06-0.012,0.084-0.012c0.036,0,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V36.181C132.514,29.36,127.124,24.259,120.291,24.247z"
                );
                const i = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                i.setAttributeNS(
                  null,
                  "d",
                  "M120.387,228.666H12.115c-6.833,0.012-11.934,5.39-11.934,12.223c0,6.833,5.101,11.85,11.934,11.838h96.242v96.423c0,6.833,5.197,12.03,12.03,12.03c6.833,0,12.03-5.197,12.03-12.03V240.877c0-0.036-0.012-0.06-0.012-0.084c0-0.036,0.012-0.06,0.012-0.096C132.418,233.983,127.1,228.666,120.387,228.666z"
                );
                const n = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                n.setAttributeNS(
                  null,
                  "d",
                  "M373.3,228.666H265.028c-0.036,0-0.06,0.012-0.084,0.012c-0.036,0-0.06-0.012-0.096-0.012c-6.713,0-12.03,5.317-12.03,12.03v108.273c0,6.833,5.39,11.922,12.223,11.934c6.821,0.012,11.838-5.101,11.838-11.922v-96.242H373.3c6.833,0,12.03-5.197,12.03-12.03S380.134,228.678,373.3,228.666z"
                ),
                  t.appendChild(e),
                  t.appendChild(s),
                  t.appendChild(i),
                  t.appendChild(n);
              }
              return this._minimizeIcon;
            }
            toggleFullscreen() {
              if (
                document.fullscreenElement ||
                document.webkitFullscreenElement ||
                document.mozFullScreenElement ||
                document.msFullscreenElement
              )
                document.exitFullscreen
                  ? document.exitFullscreen()
                  : document.mozCancelFullScreen
                  ? document.mozCancelFullScreen()
                  : document.webkitExitFullscreen
                  ? document.webkitExitFullscreen()
                  : document.msExitFullscreen && document.msExitFullscreen();
              else {
                const t = this.fullscreenElement;
                if (!t) return;
                t.requestFullscreen
                  ? t.requestFullscreen()
                  : t.mozRequestFullscreen
                  ? t.mozRequestFullscreen()
                  : t.webkitRequestFullscreen
                  ? t.webkitRequestFullscreen()
                  : t.msRequestFullscreen
                  ? t.msRequestFullscreen()
                  : t.webkitEnterFullscreen && t.webkitEnterFullscreen();
              }
              this.onFullscreenChange();
            }
            onFullscreenChange() {
              this.isFullscreen =
                document.webkitIsFullScreen ||
                document.mozFullScreen ||
                (document.msFullscreenElement &&
                  null !== document.msFullscreenElement) ||
                (document.fullscreenElement &&
                  null !== document.fullscreenElement);
              const t = this.minimizeIcon,
                e = this.maximizeIcon;
              this.isFullscreen
                ? ((t.style.display = "inline"),
                  (t.style.transform = "translate(0, 0)"),
                  (e.style.display = "none"))
                : ((t.style.display = "none"),
                  (e.style.display = "inline"),
                  (e.style.transform = "translate(0, 0)"));
            }
          }
          class x {
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("button")),
                  (this._rootElement.type = "button"),
                  this._rootElement.classList.add("UiTool"),
                  (this._rootElement.id = "settingsBtn"),
                  this._rootElement.appendChild(this.settingsIcon),
                  this._rootElement.appendChild(this.tooltipText)),
                this._rootElement
              );
            }
            get tooltipText() {
              return (
                this._tooltipText ||
                  ((this._tooltipText = document.createElement("span")),
                  this._tooltipText.classList.add("tooltiptext"),
                  (this._tooltipText.innerHTML = "Settings")),
                this._tooltipText
              );
            }
            get settingsIcon() {
              if (!this._settingsIcon) {
                (this._settingsIcon = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "svg"
                )),
                  this._settingsIcon.setAttributeNS(null, "id", "settingsIcon"),
                  this._settingsIcon.setAttributeNS(null, "x", "0px"),
                  this._settingsIcon.setAttributeNS(null, "y", "0px"),
                  this._settingsIcon.setAttributeNS(
                    null,
                    "viewBox",
                    "0 0 478.703 478.703"
                  );
                const t = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "g"
                );
                t.classList.add("svgIcon"), this._settingsIcon.appendChild(t);
                const e = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                e.setAttributeNS(
                  null,
                  "d",
                  "M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8\t\t\tc-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2\t\t\tc-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8\t\t\tc-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1\t\t\tc-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8\t\t\tc3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5\t\t\tl28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6\t\t\tc11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1\t\t\tl-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1\t\t\tC478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9\t\t\tc-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8\t\t\tc-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42\t\t\tc-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8\t\t\tc-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8\t\t\tc-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2\t\t\tc-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42\t\t\tc2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6\t\t\tc4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1\t\t\tc1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8\t\t\tc0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7\t\t\tc7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z"
                );
                const s = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                s.setAttributeNS(
                  null,
                  "d",
                  "M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"
                ),
                  t.appendChild(e),
                  t.appendChild(s);
              }
              return this._settingsIcon;
            }
          }
          class y {
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("button")),
                  (this._rootElement.type = "button"),
                  this._rootElement.classList.add("UiTool"),
                  (this._rootElement.id = "statsBtn"),
                  this._rootElement.appendChild(this.statsIcon),
                  this._rootElement.appendChild(this.tooltipText)),
                this._rootElement
              );
            }
            get tooltipText() {
              return (
                this._tooltipText ||
                  ((this._tooltipText = document.createElement("span")),
                  this._tooltipText.classList.add("tooltiptext"),
                  (this._tooltipText.innerHTML = "Information")),
                this._tooltipText
              );
            }
            get statsIcon() {
              if (!this._statsIcon) {
                (this._statsIcon = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "svg"
                )),
                  this._statsIcon.setAttributeNS(null, "id", "statsIcon"),
                  this._statsIcon.setAttributeNS(null, "x", "0px"),
                  this._statsIcon.setAttributeNS(null, "y", "0px"),
                  this._statsIcon.setAttributeNS(
                    null,
                    "viewBox",
                    "0 0 330 330"
                  );
                const t = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "g"
                );
                t.classList.add("svgIcon"), this._statsIcon.appendChild(t);
                const e = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                e.setAttributeNS(
                  null,
                  "d",
                  "M165,0.008C74.019,0.008,0,74.024,0,164.999c0,90.977,74.019,164.992,165,164.992s165-74.015,165-164.992C330,74.024,255.981,0.008,165,0.008z M165,299.992c-74.439,0-135-60.557-135-134.992S90.561,30.008,165,30.008s135,60.557,135,134.991C300,239.436,239.439,299.992,165,299.992z"
                );
                const s = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                s.setAttributeNS(
                  null,
                  "d",
                  "M165,130.008c-8.284,0-15,6.716-15,15v99.983c0,8.284,6.716,15,15,15s15-6.716,15-15v-99.983C180,136.725,173.284,130.008,165,130.008z"
                );
                const i = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                i.setAttributeNS(
                  null,
                  "d",
                  "M165,70.011c-3.95,0-7.811,1.6-10.61,4.39c-2.79,2.79-4.39,6.66-4.39,10.61s1.6,7.81,4.39,10.61c2.79,2.79,6.66,4.39,10.61,4.39s7.81-1.6,10.609-4.39c2.79-2.8,4.391-6.66,4.391-10.61s-1.601-7.82-4.391-10.61C172.81,71.61,168.95,70.011,165,70.011z"
                ),
                  t.appendChild(e),
                  t.appendChild(s),
                  t.appendChild(i);
              }
              return this._statsIcon;
            }
          }
          class S {
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("button")),
                  (this._rootElement.type = "button"),
                  this._rootElement.classList.add("UiTool"),
                  (this._rootElement.id = "xrBtn"),
                  this._rootElement.appendChild(this.xrIcon),
                  this._rootElement.appendChild(this.tooltipText)),
                this._rootElement
              );
            }
            get tooltipText() {
              return (
                this._tooltipText ||
                  ((this._tooltipText = document.createElement("span")),
                  this._tooltipText.classList.add("tooltiptext"),
                  (this._tooltipText.innerHTML = "XR")),
                this._tooltipText
              );
            }
            get xrIcon() {
              if (!this._xrIcon) {
                (this._xrIcon = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "svg"
                )),
                  this._xrIcon.setAttributeNS(null, "id", "xrIcon"),
                  this._xrIcon.setAttributeNS(null, "x", "0px"),
                  this._xrIcon.setAttributeNS(null, "y", "0px"),
                  this._xrIcon.setAttributeNS(null, "viewBox", "0 0 100 100");
                const t = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "g"
                );
                t.classList.add("svgIcon"), this._xrIcon.appendChild(t);
                const e = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                e.setAttributeNS(
                  null,
                  "d",
                  "M29 41c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm42-14c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm12-31H17c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h14.5c3.5 0 6.8-1.5 9-4.1l3.5-4c1.5-1.7 3.7-2.7 6-2.7s4.5 1 6 2.7l3.5 4c2.3 2.6 5.6 4.1 9 4.1H83c6.6 0 12-5.4 12-12V36c0-6.6-5.4-12-12-12zm8 40c0 4.4-3.6 8-8 8H68.5c-2.3 0-4.5-1-6-2.7l-3.5-4c-2.3-2.6-5.6-4.1-9-4.1-3.5 0-6.8 1.5-9 4.1l-3.5 4C36 71 33.8 72 31.5 72H17c-4.4 0-8-3.6-8-8V36c0-4.4 3.6-8 8-8h66c4.4 0 8 3.6 8 8v28z"
                ),
                  t.appendChild(e);
              }
              return this._xrIcon;
            }
          }
          class f {
            constructor() {
              (this.statsIcon = new y()),
                (this.settingsIcon = new x()),
                (this.fullscreenIcon = new b()),
                (this.xrIcon = new S());
            }
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("div")),
                  (this._rootElement.id = "controls"),
                  this._rootElement.appendChild(
                    this.fullscreenIcon.rootElement
                  ),
                  this._rootElement.appendChild(this.settingsIcon.rootElement),
                  this._rootElement.appendChild(this.statsIcon.rootElement),
                  l.WebXRController.isSessionSupported("immersive-vr").then(
                    (t) => {
                      t &&
                        this._rootElement.appendChild(this.xrIcon.rootElement);
                    }
                  )),
                this._rootElement
              );
            }
          }
          class C {
            constructor(t, e) {
              (this._label = t), (this._buttonText = e);
            }
            addOnClickListener(t) {
              this.button.addEventListener("click", t);
            }
            get button() {
              return (
                this._button ||
                  ((this._button = document.createElement("input")),
                  (this._button.type = "button"),
                  (this._button.value = this._buttonText),
                  this._button.classList.add("overlay-button"),
                  this._button.classList.add("btn-flat")),
                this._button
              );
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  this._rootElement.classList.add("setting");
                const t = document.createElement("div");
                (t.innerText = this._label), this._rootElement.appendChild(t);
                const e = document.createElement("label");
                e.classList.add("btn-overlay"),
                  this._rootElement.appendChild(e),
                  e.appendChild(this.button);
              }
              return this._rootElement;
            }
          }
          class w {
            constructor() {
              this._rootElement = null;
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  (this._rootElement.id = "settings-panel"),
                  this._rootElement.classList.add("panel-wrap");
                const t = document.createElement("div");
                t.classList.add("panel"), this._rootElement.appendChild(t);
                const e = document.createElement("div");
                (e.id = "settingsHeading"),
                  (e.textContent = "Settings"),
                  t.appendChild(e),
                  t.appendChild(this.settingsCloseButton),
                  t.appendChild(this.settingsContentElement);
              }
              return this._rootElement;
            }
            get settingsContentElement() {
              return (
                this._settingsContentElement ||
                  ((this._settingsContentElement =
                    document.createElement("div")),
                  (this._settingsContentElement.id = "settingsContent")),
                this._settingsContentElement
              );
            }
            get settingsCloseButton() {
              return (
                this._settingsCloseButton ||
                  ((this._settingsCloseButton = document.createElement("div")),
                  (this._settingsCloseButton.id = "settingsClose")),
                this._settingsCloseButton
              );
            }
            show() {
              this.rootElement.classList.contains("panel-wrap-visible") ||
                this.rootElement.classList.add("panel-wrap-visible");
            }
            toggleVisibility() {
              this.rootElement.classList.toggle("panel-wrap-visible");
            }
            hide() {
              this.rootElement.classList.contains("panel-wrap-visible") &&
                this.rootElement.classList.remove("panel-wrap-visible");
            }
          }
          class T {
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("section")),
                  this._rootElement.classList.add("settingsContainer");
                const t = document.createElement("div");
                (t.id = "latencyTestHeader"),
                  t.classList.add("settings-text"),
                  t.classList.add("settingsHeader"),
                  this._rootElement.appendChild(t);
                const e = document.createElement("div");
                (e.innerHTML = "Latency Test"),
                  t.appendChild(e),
                  t.appendChild(this.latencyTestButton);
                const s = document.createElement("div");
                (s.id = "latencyTestContainer"),
                  s.classList.add("d-none"),
                  this._rootElement.appendChild(s),
                  s.appendChild(this.latencyTestResultsElement);
              }
              return this._rootElement;
            }
            get latencyTestResultsElement() {
              return (
                this._latencyTestResultsElement ||
                  ((this._latencyTestResultsElement =
                    document.createElement("div")),
                  (this._latencyTestResultsElement.id = "latencyStatsResults"),
                  this._latencyTestResultsElement.classList.add("StatsResult")),
                this._latencyTestResultsElement
              );
            }
            get latencyTestButton() {
              return (
                this._latencyTestButton ||
                  ((this._latencyTestButton = document.createElement("input")),
                  (this._latencyTestButton.type = "button"),
                  (this._latencyTestButton.value = "Run Test"),
                  (this._latencyTestButton.id = "btn-start-latency-test"),
                  this._latencyTestButton.classList.add("streamTools-button"),
                  this._latencyTestButton.classList.add("btn-flat")),
                this._latencyTestButton
              );
            }
            handleTestResult(t) {
              l.Logger.Log(l.Logger.GetStackTrace(), t.toString(), 6);
              let e = "";
              (e +=
                "<div>Net latency RTT (ms): " + t.networkLatency + "</div>"),
                (e += "<div>UE Encode (ms): " + t.EncodeMs + "</div>"),
                (e += "<div>UE Capture (ms): " + t.CaptureToSendMs + "</div>"),
                (e +=
                  "<div>Browser send latency (ms): " +
                  t.browserSendLatency +
                  "</div>"),
                (e +=
                  t.frameDisplayDeltaTimeMs && t.browserReceiptTimeMs
                    ? "<div>Browser receive latency (ms): " +
                      t.frameDisplayDeltaTimeMs +
                      "</div>"
                    : ""),
                (e +=
                  "<div>Total latency (excluding browser) (ms): " +
                  t.latencyExcludingDecode +
                  "</div>"),
                (e += t.endToEndLatency
                  ? "<div>Total latency (ms): " + t.endToEndLatency + "</div>"
                  : ""),
                (this.latencyTestResultsElement.innerHTML = e);
            }
          }
          class _ {
            static formatBytes(t, e) {
              if (0 === t) return "0";
              const s = e < 0 ? 0 : e,
                i = Math.floor(Math.log(t) / Math.log(1024));
              return (
                parseFloat((t / Math.pow(1024, i)).toFixed(s)) +
                " " +
                [
                  "Bytes",
                  "KiB",
                  "MiB",
                  "GiB",
                  "TiB",
                  "PiB",
                  "EiB",
                  "ZiB",
                  "YiB",
                ][i]
              );
            }
          }
          class L {}
          class k {
            constructor() {
              (this.statsMap = new Map()), (this.latencyTest = new T());
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  (this._rootElement.id = "stats-panel"),
                  this._rootElement.classList.add("panel-wrap");
                const t = document.createElement("div");
                t.classList.add("panel"), this._rootElement.appendChild(t);
                const e = document.createElement("div");
                (e.id = "statsHeading"),
                  (e.textContent = "Information"),
                  t.appendChild(e),
                  t.appendChild(this.statsCloseButton),
                  t.appendChild(this.statsContentElement);
              }
              return this._rootElement;
            }
            get statsContentElement() {
              if (!this._statsContentElement) {
                (this._statsContentElement = document.createElement("div")),
                  (this._statsContentElement.id = "statsContent");
                const t = document.createElement("div");
                (t.id = "streamToolsStats"), t.classList.add("container");
                const e = document.createElement("div");
                (e.id = "ControlStats"), e.classList.add("row");
                const s = document.createElement("section");
                (s.id = "statistics"), s.classList.add("settingsContainer");
                const i = document.createElement("div");
                (i.id = "statisticsHeader"),
                  i.classList.add("settings-text"),
                  i.classList.add("settingsHeader");
                const n = document.createElement("div");
                (n.innerHTML = "Session Stats"),
                  this._statsContentElement.appendChild(t),
                  t.appendChild(e),
                  e.appendChild(s),
                  s.appendChild(i),
                  i.appendChild(n),
                  s.appendChild(this.statisticsContainer),
                  e.appendChild(this.latencyTest.rootElement);
              }
              return this._statsContentElement;
            }
            get statisticsContainer() {
              return (
                this._statisticsContainer ||
                  ((this._statisticsContainer = document.createElement("div")),
                  (this._statisticsContainer.id = "statisticsContainer"),
                  this._statisticsContainer.classList.add("d-none"),
                  this._statisticsContainer.appendChild(this.statsResult)),
                this._statisticsContainer
              );
            }
            get statsResult() {
              return (
                this._statsResult ||
                  ((this._statsResult = document.createElement("div")),
                  (this._statsResult.id = "statisticsResult"),
                  this._statsResult.classList.add("StatsResult")),
                this._statsResult
              );
            }
            get statsCloseButton() {
              return (
                this._statsCloseButton ||
                  ((this._statsCloseButton = document.createElement("div")),
                  (this._statsCloseButton.id = "statsClose")),
                this._statsCloseButton
              );
            }
            show() {
              this.rootElement.classList.contains("panel-wrap-visible") ||
                this.rootElement.classList.add("panel-wrap-visible");
            }
            toggleVisibility() {
              this.rootElement.classList.toggle("panel-wrap-visible");
            }
            hide() {
              this.rootElement.classList.contains("panel-wrap-visible") &&
                this.rootElement.classList.remove("panel-wrap-visible");
            }
            handleStats(t) {
              var e, s, i, n, o;
              const a = new Intl.NumberFormat(window.navigator.language, {
                  maximumFractionDigits: 0,
                }),
                r = _.formatBytes(t.inboundVideoStats.bytesReceived, 2);
              this.addOrUpdateStat("InboundDataStat", "Received", r);
              const c = Object.prototype.hasOwnProperty.call(
                t.inboundVideoStats,
                "packetsLost"
              )
                ? a.format(t.inboundVideoStats.packetsLost)
                : "Chrome only";
              this.addOrUpdateStat("PacketsLostStat", "Packets Lost", c),
                t.inboundVideoStats.bitrate &&
                  this.addOrUpdateStat(
                    "VideoBitrateStat",
                    "Video Bitrate (kbps)",
                    t.inboundVideoStats.bitrate.toString()
                  ),
                t.inboundAudioStats.bitrate &&
                  this.addOrUpdateStat(
                    "AudioBitrateStat",
                    "Audio Bitrate (kbps)",
                    t.inboundAudioStats.bitrate.toString()
                  );
              const d =
                Object.prototype.hasOwnProperty.call(
                  t.inboundVideoStats,
                  "frameWidth"
                ) &&
                t.inboundVideoStats.frameWidth &&
                Object.prototype.hasOwnProperty.call(
                  t.inboundVideoStats,
                  "frameHeight"
                ) &&
                t.inboundVideoStats.frameHeight
                  ? t.inboundVideoStats.frameWidth +
                    "x" +
                    t.inboundVideoStats.frameHeight
                  : "Chrome only";
              this.addOrUpdateStat("VideoResStat", "Video resolution", d);
              const h = Object.prototype.hasOwnProperty.call(
                t.inboundVideoStats,
                "framesDecoded"
              )
                ? a.format(t.inboundVideoStats.framesDecoded)
                : "Chrome only";
              this.addOrUpdateStat("FramesDecodedStat", "Frames Decoded", h),
                t.inboundVideoStats.framesPerSecond &&
                  this.addOrUpdateStat(
                    "FramerateStat",
                    "Framerate",
                    t.inboundVideoStats.framesPerSecond.toString()
                  ),
                this.addOrUpdateStat(
                  "FramesDroppedStat",
                  "Frames dropped",
                  null === (e = t.inboundVideoStats.framesDropped) ||
                    void 0 === e
                    ? void 0
                    : e.toString()
                ),
                t.inboundVideoStats.codecId &&
                  this.addOrUpdateStat(
                    "VideoCodecStat",
                    "Video codec",
                    null !==
                      (i =
                        null ===
                          (s = t.codecs.get(t.inboundVideoStats.codecId)) ||
                        void 0 === s
                          ? void 0
                          : s.split(" ")[0]) && void 0 !== i
                      ? i
                      : ""
                  ),
                t.inboundAudioStats.codecId &&
                  this.addOrUpdateStat(
                    "AudioCodecStat",
                    "Audio codec",
                    null !==
                      (o =
                        null ===
                          (n = t.codecs.get(t.inboundAudioStats.codecId)) ||
                        void 0 === n
                          ? void 0
                          : n.split(" ")[0]) && void 0 !== o
                      ? o
                      : ""
                  );
              const m =
                Object.prototype.hasOwnProperty.call(
                  t.candidatePair,
                  "currentRoundTripTime"
                ) && t.isNumber(t.candidatePair.currentRoundTripTime)
                  ? a.format(1e3 * t.candidatePair.currentRoundTripTime)
                  : "Can't calculate";
              this.addOrUpdateStat("RTTStat", "Net RTT (ms)", m),
                this.addOrUpdateStat(
                  "DurationStat",
                  "Duration",
                  t.sessionStats.runTime
                ),
                this.addOrUpdateStat(
                  "ControlsInputStat",
                  "Controls stream input",
                  t.sessionStats.controlsStreamInput
                ),
                this.addOrUpdateStat(
                  "QPStat",
                  "Video quantization parameter",
                  t.sessionStats.videoEncoderAvgQP.toString()
                ),
                l.Logger.Log(
                  l.Logger.GetStackTrace(),
                  `--------- Stats ---------\n ${t}\n------------------------`,
                  6
                );
            }
            addOrUpdateStat(t, e, s) {
              const i = `${e}: ${s}`;
              if (this.statsMap.has(t)) {
                const e = this.statsMap.get(t);
                void 0 !== e && (e.element.innerHTML = i);
              } else {
                const n = new L();
                (n.id = t),
                  (n.stat = s),
                  (n.title = e),
                  (n.element = document.createElement("div")),
                  (n.element.innerHTML = i),
                  this.statsResult.appendChild(n.element),
                  this.statsMap.set(t, n);
              }
            }
          }
          class I {
            constructor() {
              (this.videoEncoderAvgQP = -1),
                (this.statsText = ""),
                (this.color = ""),
                (this.orangeQP = 26),
                (this.redQP = 35);
            }
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("div")),
                  (this._rootElement.id = "connection"),
                  this._rootElement.classList.add("UiTool"),
                  this._rootElement.appendChild(this.qualityStatus),
                  this._rootElement.appendChild(this.qualityText),
                  this.updateQpTooltip(-1)),
                this._rootElement
              );
            }
            get qualityText() {
              return (
                this._qualityText ||
                  ((this._qualityText = document.createElement("span")),
                  (this._qualityText.id = "qualityText"),
                  this._qualityText.classList.add("tooltiptext")),
                this._qualityText
              );
            }
            get qualityStatus() {
              return (
                this._qualityStatus ||
                  ((this._qualityStatus = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "svg"
                  )),
                  this._qualityStatus.setAttributeNS(
                    null,
                    "id",
                    "connectionStrength"
                  ),
                  this._qualityStatus.setAttributeNS(null, "x", "0px"),
                  this._qualityStatus.setAttributeNS(null, "y", "0px"),
                  this._qualityStatus.setAttributeNS(
                    null,
                    "viewBox",
                    "0 0 494.45 494.45"
                  ),
                  this.qualityStatus.appendChild(this.dot),
                  this.qualityStatus.appendChild(this.middle),
                  this.qualityStatus.appendChild(this.outer),
                  this.qualityStatus.appendChild(this.inner)),
                this._qualityStatus
              );
            }
            get dot() {
              return (
                this._dot ||
                  ((this._dot = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "circle"
                  )),
                  this._dot.setAttributeNS(null, "id", "dot"),
                  this._dot.setAttributeNS(null, "cx", "247.125"),
                  this._dot.setAttributeNS(null, "cy", "398.925"),
                  this._dot.setAttributeNS(null, "r", "35.3")),
                this._dot
              );
            }
            get outer() {
              return (
                this._outer ||
                  ((this._outer = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "path"
                  )),
                  this._outer.setAttributeNS(null, "id", "outer"),
                  this._outer.setAttributeNS(
                    null,
                    "d",
                    "M467.925,204.625c-6.8,0-13.5-2.6-18.7-7.8c-111.5-111.4-292.7-111.4-404.1,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c64-64,149-99.2,239.5-99.2s175.5,35.2,239.5,99.2c10.3,10.3,10.3,27.1,0,37.4C481.425,202.025,474.625,204.625,467.925,204.625z"
                  )),
                this._outer
              );
            }
            get middle() {
              return (
                this._middle ||
                  ((this._middle = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "path"
                  )),
                  this._middle.setAttributeNS(null, "id", "middle"),
                  this._middle.setAttributeNS(
                    null,
                    "d",
                    "M395.225,277.325c-6.8,0-13.5-2.6-18.7-7.8c-71.4-71.3-187.4-71.3-258.8,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c92-92,241.6-92,333.6,0c10.3,10.3,10.3,27.1,0,37.4C408.725,274.725,401.925,277.325,395.225,277.325z"
                  )),
                this._middle
              );
            }
            get inner() {
              return (
                this._inner ||
                  ((this._inner = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "path"
                  )),
                  this._inner.setAttributeNS(null, "id", "inner"),
                  this._inner.setAttributeNS(
                    null,
                    "d",
                    "M323.625,348.825c-6.8,0-13.5-2.6-18.7-7.8c-15.4-15.4-36-23.9-57.8-23.9s-42.4,8.5-57.8,23.9c-10.3,10.3-27.1,10.3-37.4,0c-10.3-10.3-10.3-27.1,0-37.4c25.4-25.4,59.2-39.4,95.2-39.4s69.8,14,95.2,39.5c10.3,10.3,10.3,27.1,0,37.4C337.225,346.225,330.425,348.825,323.625,348.825z"
                  )),
                this._inner
              );
            }
            blinkVideoQualityStatus(t) {
              let e = t,
                s = 1;
              const i = setInterval(() => {
                (s -= 0.1),
                  (this.qualityText.style.opacity = String(
                    Math.abs(2 * (s - 0.5))
                  )),
                  s <= 0.1 && (0 == --e ? clearInterval(i) : (s = 1));
              }, 100 / t);
            }
            updateQpTooltip(t) {
              (this.videoEncoderAvgQP = t),
                t > this.redQP
                  ? ((this.color = "red"),
                    this.blinkVideoQualityStatus(2),
                    (this.statsText = `<div style="color: ${this.color}">Poor encoding quality</div>`),
                    this.outer.setAttributeNS(null, "fill", "#3c3b40"),
                    this.middle.setAttributeNS(null, "fill", "#3c3b40"),
                    this.inner.setAttributeNS(null, "fill", this.color),
                    this.dot.setAttributeNS(null, "fill", this.color))
                  : t > this.orangeQP
                  ? ((this.color = "orange"),
                    this.blinkVideoQualityStatus(1),
                    (this.statsText = `<div style="color: ${this.color}">Blocky encoding quality</div>`),
                    this.outer.setAttributeNS(null, "fill", "#3c3b40"),
                    this.middle.setAttributeNS(null, "fill", this.color),
                    this.inner.setAttributeNS(null, "fill", this.color),
                    this.dot.setAttributeNS(null, "fill", this.color))
                  : t <= 0
                  ? ((this.color = "#b0b0b0"),
                    this.outer.setAttributeNS(null, "fill", "#3c3b40"),
                    this.middle.setAttributeNS(null, "fill", "#3c3b40"),
                    this.inner.setAttributeNS(null, "fill", "#3c3b40"),
                    this.dot.setAttributeNS(null, "fill", "#3c3b40"),
                    (this.statsText = `<div style="color: ${this.color}">Not connected</div>`))
                  : ((this.color = "lime"),
                    (this.qualityStatus.style.opacity = "1"),
                    (this.statsText = `<div style="color: ${this.color}">Clear encoding quality</div>`),
                    this.outer.setAttributeNS(null, "fill", this.color),
                    this.middle.setAttributeNS(null, "fill", this.color),
                    this.inner.setAttributeNS(null, "fill", this.color),
                    this.dot.setAttributeNS(null, "fill", this.color)),
                (this.qualityText.innerHTML = this.statsText);
            }
          }
          class F {
            constructor(t) {
              this._setting = t;
            }
            get setting() {
              return this._setting;
            }
            get rootElement() {
              return (
                this._rootElement ||
                  (this._rootElement = document.createElement("div")),
                this._rootElement
              );
            }
          }
          class A extends F {
            constructor(t) {
              super(t), (this.label = t.label), (this.flag = t.flag);
            }
            get setting() {
              return this._setting;
            }
            get settingsTextElem() {
              return (
                this._settingsTextElem ||
                  ((this._settingsTextElem = document.createElement("div")),
                  (this._settingsTextElem.innerText = this.setting._label),
                  (this._settingsTextElem.title = this.setting.description)),
                this._settingsTextElem
              );
            }
            get checkbox() {
              return (
                this._checkbox ||
                  ((this._checkbox = document.createElement("input")),
                  (this._checkbox.type = "checkbox")),
                this._checkbox
              );
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  (this._rootElement.id = this.setting.id),
                  this._rootElement.classList.add("setting"),
                  this._rootElement.appendChild(this.settingsTextElem);
                const t = document.createElement("label");
                t.classList.add("tgl-switch"),
                  this._rootElement.appendChild(t),
                  (this.checkbox.title = this.setting.description),
                  this.checkbox.classList.add("tgl"),
                  this.checkbox.classList.add("tgl-flat");
                const e = document.createElement("div");
                e.classList.add("tgl-slider"),
                  t.appendChild(this.checkbox),
                  t.appendChild(e),
                  this.checkbox.addEventListener("change", () => {
                    this.setting.flag !== this.checkbox.checked &&
                      ((this.setting.flag = this.checkbox.checked),
                      this.setting.updateURLParams());
                  });
              }
              return this._rootElement;
            }
            set flag(t) {
              this.checkbox.checked = t;
            }
            get flag() {
              return this.checkbox.checked;
            }
            set label(t) {
              this.settingsTextElem.innerText = t;
            }
            get label() {
              return this.settingsTextElem.innerText;
            }
          }
          class P extends F {
            constructor(t) {
              super(t),
                (this.label = this.setting.label),
                (this.number = this.setting.number);
            }
            get setting() {
              return this._setting;
            }
            get settingsTextElem() {
              return (
                this._settingsTextElem ||
                  ((this._settingsTextElem = document.createElement("label")),
                  (this._settingsTextElem.innerText = this.setting.label),
                  (this._settingsTextElem.title = this.setting.description)),
                this._settingsTextElem
              );
            }
            get spinner() {
              return (
                this._spinner ||
                  ((this._spinner = document.createElement("input")),
                  (this._spinner.type = "number"),
                  (this._spinner.min = this.setting.min.toString()),
                  (this._spinner.max = this.setting.max.toString()),
                  (this._spinner.value = this.setting.number.toString()),
                  (this._spinner.title = this.setting.description),
                  this._spinner.classList.add("form-control")),
                this._spinner
              );
            }
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("div")),
                  this._rootElement.classList.add("setting"),
                  this._rootElement.classList.add("form-group"),
                  this._rootElement.appendChild(this.settingsTextElem),
                  this._rootElement.appendChild(this.spinner),
                  (this.spinner.onchange = (t) => {
                    const e = t.target,
                      s = Number.parseInt(e.value);
                    Number.isNaN(s)
                      ? (l.Logger.Warning(
                          l.Logger.GetStackTrace(),
                          `Could not parse value change into a valid number - value was ${e.value}, resetting value to ${this.setting.min}`
                        ),
                        this.setting.number !== this.setting.min &&
                          (this.setting.number = this.setting.min))
                      : this.setting.number !== s &&
                        ((this.setting.number = s),
                        this.setting.updateURLParams());
                  })),
                this._rootElement
              );
            }
            set number(t) {
              this.spinner.value = this.setting.clamp(t).toString();
            }
            get number() {
              return +this.spinner.value;
            }
            set label(t) {
              this.settingsTextElem.innerText = t;
            }
            get label() {
              return this.settingsTextElem.innerText;
            }
          }
          class O extends F {
            constructor(t) {
              super(t),
                (this.label = this.setting.label),
                (this.text = this.setting.text);
            }
            get setting() {
              return this._setting;
            }
            get settingsTextElem() {
              return (
                this._settingsTextElem ||
                  ((this._settingsTextElem = document.createElement("div")),
                  (this._settingsTextElem.innerText = this.setting.label),
                  (this._settingsTextElem.title = this.setting.description)),
                this._settingsTextElem
              );
            }
            get textbox() {
              return (
                this._textbox ||
                  ((this._textbox = document.createElement("input")),
                  this._textbox.classList.add("form-control"),
                  (this._textbox.type = "textbox")),
                this._textbox
              );
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  (this._rootElement.id = this.setting.id),
                  this._rootElement.classList.add("setting"),
                  this._rootElement.appendChild(this.settingsTextElem);
                const t = document.createElement("label");
                this._rootElement.appendChild(t),
                  (this.textbox.title = this.setting.description),
                  t.appendChild(this.textbox),
                  this.textbox.addEventListener("input", () => {
                    this.setting.text !== this.textbox.value &&
                      ((this.setting.text = this.textbox.value),
                      this.setting.updateURLParams());
                  });
              }
              return this._rootElement;
            }
            set text(t) {
              this.textbox.value = t;
            }
            get text() {
              return this.textbox.value;
            }
            set label(t) {
              this.settingsTextElem.innerText = t;
            }
            get label() {
              return this.settingsTextElem.innerText;
            }
          }
          class M extends F {
            constructor(t) {
              super(t),
                (this.label = this.setting.label),
                (this.options = this.setting.options),
                (this.selected = this.setting.selected);
            }
            get setting() {
              return this._setting;
            }
            get selector() {
              return (
                this._selector ||
                  ((this._selector = document.createElement("select")),
                  this._selector.classList.add("form-control"),
                  this._selector.classList.add("settings-option")),
                this._selector
              );
            }
            get settingsTextElem() {
              return (
                this._settingsTextElem ||
                  ((this._settingsTextElem = document.createElement("div")),
                  (this._settingsTextElem.innerText = this.setting.label),
                  (this._settingsTextElem.title = this.setting.description)),
                this._settingsTextElem
              );
            }
            set label(t) {
              this.settingsTextElem.innerText = t;
            }
            get label() {
              return this.settingsTextElem.innerText;
            }
            get rootElement() {
              if (!this._rootElement) {
                (this._rootElement = document.createElement("div")),
                  (this._rootElement.id = this.setting.id),
                  this._rootElement.classList.add("setting"),
                  this._rootElement.classList.add("form-group"),
                  this._rootElement.appendChild(this.settingsTextElem);
                const t = document.createElement("label");
                this._rootElement.appendChild(t),
                  (this.selector.title = this.setting.description),
                  t.appendChild(this.selector),
                  (this.selector.onchange = () => {
                    this.setting.selected !== this.selector.value &&
                      ((this.setting.selected = this.selector.value),
                      this.setting.updateURLParams());
                  });
              }
              return this._rootElement;
            }
            set options(t) {
              for (let t = this.selector.options.length - 1; t >= 0; t--)
                this.selector.remove(t);
              t.forEach((t) => {
                const e = document.createElement("option");
                (e.value = t), (e.innerHTML = t), this.selector.appendChild(e);
              });
            }
            get options() {
              return [...this.selector.options].map((t) => t.value);
            }
            set selected(t) {
              const e = this.options.filter((e) => -1 !== e.indexOf(t));
              e.length && (this.selector.value = e[0]);
            }
            get selected() {
              return this.selector.value;
            }
            disable() {
              this.selector.disabled = !0;
            }
            enable() {
              this.selector.disabled = !1;
            }
          }
          const N = "LightMode";
          class R {
            constructor(t) {
              (this.customFlags = new Map()),
                (this.flagsUi = new Map()),
                (this.numericParametersUi = new Map()),
                (this.textParametersUi = new Map()),
                (this.optionParametersUi = new Map()),
                this.createCustomUISettings(t.useUrlParams),
                this.registerSettingsUIComponents(t);
            }
            createCustomUISettings(t) {
              this.customFlags.set(
                N,
                new l.SettingFlag(
                  N,
                  "Color Scheme: Dark Mode",
                  "Page styling will be either light or dark",
                  !1,
                  t,
                  (t, e) => {
                    e.label = `Color Scheme: ${t ? "Light" : "Dark"} Mode`;
                  }
                )
              );
            }
            registerSettingsUIComponents(t) {
              for (const e of t.getFlags()) this.flagsUi.set(e.id, new A(e));
              for (const t of Array.from(this.customFlags.values()))
                this.flagsUi.set(t.id, new A(t));
              for (const e of t.getTextSettings())
                this.textParametersUi.set(e.id, new O(e));
              for (const e of t.getNumericSettings())
                this.numericParametersUi.set(e.id, new P(e));
              for (const e of t.getOptionSettings())
                this.optionParametersUi.set(e.id, new M(e));
            }
            buildSectionWithHeading(t, e) {
              const s = document.createElement("section");
              s.classList.add("settingsContainer");
              const i = document.createElement("div");
              return (
                i.classList.add("settingsHeader"),
                i.classList.add("settings-text"),
                (i.textContent = e),
                s.appendChild(i),
                t.appendChild(s),
                s
              );
            }
            populateSettingsElement(t) {
              const e = this.buildSectionWithHeading(t, "Pixel Streaming");
              this.addSettingText(
                e,
                this.textParametersUi.get(l.TextParameters.SignallingServerUrl)
              ),
                this.addSettingOption(
                  e,
                  this.optionParametersUi.get(l.OptionParameters.StreamerId)
                ),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.AutoConnect)),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.AutoPlayVideo)),
                this.addSettingFlag(
                  e,
                  this.flagsUi.get(l.Flags.BrowserSendOffer)
                ),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.UseMic)),
                this.addSettingFlag(
                  e,
                  this.flagsUi.get(l.Flags.StartVideoMuted)
                ),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.PreferSFU)),
                this.addSettingFlag(
                  e,
                  this.flagsUi.get(l.Flags.IsQualityController)
                ),
                this.addSettingFlag(
                  e,
                  this.flagsUi.get(l.Flags.ForceMonoAudio)
                ),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.ForceTURN)),
                this.addSettingFlag(
                  e,
                  this.flagsUi.get(l.Flags.SuppressBrowserKeys)
                ),
                this.addSettingFlag(e, this.flagsUi.get(l.Flags.AFKDetection)),
                this.addSettingNumeric(
                  e,
                  this.numericParametersUi.get(
                    l.NumericParameters.AFKTimeoutSecs
                  )
                );
              const s = this.buildSectionWithHeading(t, "UI");
              this.addSettingFlag(
                s,
                this.flagsUi.get(l.Flags.MatchViewportResolution)
              ),
                this.addSettingFlag(
                  s,
                  this.flagsUi.get(l.Flags.HoveringMouseMode)
                ),
                this.addSettingFlag(s, this.flagsUi.get(N));
              const i = this.buildSectionWithHeading(t, "Input");
              this.addSettingFlag(i, this.flagsUi.get(l.Flags.KeyboardInput)),
                this.addSettingFlag(i, this.flagsUi.get(l.Flags.MouseInput)),
                this.addSettingFlag(i, this.flagsUi.get(l.Flags.TouchInput)),
                this.addSettingFlag(i, this.flagsUi.get(l.Flags.GamepadInput)),
                this.addSettingFlag(
                  i,
                  this.flagsUi.get(l.Flags.XRControllerInput)
                );
              const n = this.buildSectionWithHeading(t, "Encoder");
              this.addSettingNumeric(
                n,
                this.numericParametersUi.get(l.NumericParameters.MinQP)
              ),
                this.addSettingNumeric(
                  n,
                  this.numericParametersUi.get(l.NumericParameters.MaxQP)
                );
              const o = this.optionParametersUi.get(
                l.OptionParameters.PreferredCodec
              );
              this.addSettingOption(
                n,
                this.optionParametersUi.get(l.OptionParameters.PreferredCodec)
              ),
                o &&
                  [...o.selector.options]
                    .map((t) => t.value)
                    .includes("Only available on Chrome") &&
                  o.disable();
              const a = this.buildSectionWithHeading(t, "WebRTC");
              this.addSettingNumeric(
                a,
                this.numericParametersUi.get(l.NumericParameters.WebRTCFPS)
              ),
                this.addSettingNumeric(
                  a,
                  this.numericParametersUi.get(
                    l.NumericParameters.WebRTCMinBitrate
                  )
                ),
                this.addSettingNumeric(
                  a,
                  this.numericParametersUi.get(
                    l.NumericParameters.WebRTCMaxBitrate
                  )
                );
            }
            addSettingText(t, e) {
              e &&
                (t.appendChild(e.rootElement),
                this.textParametersUi.set(e.setting.id, e));
            }
            addSettingFlag(t, e) {
              e &&
                (t.appendChild(e.rootElement),
                this.flagsUi.set(e.setting.id, e));
            }
            addSettingNumeric(t, e) {
              e &&
                (t.appendChild(e.rootElement),
                this.numericParametersUi.set(e.setting.id, e));
            }
            addSettingOption(t, e) {
              e &&
                (t.appendChild(e.rootElement),
                this.optionParametersUi.set(e.setting.id, e));
            }
            onSettingsChanged({ data: { id: t, target: e, type: s } }) {
              if ("flag" === s) {
                const s = t,
                  i = e,
                  n = this.flagsUi.get(s);
                n &&
                  (n.flag !== i.flag && (n.flag = i.flag),
                  n.label !== i.label && (n.label = i.label));
              } else if ("number" === s) {
                const s = t,
                  i = e,
                  n = this.numericParametersUi.get(s);
                n &&
                  (n.number !== i.number && (n.number = i.number),
                  n.label !== i.label && (n.label = i.label));
              } else if ("text" === s) {
                const s = t,
                  i = e,
                  n = this.textParametersUi.get(s);
                n &&
                  (n.text !== i.text && (n.text = i.text),
                  n.label !== i.label && (n.label = i.label));
              } else if ("option" === s) {
                const s = t,
                  i = e,
                  n = this.optionParametersUi.get(s);
                if (n) {
                  const t = n.options,
                    e = i.options;
                  (t.length === e.length && t.every((t) => e.includes(t))) ||
                    (n.options = i.options),
                    n.selected !== i.selected && (n.selected = i.selected),
                    n.label !== i.label && (n.label = i.label);
                }
              }
            }
            addCustomFlagOnSettingChangedListener(t, e) {
              this.customFlags.has(t) && (this.customFlags.get(t).onChange = e);
            }
            setCustomFlagLabel(t, e) {
              this.customFlags.has(t)
                ? ((this.customFlags.get(t).label = e),
                  (this.flagsUi.get(t).label = e))
                : l.Logger.Warning(
                    l.Logger.GetStackTrace(),
                    `Cannot set label for flag called ${t} - it does not exist in the Config.flags map.`
                  );
            }
            isCustomFlagEnabled(t) {
              return this.customFlags.get(t).flag;
            }
          }
          class z {
            constructor(t) {
              (this.stream = t.stream),
                (this.onColorModeChanged = t.onColorModeChanged),
                (this.configUI = new R(this.stream.config)),
                this.createOverlays(),
                (this.statsPanel = new k()),
                this.uiFeaturesElement.appendChild(this.statsPanel.rootElement),
                (this.settingsPanel = new w()),
                this.uiFeaturesElement.appendChild(
                  this.settingsPanel.rootElement
                ),
                (this.videoQpIndicator = new I()),
                this.uiFeaturesElement.appendChild(
                  this.videoQpIndicator.rootElement
                ),
                this.configureSettings(),
                this.createButtons(),
                this.registerCallbacks(),
                this.showConnectOrAutoConnectOverlays(),
                this.setColorMode(this.configUI.isCustomFlagEnabled(N));
            }
            createOverlays() {
              (this.disconnectOverlay = new m(this.stream.videoElementParent)),
                (this.connectOverlay = new h(this.stream.videoElementParent)),
                (this.playOverlay = new u(this.stream.videoElementParent)),
                (this.infoOverlay = new p(this.stream.videoElementParent)),
                (this.errorOverlay = new E(this.stream.videoElementParent)),
                (this.afkOverlay = new v(this.stream.videoElementParent)),
                this.disconnectOverlay.onAction(() => this.stream.reconnect()),
                this.connectOverlay.onAction(() => this.stream.connect()),
                this.playOverlay.onAction(() => this.stream.play());
            }
            createButtons() {
              const t = new f();
              (t.fullscreenIcon.fullscreenElement = this.rootElement),
                this.uiFeaturesElement.appendChild(t.rootElement),
                (t.settingsIcon.rootElement.onclick = () =>
                  this.settingsClicked()),
                (this.settingsPanel.settingsCloseButton.onclick = () =>
                  this.settingsClicked()),
                (t.xrIcon.rootElement.onclick = () => this.stream.toggleXR()),
                (t.statsIcon.rootElement.onclick = () => this.statsClicked()),
                (this.statsPanel.statsCloseButton.onclick = () =>
                  this.statsClicked());
              const e = new C("Show FPS", "Toggle");
              e.addOnClickListener(() => {
                this.stream.requestShowFps();
              });
              const s = new C("Restart Stream", "Restart");
              s.addOnClickListener(() => {
                this.stream.reconnect();
              });
              const i = new C("Request keyframe", "Request");
              i.addOnClickListener(() => {
                this.stream.requestIframe();
              });
              const n = this.configUI.buildSectionWithHeading(
                this.settingsPanel.settingsContentElement,
                "Commands"
              );
              n.appendChild(e.rootElement),
                n.appendChild(i.rootElement),
                n.appendChild(s.rootElement);
            }
            configureSettings() {
              this.configUI.populateSettingsElement(
                this.settingsPanel.settingsContentElement
              ),
                this.configUI.addCustomFlagOnSettingChangedListener(N, (t) => {
                  this.configUI.setCustomFlagLabel(
                    N,
                    `Color Scheme: ${t ? "Light" : "Dark"} Mode`
                  ),
                    this.setColorMode(t);
                });
            }
            registerCallbacks() {
              this.stream.addEventListener(
                "afkWarningActivate",
                ({ data: { countDown: t, dismissAfk: e } }) =>
                  this.showAfkOverlay(t, e)
              ),
                this.stream.addEventListener(
                  "afkWarningUpdate",
                  ({ data: { countDown: t } }) =>
                    this.afkOverlay.updateCountdown(t)
                ),
                this.stream.addEventListener("afkWarningDeactivate", () =>
                  this.afkOverlay.hide()
                ),
                this.stream.addEventListener("afkTimedOut", () =>
                  this.afkOverlay.hide()
                ),
                this.stream.addEventListener(
                  "videoEncoderAvgQP",
                  ({ data: { avgQP: t } }) => this.onVideoEncoderAvgQP(t)
                ),
                this.stream.addEventListener("webRtcSdp", () =>
                  this.onWebRtcSdp()
                ),
                this.stream.addEventListener("webRtcAutoConnect", () =>
                  this.onWebRtcAutoConnect()
                ),
                this.stream.addEventListener("webRtcConnecting", () =>
                  this.onWebRtcConnecting()
                ),
                this.stream.addEventListener("webRtcConnected", () =>
                  this.onWebRtcConnected()
                ),
                this.stream.addEventListener("webRtcFailed", () =>
                  this.onWebRtcFailed()
                ),
                this.stream.addEventListener(
                  "webRtcDisconnected",
                  ({
                    data: { eventString: t, showActionOrErrorOnDisconnect: e },
                  }) => this.onDisconnect(t, e)
                ),
                this.stream.addEventListener("videoInitialized", () =>
                  this.onVideoInitialized()
                ),
                this.stream.addEventListener("streamLoading", () =>
                  this.onStreamLoading()
                ),
                this.stream.addEventListener(
                  "playStreamError",
                  ({ data: { message: t } }) => this.onPlayStreamError(t)
                ),
                this.stream.addEventListener("playStream", () =>
                  this.onPlayStream()
                ),
                this.stream.addEventListener(
                  "playStreamRejected",
                  ({ data: { reason: t } }) => this.onPlayStreamRejected(t)
                ),
                this.stream.addEventListener(
                  "loadFreezeFrame",
                  ({ data: { shouldShowPlayOverlay: t } }) =>
                    this.onLoadFreezeFrame(t)
                ),
                this.stream.addEventListener(
                  "statsReceived",
                  ({ data: { aggregatedStats: t } }) => this.onStatsReceived(t)
                ),
                this.stream.addEventListener(
                  "latencyTestResult",
                  ({ data: { latencyTimings: t } }) =>
                    this.onLatencyTestResults(t)
                ),
                this.stream.addEventListener(
                  "streamerListMessage",
                  ({
                    data: { messageStreamerList: t, autoSelectedStreamerId: e },
                  }) => this.handleStreamerListMessage(t, e)
                ),
                this.stream.addEventListener("settingsChanged", (t) =>
                  this.configUI.onSettingsChanged(t)
                );
            }
            get rootElement() {
              return (
                this._rootElement ||
                  ((this._rootElement = document.createElement("div")),
                  (this._rootElement.id = "playerUI"),
                  this._rootElement.classList.add("noselect"),
                  this._rootElement.appendChild(this.stream.videoElementParent),
                  this._rootElement.appendChild(this.uiFeaturesElement)),
                this._rootElement
              );
            }
            get uiFeaturesElement() {
              return (
                this._uiFeatureElement ||
                  ((this._uiFeatureElement = document.createElement("div")),
                  (this._uiFeatureElement.id = "uiFeatures")),
                this._uiFeatureElement
              );
            }
            showDisconnectOverlay(t) {
              this.hideCurrentOverlay(),
                this.updateDisconnectOverlay(t),
                this.disconnectOverlay.show(),
                (this.currentOverlay = this.disconnectOverlay);
            }
            updateDisconnectOverlay(t) {
              this.disconnectOverlay.update(t);
            }
            onDisconnectionAction() {
              this.disconnectOverlay.activate();
            }
            hideCurrentOverlay() {
              null != this.currentOverlay &&
                (this.currentOverlay.hide(), (this.currentOverlay = null));
            }
            showConnectOverlay() {
              this.hideCurrentOverlay(),
                this.connectOverlay.show(),
                (this.currentOverlay = this.connectOverlay);
            }
            showPlayOverlay() {
              this.hideCurrentOverlay(),
                this.playOverlay.show(),
                (this.currentOverlay = this.playOverlay);
            }
            showTextOverlay(t) {
              this.hideCurrentOverlay(),
                this.infoOverlay.update(t),
                this.infoOverlay.show(),
                (this.currentOverlay = this.infoOverlay);
            }
            showErrorOverlay(t) {
              this.hideCurrentOverlay(),
                this.errorOverlay.update(t),
                this.errorOverlay.show(),
                (this.currentOverlay = this.errorOverlay);
            }
            settingsClicked() {
              this.statsPanel.hide(), this.settingsPanel.toggleVisibility();
            }
            statsClicked() {
              this.settingsPanel.hide(), this.statsPanel.toggleVisibility();
            }
            onConnectAction() {
              this.connectOverlay.activate();
            }
            onPlayAction() {
              this.playOverlay.activate();
            }
            showAfkOverlay(t, e) {
              this.hideCurrentOverlay(),
                this.afkOverlay.updateCountdown(t),
                this.afkOverlay.onAction(() => e()),
                this.afkOverlay.show(),
                (this.currentOverlay = this.afkOverlay);
            }
            showConnectOrAutoConnectOverlays() {
              this.stream.config.isFlagEnabled(l.Flags.AutoConnect) ||
                this.showConnectOverlay();
            }
            onWebRtcAutoConnect() {
              this.showTextOverlay("Auto Connecting Now");
            }
            onWebRtcSdp() {
              this.showTextOverlay("WebRTC Connection Negotiated");
            }
            onStreamLoading() {
              const t = document.createElement("span");
              (t.className = "visually-hidden"), (t.innerHTML = "Loading...");
              const e = document.createElement("div");
              (e.id = "loading-spinner"),
                (e.className = "spinner-border ms-2"),
                e.setAttribute("role", "status"),
                e.appendChild(t),
                this.showTextOverlay("Loading Stream " + e.outerHTML);
            }
            onDisconnect(t, e) {
              0 == e
                ? this.showErrorOverlay(`Disconnected: ${t}`)
                : this.showDisconnectOverlay(
                    `Disconnected: ${t}  <div class="clickableState">Click To Restart</div>`
                  ),
                (this.statsPanel.latencyTest.latencyTestButton.onclick =
                  () => {});
            }
            onWebRtcConnecting() {
              this.showTextOverlay(
                "Starting connection to server, please wait"
              );
            }
            onWebRtcConnected() {
              this.showTextOverlay("WebRTC connected, waiting for video");
            }
            onWebRtcFailed() {
              this.showErrorOverlay("Unable to setup video");
            }
            onLoadFreezeFrame(t) {
              !0 === t &&
                (l.Logger.Log(l.Logger.GetStackTrace(), "showing play overlay"),
                this.showPlayOverlay());
            }
            onPlayStream() {
              this.hideCurrentOverlay();
            }
            onPlayStreamError(t) {
              this.showErrorOverlay(t);
            }
            onPlayStreamRejected(t) {
              this.showPlayOverlay();
            }
            onVideoInitialized() {
              this.stream.config.isFlagEnabled(l.Flags.AutoPlayVideo) ||
                this.showPlayOverlay(),
                (this.statsPanel.latencyTest.latencyTestButton.onclick = () => {
                  this.stream.requestLatencyTest();
                });
            }
            onVideoEncoderAvgQP(t) {
              this.videoQpIndicator.updateQpTooltip(t);
            }
            onInitialSettings(t) {
              t.PixelStreamingSettings &&
                t.PixelStreamingSettings.DisableLatencyTest &&
                ((this.statsPanel.latencyTest.latencyTestButton.disabled = !0),
                (this.statsPanel.latencyTest.latencyTestButton.title =
                  "Disabled by -PixelStreamingDisableLatencyTester=true"),
                l.Logger.Info(
                  l.Logger.GetStackTrace(),
                  "-PixelStreamingDisableLatencyTester=true, requesting latency report from the the browser to UE is disabled."
                ));
            }
            onStatsReceived(t) {
              this.statsPanel.handleStats(t);
            }
            onLatencyTestResults(t) {
              this.statsPanel.latencyTest.handleTestResult(t);
            }
            handleStreamerListMessage(t, e) {
              null === e &&
                (0 === t.ids.length
                  ? this.showDisconnectOverlay(
                      'No streamers connected. <div class="clickableState">Click To Restart</div>'
                    )
                  : this.showTextOverlay(
                      "Multiple streamers detected. Use the dropdown in the settings menu to select the streamer"
                    ));
            }
            setColorMode(t) {
              this.onColorModeChanged && this.onColorModeChanged(t);
            }
          }
          const B = ((t) => {
              var e = {};
              return n.d(e, t), e;
            })({ default: () => jss__WEBPACK_IMPORTED_MODULE_1__["default"] }),
            U = ((t) => {
              var e = {};
              return n.d(e, t), e;
            })({
              default: () =>
                jss_plugin_global__WEBPACK_IMPORTED_MODULE_2__["default"],
            }),
            D = ((t) => {
              var e = {};
              return n.d(e, t), e;
            })({
              default: () =>
                jss_plugin_camel_case__WEBPACK_IMPORTED_MODULE_3__["default"],
            });
          class H {
            constructor(t) {
              (this.defaultLightModePalette = {
                "--color0": "#e2e0dd80",
                "--color1": "#FFFFFF",
                "--color2": "#000000",
                "--color3": "#0585fe",
                "--color4": "#35b350",
                "--color5": "#ffab00",
                "--color6": "#e1e2dd",
                "--color7": "#c3c4bf",
              }),
                (this.defaultDarkModePalette = {
                  "--color0": "#1D1F2280",
                  "--color1": "#000000",
                  "--color2": "#FFFFFF",
                  "--color3": "#0585fe",
                  "--color4": "#35b350",
                  "--color5": "#ffab00",
                  "--color6": "#1e1d22",
                  "--color7": "#3c3b40",
                }),
                (this.defaultStyles = {
                  ":root": {
                    "--color0": "#1D1F2280",
                    "--color1": "#000000",
                    "--color2": "#FFFFFF",
                    "--color3": "#0585fe",
                    "--color4": "#35b350",
                    "--color5": "#ffab00",
                    "--color6": "#1e1d22",
                    "--color7": "#3c3b40",
                    "--color8": "#41008c",
                    "--color9": "#3e0070",
                    "--color10": "#2e0052",
                    "--color11": "rgba(65,0,139,1)",
                  },
                  ".noselect": { userSelect: "none" },
                  "#playerUI": {
                    width: "100%",
                    height: "100%",
                    position: "relative",
                  },
                  "#videoElementParent": {
                    width: "100%",
                    height: "100%",
                    position: "absolute",
                    backgroundColor: "var(--color1)",
                  },
                  "#uiFeatures": {
                    width: "100%",
                    height: "100%",
                    zIndex: "30",
                    position: "relative",
                    color: "var(--color2)",
                    pointerEvents: "none",
                    overflow: "hidden",
                  },
                  ".UiTool .tooltiptext": {
                    visibility: "hidden",
                    width: "auto",
                    color: "var(--color2)",
                    textAlign: "center",
                    borderRadius: "15px",
                    padding: "0px 10px",
                    fontFamily: "'Montserrat', sans-serif",
                    fontSize: "0.75rem",
                    letterSpacing: "0.75px",
                    position: "absolute",
                    top: "0",
                    transform: "translateY(25%)",
                    right: "125%",
                    zIndex: "20",
                  },
                  ".UiTool:hover .tooltiptext": {
                    visibility: "visible",
                    backgroundColor: "var(--color7)",
                  },
                  "#connection .tooltiptext": {
                    top: "125%",
                    transform: "translateX(-25%)",
                    left: "0",
                    zIndex: "20",
                    padding: "5px 10px",
                  },
                  "#connection": {
                    position: "absolute",
                    bottom: "8%",
                    left: "5%",
                    fontFamily: "'Michroma', sans-serif",
                    height: "3rem",
                    width: "3rem",
                    pointerEvents: "all",
                  },
                  "#settings-panel .tooltiptext": {
                    display: "block",
                    top: "125%",
                    transform: "translateX(-50%)",
                    left: "0",
                    zIndex: "20",
                    padding: "5px 10px",
                    border: "3px solid var(--color3)",
                    width: "max-content",
                    fallbacks: [
                      { width: "max-content" },
                      { border: "3px solid var(--color3)" },
                      { padding: "5px 10px" },
                      { zIndex: "20" },
                      { left: "0" },
                      { transform: "translateX(-50%)" },
                      { top: "125%" },
                      { display: "block" },
                    ],
                  },
                  "#controls": {
                    position: "absolute",
                    top: "3%",
                    right: "2%",
                    fontFamily: "'Michroma', sans-serif",
                    pointerEvents: "all",
                    display: "flex",
					gap: "20px"
                  },
                  "#controls>*": {
                    marginBottom: "0.5rem",
                    borderRadius: "50%",
                    display: "block",
                    height: "2rem",
                    lineHeight: "1.75rem",
                    padding: "0.5rem",
                  },
                  "#controls #additionalinfo": {
                    textAlign: "center",
                    fontFamily: "'Montserrat', sans-serif",
                  },
                  "#fullscreen-btn": { padding: "0.6rem !important" },
                  "#minimizeIcon": { display: "none" },
                  "#settingsBtn, #statsBtn": { cursor: "pointer" },
                  "#uiFeatures button": {
                    backgroundColor: "var(--color7)",
                    border: "1px solid var(--color7)",
                    color: "var(--color2)",
                    position: "relative",
                    width: "3rem",
                    height: "3rem",
                    padding: "0.5rem",
                    textAlign: "center",
                  },
                  "#uiFeatures button:hover": {
                    backgroundColor: "var(--color3)",
                    border: "3px solid var(--color3)",
                    transition: "0.25s ease",
                    paddingLeft: "0.55rem",
                    paddingTop: "0.55rem",
                  },
                  "#uiFeatures button:active": {
                    border: "3px solid var(--color3)",
                    backgroundColor: "var(--color7)",
                    paddingLeft: "0.55rem",
                    paddingTop: "0.55rem",
                  },
                  ".btn-flat": {
                    backgroundColor: "transparent",
                    color: "var(--color2)",
                    fontFamily: "'Montserrat'",
                    fontWeight: "bold",
                    border: "3px solid var(--color3)",
                    borderRadius: "1rem",
                    fontSize: "0.75rem",
                    paddingLeft: "0.5rem",
                    paddingRight: "0.5rem",
                    cursor: "pointer",
                    textAlign: "center",
                  },
                  ".btn-flat:hover": {
                    backgroundColor: "var(--color3)",
                    transition: "ease 0.3s",
                  },
                  ".btn-flat:disabled": {
                    background: "var(--color7)",
                    borderColor: "var(--color3)",
                    color: "var(--color3)",
                    cursor: "default",
                  },
                  ".btn-flat:active": { backgroundColor: "transparent" },
                  ".btn-flat:focus": { outline: "none" },
                  "#uiFeatures img": { width: "100%", height: "100%" },
                  ".panel-wrap": {
                    position: "absolute",
                    top: "0",
                    bottom: "0",
                    left: "0",
                    height: "100%",
                    minWidth: "20vw",
                    maxWidth: "100vw",
                    transform: "translateX(-100%)",
                    transition: ".3s ease-out",
                    pointerEvents: "all",
                    backdropFilter: "blur(10px)",
                    webkitBackdropFilter: "blur(10px)",
                    overflowY: "auto",
                    overflowX: "hidden",
                    backgroundColor: "var(--color0)",
                  },
                  ".panel-wrap-visible": { transform: "translateX(0%)" },
                  ".panel": { overflowY: "auto", padding: "1em" },
                  "#settingsHeading, #statsHeading": {
                    display: "inline-block",
                    fontSize: "2em",
                    marginBlockStart: "0.67em",
                    marginBlockEnd: "0.67em",
                    marginInlineStart: "0px",
                    marginInlineEnd: "0px",
                    position: "relative",
                    padding: "0 0 0 2rem",
                  },
                  "#settingsClose, #statsClose": {
                    margin: "0.5rem",
                    paddingTop: "0.5rem",
                    paddingBottom: "0.5rem",
                    paddingRight: "0.5rem",
                    fontSize: "2em",
                    float: "right",
                  },
                  "#settingsClose:after, #statsClose:after": {
                    paddingLeft: "0.5rem",
                    display: "inline-block",
                    content: '"\\00d7"',
                  },
                  "#settingsClose:hover, #statsClose:hover": {
                    color: "var(--color3)",
                    transition: "ease 0.3s",
                  },
                  "#settingsContent, #statsContent": {
                    marginLeft: "2rem",
                    marginRight: "2rem",
                  },
                  ".setting": {
                    display: "flex",
                    flexDirection: "row",
                    justifyContent: "space-between",
                    padding: "0.15rem 10px 0.15rem 10px",
                  },
                  ".settings-text": {
                    color: "var(--color2)",
                    verticalAlign: "middle",
                    fontWeight: "normal",
                  },
                  ".settings-option": {
                    width: "100%",
                    textOverflow: "ellipsis",
                    whiteSpace: "nowrap",
                  },
                  "#connectOverlay, #playOverlay, #infoOverlay, #errorOverlay, #afkOverlay, #disconnectOverlay":
                    {
                      zIndex: "30",
                      position: "absolute",
                      color: "var(--color2)",
                      fontSize: "1.8em",
                      width: "100%",
                      height: "100%",
                      backgroundColor: "var(--color1)",
                      alignItems: "center",
                      justifyContent: "center",
                      textTransform: "uppercase",
                    },
					
                  ".clickableState": {
                    alignItems: "center",
                    justifyContent: "center",
                    display: "flex",
                    cursor: "pointer",
                  },
                  ".textDisplayState": { display: "flex" },
                  ".hiddenState": { display: "none" },
                  "#playButton, #connectButton": {
                    display: "inline-block",
                    height: "auto",
                    zIndex: "30",
                  },
                  "img#playButton": { maxWidth: "241px", width: "10%" },
                  "#uiInteraction": { position: "fixed" },
                  "#UIInteractionButtonBoundary": { padding: "2px" },
                  "#UIInteractionButton": { cursor: "pointer" },
                  "#hiddenInput": {
                    position: "absolute",
                    left: "-10%",
                    width: "0px",
                    opacity: "0",
                  },
                  "#editTextButton": {
                    position: "absolute",
                    height: "40px",
                    width: "40px",
                  },
                  ".btn-overlay": {
                    verticalAlign: "middle",
                    display: "inline-block",
                  },
                  ".tgl-switch": {
                    verticalAlign: "middle",
                    display: "inline-block",
                  },
                  ".tgl-switch .tgl": { display: "none" },
                  ".tgl, .tgl:after, .tgl:before, .tgl *, .tgl *:after, .tgl *:before, .tgl+.tgl-slider":
                    { webkitBoxSizing: "border-box", boxSizing: "border-box" },
                  ".tgl::-moz-selection, .tgl:after::-moz-selection, .tgl:before::-moz-selection, .tgl *::-moz-selection, .tgl *:after::-moz-selection, .tgl *:before::-moz-selection, .tgl+.tgl-slider::-moz-selection":
                    { background: "none" },
                  ".tgl::selection, .tgl:after::selection, .tgl:before::selection, .tgl *::selection, .tgl *:after::selection, .tgl *:before::selection, .tgl+.tgl-slider::selection":
                    { background: "none" },
                  ".tgl-slider": {},
                  ".tgl+.tgl-slider": {
                    outline: "0",
                    display: "block",
                    width: "40px",
                    height: "18px",
                    position: "relative",
                    cursor: "pointer",
                    userSelect: "none",
                  },
                  ".tgl+.tgl-slider:after, .tgl+.tgl-slider:before": {
                    position: "relative",
                    display: "block",
                    content: '""',
                    width: "50%",
                    height: "100%",
                  },
                  ".tgl+.tgl-slider:after": { left: "0" },
                  ".tgl+.tgl-slider:before": { display: "none" },
                  ".tgl-flat+.tgl-slider": {
                    padding: "2px",
                    webkitTransition: "all .2s ease",
                    transition: "all .2s ease",
                    background: "var(--color6)",
                    border: "3px solid var(--color7)",
                    borderRadius: "2em",
                  },
                  ".tgl-flat+.tgl-slider:after": {
                    webkitTransition: "all .2s ease",
                    transition: "all .2s ease",
                    background: "var(--color7)",
                    content: '""',
                    borderRadius: "1em",
                  },
                  ".tgl-flat:checked+.tgl-slider": {
                    border: "3px solid var(--color3)",
                  },
                  ".tgl-flat:checked+.tgl-slider:after": {
                    left: "50%",
                    background: "var(--color3)",
                  },
                  ".btn-apply": {
                    display: "block !important",
                    marginLeft: "auto",
                    marginRight: "auto",
                    width: "40%",
                  },
                  ".form-control": {
                    backgroundColor: "var(--color7)",
                    border: "2px solid var(--color7)",
                    borderRadius: "4px",
                    color: "var(--color2)",
                    textAlign: "right",
                    fontFamily: "inherit",
                  },
                  ".form-control:hover": { borderColor: "var(--color7)" },
                  ".form-group": {
                    paddingTop: "4px",
                    display: "grid",
                    gridTemplateColumns: "80% 20%",
                    rowGap: "4px",
                    paddingRight: "10px",
                    paddingLeft: "10px",
                  },
                  ".form-group label": {
                    verticalAlign: "middle",
                    fontWeight: "normal",
                  },
                  ".settingsContainer": {
                    display: "flex",
                    flexDirection: "column",
                    borderBottom: "1px solid var(--color7)",
                    paddingTop: "10px",
                    paddingBottom: "10px",
                  },
                  ".settingsContainer> :first-child": {
                    marginTop: "4px",
                    marginBottom: "4px",
                    fontWeight: "bold",
                    justifyContent: "space-between",
                    display: "flex",
                    flexDirection: "row",
                    alignItems: "baseline",
                  },
                  ".collapse": { paddingLeft: "5%" },
                  "#streamTools": {
                    borderBottomRightRadius: "5px",
                    borderBottomLeftRadius: "5px",
                    userSelect: "none",
                    position: "absolute",
                    top: "0",
                    right: "2%",
                    zIndex: "100",
                    border: "4px solid var(--colour8)",
                    borderTopWidth: "0px",
                  },
                  ".settingsHeader": { fontStyle: "italic" },
                  "#streamToolsHeader": {
                    display: "flex",
                    flexDirection: "row",
                    justifyContent: "space-between",
                    borderBottom: "1px solid var(--colour8)",
                    backgroundColor: "var(--color7)",
                  },
                  ".streamTools": {
                    backgroundColor: "var(--color2)",
                    fontFamily: "var(--buttonFont)",
                    fontWeight: "lighter",
                    color: "var(--color7)",
                  },
                  ".streamTools-shown>#streamToolsSettings, .streamTools-shown>#streamToolsStats":
                    { display: "block" },
                  "#streamToolsToggle": { width: "100%" },
                  "#qualityStatus": { fontSize: "37px", paddingRight: "4px" },
                  ".svgIcon": { fill: "var(--color2)" },
                });
              const {
                  customStyles: e,
                  lightModePalette: s,
                  darkModePalette: i,
                } = null != t ? t : {},
                n = { plugins: [(0, U.default)(), (0, D.default)()] };
              B.default.setup(n),
                (this.customStyles = e),
                (this.lightModePalette =
                  null != s ? s : this.defaultLightModePalette),
                (this.darkModePalette =
                  null != i ? i : this.defaultDarkModePalette);
            }
            applyStyleSheet() {
              B.default
                .createStyleSheet({
                  "@global": Object.assign(
                    Object.assign({}, this.defaultStyles),
                    this.customStyles
                  ),
                })
                .attach();
            }
            applyPalette(t) {
              const e = document.querySelector(":root");
              e.style.setProperty("--color0", t["--color0"]),
                e.style.setProperty("--color1", t["--color1"]),
                e.style.setProperty("--color2", t["--color2"]),
                e.style.setProperty("--color3", t["--color3"]),
                e.style.setProperty("--color4", t["--color4"]),
                e.style.setProperty("--color5", t["--color5"]),
                e.style.setProperty("--color6", t["--color6"]),
                e.style.setProperty("--color7", t["--color7"]);
            }
            setColorMode(t) {
              t
                ? this.applyPalette(this.lightModePalette)
                : this.applyPalette(this.darkModePalette);
            }
          }
          var Q = o.ym,
            W = o.EW,
            Z = o.Mx,
            X = o.L3,
            j = o.rl,
            q = o.NR,
            V = o.f1,
            G = o.IY,
            J = o.RZ,
            Y = o.XY,
            K = o.Fk,
            $ = o.Zh,
            tt = o.ek,
            et = o.MG,
            st = o.gE,
            it = o.tW,
            nt = o.wr;

          /***/
        },

      /***/ "./node_modules/hyphenate-style-name/index.js":
        /*!****************************************************!*\
  !*** ./node_modules/hyphenate-style-name/index.js ***!
  \****************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */
          });
          /* eslint-disable no-var, prefer-template */
          var uppercasePattern = /[A-Z]/g;
          var msPattern = /^ms-/;
          var cache = {};

          function toHyphenLower(match) {
            return "-" + match.toLowerCase();
          }

          function hyphenateStyleName(name) {
            if (cache.hasOwnProperty(name)) {
              return cache[name];
            }

            var hName = name.replace(uppercasePattern, toHyphenLower);
            return (cache[name] = msPattern.test(hName) ? "-" + hName : hName);
          }

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ =
            hyphenateStyleName;

          /***/
        },

      /***/ "./node_modules/is-in-browser/dist/module.js":
        /*!***************************************************!*\
  !*** ./node_modules/is-in-browser/dist/module.js ***!
  \***************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */ isBrowser: () => /* binding */ isBrowser,
            /* harmony export */
          });
          var _typeof =
            typeof Symbol === "function" && typeof Symbol.iterator === "symbol"
              ? function (obj) {
                  return typeof obj;
                }
              : function (obj) {
                  return obj &&
                    typeof Symbol === "function" &&
                    obj.constructor === Symbol &&
                    obj !== Symbol.prototype
                    ? "symbol"
                    : typeof obj;
                };

          var isBrowser =
            (typeof window === "undefined" ? "undefined" : _typeof(window)) ===
              "object" &&
            (typeof document === "undefined"
              ? "undefined"
              : _typeof(document)) === "object" &&
            document.nodeType === 9;

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ =
            isBrowser;

          /***/
        },

      /***/ "./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js":
        /*!******************************************************************************!*\
  !*** ./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js ***!
  \******************************************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */
          });
          /* harmony import */ var hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! hyphenate-style-name */ "./node_modules/hyphenate-style-name/index.js"
            );

          /**
           * Convert camel cased property names to dash separated.
           */

          function convertCase(style) {
            var converted = {};

            for (var prop in style) {
              var key =
                prop.indexOf("--") === 0
                  ? prop
                  : (0,
                    hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__[
                      "default"
                    ])(prop);
              converted[key] = style[prop];
            }

            if (style.fallbacks) {
              if (Array.isArray(style.fallbacks))
                converted.fallbacks = style.fallbacks.map(convertCase);
              else converted.fallbacks = convertCase(style.fallbacks);
            }

            return converted;
          }
          /**
           * Allow camel cased property names by converting them back to dasherized.
           */

          function camelCase() {
            function onProcessStyle(style) {
              if (Array.isArray(style)) {
                // Handle rules like @font-face, which can have multiple styles in an array
                for (var index = 0; index < style.length; index++) {
                  style[index] = convertCase(style[index]);
                }

                return style;
              }

              return convertCase(style);
            }

            function onChangeValue(value, prop, rule) {
              if (prop.indexOf("--") === 0) {
                return value;
              }

              var hyphenatedProp = (0,
              hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__["default"])(
                prop
              ); // There was no camel case in place

              if (prop === hyphenatedProp) return value;
              rule.prop(hyphenatedProp, value); // Core will ignore that property value we set the proper one above.

              return null;
            }

            return {
              onProcessStyle: onProcessStyle,
              onChangeValue: onChangeValue,
            };
          }

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ =
            camelCase;

          /***/
        },

      /***/ "./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js":
        /*!**********************************************************************!*\
  !*** ./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js ***!
  \**********************************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */
          });
          /* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js"
            );
          /* harmony import */ var jss__WEBPACK_IMPORTED_MODULE_1__ =
            __webpack_require__(
              /*! jss */ "./node_modules/jss/dist/jss.esm.js"
            );

          var at = "@global";
          var atPrefix = "@global ";

          var GlobalContainerRule =
            /*#__PURE__*/
            (function () {
              function GlobalContainerRule(key, styles, options) {
                this.type = "global";
                this.at = at;
                this.isProcessed = false;
                this.key = key;
                this.options = options;
                this.rules = new jss__WEBPACK_IMPORTED_MODULE_1__.RuleList(
                  (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, options, {
                    parent: this,
                  })
                );

                for (var selector in styles) {
                  this.rules.add(selector, styles[selector]);
                }

                this.rules.process();
              }
              /**
               * Get a rule.
               */

              var _proto = GlobalContainerRule.prototype;

              _proto.getRule = function getRule(name) {
                return this.rules.get(name);
              };
              /**
               * Create and register rule, run plugins.
               */

              _proto.addRule = function addRule(name, style, options) {
                var rule = this.rules.add(name, style, options);
                if (rule) this.options.jss.plugins.onProcessRule(rule);
                return rule;
              };
              /**
               * Replace rule, run plugins.
               */

              _proto.replaceRule = function replaceRule(name, style, options) {
                var newRule = this.rules.replace(name, style, options);
                if (newRule) this.options.jss.plugins.onProcessRule(newRule);
                return newRule;
              };
              /**
               * Get index of a rule.
               */

              _proto.indexOf = function indexOf(rule) {
                return this.rules.indexOf(rule);
              };
              /**
               * Generates a CSS string.
               */

              _proto.toString = function toString(options) {
                return this.rules.toString(options);
              };

              return GlobalContainerRule;
            })();

          var GlobalPrefixedRule =
            /*#__PURE__*/
            (function () {
              function GlobalPrefixedRule(key, style, options) {
                this.type = "global";
                this.at = at;
                this.isProcessed = false;
                this.key = key;
                this.options = options;
                var selector = key.substr(atPrefix.length);
                this.rule = options.jss.createRule(
                  selector,
                  style,
                  (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, options, {
                    parent: this,
                  })
                );
              }

              var _proto2 = GlobalPrefixedRule.prototype;

              _proto2.toString = function toString(options) {
                return this.rule ? this.rule.toString(options) : "";
              };

              return GlobalPrefixedRule;
            })();

          var separatorRegExp = /\s*,\s*/g;

          function addScope(selector, scope) {
            var parts = selector.split(separatorRegExp);
            var scoped = "";

            for (var i = 0; i < parts.length; i++) {
              scoped += scope + " " + parts[i].trim();
              if (parts[i + 1]) scoped += ", ";
            }

            return scoped;
          }

          function handleNestedGlobalContainerRule(rule, sheet) {
            var options = rule.options,
              style = rule.style;
            var rules = style ? style[at] : null;
            if (!rules) return;

            for (var name in rules) {
              sheet.addRule(
                name,
                rules[name],
                (0,
                _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                  "default"
                ])({}, options, {
                  selector: addScope(name, rule.selector),
                })
              );
            }

            delete style[at];
          }

          function handlePrefixedGlobalRule(rule, sheet) {
            var options = rule.options,
              style = rule.style;

            for (var prop in style) {
              if (prop[0] !== "@" || prop.substr(0, at.length) !== at) continue;
              var selector = addScope(prop.substr(at.length), rule.selector);
              sheet.addRule(
                selector,
                style[prop],
                (0,
                _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                  "default"
                ])({}, options, {
                  selector: selector,
                })
              );
              delete style[prop];
            }
          }
          /**
           * Convert nested rules to separate, remove them from original styles.
           */

          function jssGlobal() {
            function onCreateRule(name, styles, options) {
              if (!name) return null;

              if (name === at) {
                return new GlobalContainerRule(name, styles, options);
              }

              if (
                name[0] === "@" &&
                name.substr(0, atPrefix.length) === atPrefix
              ) {
                return new GlobalPrefixedRule(name, styles, options);
              }

              var parent = options.parent;

              if (parent) {
                if (
                  parent.type === "global" ||
                  (parent.options.parent &&
                    parent.options.parent.type === "global")
                ) {
                  options.scoped = false;
                }
              }

              if (!options.selector && options.scoped === false) {
                options.selector = name;
              }

              return null;
            }

            function onProcessRule(rule, sheet) {
              if (rule.type !== "style" || !sheet) return;
              handleNestedGlobalContainerRule(rule, sheet);
              handlePrefixedGlobalRule(rule, sheet);
            }

            return {
              onCreateRule: onCreateRule,
              onProcessRule: onProcessRule,
            };
          }

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ =
            jssGlobal;

          /***/
        },

      /***/ "./node_modules/jss/dist/jss.esm.js":
        /*!******************************************!*\
  !*** ./node_modules/jss/dist/jss.esm.js ***!
  \******************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ RuleList: () => /* binding */ RuleList,
            /* harmony export */ SheetsManager: () =>
              /* binding */ SheetsManager,
            /* harmony export */ SheetsRegistry: () =>
              /* binding */ SheetsRegistry,
            /* harmony export */ create: () => /* binding */ createJss,
            /* harmony export */ createGenerateId: () =>
              /* binding */ createGenerateId,
            /* harmony export */ createRule: () => /* binding */ createRule,
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */ getDynamicStyles: () =>
              /* binding */ getDynamicStyles,
            /* harmony export */ hasCSSTOMSupport: () =>
              /* binding */ hasCSSTOMSupport,
            /* harmony export */ sheets: () => /* binding */ sheets,
            /* harmony export */ toCssValue: () => /* binding */ toCssValue,
            /* harmony export */
          });
          /* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js"
            );
          /* harmony import */ var is_in_browser__WEBPACK_IMPORTED_MODULE_1__ =
            __webpack_require__(
              /*! is-in-browser */ "./node_modules/is-in-browser/dist/module.js"
            );
          /* harmony import */ var tiny_warning__WEBPACK_IMPORTED_MODULE_6__ =
            __webpack_require__(
              /*! tiny-warning */ "./node_modules/tiny-warning/dist/tiny-warning.esm.js"
            );
          /* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js"
            );
          /* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"
            );
          /* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"
            );
          /* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_5__ =
            __webpack_require__(
              /*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"
            );

          var plainObjectConstrurctor = {}.constructor;
          function cloneStyle(style) {
            if (style == null || typeof style !== "object") return style;
            if (Array.isArray(style)) return style.map(cloneStyle);
            if (style.constructor !== plainObjectConstrurctor) return style;
            var newStyle = {};

            for (var name in style) {
              newStyle[name] = cloneStyle(style[name]);
            }

            return newStyle;
          }

          /**
           * Create a rule instance.
           */

          function createRule(name, decl, options) {
            if (name === void 0) {
              name = "unnamed";
            }

            var jss = options.jss;
            var declCopy = cloneStyle(decl);
            var rule = jss.plugins.onCreateRule(name, declCopy, options);
            if (rule) return rule; // It is an at-rule and it has no instance.

            if (name[0] === "@") {
              true
                ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                    false,
                    "[JSS] Unknown rule " + name
                  )
                : 0;
            }

            return null;
          }

          var join = function join(value, by) {
            var result = "";

            for (var i = 0; i < value.length; i++) {
              // Remove !important from the value, it will be readded later.
              if (value[i] === "!important") break;
              if (result) result += by;
              result += value[i];
            }

            return result;
          };
          /**
           * Converts JSS array value to a CSS string.
           *
           * `margin: [['5px', '10px']]` > `margin: 5px 10px;`
           * `border: ['1px', '2px']` > `border: 1px, 2px;`
           * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`
           * `color: ['red', !important]` > `color: red !important;`
           */

          var toCssValue = function toCssValue(value) {
            if (!Array.isArray(value)) return value;
            var cssValue = ""; // Support space separated values via `[['5px', '10px']]`.

            if (Array.isArray(value[0])) {
              for (var i = 0; i < value.length; i++) {
                if (value[i] === "!important") break;
                if (cssValue) cssValue += ", ";
                cssValue += join(value[i], " ");
              }
            } else cssValue = join(value, ", "); // Add !important, because it was ignored.

            if (value[value.length - 1] === "!important") {
              cssValue += " !important";
            }

            return cssValue;
          };

          function getWhitespaceSymbols(options) {
            if (options && options.format === false) {
              return {
                linebreak: "",
                space: "",
              };
            }

            return {
              linebreak: "\n",
              space: " ",
            };
          }

          /**
           * Indent a string.
           * http://jsperf.com/array-join-vs-for
           */

          function indentStr(str, indent) {
            var result = "";

            for (var index = 0; index < indent; index++) {
              result += "  ";
            }

            return result + str;
          }
          /**
           * Converts a Rule to CSS string.
           */

          function toCss(selector, style, options) {
            if (options === void 0) {
              options = {};
            }

            var result = "";
            if (!style) return result;
            var _options = options,
              _options$indent = _options.indent,
              indent = _options$indent === void 0 ? 0 : _options$indent;
            var fallbacks = style.fallbacks;

            if (options.format === false) {
              indent = -Infinity;
            }

            var _getWhitespaceSymbols = getWhitespaceSymbols(options),
              linebreak = _getWhitespaceSymbols.linebreak,
              space = _getWhitespaceSymbols.space;

            if (selector) indent++; // Apply fallbacks first.

            if (fallbacks) {
              // Array syntax {fallbacks: [{prop: value}]}
              if (Array.isArray(fallbacks)) {
                for (var index = 0; index < fallbacks.length; index++) {
                  var fallback = fallbacks[index];

                  for (var prop in fallback) {
                    var value = fallback[prop];

                    if (value != null) {
                      if (result) result += linebreak;
                      result += indentStr(
                        prop + ":" + space + toCssValue(value) + ";",
                        indent
                      );
                    }
                  }
                }
              } else {
                // Object syntax {fallbacks: {prop: value}}
                for (var _prop in fallbacks) {
                  var _value = fallbacks[_prop];

                  if (_value != null) {
                    if (result) result += linebreak;
                    result += indentStr(
                      _prop + ":" + space + toCssValue(_value) + ";",
                      indent
                    );
                  }
                }
              }
            }

            for (var _prop2 in style) {
              var _value2 = style[_prop2];

              if (_value2 != null && _prop2 !== "fallbacks") {
                if (result) result += linebreak;
                result += indentStr(
                  _prop2 + ":" + space + toCssValue(_value2) + ";",
                  indent
                );
              }
            } // Allow empty style in this case, because properties will be added dynamically.

            if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.

            if (!selector) return result;
            indent--;
            if (result) result = "" + linebreak + result + linebreak;
            return (
              indentStr("" + selector + space + "{" + result, indent) +
              indentStr("}", indent)
            );
          }

          var escapeRegex = /([[\].#*$><+~=|^:(),"'`\s])/g;
          var nativeEscape = typeof CSS !== "undefined" && CSS.escape;
          var escape = function (str) {
            return nativeEscape
              ? nativeEscape(str)
              : str.replace(escapeRegex, "\\$1");
          };

          var BaseStyleRule =
            /*#__PURE__*/
            (function () {
              function BaseStyleRule(key, style, options) {
                this.type = "style";
                this.isProcessed = false;
                var sheet = options.sheet,
                  Renderer = options.Renderer;
                this.key = key;
                this.options = options;
                this.style = style;
                if (sheet) this.renderer = sheet.renderer;
                else if (Renderer) this.renderer = new Renderer();
              }
              /**
               * Get or set a style property.
               */

              var _proto = BaseStyleRule.prototype;

              _proto.prop = function prop(name, value, options) {
                // It's a getter.
                if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.

                var force = options ? options.force : false;
                if (!force && this.style[name] === value) return this;
                var newValue = value;

                if (!options || options.process !== false) {
                  newValue = this.options.jss.plugins.onChangeValue(
                    value,
                    name,
                    this
                  );
                }

                var isEmpty = newValue == null || newValue === false;
                var isDefined = name in this.style; // Value is empty and wasn't defined before.

                if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.

                var remove = isEmpty && isDefined;
                if (remove) delete this.style[name];
                else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.

                if (this.renderable && this.renderer) {
                  if (remove)
                    this.renderer.removeProperty(this.renderable, name);
                  else
                    this.renderer.setProperty(this.renderable, name, newValue);
                  return this;
                }

                var sheet = this.options.sheet;

                if (sheet && sheet.attached) {
                  true
                    ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                        false,
                        '[JSS] Rule is not linked. Missing sheet option "link: true".'
                      )
                    : 0;
                }

                return this;
              };

              return BaseStyleRule;
            })();
          var StyleRule =
            /*#__PURE__*/
            (function (_BaseStyleRule) {
              (0,
              _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__[
                "default"
              ])(StyleRule, _BaseStyleRule);

              function StyleRule(key, style, options) {
                var _this;

                _this = _BaseStyleRule.call(this, key, style, options) || this;
                var selector = options.selector,
                  scoped = options.scoped,
                  sheet = options.sheet,
                  generateId = options.generateId;

                if (selector) {
                  _this.selectorText = selector;
                } else if (scoped !== false) {
                  _this.id = generateId(
                    (0,
                    _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[
                      "default"
                    ])(
                      (0,
                      _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[
                        "default"
                      ])(_this)
                    ),
                    sheet
                  );
                  _this.selectorText = "." + escape(_this.id);
                }

                return _this;
              }
              /**
               * Set selector string.
               * Attention: use this with caution. Most browsers didn't implement
               * selectorText setter, so this may result in rerendering of entire Style Sheet.
               */

              var _proto2 = StyleRule.prototype;

              /**
               * Apply rule to an element inline.
               */
              _proto2.applyTo = function applyTo(renderable) {
                var renderer = this.renderer;

                if (renderer) {
                  var json = this.toJSON();

                  for (var prop in json) {
                    renderer.setProperty(renderable, prop, json[prop]);
                  }
                }

                return this;
              };
              /**
               * Returns JSON representation of the rule.
               * Fallbacks are not supported.
               * Useful for inline styles.
               */

              _proto2.toJSON = function toJSON() {
                var json = {};

                for (var prop in this.style) {
                  var value = this.style[prop];
                  if (typeof value !== "object") json[prop] = value;
                  else if (Array.isArray(value)) json[prop] = toCssValue(value);
                }

                return json;
              };
              /**
               * Generates a CSS string.
               */

              _proto2.toString = function toString(options) {
                var sheet = this.options.sheet;
                var link = sheet ? sheet.options.link : false;
                var opts = link
                  ? (0,
                    _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                      "default"
                    ])({}, options, {
                      allowEmpty: true,
                    })
                  : options;
                return toCss(this.selectorText, this.style, opts);
              };

              (0,
              _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__[
                "default"
              ])(StyleRule, [
                {
                  key: "selector",
                  set: function set(selector) {
                    if (selector === this.selectorText) return;
                    this.selectorText = selector;
                    var renderer = this.renderer,
                      renderable = this.renderable;
                    if (!renderable || !renderer) return;
                    var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.

                    if (!hasChanged) {
                      renderer.replaceRule(renderable, this);
                    }
                  },
                  /**
                   * Get selector string.
                   */
                  get: function get() {
                    return this.selectorText;
                  },
                },
              ]);

              return StyleRule;
            })(BaseStyleRule);
          var pluginStyleRule = {
            onCreateRule: function onCreateRule(key, style, options) {
              if (
                key[0] === "@" ||
                (options.parent && options.parent.type === "keyframes")
              ) {
                return null;
              }

              return new StyleRule(key, style, options);
            },
          };

          var defaultToStringOptions = {
            indent: 1,
            children: true,
          };
          var atRegExp = /@([\w-]+)/;
          /**
           * Conditional rule for @media, @supports
           */

          var ConditionalRule =
            /*#__PURE__*/
            (function () {
              function ConditionalRule(key, styles, options) {
                this.type = "conditional";
                this.isProcessed = false;
                this.key = key;
                var atMatch = key.match(atRegExp);
                this.at = atMatch ? atMatch[1] : "unknown"; // Key might contain a unique suffix in case the `name` passed by user was duplicate.

                this.query = options.name || "@" + this.at;
                this.options = options;
                this.rules = new RuleList(
                  (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, options, {
                    parent: this,
                  })
                );

                for (var name in styles) {
                  this.rules.add(name, styles[name]);
                }

                this.rules.process();
              }
              /**
               * Get a rule.
               */

              var _proto = ConditionalRule.prototype;

              _proto.getRule = function getRule(name) {
                return this.rules.get(name);
              };
              /**
               * Get index of a rule.
               */

              _proto.indexOf = function indexOf(rule) {
                return this.rules.indexOf(rule);
              };
              /**
               * Create and register rule, run plugins.
               */

              _proto.addRule = function addRule(name, style, options) {
                var rule = this.rules.add(name, style, options);
                if (!rule) return null;
                this.options.jss.plugins.onProcessRule(rule);
                return rule;
              };
              /**
               * Replace rule, run plugins.
               */

              _proto.replaceRule = function replaceRule(name, style, options) {
                var newRule = this.rules.replace(name, style, options);
                if (newRule) this.options.jss.plugins.onProcessRule(newRule);
                return newRule;
              };
              /**
               * Generates a CSS string.
               */

              _proto.toString = function toString(options) {
                if (options === void 0) {
                  options = defaultToStringOptions;
                }

                var _getWhitespaceSymbols = getWhitespaceSymbols(options),
                  linebreak = _getWhitespaceSymbols.linebreak;

                if (options.indent == null)
                  options.indent = defaultToStringOptions.indent;
                if (options.children == null)
                  options.children = defaultToStringOptions.children;

                if (options.children === false) {
                  return this.query + " {}";
                }

                var children = this.rules.toString(options);
                return children
                  ? this.query + " {" + linebreak + children + linebreak + "}"
                  : "";
              };

              return ConditionalRule;
            })();
          var keyRegExp = /@container|@media|@supports\s+/;
          var pluginConditionalRule = {
            onCreateRule: function onCreateRule(key, styles, options) {
              return keyRegExp.test(key)
                ? new ConditionalRule(key, styles, options)
                : null;
            },
          };

          var defaultToStringOptions$1 = {
            indent: 1,
            children: true,
          };
          var nameRegExp = /@keyframes\s+([\w-]+)/;
          /**
           * Rule for @keyframes
           */

          var KeyframesRule =
            /*#__PURE__*/
            (function () {
              function KeyframesRule(key, frames, options) {
                this.type = "keyframes";
                this.at = "@keyframes";
                this.isProcessed = false;
                var nameMatch = key.match(nameRegExp);

                if (nameMatch && nameMatch[1]) {
                  this.name = nameMatch[1];
                } else {
                  this.name = "noname";
                  true
                    ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                        false,
                        "[JSS] Bad keyframes name " + key
                      )
                    : 0;
                }

                this.key = this.type + "-" + this.name;
                this.options = options;
                var scoped = options.scoped,
                  sheet = options.sheet,
                  generateId = options.generateId;
                this.id =
                  scoped === false
                    ? this.name
                    : escape(generateId(this, sheet));
                this.rules = new RuleList(
                  (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, options, {
                    parent: this,
                  })
                );

                for (var name in frames) {
                  this.rules.add(
                    name,
                    frames[name],
                    (0,
                    _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                      "default"
                    ])({}, options, {
                      parent: this,
                    })
                  );
                }

                this.rules.process();
              }
              /**
               * Generates a CSS string.
               */

              var _proto = KeyframesRule.prototype;

              _proto.toString = function toString(options) {
                if (options === void 0) {
                  options = defaultToStringOptions$1;
                }

                var _getWhitespaceSymbols = getWhitespaceSymbols(options),
                  linebreak = _getWhitespaceSymbols.linebreak;

                if (options.indent == null)
                  options.indent = defaultToStringOptions$1.indent;
                if (options.children == null)
                  options.children = defaultToStringOptions$1.children;

                if (options.children === false) {
                  return this.at + " " + this.id + " {}";
                }

                var children = this.rules.toString(options);
                if (children) children = "" + linebreak + children + linebreak;
                return this.at + " " + this.id + " {" + children + "}";
              };

              return KeyframesRule;
            })();
          var keyRegExp$1 = /@keyframes\s+/;
          var refRegExp = /\$([\w-]+)/g;

          var findReferencedKeyframe = function findReferencedKeyframe(
            val,
            keyframes
          ) {
            if (typeof val === "string") {
              return val.replace(refRegExp, function (match, name) {
                if (name in keyframes) {
                  return keyframes[name];
                }

                true
                  ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                      false,
                      '[JSS] Referenced keyframes rule "' +
                        name +
                        '" is not defined.'
                    )
                  : 0;
                return match;
              });
            }

            return val;
          };
          /**
           * Replace the reference for a animation name.
           */

          var replaceRef = function replaceRef(style, prop, keyframes) {
            var value = style[prop];
            var refKeyframe = findReferencedKeyframe(value, keyframes);

            if (refKeyframe !== value) {
              style[prop] = refKeyframe;
            }
          };

          var pluginKeyframesRule = {
            onCreateRule: function onCreateRule(key, frames, options) {
              return typeof key === "string" && keyRegExp$1.test(key)
                ? new KeyframesRule(key, frames, options)
                : null;
            },
            // Animation name ref replacer.
            onProcessStyle: function onProcessStyle(style, rule, sheet) {
              if (rule.type !== "style" || !sheet) return style;
              if ("animation-name" in style)
                replaceRef(style, "animation-name", sheet.keyframes);
              if ("animation" in style)
                replaceRef(style, "animation", sheet.keyframes);
              return style;
            },
            onChangeValue: function onChangeValue(val, prop, rule) {
              var sheet = rule.options.sheet;

              if (!sheet) {
                return val;
              }

              switch (prop) {
                case "animation":
                  return findReferencedKeyframe(val, sheet.keyframes);

                case "animation-name":
                  return findReferencedKeyframe(val, sheet.keyframes);

                default:
                  return val;
              }
            },
          };

          var KeyframeRule =
            /*#__PURE__*/
            (function (_BaseStyleRule) {
              (0,
              _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__[
                "default"
              ])(KeyframeRule, _BaseStyleRule);

              function KeyframeRule() {
                return _BaseStyleRule.apply(this, arguments) || this;
              }

              var _proto = KeyframeRule.prototype;

              /**
               * Generates a CSS string.
               */
              _proto.toString = function toString(options) {
                var sheet = this.options.sheet;
                var link = sheet ? sheet.options.link : false;
                var opts = link
                  ? (0,
                    _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                      "default"
                    ])({}, options, {
                      allowEmpty: true,
                    })
                  : options;
                return toCss(this.key, this.style, opts);
              };

              return KeyframeRule;
            })(BaseStyleRule);
          var pluginKeyframeRule = {
            onCreateRule: function onCreateRule(key, style, options) {
              if (options.parent && options.parent.type === "keyframes") {
                return new KeyframeRule(key, style, options);
              }

              return null;
            },
          };

          var FontFaceRule =
            /*#__PURE__*/
            (function () {
              function FontFaceRule(key, style, options) {
                this.type = "font-face";
                this.at = "@font-face";
                this.isProcessed = false;
                this.key = key;
                this.style = style;
                this.options = options;
              }
              /**
               * Generates a CSS string.
               */

              var _proto = FontFaceRule.prototype;

              _proto.toString = function toString(options) {
                var _getWhitespaceSymbols = getWhitespaceSymbols(options),
                  linebreak = _getWhitespaceSymbols.linebreak;

                if (Array.isArray(this.style)) {
                  var str = "";

                  for (var index = 0; index < this.style.length; index++) {
                    str += toCss(this.at, this.style[index]);
                    if (this.style[index + 1]) str += linebreak;
                  }

                  return str;
                }

                return toCss(this.at, this.style, options);
              };

              return FontFaceRule;
            })();
          var keyRegExp$2 = /@font-face/;
          var pluginFontFaceRule = {
            onCreateRule: function onCreateRule(key, style, options) {
              return keyRegExp$2.test(key)
                ? new FontFaceRule(key, style, options)
                : null;
            },
          };

          var ViewportRule =
            /*#__PURE__*/
            (function () {
              function ViewportRule(key, style, options) {
                this.type = "viewport";
                this.at = "@viewport";
                this.isProcessed = false;
                this.key = key;
                this.style = style;
                this.options = options;
              }
              /**
               * Generates a CSS string.
               */

              var _proto = ViewportRule.prototype;

              _proto.toString = function toString(options) {
                return toCss(this.key, this.style, options);
              };

              return ViewportRule;
            })();
          var pluginViewportRule = {
            onCreateRule: function onCreateRule(key, style, options) {
              return key === "@viewport" || key === "@-ms-viewport"
                ? new ViewportRule(key, style, options)
                : null;
            },
          };

          var SimpleRule =
            /*#__PURE__*/
            (function () {
              function SimpleRule(key, value, options) {
                this.type = "simple";
                this.isProcessed = false;
                this.key = key;
                this.value = value;
                this.options = options;
              }
              /**
               * Generates a CSS string.
               */
              // eslint-disable-next-line no-unused-vars

              var _proto = SimpleRule.prototype;

              _proto.toString = function toString(options) {
                if (Array.isArray(this.value)) {
                  var str = "";

                  for (var index = 0; index < this.value.length; index++) {
                    str += this.key + " " + this.value[index] + ";";
                    if (this.value[index + 1]) str += "\n";
                  }

                  return str;
                }

                return this.key + " " + this.value + ";";
              };

              return SimpleRule;
            })();
          var keysMap = {
            "@charset": true,
            "@import": true,
            "@namespace": true,
          };
          var pluginSimpleRule = {
            onCreateRule: function onCreateRule(key, value, options) {
              return key in keysMap
                ? new SimpleRule(key, value, options)
                : null;
            },
          };

          var plugins = [
            pluginStyleRule,
            pluginConditionalRule,
            pluginKeyframesRule,
            pluginKeyframeRule,
            pluginFontFaceRule,
            pluginViewportRule,
            pluginSimpleRule,
          ];

          var defaultUpdateOptions = {
            process: true,
          };
          var forceUpdateOptions = {
            force: true,
            process: true,
            /**
             * Contains rules objects and allows adding/removing etc.
             * Is used for e.g. by `StyleSheet` or `ConditionalRule`.
             */
          };

          var RuleList =
            /*#__PURE__*/
            (function () {
              // Rules registry for access by .get() method.
              // It contains the same rule registered by name and by selector.
              // Original styles object.
              // Used to ensure correct rules order.
              function RuleList(options) {
                this.map = {};
                this.raw = {};
                this.index = [];
                this.counter = 0;
                this.options = options;
                this.classes = options.classes;
                this.keyframes = options.keyframes;
              }
              /**
               * Create and register rule.
               *
               * Will not render after Style Sheet was rendered the first time.
               */

              var _proto = RuleList.prototype;

              _proto.add = function add(name, decl, ruleOptions) {
                var _this$options = this.options,
                  parent = _this$options.parent,
                  sheet = _this$options.sheet,
                  jss = _this$options.jss,
                  Renderer = _this$options.Renderer,
                  generateId = _this$options.generateId,
                  scoped = _this$options.scoped;

                var options = (0,
                _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                  "default"
                ])(
                  {
                    classes: this.classes,
                    parent: parent,
                    sheet: sheet,
                    jss: jss,
                    Renderer: Renderer,
                    generateId: generateId,
                    scoped: scoped,
                    name: name,
                    keyframes: this.keyframes,
                    selector: undefined,
                  },
                  ruleOptions
                ); // When user uses .createStyleSheet(), duplicate names are not possible, but
                // `sheet.addRule()` opens the door for any duplicate rule name. When this happens
                // we need to make the key unique within this RuleList instance scope.

                var key = name;

                if (name in this.raw) {
                  key = name + "-d" + this.counter++;
                } // We need to save the original decl before creating the rule
                // because cache plugin needs to use it as a key to return a cached rule.

                this.raw[key] = decl;

                if (key in this.classes) {
                  // E.g. rules inside of @media container
                  options.selector = "." + escape(this.classes[key]);
                }

                var rule = createRule(key, decl, options);
                if (!rule) return null;
                this.register(rule);
                var index =
                  options.index === undefined
                    ? this.index.length
                    : options.index;
                this.index.splice(index, 0, rule);
                return rule;
              };
              /**
               * Replace rule.
               * Create a new rule and remove old one instead of overwriting
               * because we want to invoke onCreateRule hook to make plugins work.
               */

              _proto.replace = function replace(name, decl, ruleOptions) {
                var oldRule = this.get(name);
                var oldIndex = this.index.indexOf(oldRule);

                if (oldRule) {
                  this.remove(oldRule);
                }

                var options = ruleOptions;
                if (oldIndex !== -1)
                  options = (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, ruleOptions, {
                    index: oldIndex,
                  });
                return this.add(name, decl, options);
              };
              /**
               * Get a rule by name or selector.
               */

              _proto.get = function get(nameOrSelector) {
                return this.map[nameOrSelector];
              };
              /**
               * Delete a rule.
               */

              _proto.remove = function remove(rule) {
                this.unregister(rule);
                delete this.raw[rule.key];
                this.index.splice(this.index.indexOf(rule), 1);
              };
              /**
               * Get index of a rule.
               */

              _proto.indexOf = function indexOf(rule) {
                return this.index.indexOf(rule);
              };
              /**
               * Run `onProcessRule()` plugins on every rule.
               */

              _proto.process = function process() {
                var plugins = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop
                // we end up with very hard-to-track-down side effects.

                this.index.slice(0).forEach(plugins.onProcessRule, plugins);
              };
              /**
               * Register a rule in `.map`, `.classes` and `.keyframes` maps.
               */

              _proto.register = function register(rule) {
                this.map[rule.key] = rule;

                if (rule instanceof StyleRule) {
                  this.map[rule.selector] = rule;
                  if (rule.id) this.classes[rule.key] = rule.id;
                } else if (rule instanceof KeyframesRule && this.keyframes) {
                  this.keyframes[rule.name] = rule.id;
                }
              };
              /**
               * Unregister a rule.
               */

              _proto.unregister = function unregister(rule) {
                delete this.map[rule.key];

                if (rule instanceof StyleRule) {
                  delete this.map[rule.selector];
                  delete this.classes[rule.key];
                } else if (rule instanceof KeyframesRule) {
                  delete this.keyframes[rule.name];
                }
              };
              /**
               * Update the function values with a new data.
               */

              _proto.update = function update() {
                var name;
                var data;
                var options;

                if (
                  typeof (arguments.length <= 0 ? undefined : arguments[0]) ===
                  "string"
                ) {
                  name = arguments.length <= 0 ? undefined : arguments[0];
                  data = arguments.length <= 1 ? undefined : arguments[1];
                  options = arguments.length <= 2 ? undefined : arguments[2];
                } else {
                  data = arguments.length <= 0 ? undefined : arguments[0];
                  options = arguments.length <= 1 ? undefined : arguments[1];
                  name = null;
                }

                if (name) {
                  this.updateOne(this.get(name), data, options);
                } else {
                  for (var index = 0; index < this.index.length; index++) {
                    this.updateOne(this.index[index], data, options);
                  }
                }
              };
              /**
               * Execute plugins, update rule props.
               */

              _proto.updateOne = function updateOne(rule, data, options) {
                if (options === void 0) {
                  options = defaultUpdateOptions;
                }

                var _this$options2 = this.options,
                  plugins = _this$options2.jss.plugins,
                  sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.

                if (rule.rules instanceof RuleList) {
                  rule.rules.update(data, options);
                  return;
                }

                var style = rule.style;
                plugins.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.

                if (options.process && style && style !== rule.style) {
                  // We need to run the plugins in case new `style` relies on syntax plugins.
                  plugins.onProcessStyle(rule.style, rule, sheet); // Update and add props.

                  for (var prop in rule.style) {
                    var nextValue = rule.style[prop];
                    var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.
                    // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.

                    if (nextValue !== prevValue) {
                      rule.prop(prop, nextValue, forceUpdateOptions);
                    }
                  } // Remove props.

                  for (var _prop in style) {
                    var _nextValue = rule.style[_prop];
                    var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.
                    // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.

                    if (_nextValue == null && _nextValue !== _prevValue) {
                      rule.prop(_prop, null, forceUpdateOptions);
                    }
                  }
                }
              };
              /**
               * Convert rules to a CSS string.
               */

              _proto.toString = function toString(options) {
                var str = "";
                var sheet = this.options.sheet;
                var link = sheet ? sheet.options.link : false;

                var _getWhitespaceSymbols = getWhitespaceSymbols(options),
                  linebreak = _getWhitespaceSymbols.linebreak;

                for (var index = 0; index < this.index.length; index++) {
                  var rule = this.index[index];
                  var css = rule.toString(options); // No need to render an empty rule.

                  if (!css && !link) continue;
                  if (str) str += linebreak;
                  str += css;
                }

                return str;
              };

              return RuleList;
            })();

          var StyleSheet =
            /*#__PURE__*/
            (function () {
              function StyleSheet(styles, options) {
                this.attached = false;
                this.deployed = false;
                this.classes = {};
                this.keyframes = {};
                this.options = (0,
                _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                  "default"
                ])({}, options, {
                  sheet: this,
                  parent: this,
                  classes: this.classes,
                  keyframes: this.keyframes,
                });

                if (options.Renderer) {
                  this.renderer = new options.Renderer(this);
                }

                this.rules = new RuleList(this.options);

                for (var name in styles) {
                  this.rules.add(name, styles[name]);
                }

                this.rules.process();
              }
              /**
               * Attach renderable to the render tree.
               */

              var _proto = StyleSheet.prototype;

              _proto.attach = function attach() {
                if (this.attached) return this;
                if (this.renderer) this.renderer.attach();
                this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.

                if (!this.deployed) this.deploy();
                return this;
              };
              /**
               * Remove renderable from render tree.
               */

              _proto.detach = function detach() {
                if (!this.attached) return this;
                if (this.renderer) this.renderer.detach();
                this.attached = false;
                return this;
              };
              /**
               * Add a rule to the current stylesheet.
               * Will insert a rule also after the stylesheet has been rendered first time.
               */

              _proto.addRule = function addRule(name, decl, options) {
                var queue = this.queue; // Plugins can create rules.
                // In order to preserve the right order, we need to queue all `.addRule` calls,
                // which happen after the first `rules.add()` call.

                if (this.attached && !queue) this.queue = [];
                var rule = this.rules.add(name, decl, options);
                if (!rule) return null;
                this.options.jss.plugins.onProcessRule(rule);

                if (this.attached) {
                  if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.
                  // It will be inserted all together when .attach is called.

                  if (queue) queue.push(rule);
                  else {
                    this.insertRule(rule);

                    if (this.queue) {
                      this.queue.forEach(this.insertRule, this);
                      this.queue = undefined;
                    }
                  }
                  return rule;
                } // We can't add rules to a detached style node.
                // We will redeploy the sheet once user will attach it.

                this.deployed = false;
                return rule;
              };
              /**
               * Replace a rule in the current stylesheet.
               */

              _proto.replaceRule = function replaceRule(
                nameOrSelector,
                decl,
                options
              ) {
                var oldRule = this.rules.get(nameOrSelector);
                if (!oldRule)
                  return this.addRule(nameOrSelector, decl, options);
                var newRule = this.rules.replace(nameOrSelector, decl, options);

                if (newRule) {
                  this.options.jss.plugins.onProcessRule(newRule);
                }

                if (this.attached) {
                  if (!this.deployed) return newRule; // Don't replace / delete rule directly if there is no stringified version yet.
                  // It will be inserted all together when .attach is called.

                  if (this.renderer) {
                    if (!newRule) {
                      this.renderer.deleteRule(oldRule);
                    } else if (oldRule.renderable) {
                      this.renderer.replaceRule(oldRule.renderable, newRule);
                    }
                  }

                  return newRule;
                } // We can't replace rules to a detached style node.
                // We will redeploy the sheet once user will attach it.

                this.deployed = false;
                return newRule;
              };
              /**
               * Insert rule into the StyleSheet
               */

              _proto.insertRule = function insertRule(rule) {
                if (this.renderer) {
                  this.renderer.insertRule(rule);
                }
              };
              /**
               * Create and add rules.
               * Will render also after Style Sheet was rendered the first time.
               */

              _proto.addRules = function addRules(styles, options) {
                var added = [];

                for (var name in styles) {
                  var rule = this.addRule(name, styles[name], options);
                  if (rule) added.push(rule);
                }

                return added;
              };
              /**
               * Get a rule by name or selector.
               */

              _proto.getRule = function getRule(nameOrSelector) {
                return this.rules.get(nameOrSelector);
              };
              /**
               * Delete a rule by name.
               * Returns `true`: if rule has been deleted from the DOM.
               */

              _proto.deleteRule = function deleteRule(name) {
                var rule =
                  typeof name === "object" ? name : this.rules.get(name);

                if (
                  !rule || // Style sheet was created without link: true and attached, in this case we
                  // won't be able to remove the CSS rule from the DOM.
                  (this.attached && !rule.renderable)
                ) {
                  return false;
                }

                this.rules.remove(rule);

                if (this.attached && rule.renderable && this.renderer) {
                  return this.renderer.deleteRule(rule.renderable);
                }

                return true;
              };
              /**
               * Get index of a rule.
               */

              _proto.indexOf = function indexOf(rule) {
                return this.rules.indexOf(rule);
              };
              /**
               * Deploy pure CSS string to a renderable.
               */

              _proto.deploy = function deploy() {
                if (this.renderer) this.renderer.deploy();
                this.deployed = true;
                return this;
              };
              /**
               * Update the function values with a new data.
               */

              _proto.update = function update() {
                var _this$rules;

                (_this$rules = this.rules).update.apply(_this$rules, arguments);

                return this;
              };
              /**
               * Updates a single rule.
               */

              _proto.updateOne = function updateOne(rule, data, options) {
                this.rules.updateOne(rule, data, options);
                return this;
              };
              /**
               * Convert rules to a CSS string.
               */

              _proto.toString = function toString(options) {
                return this.rules.toString(options);
              };

              return StyleSheet;
            })();

          var PluginsRegistry =
            /*#__PURE__*/
            (function () {
              function PluginsRegistry() {
                this.plugins = {
                  internal: [],
                  external: [],
                };
                this.registry = {};
              }

              var _proto = PluginsRegistry.prototype;

              /**
               * Call `onCreateRule` hooks and return an object if returned by a hook.
               */
              _proto.onCreateRule = function onCreateRule(name, decl, options) {
                for (var i = 0; i < this.registry.onCreateRule.length; i++) {
                  var rule = this.registry.onCreateRule[i](name, decl, options);
                  if (rule) return rule;
                }

                return null;
              };
              /**
               * Call `onProcessRule` hooks.
               */

              _proto.onProcessRule = function onProcessRule(rule) {
                if (rule.isProcessed) return;
                var sheet = rule.options.sheet;

                for (var i = 0; i < this.registry.onProcessRule.length; i++) {
                  this.registry.onProcessRule[i](rule, sheet);
                }

                if (rule.style) this.onProcessStyle(rule.style, rule, sheet);
                rule.isProcessed = true;
              };
              /**
               * Call `onProcessStyle` hooks.
               */

              _proto.onProcessStyle = function onProcessStyle(
                style,
                rule,
                sheet
              ) {
                for (var i = 0; i < this.registry.onProcessStyle.length; i++) {
                  rule.style = this.registry.onProcessStyle[i](
                    rule.style,
                    rule,
                    sheet
                  );
                }
              };
              /**
               * Call `onProcessSheet` hooks.
               */

              _proto.onProcessSheet = function onProcessSheet(sheet) {
                for (var i = 0; i < this.registry.onProcessSheet.length; i++) {
                  this.registry.onProcessSheet[i](sheet);
                }
              };
              /**
               * Call `onUpdate` hooks.
               */

              _proto.onUpdate = function onUpdate(data, rule, sheet, options) {
                for (var i = 0; i < this.registry.onUpdate.length; i++) {
                  this.registry.onUpdate[i](data, rule, sheet, options);
                }
              };
              /**
               * Call `onChangeValue` hooks.
               */

              _proto.onChangeValue = function onChangeValue(value, prop, rule) {
                var processedValue = value;

                for (var i = 0; i < this.registry.onChangeValue.length; i++) {
                  processedValue = this.registry.onChangeValue[i](
                    processedValue,
                    prop,
                    rule
                  );
                }

                return processedValue;
              };
              /**
               * Register a plugin.
               */

              _proto.use = function use(newPlugin, options) {
                if (options === void 0) {
                  options = {
                    queue: "external",
                  };
                }

                var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.

                if (plugins.indexOf(newPlugin) !== -1) {
                  return;
                }

                plugins.push(newPlugin);
                this.registry = []
                  .concat(this.plugins.external, this.plugins.internal)
                  .reduce(
                    function (registry, plugin) {
                      for (var name in plugin) {
                        if (name in registry) {
                          registry[name].push(plugin[name]);
                        } else {
                          true
                            ? (0,
                              tiny_warning__WEBPACK_IMPORTED_MODULE_6__[
                                "default"
                              ])(false, '[JSS] Unknown hook "' + name + '".')
                            : 0;
                        }
                      }

                      return registry;
                    },
                    {
                      onCreateRule: [],
                      onProcessRule: [],
                      onProcessStyle: [],
                      onProcessSheet: [],
                      onChangeValue: [],
                      onUpdate: [],
                    }
                  );
              };

              return PluginsRegistry;
            })();

          /**
           * Sheets registry to access all instances in one place.
           */

          var SheetsRegistry =
            /*#__PURE__*/
            (function () {
              function SheetsRegistry() {
                this.registry = [];
              }

              var _proto = SheetsRegistry.prototype;

              /**
               * Register a Style Sheet.
               */
              _proto.add = function add(sheet) {
                var registry = this.registry;
                var index = sheet.options.index;
                if (registry.indexOf(sheet) !== -1) return;

                if (registry.length === 0 || index >= this.index) {
                  registry.push(sheet);
                  return;
                } // Find a position.

                for (var i = 0; i < registry.length; i++) {
                  if (registry[i].options.index > index) {
                    registry.splice(i, 0, sheet);
                    return;
                  }
                }
              };
              /**
               * Reset the registry.
               */

              _proto.reset = function reset() {
                this.registry = [];
              };
              /**
               * Remove a Style Sheet.
               */

              _proto.remove = function remove(sheet) {
                var index = this.registry.indexOf(sheet);
                this.registry.splice(index, 1);
              };
              /**
               * Convert all attached sheets to a CSS string.
               */

              _proto.toString = function toString(_temp) {
                var _ref = _temp === void 0 ? {} : _temp,
                  attached = _ref.attached,
                  options = (0,
                  _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_5__[
                    "default"
                  ])(_ref, ["attached"]);

                var _getWhitespaceSymbols = getWhitespaceSymbols(options),
                  linebreak = _getWhitespaceSymbols.linebreak;

                var css = "";

                for (var i = 0; i < this.registry.length; i++) {
                  var sheet = this.registry[i];

                  if (attached != null && sheet.attached !== attached) {
                    continue;
                  }

                  if (css) css += linebreak;
                  css += sheet.toString(options);
                }

                return css;
              };

              (0,
              _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__[
                "default"
              ])(SheetsRegistry, [
                {
                  key: "index",

                  /**
                   * Current highest index number.
                   */
                  get: function get() {
                    return this.registry.length === 0
                      ? 0
                      : this.registry[this.registry.length - 1].options.index;
                  },
                },
              ]);

              return SheetsRegistry;
            })();

          /**
           * This is a global sheets registry. Only DomRenderer will add sheets to it.
           * On the server one should use an own SheetsRegistry instance and add the
           * sheets to it, because you need to make sure to create a new registry for
           * each request in order to not leak sheets across requests.
           */

          var sheets = new SheetsRegistry();

          /* eslint-disable */

          /**
           * Now that `globalThis` is available on most platforms
           * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis#browser_compatibility)
           * we check for `globalThis` first. `globalThis` is necessary for jss
           * to run in Agoric's secure version of JavaScript (SES). Under SES,
           * `globalThis` exists, but `window`, `self`, and `Function('return
           * this')()` are all undefined for security reasons.
           *
           * https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
           */
          var globalThis$1 =
            typeof globalThis !== "undefined"
              ? globalThis
              : typeof window !== "undefined" && window.Math === Math
              ? window
              : typeof self !== "undefined" && self.Math === Math
              ? self
              : Function("return this")();

          var ns = "2f1acc6c3a606b082e5eef5e54414ffb";
          if (globalThis$1[ns] == null) globalThis$1[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify
          // the current version with just one short number and use it for classes generation
          // we use a counter. Also it is more accurate, because user can manually reevaluate
          // the module.

          var moduleId = globalThis$1[ns]++;

          var maxRules = 1e10;
          /**
           * Returns a function which generates unique class names based on counters.
           * When new generator function is created, rule counter is reseted.
           * We need to reset the rule counter for SSR for each request.
           */

          var createGenerateId = function createGenerateId(options) {
            if (options === void 0) {
              options = {};
            }

            var ruleCounter = 0;

            var generateId = function generateId(rule, sheet) {
              ruleCounter += 1;

              if (ruleCounter > maxRules) {
                true
                  ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                      false,
                      "[JSS] You might have a memory leak. Rule counter is at " +
                        ruleCounter +
                        "."
                    )
                  : 0;
              }

              var jssId = "";
              var prefix = "";

              if (sheet) {
                if (sheet.options.classNamePrefix) {
                  prefix = sheet.options.classNamePrefix;
                }

                if (sheet.options.jss.id != null) {
                  jssId = String(sheet.options.jss.id);
                }
              }

              if (options.minify) {
                // Using "c" because a number can't be the first char in a class name.
                return "" + (prefix || "c") + moduleId + jssId + ruleCounter;
              }

              return (
                prefix +
                rule.key +
                "-" +
                moduleId +
                (jssId ? "-" + jssId : "") +
                "-" +
                ruleCounter
              );
            };

            return generateId;
          };

          /**
           * Cache the value from the first time a function is called.
           */

          var memoize = function memoize(fn) {
            var value;
            return function () {
              if (!value) value = fn();
              return value;
            };
          };
          /**
           * Get a style property value.
           */

          var getPropertyValue = function getPropertyValue(cssRule, prop) {
            try {
              // Support CSSTOM.
              if (cssRule.attributeStyleMap) {
                return cssRule.attributeStyleMap.get(prop);
              }

              return cssRule.style.getPropertyValue(prop);
            } catch (err) {
              // IE may throw if property is unknown.
              return "";
            }
          };
          /**
           * Set a style property.
           */

          var setProperty = function setProperty(cssRule, prop, value) {
            try {
              var cssValue = value;

              if (Array.isArray(value)) {
                cssValue = toCssValue(value);
              } // Support CSSTOM.

              if (cssRule.attributeStyleMap) {
                cssRule.attributeStyleMap.set(prop, cssValue);
              } else {
                var indexOfImportantFlag = cssValue
                  ? cssValue.indexOf("!important")
                  : -1;
                var cssValueWithoutImportantFlag =
                  indexOfImportantFlag > -1
                    ? cssValue.substr(0, indexOfImportantFlag - 1)
                    : cssValue;
                cssRule.style.setProperty(
                  prop,
                  cssValueWithoutImportantFlag,
                  indexOfImportantFlag > -1 ? "important" : ""
                );
              }
            } catch (err) {
              // IE may throw if property is unknown.
              return false;
            }

            return true;
          };
          /**
           * Remove a style property.
           */

          var removeProperty = function removeProperty(cssRule, prop) {
            try {
              // Support CSSTOM.
              if (cssRule.attributeStyleMap) {
                cssRule.attributeStyleMap.delete(prop);
              } else {
                cssRule.style.removeProperty(prop);
              }
            } catch (err) {
              true
                ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                    false,
                    '[JSS] DOMException "' +
                      err.message +
                      '" was thrown. Tried to remove property "' +
                      prop +
                      '".'
                  )
                : 0;
            }
          };
          /**
           * Set the selector.
           */

          var setSelector = function setSelector(cssRule, selectorText) {
            cssRule.selectorText = selectorText; // Return false if setter was not successful.
            // Currently works in chrome only.

            return cssRule.selectorText === selectorText;
          };
          /**
           * Gets the `head` element upon the first call and caches it.
           * We assume it can't be null.
           */

          var getHead = memoize(function () {
            return document.querySelector("head");
          });
          /**
           * Find attached sheet with an index higher than the passed one.
           */

          function findHigherSheet(registry, options) {
            for (var i = 0; i < registry.length; i++) {
              var sheet = registry[i];

              if (
                sheet.attached &&
                sheet.options.index > options.index &&
                sheet.options.insertionPoint === options.insertionPoint
              ) {
                return sheet;
              }
            }

            return null;
          }
          /**
           * Find attached sheet with the highest index.
           */

          function findHighestSheet(registry, options) {
            for (var i = registry.length - 1; i >= 0; i--) {
              var sheet = registry[i];

              if (
                sheet.attached &&
                sheet.options.insertionPoint === options.insertionPoint
              ) {
                return sheet;
              }
            }

            return null;
          }
          /**
           * Find a comment with "jss" inside.
           */

          function findCommentNode(text) {
            var head = getHead();

            for (var i = 0; i < head.childNodes.length; i++) {
              var node = head.childNodes[i];

              if (node.nodeType === 8 && node.nodeValue.trim() === text) {
                return node;
              }
            }

            return null;
          }
          /**
           * Find a node before which we can insert the sheet.
           */

          function findPrevNode(options) {
            var registry = sheets.registry;

            if (registry.length > 0) {
              // Try to insert before the next higher sheet.
              var sheet = findHigherSheet(registry, options);

              if (sheet && sheet.renderer) {
                return {
                  parent: sheet.renderer.element.parentNode,
                  node: sheet.renderer.element,
                };
              } // Otherwise insert after the last attached.

              sheet = findHighestSheet(registry, options);

              if (sheet && sheet.renderer) {
                return {
                  parent: sheet.renderer.element.parentNode,
                  node: sheet.renderer.element.nextSibling,
                };
              }
            } // Try to find a comment placeholder if registry is empty.

            var insertionPoint = options.insertionPoint;

            if (insertionPoint && typeof insertionPoint === "string") {
              var comment = findCommentNode(insertionPoint);

              if (comment) {
                return {
                  parent: comment.parentNode,
                  node: comment.nextSibling,
                };
              } // If user specifies an insertion point and it can't be found in the document -
              // bad specificity issues may appear.

              true
                ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                    false,
                    '[JSS] Insertion point "' + insertionPoint + '" not found.'
                  )
                : 0;
            }

            return false;
          }
          /**
           * Insert style element into the DOM.
           */

          function insertStyle(style, options) {
            var insertionPoint = options.insertionPoint;
            var nextNode = findPrevNode(options);

            if (nextNode !== false && nextNode.parent) {
              nextNode.parent.insertBefore(style, nextNode.node);
              return;
            } // Works with iframes and any node types.

            if (insertionPoint && typeof insertionPoint.nodeType === "number") {
              var insertionPointElement = insertionPoint;
              var parentNode = insertionPointElement.parentNode;
              if (parentNode)
                parentNode.insertBefore(
                  style,
                  insertionPointElement.nextSibling
                );
              else
                true
                  ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                      false,
                      "[JSS] Insertion point is not in the DOM."
                    )
                  : 0;
              return;
            }

            getHead().appendChild(style);
          }
          /**
           * Read jss nonce setting from the page if the user has set it.
           */

          var getNonce = memoize(function () {
            var node = document.querySelector('meta[property="csp-nonce"]');
            return node ? node.getAttribute("content") : null;
          });

          var _insertRule = function insertRule(container, rule, index) {
            try {
              if ("insertRule" in container) {
                container.insertRule(rule, index);
              } // Keyframes rule.
              else if ("appendRule" in container) {
                container.appendRule(rule);
              }
            } catch (err) {
              true
                ? (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                    false,
                    "[JSS] " + err.message
                  )
                : 0;
              return false;
            }

            return container.cssRules[index];
          };

          var getValidRuleInsertionIndex = function getValidRuleInsertionIndex(
            container,
            index
          ) {
            var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong

            if (index === undefined || index > maxIndex) {
              // eslint-disable-next-line no-param-reassign
              return maxIndex;
            }

            return index;
          };

          var createStyle = function createStyle() {
            var el = document.createElement("style"); // Without it, IE will have a broken source order specificity if we
            // insert rules after we insert the style tag.
            // It seems to kick-off the source order specificity algorithm.

            el.textContent = "\n";
            return el;
          };

          var DomRenderer =
            /*#__PURE__*/
            (function () {
              // Will be empty if link: true option is not set, because
              // it is only for use together with insertRule API.
              function DomRenderer(sheet) {
                this.getPropertyValue = getPropertyValue;
                this.setProperty = setProperty;
                this.removeProperty = removeProperty;
                this.setSelector = setSelector;
                this.hasInsertedRules = false;
                this.cssRules = [];
                // There is no sheet when the renderer is used from a standalone StyleRule.
                if (sheet) sheets.add(sheet);
                this.sheet = sheet;

                var _ref = this.sheet ? this.sheet.options : {},
                  media = _ref.media,
                  meta = _ref.meta,
                  element = _ref.element;

                this.element = element || createStyle();
                this.element.setAttribute("data-jss", "");
                if (media) this.element.setAttribute("media", media);
                if (meta) this.element.setAttribute("data-meta", meta);
                var nonce = getNonce();
                if (nonce) this.element.setAttribute("nonce", nonce);
              }
              /**
               * Insert style element into render tree.
               */

              var _proto = DomRenderer.prototype;

              _proto.attach = function attach() {
                // In the case the element node is external and it is already in the DOM.
                if (this.element.parentNode || !this.sheet) return;
                insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`
                // most browsers create a new CSSStyleSheet, except of all IEs.

                var deployed = Boolean(this.sheet && this.sheet.deployed);

                if (this.hasInsertedRules && deployed) {
                  this.hasInsertedRules = false;
                  this.deploy();
                }
              };
              /**
               * Remove style element from render tree.
               */

              _proto.detach = function detach() {
                if (!this.sheet) return;
                var parentNode = this.element.parentNode;
                if (parentNode) parentNode.removeChild(this.element); // In the most browsers, rules inserted using insertRule() API will be lost when style element is removed.
                // Though IE will keep them and we need a consistent behavior.

                if (this.sheet.options.link) {
                  this.cssRules = [];
                  this.element.textContent = "\n";
                }
              };
              /**
               * Inject CSS string into element.
               */

              _proto.deploy = function deploy() {
                var sheet = this.sheet;
                if (!sheet) return;

                if (sheet.options.link) {
                  this.insertRules(sheet.rules);
                  return;
                }

                this.element.textContent = "\n" + sheet.toString() + "\n";
              };
              /**
               * Insert RuleList into an element.
               */

              _proto.insertRules = function insertRules(rules, nativeParent) {
                for (var i = 0; i < rules.index.length; i++) {
                  this.insertRule(rules.index[i], i, nativeParent);
                }
              };
              /**
               * Insert a rule into element.
               */

              _proto.insertRule = function insertRule(
                rule,
                index,
                nativeParent
              ) {
                if (nativeParent === void 0) {
                  nativeParent = this.element.sheet;
                }

                if (rule.rules) {
                  var parent = rule;
                  var latestNativeParent = nativeParent;

                  if (
                    rule.type === "conditional" ||
                    rule.type === "keyframes"
                  ) {
                    var _insertionIndex = getValidRuleInsertionIndex(
                      nativeParent,
                      index
                    ); // We need to render the container without children first.

                    latestNativeParent = _insertRule(
                      nativeParent,
                      parent.toString({
                        children: false,
                      }),
                      _insertionIndex
                    );

                    if (latestNativeParent === false) {
                      return false;
                    }

                    this.refCssRule(rule, _insertionIndex, latestNativeParent);
                  }

                  this.insertRules(parent.rules, latestNativeParent);
                  return latestNativeParent;
                }

                var ruleStr = rule.toString();
                if (!ruleStr) return false;
                var insertionIndex = getValidRuleInsertionIndex(
                  nativeParent,
                  index
                );

                var nativeRule = _insertRule(
                  nativeParent,
                  ruleStr,
                  insertionIndex
                );

                if (nativeRule === false) {
                  return false;
                }

                this.hasInsertedRules = true;
                this.refCssRule(rule, insertionIndex, nativeRule);
                return nativeRule;
              };

              _proto.refCssRule = function refCssRule(rule, index, cssRule) {
                rule.renderable = cssRule; // We only want to reference the top level rules, deleteRule API doesn't support removing nested rules
                // like rules inside media queries or keyframes

                if (rule.options.parent instanceof StyleSheet) {
                  this.cssRules.splice(index, 0, cssRule);
                }
              };
              /**
               * Delete a rule.
               */

              _proto.deleteRule = function deleteRule(cssRule) {
                var sheet = this.element.sheet;
                var index = this.indexOf(cssRule);
                if (index === -1) return false;
                sheet.deleteRule(index);
                this.cssRules.splice(index, 1);
                return true;
              };
              /**
               * Get index of a CSS Rule.
               */

              _proto.indexOf = function indexOf(cssRule) {
                return this.cssRules.indexOf(cssRule);
              };
              /**
               * Generate a new CSS rule and replace the existing one.
               */

              _proto.replaceRule = function replaceRule(cssRule, rule) {
                var index = this.indexOf(cssRule);
                if (index === -1) return false;
                this.element.sheet.deleteRule(index);
                this.cssRules.splice(index, 1);
                return this.insertRule(rule, index);
              };
              /**
               * Get all rules elements.
               */

              _proto.getRules = function getRules() {
                return this.element.sheet.cssRules;
              };

              return DomRenderer;
            })();

          var instanceCounter = 0;

          var Jss =
            /*#__PURE__*/
            (function () {
              function Jss(options) {
                this.id = instanceCounter++;
                this.version = "10.10.0";
                this.plugins = new PluginsRegistry();
                this.options = {
                  id: {
                    minify: false,
                  },
                  createGenerateId: createGenerateId,
                  Renderer: is_in_browser__WEBPACK_IMPORTED_MODULE_1__[
                    "default"
                  ]
                    ? DomRenderer
                    : null,
                  plugins: [],
                };
                this.generateId = createGenerateId({
                  minify: false,
                });

                for (var i = 0; i < plugins.length; i++) {
                  this.plugins.use(plugins[i], {
                    queue: "internal",
                  });
                }

                this.setup(options);
              }
              /**
               * Prepares various options, applies plugins.
               * Should not be used twice on the same instance, because there is no plugins
               * deduplication logic.
               */

              var _proto = Jss.prototype;

              _proto.setup = function setup(options) {
                if (options === void 0) {
                  options = {};
                }

                if (options.createGenerateId) {
                  this.options.createGenerateId = options.createGenerateId;
                }

                if (options.id) {
                  this.options.id = (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, this.options.id, options.id);
                }

                if (options.createGenerateId || options.id) {
                  this.generateId = this.options.createGenerateId(
                    this.options.id
                  );
                }

                if (options.insertionPoint != null)
                  this.options.insertionPoint = options.insertionPoint;

                if ("Renderer" in options) {
                  this.options.Renderer = options.Renderer;
                } // eslint-disable-next-line prefer-spread

                if (options.plugins) this.use.apply(this, options.plugins);
                return this;
              };
              /**
               * Create a Style Sheet.
               */

              _proto.createStyleSheet = function createStyleSheet(
                styles,
                options
              ) {
                if (options === void 0) {
                  options = {};
                }

                var _options = options,
                  index = _options.index;

                if (typeof index !== "number") {
                  index = sheets.index === 0 ? 0 : sheets.index + 1;
                }

                var sheet = new StyleSheet(
                  styles,
                  (0,
                  _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                    "default"
                  ])({}, options, {
                    jss: this,
                    generateId: options.generateId || this.generateId,
                    insertionPoint: this.options.insertionPoint,
                    Renderer: this.options.Renderer,
                    index: index,
                  })
                );
                this.plugins.onProcessSheet(sheet);
                return sheet;
              };
              /**
               * Detach the Style Sheet and remove it from the registry.
               */

              _proto.removeStyleSheet = function removeStyleSheet(sheet) {
                sheet.detach();
                sheets.remove(sheet);
                return this;
              };
              /**
               * Create a rule without a Style Sheet.
               * [Deprecated] will be removed in the next major version.
               */

              _proto.createRule = function createRule$1(name, style, options) {
                if (style === void 0) {
                  style = {};
                }

                if (options === void 0) {
                  options = {};
                }

                // Enable rule without name for inline styles.
                if (typeof name === "object") {
                  return this.createRule(undefined, name, style);
                }

                var ruleOptions = (0,
                _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[
                  "default"
                ])({}, options, {
                  name: name,
                  jss: this,
                  Renderer: this.options.Renderer,
                });

                if (!ruleOptions.generateId)
                  ruleOptions.generateId = this.generateId;
                if (!ruleOptions.classes) ruleOptions.classes = {};
                if (!ruleOptions.keyframes) ruleOptions.keyframes = {};

                var rule = createRule(name, style, ruleOptions);

                if (rule) this.plugins.onProcessRule(rule);
                return rule;
              };
              /**
               * Register plugin. Passed function will be invoked with a rule instance.
               */

              _proto.use = function use() {
                var _this = this;

                for (
                  var _len = arguments.length,
                    plugins = new Array(_len),
                    _key = 0;
                  _key < _len;
                  _key++
                ) {
                  plugins[_key] = arguments[_key];
                }

                plugins.forEach(function (plugin) {
                  _this.plugins.use(plugin);
                });
                return this;
              };

              return Jss;
            })();

          var createJss = function createJss(options) {
            return new Jss(options);
          };

          /**
           * SheetsManager is like a WeakMap which is designed to count StyleSheet
           * instances and attach/detach automatically.
           * Used in react-jss.
           */

          var SheetsManager =
            /*#__PURE__*/
            (function () {
              function SheetsManager() {
                this.length = 0;
                this.sheets = new WeakMap();
              }

              var _proto = SheetsManager.prototype;

              _proto.get = function get(key) {
                var entry = this.sheets.get(key);
                return entry && entry.sheet;
              };

              _proto.add = function add(key, sheet) {
                if (this.sheets.has(key)) return;
                this.length++;
                this.sheets.set(key, {
                  sheet: sheet,
                  refs: 0,
                });
              };

              _proto.manage = function manage(key) {
                var entry = this.sheets.get(key);

                if (entry) {
                  if (entry.refs === 0) {
                    entry.sheet.attach();
                  }

                  entry.refs++;
                  return entry.sheet;
                }

                (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                  false,
                  "[JSS] SheetsManager: can't find sheet to manage"
                );
                return undefined;
              };

              _proto.unmanage = function unmanage(key) {
                var entry = this.sheets.get(key);

                if (entry) {
                  if (entry.refs > 0) {
                    entry.refs--;
                    if (entry.refs === 0) entry.sheet.detach();
                  }
                } else {
                  (0, tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(
                    false,
                    "SheetsManager: can't find sheet to unmanage"
                  );
                }
              };

              (0,
              _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__[
                "default"
              ])(SheetsManager, [
                {
                  key: "size",
                  get: function get() {
                    return this.length;
                  },
                },
              ]);

              return SheetsManager;
            })();

          /**
           * Export a constant indicating if this browser has CSSTOM support.
           * https://developers.google.com/web/updates/2018/03/cssom
           */
          var hasCSSTOMSupport =
            typeof CSS === "object" && CSS != null && "number" in CSS;

          /**
           * Extracts a styles object with only props that contain function values.
           */
          function getDynamicStyles(styles) {
            var to = null;

            for (var key in styles) {
              var value = styles[key];
              var type = typeof value;

              if (type === "function") {
                if (!to) to = {};
                to[key] = value;
              } else if (
                type === "object" &&
                value !== null &&
                !Array.isArray(value)
              ) {
                var extracted = getDynamicStyles(value);

                if (extracted) {
                  if (!to) to = {};
                  to[key] = extracted;
                }
              }
            }

            return to;
          }

          /**
           * A better abstraction over CSS.
           *
           * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
           * @website https://github.com/cssinjs/jss
           * @license MIT
           */
          var index = createJss();

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = index;

          /***/
        },

      /***/ "./node_modules/sdp/sdp.js":
        /*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
        /***/ (module) => {
          /* eslint-env node */

          // SDP helpers.
          const SDPUtils = {};

          // Generate an alphanumeric identifier for cname or mids.
          // TODO: use UUIDs instead? https://gist.github.com/jed/982883
          SDPUtils.generateIdentifier = function () {
            return Math.random().toString(36).substring(2, 12);
          };

          // The RTCP CNAME used by all peerconnections from the same JS.
          SDPUtils.localCName = SDPUtils.generateIdentifier();

          // Splits SDP into lines, dealing with both CRLF and LF.
          SDPUtils.splitLines = function (blob) {
            return blob
              .trim()
              .split("\n")
              .map((line) => line.trim());
          };
          // Splits SDP into sessionpart and mediasections. Ensures CRLF.
          SDPUtils.splitSections = function (blob) {
            const parts = blob.split("\nm=");
            return parts.map(
              (part, index) => (index > 0 ? "m=" + part : part).trim() + "\r\n"
            );
          };

          // Returns the session description.
          SDPUtils.getDescription = function (blob) {
            const sections = SDPUtils.splitSections(blob);
            return sections && sections[0];
          };

          // Returns the individual media sections.
          SDPUtils.getMediaSections = function (blob) {
            const sections = SDPUtils.splitSections(blob);
            sections.shift();
            return sections;
          };

          // Returns lines that start with a certain prefix.
          SDPUtils.matchPrefix = function (blob, prefix) {
            return SDPUtils.splitLines(blob).filter(
              (line) => line.indexOf(prefix) === 0
            );
          };

          // Parses an ICE candidate line. Sample input:
          // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8
          // rport 55996"
          // Input can be prefixed with a=.
          SDPUtils.parseCandidate = function (line) {
            let parts;
            // Parse both variants.
            if (line.indexOf("a=candidate:") === 0) {
              parts = line.substring(12).split(" ");
            } else {
              parts = line.substring(10).split(" ");
            }

            const candidate = {
              foundation: parts[0],
              component: { 1: "rtp", 2: "rtcp" }[parts[1]] || parts[1],
              protocol: parts[2].toLowerCase(),
              priority: parseInt(parts[3], 10),
              ip: parts[4],
              address: parts[4], // address is an alias for ip.
              port: parseInt(parts[5], 10),
              // skip parts[6] == 'typ'
              type: parts[7],
            };

            for (let i = 8; i < parts.length; i += 2) {
              switch (parts[i]) {
                case "raddr":
                  candidate.relatedAddress = parts[i + 1];
                  break;
                case "rport":
                  candidate.relatedPort = parseInt(parts[i + 1], 10);
                  break;
                case "tcptype":
                  candidate.tcpType = parts[i + 1];
                  break;
                case "ufrag":
                  candidate.ufrag = parts[i + 1]; // for backward compatibility.
                  candidate.usernameFragment = parts[i + 1];
                  break;
                default: // extension handling, in particular ufrag. Don't overwrite.
                  if (candidate[parts[i]] === undefined) {
                    candidate[parts[i]] = parts[i + 1];
                  }
                  break;
              }
            }
            return candidate;
          };

          // Translates a candidate object into SDP candidate attribute.
          // This does not include the a= prefix!
          SDPUtils.writeCandidate = function (candidate) {
            const sdp = [];
            sdp.push(candidate.foundation);

            const component = candidate.component;
            if (component === "rtp") {
              sdp.push(1);
            } else if (component === "rtcp") {
              sdp.push(2);
            } else {
              sdp.push(component);
            }
            sdp.push(candidate.protocol.toUpperCase());
            sdp.push(candidate.priority);
            sdp.push(candidate.address || candidate.ip);
            sdp.push(candidate.port);

            const type = candidate.type;
            sdp.push("typ");
            sdp.push(type);
            if (
              type !== "host" &&
              candidate.relatedAddress &&
              candidate.relatedPort
            ) {
              sdp.push("raddr");
              sdp.push(candidate.relatedAddress);
              sdp.push("rport");
              sdp.push(candidate.relatedPort);
            }
            if (
              candidate.tcpType &&
              candidate.protocol.toLowerCase() === "tcp"
            ) {
              sdp.push("tcptype");
              sdp.push(candidate.tcpType);
            }
            if (candidate.usernameFragment || candidate.ufrag) {
              sdp.push("ufrag");
              sdp.push(candidate.usernameFragment || candidate.ufrag);
            }
            return "candidate:" + sdp.join(" ");
          };

          // Parses an ice-options line, returns an array of option tags.
          // Sample input:
          // a=ice-options:foo bar
          SDPUtils.parseIceOptions = function (line) {
            return line.substring(14).split(" ");
          };

          // Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:
          // a=rtpmap:111 opus/48000/2
          SDPUtils.parseRtpMap = function (line) {
            let parts = line.substring(9).split(" ");
            const parsed = {
              payloadType: parseInt(parts.shift(), 10), // was: id
            };

            parts = parts[0].split("/");

            parsed.name = parts[0];
            parsed.clockRate = parseInt(parts[1], 10); // was: clockrate
            parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;
            // legacy alias, got renamed back to channels in ORTC.
            parsed.numChannels = parsed.channels;
            return parsed;
          };

          // Generates a rtpmap line from RTCRtpCodecCapability or
          // RTCRtpCodecParameters.
          SDPUtils.writeRtpMap = function (codec) {
            let pt = codec.payloadType;
            if (codec.preferredPayloadType !== undefined) {
              pt = codec.preferredPayloadType;
            }
            const channels = codec.channels || codec.numChannels || 1;
            return (
              "a=rtpmap:" +
              pt +
              " " +
              codec.name +
              "/" +
              codec.clockRate +
              (channels !== 1 ? "/" + channels : "") +
              "\r\n"
            );
          };

          // Parses a extmap line (headerextension from RFC 5285). Sample input:
          // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
          // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset
          SDPUtils.parseExtmap = function (line) {
            const parts = line.substring(9).split(" ");
            return {
              id: parseInt(parts[0], 10),
              direction:
                parts[0].indexOf("/") > 0 ? parts[0].split("/")[1] : "sendrecv",
              uri: parts[1],
              attributes: parts.slice(2).join(" "),
            };
          };

          // Generates an extmap line from RTCRtpHeaderExtensionParameters or
          // RTCRtpHeaderExtension.
          SDPUtils.writeExtmap = function (headerExtension) {
            return (
              "a=extmap:" +
              (headerExtension.id || headerExtension.preferredId) +
              (headerExtension.direction &&
              headerExtension.direction !== "sendrecv"
                ? "/" + headerExtension.direction
                : "") +
              " " +
              headerExtension.uri +
              (headerExtension.attributes
                ? " " + headerExtension.attributes
                : "") +
              "\r\n"
            );
          };

          // Parses a fmtp line, returns dictionary. Sample input:
          // a=fmtp:96 vbr=on;cng=on
          // Also deals with vbr=on; cng=on
          SDPUtils.parseFmtp = function (line) {
            const parsed = {};
            let kv;
            const parts = line.substring(line.indexOf(" ") + 1).split(";");
            for (let j = 0; j < parts.length; j++) {
              kv = parts[j].trim().split("=");
              parsed[kv[0].trim()] = kv[1];
            }
            return parsed;
          };

          // Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.
          SDPUtils.writeFmtp = function (codec) {
            let line = "";
            let pt = codec.payloadType;
            if (codec.preferredPayloadType !== undefined) {
              pt = codec.preferredPayloadType;
            }
            if (codec.parameters && Object.keys(codec.parameters).length) {
              const params = [];
              Object.keys(codec.parameters).forEach((param) => {
                if (codec.parameters[param] !== undefined) {
                  params.push(param + "=" + codec.parameters[param]);
                } else {
                  params.push(param);
                }
              });
              line += "a=fmtp:" + pt + " " + params.join(";") + "\r\n";
            }
            return line;
          };

          // Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:
          // a=rtcp-fb:98 nack rpsi
          SDPUtils.parseRtcpFb = function (line) {
            const parts = line.substring(line.indexOf(" ") + 1).split(" ");
            return {
              type: parts.shift(),
              parameter: parts.join(" "),
            };
          };

          // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.
          SDPUtils.writeRtcpFb = function (codec) {
            let lines = "";
            let pt = codec.payloadType;
            if (codec.preferredPayloadType !== undefined) {
              pt = codec.preferredPayloadType;
            }
            if (codec.rtcpFeedback && codec.rtcpFeedback.length) {
              // FIXME: special handling for trr-int?
              codec.rtcpFeedback.forEach((fb) => {
                lines +=
                  "a=rtcp-fb:" +
                  pt +
                  " " +
                  fb.type +
                  (fb.parameter && fb.parameter.length
                    ? " " + fb.parameter
                    : "") +
                  "\r\n";
              });
            }
            return lines;
          };

          // Parses a RFC 5576 ssrc media attribute. Sample input:
          // a=ssrc:3735928559 cname:something
          SDPUtils.parseSsrcMedia = function (line) {
            const sp = line.indexOf(" ");
            const parts = {
              ssrc: parseInt(line.substring(7, sp), 10),
            };
            const colon = line.indexOf(":", sp);
            if (colon > -1) {
              parts.attribute = line.substring(sp + 1, colon);
              parts.value = line.substring(colon + 1);
            } else {
              parts.attribute = line.substring(sp + 1);
            }
            return parts;
          };

          // Parse a ssrc-group line (see RFC 5576). Sample input:
          // a=ssrc-group:semantics 12 34
          SDPUtils.parseSsrcGroup = function (line) {
            const parts = line.substring(13).split(" ");
            return {
              semantics: parts.shift(),
              ssrcs: parts.map((ssrc) => parseInt(ssrc, 10)),
            };
          };

          // Extracts the MID (RFC 5888) from a media section.
          // Returns the MID or undefined if no mid line was found.
          SDPUtils.getMid = function (mediaSection) {
            const mid = SDPUtils.matchPrefix(mediaSection, "a=mid:")[0];
            if (mid) {
              return mid.substring(6);
            }
          };

          // Parses a fingerprint line for DTLS-SRTP.
          SDPUtils.parseFingerprint = function (line) {
            const parts = line.substring(14).split(" ");
            return {
              algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.
              value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.
            };
          };

          // Extracts DTLS parameters from SDP media section or sessionpart.
          // FIXME: for consistency with other functions this should only
          //   get the fingerprint line as input. See also getIceParameters.
          SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {
            const lines = SDPUtils.matchPrefix(
              mediaSection + sessionpart,
              "a=fingerprint:"
            );
            // Note: a=setup line is ignored since we use the 'auto' role in Edge.
            return {
              role: "auto",
              fingerprints: lines.map(SDPUtils.parseFingerprint),
            };
          };

          // Serializes DTLS parameters to SDP.
          SDPUtils.writeDtlsParameters = function (params, setupType) {
            let sdp = "a=setup:" + setupType + "\r\n";
            params.fingerprints.forEach((fp) => {
              sdp += "a=fingerprint:" + fp.algorithm + " " + fp.value + "\r\n";
            });
            return sdp;
          };

          // Parses a=crypto lines into
          //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members
          SDPUtils.parseCryptoLine = function (line) {
            const parts = line.substring(9).split(" ");
            return {
              tag: parseInt(parts[0], 10),
              cryptoSuite: parts[1],
              keyParams: parts[2],
              sessionParams: parts.slice(3),
            };
          };

          SDPUtils.writeCryptoLine = function (parameters) {
            return (
              "a=crypto:" +
              parameters.tag +
              " " +
              parameters.cryptoSuite +
              " " +
              (typeof parameters.keyParams === "object"
                ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)
                : parameters.keyParams) +
              (parameters.sessionParams
                ? " " + parameters.sessionParams.join(" ")
                : "") +
              "\r\n"
            );
          };

          // Parses the crypto key parameters into
          //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*
          SDPUtils.parseCryptoKeyParams = function (keyParams) {
            if (keyParams.indexOf("inline:") !== 0) {
              return null;
            }
            const parts = keyParams.substring(7).split("|");
            return {
              keyMethod: "inline",
              keySalt: parts[0],
              lifeTime: parts[1],
              mkiValue: parts[2] ? parts[2].split(":")[0] : undefined,
              mkiLength: parts[2] ? parts[2].split(":")[1] : undefined,
            };
          };

          SDPUtils.writeCryptoKeyParams = function (keyParams) {
            return (
              keyParams.keyMethod +
              ":" +
              keyParams.keySalt +
              (keyParams.lifeTime ? "|" + keyParams.lifeTime : "") +
              (keyParams.mkiValue && keyParams.mkiLength
                ? "|" + keyParams.mkiValue + ":" + keyParams.mkiLength
                : "")
            );
          };

          // Extracts all SDES parameters.
          SDPUtils.getCryptoParameters = function (mediaSection, sessionpart) {
            const lines = SDPUtils.matchPrefix(
              mediaSection + sessionpart,
              "a=crypto:"
            );
            return lines.map(SDPUtils.parseCryptoLine);
          };

          // Parses ICE information from SDP media section or sessionpart.
          // FIXME: for consistency with other functions this should only
          //   get the ice-ufrag and ice-pwd lines as input.
          SDPUtils.getIceParameters = function (mediaSection, sessionpart) {
            const ufrag = SDPUtils.matchPrefix(
              mediaSection + sessionpart,
              "a=ice-ufrag:"
            )[0];
            const pwd = SDPUtils.matchPrefix(
              mediaSection + sessionpart,
              "a=ice-pwd:"
            )[0];
            if (!(ufrag && pwd)) {
              return null;
            }
            return {
              usernameFragment: ufrag.substring(12),
              password: pwd.substring(10),
            };
          };

          // Serializes ICE parameters to SDP.
          SDPUtils.writeIceParameters = function (params) {
            let sdp =
              "a=ice-ufrag:" +
              params.usernameFragment +
              "\r\n" +
              "a=ice-pwd:" +
              params.password +
              "\r\n";
            if (params.iceLite) {
              sdp += "a=ice-lite\r\n";
            }
            return sdp;
          };

          // Parses the SDP media section and returns RTCRtpParameters.
          SDPUtils.parseRtpParameters = function (mediaSection) {
            const description = {
              codecs: [],
              headerExtensions: [],
              fecMechanisms: [],
              rtcp: [],
            };
            const lines = SDPUtils.splitLines(mediaSection);
            const mline = lines[0].split(" ");
            for (let i = 3; i < mline.length; i++) {
              // find all codecs from mline[3..]
              const pt = mline[i];
              const rtpmapline = SDPUtils.matchPrefix(
                mediaSection,
                "a=rtpmap:" + pt + " "
              )[0];
              if (rtpmapline) {
                const codec = SDPUtils.parseRtpMap(rtpmapline);
                const fmtps = SDPUtils.matchPrefix(
                  mediaSection,
                  "a=fmtp:" + pt + " "
                );
                // Only the first a=fmtp:<pt> is considered.
                codec.parameters = fmtps.length
                  ? SDPUtils.parseFmtp(fmtps[0])
                  : {};
                codec.rtcpFeedback = SDPUtils.matchPrefix(
                  mediaSection,
                  "a=rtcp-fb:" + pt + " "
                ).map(SDPUtils.parseRtcpFb);
                description.codecs.push(codec);
                // parse FEC mechanisms from rtpmap lines.
                switch (codec.name.toUpperCase()) {
                  case "RED":
                  case "ULPFEC":
                    description.fecMechanisms.push(codec.name.toUpperCase());
                    break;
                  default: // only RED and ULPFEC are recognized as FEC mechanisms.
                    break;
                }
              }
            }
            SDPUtils.matchPrefix(mediaSection, "a=extmap:").forEach((line) => {
              description.headerExtensions.push(SDPUtils.parseExtmap(line));
            });
            const wildcardRtcpFb = SDPUtils.matchPrefix(
              mediaSection,
              "a=rtcp-fb:* "
            ).map(SDPUtils.parseRtcpFb);
            description.codecs.forEach((codec) => {
              wildcardRtcpFb.forEach((fb) => {
                const duplicate = codec.rtcpFeedback.find(
                  (existingFeedback) => {
                    return (
                      existingFeedback.type === fb.type &&
                      existingFeedback.parameter === fb.parameter
                    );
                  }
                );
                if (!duplicate) {
                  codec.rtcpFeedback.push(fb);
                }
              });
            });
            // FIXME: parse rtcp.
            return description;
          };

          // Generates parts of the SDP media section describing the capabilities /
          // parameters.
          SDPUtils.writeRtpDescription = function (kind, caps) {
            let sdp = "";

            // Build the mline.
            sdp += "m=" + kind + " ";
            sdp += caps.codecs.length > 0 ? "9" : "0"; // reject if no codecs.
            sdp += " UDP/TLS/RTP/SAVPF ";
            sdp +=
              caps.codecs
                .map((codec) => {
                  if (codec.preferredPayloadType !== undefined) {
                    return codec.preferredPayloadType;
                  }
                  return codec.payloadType;
                })
                .join(" ") + "\r\n";

            sdp += "c=IN IP4 0.0.0.0\r\n";
            sdp += "a=rtcp:9 IN IP4 0.0.0.0\r\n";

            // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.
            caps.codecs.forEach((codec) => {
              sdp += SDPUtils.writeRtpMap(codec);
              sdp += SDPUtils.writeFmtp(codec);
              sdp += SDPUtils.writeRtcpFb(codec);
            });
            let maxptime = 0;
            caps.codecs.forEach((codec) => {
              if (codec.maxptime > maxptime) {
                maxptime = codec.maxptime;
              }
            });
            if (maxptime > 0) {
              sdp += "a=maxptime:" + maxptime + "\r\n";
            }

            if (caps.headerExtensions) {
              caps.headerExtensions.forEach((extension) => {
                sdp += SDPUtils.writeExtmap(extension);
              });
            }
            // FIXME: write fecMechanisms.
            return sdp;
          };

          // Parses the SDP media section and returns an array of
          // RTCRtpEncodingParameters.
          SDPUtils.parseRtpEncodingParameters = function (mediaSection) {
            const encodingParameters = [];
            const description = SDPUtils.parseRtpParameters(mediaSection);
            const hasRed = description.fecMechanisms.indexOf("RED") !== -1;
            const hasUlpfec =
              description.fecMechanisms.indexOf("ULPFEC") !== -1;

            // filter a=ssrc:... cname:, ignore PlanB-msid
            const ssrcs = SDPUtils.matchPrefix(mediaSection, "a=ssrc:")
              .map((line) => SDPUtils.parseSsrcMedia(line))
              .filter((parts) => parts.attribute === "cname");
            const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;
            let secondarySsrc;

            const flows = SDPUtils.matchPrefix(
              mediaSection,
              "a=ssrc-group:FID"
            ).map((line) => {
              const parts = line.substring(17).split(" ");
              return parts.map((part) => parseInt(part, 10));
            });
            if (
              flows.length > 0 &&
              flows[0].length > 1 &&
              flows[0][0] === primarySsrc
            ) {
              secondarySsrc = flows[0][1];
            }

            description.codecs.forEach((codec) => {
              if (codec.name.toUpperCase() === "RTX" && codec.parameters.apt) {
                let encParam = {
                  ssrc: primarySsrc,
                  codecPayloadType: parseInt(codec.parameters.apt, 10),
                };
                if (primarySsrc && secondarySsrc) {
                  encParam.rtx = { ssrc: secondarySsrc };
                }
                encodingParameters.push(encParam);
                if (hasRed) {
                  encParam = JSON.parse(JSON.stringify(encParam));
                  encParam.fec = {
                    ssrc: primarySsrc,
                    mechanism: hasUlpfec ? "red+ulpfec" : "red",
                  };
                  encodingParameters.push(encParam);
                }
              }
            });
            if (encodingParameters.length === 0 && primarySsrc) {
              encodingParameters.push({
                ssrc: primarySsrc,
              });
            }

            // we support both b=AS and b=TIAS but interpret AS as TIAS.
            let bandwidth = SDPUtils.matchPrefix(mediaSection, "b=");
            if (bandwidth.length) {
              if (bandwidth[0].indexOf("b=TIAS:") === 0) {
                bandwidth = parseInt(bandwidth[0].substring(7), 10);
              } else if (bandwidth[0].indexOf("b=AS:") === 0) {
                // use formula from JSEP to convert b=AS to TIAS value.
                bandwidth =
                  parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95 -
                  50 * 40 * 8;
              } else {
                bandwidth = undefined;
              }
              encodingParameters.forEach((params) => {
                params.maxBitrate = bandwidth;
              });
            }
            return encodingParameters;
          };

          // parses http://draft.ortc.org/#rtcrtcpparameters*
          SDPUtils.parseRtcpParameters = function (mediaSection) {
            const rtcpParameters = {};

            // Gets the first SSRC. Note that with RTX there might be multiple
            // SSRCs.
            const remoteSsrc = SDPUtils.matchPrefix(mediaSection, "a=ssrc:")
              .map((line) => SDPUtils.parseSsrcMedia(line))
              .filter((obj) => obj.attribute === "cname")[0];
            if (remoteSsrc) {
              rtcpParameters.cname = remoteSsrc.value;
              rtcpParameters.ssrc = remoteSsrc.ssrc;
            }

            // Edge uses the compound attribute instead of reducedSize
            // compound is !reducedSize
            const rsize = SDPUtils.matchPrefix(mediaSection, "a=rtcp-rsize");
            rtcpParameters.reducedSize = rsize.length > 0;
            rtcpParameters.compound = rsize.length === 0;

            // parses the rtcp-mux attrіbute.
            // Note that Edge does not support unmuxed RTCP.
            const mux = SDPUtils.matchPrefix(mediaSection, "a=rtcp-mux");
            rtcpParameters.mux = mux.length > 0;

            return rtcpParameters;
          };

          SDPUtils.writeRtcpParameters = function (rtcpParameters) {
            let sdp = "";
            if (rtcpParameters.reducedSize) {
              sdp += "a=rtcp-rsize\r\n";
            }
            if (rtcpParameters.mux) {
              sdp += "a=rtcp-mux\r\n";
            }
            if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {
              sdp +=
                "a=ssrc:" +
                rtcpParameters.ssrc +
                " cname:" +
                rtcpParameters.cname +
                "\r\n";
            }
            return sdp;
          };

          // parses either a=msid: or a=ssrc:... msid lines and returns
          // the id of the MediaStream and MediaStreamTrack.
          SDPUtils.parseMsid = function (mediaSection) {
            let parts;
            const spec = SDPUtils.matchPrefix(mediaSection, "a=msid:");
            if (spec.length === 1) {
              parts = spec[0].substring(7).split(" ");
              return { stream: parts[0], track: parts[1] };
            }
            const planB = SDPUtils.matchPrefix(mediaSection, "a=ssrc:")
              .map((line) => SDPUtils.parseSsrcMedia(line))
              .filter((msidParts) => msidParts.attribute === "msid");
            if (planB.length > 0) {
              parts = planB[0].value.split(" ");
              return { stream: parts[0], track: parts[1] };
            }
          };

          // SCTP
          // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back
          // to draft-ietf-mmusic-sctp-sdp-05
          SDPUtils.parseSctpDescription = function (mediaSection) {
            const mline = SDPUtils.parseMLine(mediaSection);
            const maxSizeLine = SDPUtils.matchPrefix(
              mediaSection,
              "a=max-message-size:"
            );
            let maxMessageSize;
            if (maxSizeLine.length > 0) {
              maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);
            }
            if (isNaN(maxMessageSize)) {
              maxMessageSize = 65536;
            }
            const sctpPort = SDPUtils.matchPrefix(mediaSection, "a=sctp-port:");
            if (sctpPort.length > 0) {
              return {
                port: parseInt(sctpPort[0].substring(12), 10),
                protocol: mline.fmt,
                maxMessageSize,
              };
            }
            const sctpMapLines = SDPUtils.matchPrefix(
              mediaSection,
              "a=sctpmap:"
            );
            if (sctpMapLines.length > 0) {
              const parts = sctpMapLines[0].substring(10).split(" ");
              return {
                port: parseInt(parts[0], 10),
                protocol: parts[1],
                maxMessageSize,
              };
            }
          };

          // SCTP
          // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers
          // support by now receiving in this format, unless we originally parsed
          // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line
          // protocol of DTLS/SCTP -- without UDP/ or TCP/)
          SDPUtils.writeSctpDescription = function (media, sctp) {
            let output = [];
            if (media.protocol !== "DTLS/SCTP") {
              output = [
                "m=" +
                  media.kind +
                  " 9 " +
                  media.protocol +
                  " " +
                  sctp.protocol +
                  "\r\n",
                "c=IN IP4 0.0.0.0\r\n",
                "a=sctp-port:" + sctp.port + "\r\n",
              ];
            } else {
              output = [
                "m=" +
                  media.kind +
                  " 9 " +
                  media.protocol +
                  " " +
                  sctp.port +
                  "\r\n",
                "c=IN IP4 0.0.0.0\r\n",
                "a=sctpmap:" + sctp.port + " " + sctp.protocol + " 65535\r\n",
              ];
            }
            if (sctp.maxMessageSize !== undefined) {
              output.push("a=max-message-size:" + sctp.maxMessageSize + "\r\n");
            }
            return output.join("");
          };

          // Generate a session ID for SDP.
          // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1
          // recommends using a cryptographically random +ve 64-bit value
          // but right now this should be acceptable and within the right range
          SDPUtils.generateSessionId = function () {
            return Math.random().toString().substr(2, 22);
          };

          // Write boiler plate for start of SDP
          // sessId argument is optional - if not supplied it will
          // be generated randomly
          // sessVersion is optional and defaults to 2
          // sessUser is optional and defaults to 'thisisadapterortc'
          SDPUtils.writeSessionBoilerplate = function (
            sessId,
            sessVer,
            sessUser
          ) {
            let sessionId;
            const version = sessVer !== undefined ? sessVer : 2;
            if (sessId) {
              sessionId = sessId;
            } else {
              sessionId = SDPUtils.generateSessionId();
            }
            const user = sessUser || "thisisadapterortc";
            // FIXME: sess-id should be an NTP timestamp.
            return (
              "v=0\r\n" +
              "o=" +
              user +
              " " +
              sessionId +
              " " +
              version +
              " IN IP4 127.0.0.1\r\n" +
              "s=-\r\n" +
              "t=0 0\r\n"
            );
          };

          // Gets the direction from the mediaSection or the sessionpart.
          SDPUtils.getDirection = function (mediaSection, sessionpart) {
            // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.
            const lines = SDPUtils.splitLines(mediaSection);
            for (let i = 0; i < lines.length; i++) {
              switch (lines[i]) {
                case "a=sendrecv":
                case "a=sendonly":
                case "a=recvonly":
                case "a=inactive":
                  return lines[i].substring(2);
                default:
                // FIXME: What should happen here?
              }
            }
            if (sessionpart) {
              return SDPUtils.getDirection(sessionpart);
            }
            return "sendrecv";
          };

          SDPUtils.getKind = function (mediaSection) {
            const lines = SDPUtils.splitLines(mediaSection);
            const mline = lines[0].split(" ");
            return mline[0].substring(2);
          };

          SDPUtils.isRejected = function (mediaSection) {
            return mediaSection.split(" ", 2)[1] === "0";
          };

          SDPUtils.parseMLine = function (mediaSection) {
            const lines = SDPUtils.splitLines(mediaSection);
            const parts = lines[0].substring(2).split(" ");
            return {
              kind: parts[0],
              port: parseInt(parts[1], 10),
              protocol: parts[2],
              fmt: parts.slice(3).join(" "),
            };
          };

          SDPUtils.parseOLine = function (mediaSection) {
            const line = SDPUtils.matchPrefix(mediaSection, "o=")[0];
            const parts = line.substring(2).split(" ");
            return {
              username: parts[0],
              sessionId: parts[1],
              sessionVersion: parseInt(parts[2], 10),
              netType: parts[3],
              addressType: parts[4],
              address: parts[5],
            };
          };

          // a very naive interpretation of a valid SDP.
          SDPUtils.isValidSDP = function (blob) {
            if (typeof blob !== "string" || blob.length === 0) {
              return false;
            }
            const lines = SDPUtils.splitLines(blob);
            for (let i = 0; i < lines.length; i++) {
              if (lines[i].length < 2 || lines[i].charAt(1) !== "=") {
                return false;
              }
              // TODO: check the modifier a bit more.
            }
            return true;
          };

          // Expose public methods.
          if (true) {
            module.exports = SDPUtils;
          }

          /***/
        },

      /***/ "./node_modules/tiny-warning/dist/tiny-warning.esm.js":
        /*!************************************************************!*\
  !*** ./node_modules/tiny-warning/dist/tiny-warning.esm.js ***!
  \************************************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => __WEBPACK_DEFAULT_EXPORT__,
            /* harmony export */
          });
          var isProduction = "development" === "production";
          function warning(condition, message) {
            if (!isProduction) {
              if (condition) {
                return;
              }

              var text = "Warning: " + message;

              if (typeof console !== "undefined") {
                console.warn(text);
              }

              try {
                throw Error(text);
              } catch (x) {}
            }
          }

          /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ =
            warning;

          /***/
        },

      /***/ "./src/LoadingOverlay.ts":
        /*!*******************************!*\
  !*** ./src/LoadingOverlay.ts ***!
  \*******************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ LoadingOverlay: () =>
              /* binding */ LoadingOverlay,
            /* harmony export */
          });
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js"
            );

          class LoadingOverlay extends _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_0__.TextOverlay {
            /**
             * @returns The created root element of this overlay.
             */
            static rootElement() {
              if (!LoadingOverlay._rootElement) {
                LoadingOverlay._rootElement = document.createElement("div");
                LoadingOverlay._rootElement.id = "loadingOverlay";
                LoadingOverlay._rootElement.className = "textDisplayState";
              }
              return LoadingOverlay._rootElement;
            }
            /**
             * @returns The created content element of this overlay, which contain whatever content this element contains, like text or a button.
             */
            static textElement() {
              if (!LoadingOverlay._textElement) {
                LoadingOverlay._textElement = document.createElement("div");
                LoadingOverlay._textElement.id = "loadingOverlayText";
              }
              return LoadingOverlay._textElement;
            }
            static spinner() {
              if (!LoadingOverlay._spinner) {
                // build the spinner div
                const size = LoadingOverlay._rootElement.clientWidth * 0.03;
                LoadingOverlay._spinner = document.createElement("div");
                LoadingOverlay._spinner.id = "loading-spinner";
                LoadingOverlay._spinner.className = "loading-spinner";
                LoadingOverlay._spinner.setAttribute(
                  "style",
                  "width: " + size + "px; height: " + size + "px;"
                );
                const SpinnerSectionOne = document.createElement("div");
                SpinnerSectionOne.setAttribute(
                  "style",
                  "width: " +
                    size * 0.8 +
                    "px; height: " +
                    size * 0.8 +
                    "px; border-width: " +
                    size * 0.125 +
                    "px;"
                );
                LoadingOverlay._spinner.appendChild(SpinnerSectionOne);
                const SpinnerSectionTwo = document.createElement("div");
                SpinnerSectionTwo.setAttribute(
                  "style",
                  "width: " +
                    size * 0.8 +
                    "px; height: " +
                    size * 0.8 +
                    "px; border-width: " +
                    size * 0.125 +
                    "px;"
                );
                LoadingOverlay._spinner.appendChild(SpinnerSectionTwo);
                const SpinnerSectionThree = document.createElement("div");
                SpinnerSectionThree.setAttribute(
                  "style",
                  "width: " +
                    size * 0.8 +
                    "px; height: " +
                    size * 0.8 +
                    "px; border-width: " +
                    size * 0.125 +
                    "px;"
                );
                LoadingOverlay._spinner.appendChild(SpinnerSectionThree);
              }
              return LoadingOverlay._spinner;
            }
            /**
             * Construct a connect overlay with a connection button.
             * @param parentElem the parent element this overlay will be inserted into.
             */
            constructor(parentElem) {
              super(
                parentElem,
                LoadingOverlay.rootElement(),
                LoadingOverlay.textElement()
              );
              this.maxDrops = 50;
              this.maxSize = 5;
              this.maxDuration = 5;
              this.minDelay = -20;
              this.rainDrops = [];
            }
            animate() {
              // Update the existing drops to have an increased speed
              for (let raindrop of this.rainDrops) {
                raindrop.element.setAttribute(
                  "style",
                  "animation-duration:" +
                    (1 + Math.random() * this.maxDuration) +
                    "s;"
                );
              }
              let i = 0;
              while (i < this.maxDrops) {
                const dropContainer = document.createElement("div");
                dropContainer.id = "dropContainer";
                const raindrop = new Raindrop();
                raindrop.size = Math.random() * this.maxSize + 0.2;
                raindrop.delay = Math.random() * this.minDelay;
                raindrop.duration = Math.random() * this.maxDuration;
                raindrop.offsetLeft = Math.floor(
                  Math.random() * LoadingOverlay.rootElement().clientWidth
                );
                raindrop.element = dropContainer;
                const drop = document.createElement("drop");
                drop.setAttribute(
                  "style",
                  "left: " +
                    raindrop.offsetLeft +
                    "px; width:" +
                    raindrop.size +
                    "px; overflow: visible;"
                );
                dropContainer.setAttribute(
                  "style",
                  "animation-delay:" +
                    raindrop.delay +
                    "s; animation-duration:" +
                    (1 + raindrop.duration) +
                    "s;"
                );
                const head = document.createElement("div");
                head.id = "drophead";
                raindrop.headsize = raindrop.size * 3;
                head.setAttribute(
                  "style",
                  "left: -" +
                    raindrop.size +
                    "px; width:" +
                    raindrop.headsize +
                    "px; height: " +
                    raindrop.headsize +
                    "px;"
                );
                drop.appendChild(head);
                dropContainer.appendChild(drop);
                LoadingOverlay.rootElement().append(dropContainer);
                this.rainDrops.push(raindrop);
                i++;
              }
              this.maxDrops /= 1.5;
              this.maxDuration /= 1.5;
            }
            /**
             * Update the text overlays inner text
             * @param text the update text to be inserted into the overlay
             */
            update(text) {
              if (text != null || text != undefined) {
                this.textElement.innerHTML = "";
                let textContainer = document.createElement("div");
                textContainer.innerHTML = text;
                this.textElement.append(textContainer);
                this.textElement.append(LoadingOverlay.spinner());
              }
            }
          }
          class Raindrop {}

          /***/
        },

      /***/ "./src/Messages.ts":
        /*!*************************!*\
  !*** ./src/Messages.ts ***!
  \*************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ MessageSendTypes: () =>
              /* binding */ MessageSendTypes,
            /* harmony export */ MessageStats: () => /* binding */ MessageStats,
            /* harmony export */
          });
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js"
            );

          var MessageSendTypes;
          (function (MessageSendTypes) {
            MessageSendTypes["STATS"] = "stats";
          })(MessageSendTypes || (MessageSendTypes = {}));
          /**
           * Aggregated Stats Message Wrapper
           */
          class MessageStats extends _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.MessageSend {
            /**
             * @param aggregatedStats - Aggregated Stats
             */
            constructor(aggregatedStats) {
              super();
              this.type = MessageSendTypes.STATS;
              this.inboundVideoStats = aggregatedStats.inboundVideoStats;
              this.inboundAudioStats = aggregatedStats.inboundAudioStats;
              this.candidatePair = aggregatedStats.candidatePair;
              this.dataChannelStats = aggregatedStats.DataChannelStats;
              this.localCandidates = aggregatedStats.localCandidates;
              this.remoteCandidates = aggregatedStats.remoteCandidates;
              this.outboundVideoStats = aggregatedStats.outBoundVideoStats;
            }
          }

          /***/
        },

      /***/ "./src/SPSApplication.ts":
        /*!*******************************!*\
  !*** ./src/SPSApplication.ts ***!
  \*******************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ SPSApplication: () =>
              /* binding */ SPSApplication,
            /* harmony export */
          });
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_3__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js"
            );
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_4__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js"
            );
          /* harmony import */ var _LoadingOverlay__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! ./LoadingOverlay */ "./src/LoadingOverlay.ts"
            );
          /* harmony import */ var _SignallingExtension__WEBPACK_IMPORTED_MODULE_1__ =
            __webpack_require__(
              /*! ./SignallingExtension */ "./src/SignallingExtension.ts"
            );
          /* harmony import */ var _Messages__WEBPACK_IMPORTED_MODULE_2__ =
            __webpack_require__(/*! ./Messages */ "./src/Messages.ts");
          var __setFunctionName =
            (undefined && undefined.__setFunctionName) ||
            function (f, name, prefix) {
              if (typeof name === "symbol")
                name = name.description
                  ? "[".concat(name.description, "]")
                  : "";
              return Object.defineProperty(f, "name", {
                configurable: true,
                value: prefix ? "".concat(prefix, " ", name) : name,
              });
            };
          var _a;

          class SPSApplication extends _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_3__.Application {
            constructor(config) {
              super(config);
              this.signallingExtension =
                new _SignallingExtension__WEBPACK_IMPORTED_MODULE_1__.SPSSignalling(
                  this.stream.webSocketController
                );
              this.signallingExtension.onAuthenticationResponse =
                this.handleSignallingResponse.bind(this);
              this.signallingExtension.onInstanceStateChanged =
                this.handleSignallingResponse.bind(this);
              this.enforceSpecialSignallingServerUrl();
              // Add 'Send Stats to Server' checkbox
              const spsSettingsSection = this.configUI.buildSectionWithHeading(
                this.settingsPanel.settingsContentElement,
                "Scalable Pixel Streaming"
              );
              const sendStatsToServerSetting =
                new _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_4__.SettingFlag(
                  SPSApplication.Flags.sendToServer,
                  "Send stats to server",
                  "Send session stats to the server",
                  false,
                  this.stream.config.useUrlParams
                );
              spsSettingsSection.appendChild(
                new _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_3__.SettingUIFlag(
                  sendStatsToServerSetting
                ).rootElement
              );
              this.loadingOverlay =
                new _LoadingOverlay__WEBPACK_IMPORTED_MODULE_0__.LoadingOverlay(
                  this.stream.videoElementParent
                );
              this.stream.addEventListener(
                "statsReceived",
                ({ data: { aggregatedStats } }) => {
                  if (sendStatsToServerSetting.flag) {
                    this.sendStatsToSignallingServer(aggregatedStats);
                  }
                }
              );
            }
            handleSignallingResponse(signallingResp, isError) {
              if (isError) {
                this.showErrorOverlay(signallingResp);
              } else {
                this.showLoadingOverlay(signallingResp);
              }
            }
            enforceSpecialSignallingServerUrl() {
              // SPS needs a special /ws added to the signalling server url so K8s can distinguish it
              this.stream.setSignallingUrlBuilder(() => {
                let signallingUrl = this.stream.config.getTextSettingValue(
                  _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_4__
                    .TextParameters.SignallingServerUrl
                );
                if (
                  signallingUrl &&
                  signallingUrl !== undefined &&
                  !signallingUrl.endsWith("/ws")
                ) {
                  signallingUrl = signallingUrl.endsWith("/")
                    ? signallingUrl + "ws"
                    : signallingUrl + window.location.pathname + "/ws";
                }
                return signallingUrl;
              });
            }
            showLoadingOverlay(signallingResp) {
              this.hideCurrentOverlay();
              this.loadingOverlay.show();
              this.loadingOverlay.update(signallingResp);
              // disable rain animation for now as perf is too poor on mobile devices
              // this.loadingOverlay.animate();
              this.currentOverlay = this.loadingOverlay;
            }
            /**
             * Send Aggregated Stats to the Signaling Server
             * @param stats - Aggregated Stats
             */
            sendStatsToSignallingServer(stats) {
              const data =
                new _Messages__WEBPACK_IMPORTED_MODULE_2__.MessageStats(stats);
              this.stream.webSocketController.webSocket.send(data.payload());
            }
          }
          SPSApplication.Flags =
            ((_a = class {}),
            __setFunctionName(_a, "Flags"),
            (_a.sendToServer = "sendStatsToServer"),
            _a);

          /***/
        },

      /***/ "./src/SignallingExtension.ts":
        /*!************************************!*\
  !*** ./src/SignallingExtension.ts ***!
  \************************************/
        /***/ (
          __unused_webpack_module,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ InstanceState: () =>
              /* binding */ InstanceState,
            /* harmony export */ MessageAuthRequest: () =>
              /* binding */ MessageAuthRequest,
            /* harmony export */ MessageAuthResponse: () =>
              /* binding */ MessageAuthResponse,
            /* harmony export */ MessageAuthResponseOutcomeType: () =>
              /* binding */ MessageAuthResponseOutcomeType,
            /* harmony export */ MessageInstanceState: () =>
              /* binding */ MessageInstanceState,
            /* harmony export */ MessageRequestInstance: () =>
              /* binding */ MessageRequestInstance,
            /* harmony export */ SPSSignalling: () =>
              /* binding */ SPSSignalling,
            /* harmony export */
          });
          /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js"
            );

          /**
           * Auth Request Message Wrapper
           */
          class MessageAuthRequest extends _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.MessageSend {
            /**
             * @param token - Token Provided by the Auth Provider
             * @param provider - Name of the provider that is registered in the auth plugin
             */
            constructor(token, provider) {
              super();
              this.type = "authenticationRequest";
              this.token = token;
              this.provider = provider;
            }
          }
          /**
           * States of the UE Instance
           */
          var InstanceState;
          (function (InstanceState) {
            InstanceState["UNALLOCATED"] = "UNALLOCATED";
            InstanceState["PENDING"] = "PENDING";
            InstanceState["FAILED"] = "FAILED";
            InstanceState["READY"] = "READY";
          })(InstanceState || (InstanceState = {}));
          /**
           * Instance State Message wrapper
           */
          class MessageInstanceState extends _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.MessageRecv {}
          /**
           * Types of Authentication reposes
           */
          var MessageAuthResponseOutcomeType;
          (function (MessageAuthResponseOutcomeType) {
            MessageAuthResponseOutcomeType["REDIRECT"] = "REDIRECT";
            MessageAuthResponseOutcomeType["INVALID_TOKEN"] = "INVALID_TOKEN";
            MessageAuthResponseOutcomeType["AUTHENTICATED"] = "AUTHENTICATED";
            MessageAuthResponseOutcomeType["ERROR"] = "ERROR";
          })(
            MessageAuthResponseOutcomeType ||
              (MessageAuthResponseOutcomeType = {})
          );
          /**
           * Authentication Response Message wrapper
           */
          class MessageAuthResponse extends _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.MessageRecv {}
          /**
           * Instance Request Message Wrapper
           */
          class MessageRequestInstance extends _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.MessageSend {
            constructor() {
              super();
              this.type = "requestInstance";
            }
          }
          /**
           * Specific signalling extensions required by SPS.
           * For example: authenticationRequired, instanceState, authenticationResponse
           */
          class SPSSignalling {
            constructor(websocketController) {
              this.extendSignallingProtocol(websocketController);
            }
            /**
             * Extend the signalling protocol with SPS specific messages.
             */
            extendSignallingProtocol(webSocketController) {
              // authenticationRequired
              webSocketController.signallingProtocol.addMessageHandler(
                "authenticationRequired",
                (authReqPayload) => {
                  _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(
                    _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                    "AUTHENTICATION_REQUIRED",
                    6
                  );
                  const url_string = window.location.href;
                  const url = new URL(url_string);
                  const authRequest = new MessageAuthRequest(
                    url.searchParams.get("code"),
                    url.searchParams.get("provider")
                  );
                  webSocketController.webSocket.send(authRequest.payload());
                }
              );
              // instanceState
              webSocketController.signallingProtocol.addMessageHandler(
                "instanceState",
                (instanceStatePayload) => {
                  _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(
                    _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                    "INSTANCE_STATE",
                    6
                  );
                  const instanceState = JSON.parse(instanceStatePayload);
                  this.handleInstanceStateChanged(instanceState);
                }
              );
              // authenticationResponse
              webSocketController.signallingProtocol.addMessageHandler(
                "authenticationResponse",
                (authRespPayload) => {
                  _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(
                    _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                    "AUTHENTICATION_RESPONSE",
                    6
                  );
                  const authenticationResponse = JSON.parse(authRespPayload);
                  this.handleAuthenticationResponse(authenticationResponse);
                  switch (authenticationResponse.outcome) {
                    case MessageAuthResponseOutcomeType.REDIRECT: {
                      window.location.href = authenticationResponse.redirect;
                      break;
                    }
                    case MessageAuthResponseOutcomeType.AUTHENTICATED: {
                      _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Log(
                        _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                        "User is authenticated and now requesting an instance",
                        6
                      );
                      webSocketController.webSocket.send(
                        new MessageRequestInstance().payload()
                      );
                      break;
                    }
                    case MessageAuthResponseOutcomeType.INVALID_TOKEN: {
                      _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(
                        _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                        "Authentication error : Invalid Token"
                      );
                      break;
                    }
                    case MessageAuthResponseOutcomeType.ERROR: {
                      _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Info(
                        _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                        "Authentication Error from server Check what you are sending"
                      );
                      break;
                    }
                    default: {
                      _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.Error(
                        _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger.GetStackTrace(),
                        "The Outcome Message has not been handled : this is really bad"
                      );
                      break;
                    }
                  }
                }
              );
            }
            /**
             * Set up functionality to happen when an instance state change occurs and updates the info overlay with the response
             * @param instanceState - the message instance state
             */
            handleInstanceStateChanged(instanceState) {
              let instanceStateMessage = "";
              let isInstancePending = false;
              let isError = false;
              // get the response type
              switch (instanceState.state) {
                case InstanceState.UNALLOCATED:
                  instanceStateMessage =
                    "Instance Unallocated: " + instanceState.details;
                  break;
                case InstanceState.FAILED:
                  instanceStateMessage =
                    "UE Instance Failed: " + instanceState.details;
                  isError = true;
                  break;
                case InstanceState.PENDING:
                  isInstancePending = true;
                  if (
                    instanceState.details == undefined ||
                    instanceState.details == null
                  ) {
                    instanceStateMessage = "Pending";
                  } else {
                    instanceStateMessage = instanceState.details;
                  }
                  instanceStateMessage = "Step 2/3: " + instanceStateMessage;
                  break;
                case InstanceState.READY:
                  if (
                    instanceState.details == undefined ||
                    instanceState.details == null
                  ) {
                    instanceStateMessage = "Ready";
                  } else {
                    instanceStateMessage = "Ready: " + instanceState.details;
                  }
                  instanceStateMessage = "Step 3/3: " + instanceStateMessage;
                  break;
                default:
                  instanceStateMessage =
                    "Unhandled Instance State" +
                    instanceState.state +
                    " " +
                    instanceState.details;
                  break;
              }
              if (isError) {
                this.onInstanceStateChanged(instanceStateMessage, true);
              } else {
                this.onInstanceStateChanged(instanceStateMessage, false);
              }
            }
            /**
             * Set up functionality to happen when receiving an auth response and updates an info overlay with the response
             * @param authResponse - the auth response message type
             */
            handleAuthenticationResponse(authResponse) {
              let instanceStateMessage = "";
              let isError = false;
              // get the response type
              switch (authResponse.outcome) {
                case MessageAuthResponseOutcomeType.AUTHENTICATED:
                  instanceStateMessage = "Step 1/3: Requesting Instance";
                  break;
                case MessageAuthResponseOutcomeType.INVALID_TOKEN:
                  instanceStateMessage = "Invalid Token: " + authResponse.error;
                  isError = true;
                  break;
                case MessageAuthResponseOutcomeType.REDIRECT:
                  instanceStateMessage =
                    "Redirecting to: " + authResponse.redirect;
                  break;
                case MessageAuthResponseOutcomeType.ERROR:
                  instanceStateMessage = "Error: " + authResponse.error;
                  isError = true;
                  break;
                default:
                  instanceStateMessage =
                    "Unhandled Auth Response: " + authResponse.outcome;
                  break;
              }
              this.onAuthenticationResponse(instanceStateMessage, isError);
            }
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
        /*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \**************************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () =>
              /* binding */ _assertThisInitialized,
            /* harmony export */
          });
          function _assertThisInitialized(self) {
            if (self === void 0) {
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            }
            return self;
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/createClass.js":
        /*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \****************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _createClass,
            /* harmony export */
          });
          /* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! ./toPropertyKey.js */ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js"
            );

          function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
              var descriptor = props[i];
              descriptor.enumerable = descriptor.enumerable || false;
              descriptor.configurable = true;
              if ("value" in descriptor) descriptor.writable = true;
              Object.defineProperty(
                target,
                (0, _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(
                  descriptor.key
                ),
                descriptor
              );
            }
          }
          function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps)
              _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            Object.defineProperty(Constructor, "prototype", {
              writable: false,
            });
            return Constructor;
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
        /*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _extends,
            /* harmony export */
          });
          function _extends() {
            _extends = Object.assign
              ? Object.assign.bind()
              : function (target) {
                  for (var i = 1; i < arguments.length; i++) {
                    var source = arguments[i];
                    for (var key in source) {
                      if (Object.prototype.hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                      }
                    }
                  }
                  return target;
                };
            return _extends.apply(this, arguments);
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
        /*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \******************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _inheritsLoose,
            /* harmony export */
          });
          /* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"
            );

          function _inheritsLoose(subClass, superClass) {
            subClass.prototype = Object.create(superClass.prototype);
            subClass.prototype.constructor = subClass;
            (0, _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(
              subClass,
              superClass
            );
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
        /*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () =>
              /* binding */ _objectWithoutPropertiesLoose,
            /* harmony export */
          });
          function _objectWithoutPropertiesLoose(source, excluded) {
            if (source == null) return {};
            var target = {};
            var sourceKeys = Object.keys(source);
            var key, i;
            for (i = 0; i < sourceKeys.length; i++) {
              key = sourceKeys[i];
              if (excluded.indexOf(key) >= 0) continue;
              target[key] = source[key];
            }
            return target;
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
        /*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _setPrototypeOf,
            /* harmony export */
          });
          function _setPrototypeOf(o, p) {
            _setPrototypeOf = Object.setPrototypeOf
              ? Object.setPrototypeOf.bind()
              : function _setPrototypeOf(o, p) {
                  o.__proto__ = p;
                  return o;
                };
            return _setPrototypeOf(o, p);
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":
        /*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPrimitive.js ***!
  \****************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _toPrimitive,
            /* harmony export */
          });
          /* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js"
            );

          function _toPrimitive(input, hint) {
            if (
              (0, _typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(input) !==
                "object" ||
              input === null
            )
              return input;
            var prim = input[Symbol.toPrimitive];
            if (prim !== undefined) {
              var res = prim.call(input, hint || "default");
              if (
                (0, _typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(res) !==
                "object"
              )
                return res;
              throw new TypeError(
                "@@toPrimitive must return a primitive value."
              );
            }
            return (hint === "string" ? String : Number)(input);
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":
        /*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js ***!
  \******************************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _toPropertyKey,
            /* harmony export */
          });
          /* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ =
            __webpack_require__(
              /*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js"
            );
          /* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ =
            __webpack_require__(
              /*! ./toPrimitive.js */ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js"
            );

          function _toPropertyKey(arg) {
            var key = (0,
            _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
              arg,
              "string"
            );
            return (0, _typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(
              key
            ) === "symbol"
              ? key
              : String(key);
          }

          /***/
        },

      /***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
        /*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
        /***/ (
          __unused_webpack___webpack_module__,
          __webpack_exports__,
          __webpack_require__
        ) => {
          __webpack_require__.r(__webpack_exports__);
          /* harmony export */ __webpack_require__.d(__webpack_exports__, {
            /* harmony export */ default: () => /* binding */ _typeof,
            /* harmony export */
          });
          function _typeof(obj) {
            "@babel/helpers - typeof";

            return (
              (_typeof =
                "function" == typeof Symbol &&
                "symbol" == typeof Symbol.iterator
                  ? function (obj) {
                      return typeof obj;
                    }
                  : function (obj) {
                      return obj &&
                        "function" == typeof Symbol &&
                        obj.constructor === Symbol &&
                        obj !== Symbol.prototype
                        ? "symbol"
                        : typeof obj;
                    }),
              _typeof(obj)
            );
          }

          /***/
        },

      /******/
    };
    /************************************************************************/
    /******/ // The module cache
    /******/ var __webpack_module_cache__ = {};
    /******/
    /******/ // The require function
    /******/ function __webpack_require__(moduleId) {
      /******/ // Check if module is in cache
      /******/ var cachedModule = __webpack_module_cache__[moduleId];
      /******/ if (cachedModule !== undefined) {
        /******/ return cachedModule.exports;
        /******/
      }
      /******/ // Create a new module (and put it into the cache)
      /******/ var module = (__webpack_module_cache__[moduleId] = {
        /******/ // no module.id needed
        /******/ // no module.loaded needed
        /******/ exports: {},
        /******/
      });
      /******/
      /******/ // Execute the module function
      /******/ __webpack_modules__[moduleId](
        module,
        module.exports,
        __webpack_require__
      );
      /******/
      /******/ // Return the exports of the module
      /******/ return module.exports;
      /******/
    }
    /******/
    /************************************************************************/
    /******/ /* webpack/runtime/compat get default export */
    /******/ (() => {
      /******/ // getDefaultExport function for compatibility with non-harmony modules
      /******/ __webpack_require__.n = (module) => {
        /******/ var getter =
          module && module.__esModule
            ? /******/ () => module["default"]
            : /******/ () => module;
        /******/ __webpack_require__.d(getter, { a: getter });
        /******/ return getter;
        /******/
      };
      /******/
    })();
    /******/
    /******/ /* webpack/runtime/define property getters */
    /******/ (() => {
      /******/ // define getter functions for harmony exports
      /******/ __webpack_require__.d = (exports, definition) => {
        /******/ for (var key in definition) {
          /******/ if (
            __webpack_require__.o(definition, key) &&
            !__webpack_require__.o(exports, key)
          ) {
            /******/ Object.defineProperty(exports, key, {
              enumerable: true,
              get: definition[key],
            });
            /******/
          }
          /******/
        }
        /******/
      };
      /******/
    })();
    /******/
    /******/ /* webpack/runtime/hasOwnProperty shorthand */
    /******/ (() => {
      /******/ __webpack_require__.o = (obj, prop) =>
        Object.prototype.hasOwnProperty.call(obj, prop);
      /******/
    })();
    /******/
    /******/ /* webpack/runtime/make namespace object */
    /******/ (() => {
      /******/ // define __esModule on exports
      /******/ __webpack_require__.r = (exports) => {
        /******/ if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
          /******/ Object.defineProperty(exports, Symbol.toStringTag, {
            value: "Module",
          });
          /******/
        }
        /******/ Object.defineProperty(exports, "__esModule", { value: true });
        /******/
      };
      /******/
    })();
    /******/
    /************************************************************************/
    var __webpack_exports__ = {};
    // This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
    (() => {
      /*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
      __webpack_require__.r(__webpack_exports__);
      /* harmony export */ __webpack_require__.d(__webpack_exports__, {
        /* harmony export */ PixelStreamingApplicationStyles: () =>
          /* binding */ PixelStreamingApplicationStyles,
        /* harmony export */
      });
      /* harmony import */ var _SPSApplication__WEBPACK_IMPORTED_MODULE_0__ =
        __webpack_require__(/*! ./SPSApplication */ "./src/SPSApplication.ts");
      /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_2__ =
        __webpack_require__(
          /*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js"
        );
      /* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_1__ =
        __webpack_require__(
          /*! @epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js"
        );

      // Apply default styling from Epic's frontend
      const PixelStreamingApplicationStyles =
        new _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_1__.PixelStreamingApplicationStyle();
      PixelStreamingApplicationStyles.applyStyleSheet();
      document.body.onload = function () {
        // Example of how to set the logger level
        //libfrontend.Logger.SetLoggerVerbosity(10);
        // Create a config object.
        // Note: This config is extremely important, SPS only supports the browser sending the offer.
        const config =
          new _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_2__.Config(
            {
              useUrlParams: true,
              initialSettings: {
                OfferToReceive: true,
                TimeoutIfIdle: true,
                HoveringMouse: true,
              },
            }
          );
        config.setTextSetting(
          _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_2__
            .TextParameters.SignallingServerUrl,
          "ws://sps-biome-1662428721.ap-south-1.elb.amazonaws.com/qd-npq7hv9mm3/ws"
        );
        // Create a Native DOM delegate instance that implements the Delegate interface class
        const stream =
          new _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_2__.PixelStreaming(
            config
          );
        const spsApplication =
          new _SPSApplication__WEBPACK_IMPORTED_MODULE_0__.SPSApplication({
            stream,
            onColorModeChanged: (isLightMode) =>
              PixelStreamingApplicationStyles.setColorMode(
                isLightMode
              ) /* Light/Dark mode support. */,
          });
          const descriptor = {
            LoadLevel: "/Game/Maps/Level_2",
            PlayerCharacter: {
                Name: "Shinobi",
                Skin: "Dynasty",
            },
        };
        let screenWidth = window.innerWidth;
        function MobileOrnot() {
            if (screenWidth >= 999) {
                stream.emitUIInteraction("pc");
                  console.log("pc");
            }
            else {
                stream.emitUIInteraction("mobil");
                console.log("mobil");
            }
            //send a message to the game about the light
        }
        MobileOrnot();
        document.body.appendChild(spsApplication.rootElement);
      };
    })();

    /******/ return __webpack_exports__;
    /******/
  })();
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1ZzQixXQUFXLFVBQVUsK0RBQStELHVCQUF1QixFQUFFLG9EQUFvRCxNQUFNLE9BQU8sK2tCQUEra0IsRUFBRSxRQUFRLHVCQUF1QixrQkFBa0IsNENBQTRDLDhEQUE4RCw2QkFBNkIscURBQXFELGtCQUFrQixpQ0FBaUMsNEJBQTRCLEVBQUUsWUFBWSxFQUFFLEVBQUUsZUFBZSxtQkFBbUIsaUNBQWlDLDZCQUE2QixFQUFFLEVBQUUsZ0JBQWdCLGtCQUFrQiw4QkFBOEIsRUFBRSxZQUFZLEVBQUUsRUFBRSxpQkFBaUIsb0JBQW9CLG1DQUFtQyxFQUFFLFNBQVMsRUFBRSxFQUFFLGlCQUFpQixnQ0FBZ0MsZ1FBQWdRLFNBQVMsR0FBRyxRQUFRLFVBQVUsc0dBQXNHLGtCQUFrQixjQUFjLG9DQUFvQyxrQkFBa0IsZUFBZSxpREFBaUQsa0JBQWtCLGNBQWMsaUNBQWlDLGtCQUFrQixlQUFlLHNDQUFzQyxrQkFBa0IsZUFBZSxnRUFBZ0Usa0JBQWtCLGVBQWUsaUVBQWlFLGtCQUFrQixjQUFjLHdDQUF3QyxrQkFBa0IsY0FBYyw2Q0FBNkMsUUFBUSxlQUFlLDJDQUEyQyxVQUFVLHNHQUFzRyxhQUFhLHlOQUF5TixTQUFTLEdBQUcsU0FBUyxtQkFBbUIsUUFBUSxjQUFjLG1DQUFtQyx1QkFBdUIsb0NBQW9DLG1CQUFtQixvSEFBb0gsR0FBRyxpRkFBaUYsK0JBQStCLG1EQUFtRCw4Q0FBOEMsNkRBQTZELHdEQUF3RCxvQ0FBb0Msc0JBQXNCLGNBQWMsK0RBQStELDJDQUEyQyxzQkFBc0Isb0JBQW9CLDhEQUE4RCwwQ0FBMEMsc0JBQXNCLG9EQUFvRCx3REFBd0Qsb0NBQW9DLHNCQUFzQixvQkFBb0IsdURBQXVELG1DQUFtQyxzQkFBc0IsbUJBQW1CLCtEQUErRCwyQ0FBMkMsc0JBQXNCLDhCQUE4Qix5REFBeUQsaURBQWlELEVBQUUsR0FBRyxvRUFBb0UsZ0RBQWdELHNCQUFzQiw4QkFBOEIsSUFBSSxRQUFRLGNBQWMseUlBQXlJLFdBQVcsNkJBQTZCLElBQUksNFNBQTRTLFNBQVMsd0JBQXdCLHlCQUF5QixtQ0FBbUMsOENBQThDLE9BQU8sRUFBRSx3QkFBd0IsY0FBYyxpRkFBaUYsRUFBRSxHQUFHLEdBQUcsbUJBQW1CLDRFQUE0RSwyQkFBMkIsNklBQTZJLGdCQUFnQiwySEFBMkgsZ0JBQWdCLDZDQUE2QyxpQkFBaUIsK01BQStNLHNCQUFzQixjQUFjLGlDQUFpQyxpQkFBaUIsaUJBQWlCLGlDQUFpQyxrQkFBa0IsY0FBYyxpQ0FBaUMsbUJBQW1CLGlCQUFpQixpQ0FBaUMsb0JBQW9CLGlCQUFpQixpQ0FBaUMsK0JBQStCLGNBQWMsaUNBQWlDLDhCQUE4QixjQUFjLGlDQUFpQyxvQkFBb0Isb0hBQW9ILGlCQUFpQixrQ0FBa0MsUUFBUSx1QkFBdUIscUNBQXFDLGFBQWEsbUJBQW1CLG1CQUFtQixtQkFBbUIsa0JBQWtCLDhCQUE4QixRQUFRLGVBQWUsOEVBQThFLGlCQUFpQixzRUFBc0Usb0RBQW9ELGtUQUFrVCxvQ0FBb0Msb0JBQW9CLG9EQUFvRCxtS0FBbUssUUFBUSxlQUFlLHdlQUF3ZSxvQkFBb0IsdUNBQXVDLG9CQUFvQixzQ0FBc0MsNEJBQTRCLDZEQUE2RCx1Q0FBdUMsV0FBVyxvQ0FBb0MsMEhBQTBILFNBQVMsMERBQTBELG9CQUFvQiwwR0FBMEcsc2tCQUFza0IsUUFBUSxlQUFlLGdIQUFnSCxrQkFBa0IsaURBQWlELGtCQUFrQixtREFBbUQsOEJBQThCLHVGQUF1RiwwREFBMEQsK0JBQStCLDBJQUEwSSxtQkFBbUIsY0FBYyxrREFBa0QseURBQXlELG9HQUFvRyxpQkFBaUIsR0FBRyxVQUFVLEtBQUssd0hBQXdILFVBQVUseUpBQXlKLGlCQUFpQixHQUFHLFVBQVUsd0NBQXdDLFFBQVEsNkJBQTZCLEdBQUcsd0NBQXdDLHdEQUF3RCxhQUFhLDZDQUE2QyxZQUFZLG1CQUFtQixZQUFZLG1CQUFtQixhQUFhLDhFQUE4RSxrQkFBa0IsK0JBQStCLEdBQUcsaUJBQWlCLG9EQUFvRCxzQkFBc0IsK0JBQStCLFlBQVksaUJBQWlCLG9CQUFvQixrQkFBa0Isb0RBQW9ELDJFQUEyRSxrQkFBa0Isc0JBQXNCLG9EQUFvRCwwRkFBMEYseUJBQXlCLGtCQUFrQixHQUFHLEVBQUUsS0FBSyxrQkFBa0IsSUFBSSxTQUFTLGFBQWEsV0FBVyxtQkFBbUIsWUFBWSxjQUFjLGtCQUFrQixtQ0FBbUMsR0FBRyx5Q0FBeUMsb0RBQW9ELHNCQUFzQix3Q0FBd0MsZ0NBQWdDLG1CQUFtQixvQkFBb0Isa0JBQWtCLHNCQUFzQixvREFBb0Qsb0VBQW9FLHlCQUF5QixrQkFBa0IsR0FBRyxFQUFFLEtBQUssa0JBQWtCLElBQUksY0FBYyx5QkFBeUIsYUFBYSxrQkFBa0IsU0FBUyxpREFBaUQsVUFBVSxpQkFBaUIsVUFBVSxpQkFBaUIsd0JBQXdCLGlCQUFpQixrQkFBa0IsK0JBQStCLEdBQUcsaUJBQWlCLG9EQUFvRCxzQkFBc0IsK0JBQStCLFlBQVksaUJBQWlCLG9CQUFvQixrQkFBa0IsTUFBTSxvREFBb0Qsa0VBQWtFLGtCQUFrQixzQkFBc0Isb0RBQW9ELHVEQUF1RCx5QkFBeUIsa0JBQWtCLEdBQUcsRUFBRSxLQUFLLGtCQUFrQixJQUFJLFdBQVcsa0JBQWtCLFlBQVksY0FBYyxrQkFBa0IsaUNBQWlDLEdBQUcsb0NBQW9DLGlHQUFpRyxvQ0FBb0Msa0JBQWtCLE1BQU0sb0RBQW9ELGtFQUFrRSxrQkFBa0Isc0JBQXNCLG9EQUFvRCwyREFBMkQseUJBQXlCLGtCQUFrQixHQUFHLEVBQUUsS0FBSyxrQkFBa0IsSUFBSSx3QkFBd0IsZ0JBQWdCLGNBQWMscUJBQXFCLGVBQWUsaURBQWlELGVBQWUsa0JBQWtCLGdCQUFnQixvREFBb0QsNkJBQTZCLHNCQUFzQixlQUFlLHlDQUF5QyxzQkFBc0IsZUFBZSx1Q0FBdUMsc0JBQXNCLGNBQWMsK0JBQStCLHNCQUFzQixjQUFjLHNCQUFzQixzQkFBc0IsZUFBZSx3Q0FBd0Msc0JBQXNCLGNBQWMsb0JBQW9CLHNCQUFzQixjQUFjLDRCQUE0QixzQkFBc0IsY0FBYywyQkFBMkIsc0JBQXNCLGNBQWMsMEJBQTBCLHNCQUFzQixjQUFjLHVCQUF1QixzQkFBc0IsZUFBZSx5Q0FBeUMsc0JBQXNCLGVBQWUsc0NBQXNDLHNCQUFzQixlQUFlLHVDQUF1QyxzQkFBc0IsZUFBZSx1Q0FBdUMsc0JBQXNCLGNBQWMsMkJBQTJCLHNCQUFzQixjQUFjLHdCQUF3QixzQkFBc0IsZUFBZSxzQ0FBc0Msc0JBQXNCLGNBQWMscUJBQXFCLHNCQUFzQixlQUFlLHlDQUF5QyxzQkFBc0IsZUFBZSxzQ0FBc0Msc0JBQXNCLGNBQWMsMEJBQTBCLHNCQUFzQixlQUFlLG9DQUFvQyxzQkFBc0IsZUFBZSwwQ0FBMEMsc0JBQXNCLGVBQWUsd0NBQXdDLHNCQUFzQixlQUFlLHNDQUFzQyxzQkFBc0IsZUFBZSxzQ0FBc0MsdUJBQXVCLGNBQWMsMkJBQTJCLHVCQUF1QixjQUFjLHlCQUF5Qix1QkFBdUIsZUFBZSw4QkFBOEIsNkJBQTZCLGlCQUFpQiw4QkFBOEIsc0JBQXNCLDRCQUE0Qix5QkFBeUIsZ0NBQWdDLFVBQVUsdW9CQUF1b0IsZ0VBQWdFLFVBQVUsd0tBQXdLLGdFQUFnRSxVQUFVLDRCQUE0QixnRUFBZ0UsVUFBVSw4REFBOEQsZ0VBQWdFLFNBQVMsZ0JBQWdCLEVBQUUsNEdBQTRHLE1BQU0saUNBQWlDLEdBQUcsK0ZBQStGLG1CQUFtQiwwQkFBMEIsMkJBQTJCLG9RQUFvUSxxQkFBcUIsK1NBQStTLHFCQUFxQixvQ0FBb0MsV0FBVywrRUFBK0UsNkJBQTZCLG1FQUFtRSx5REFBeUQsNEJBQTRCLEtBQUsseWpFQUF5akUsMkJBQTJCLHVCQUF1QixPQUFPLHMwREFBczBELHlDQUF5QyxxRkFBcUYsd0NBQXdDLG1GQUFtRiwwQkFBMEIsNkVBQTZFLDhEQUE4RCxFQUFFLEdBQUcsdUJBQXVCLHNFQUFzRSw4REFBOEQsRUFBRSxHQUFHLHVCQUF1QixnR0FBZ0csRUFBRSxHQUFHLHVDQUF1QyxrQ0FBa0Msa0RBQWtELHNDQUFzQyxvRUFBb0Usb0JBQW9CLG9DQUFvQyxpQkFBaUIsOEJBQThCLG9CQUFvQixvR0FBb0csR0FBRywrQ0FBK0Msb0JBQW9CLDJIQUEySCxHQUFHLHdEQUF3RCw2QkFBNkIsa0lBQWtJLEdBQUcsMERBQTBELDJCQUEyQixtSUFBbUksR0FBRyx3REFBd0Qsa0JBQWtCLDRHQUE0RyxHQUFHLCtDQUErQyxlQUFlLGlMQUFpTCxjQUFjLFdBQVcsa0RBQWtELGdFQUFnRSwyREFBMkQsaUVBQWlFLFNBQVMsV0FBVyx1Q0FBdUMsa0JBQWtCLGdEQUFnRCxxQkFBcUIsbURBQW1ELG9CQUFvQixrREFBa0QsMkJBQTJCLGtDQUFrQywwQkFBMEIsNkNBQTZDLHFDQUFxQyxJQUFJLDhDQUE4QyxzQ0FBc0MsNkNBQTZDLHVDQUF1QyxJQUFJLDJDQUEyQyxtQ0FBbUMsNkNBQTZDLHFDQUFxQyxJQUFJLDZDQUE2QyxxQ0FBcUMsNkNBQTZDLHVDQUF1QyxNQUFNLE9BQU8sYUFBYSxzRUFBc0UsV0FBVyxHQUFHLFNBQVMsbUJBQW1CLHNOQUFzTix1RUFBdUUsYUFBYSwrSUFBK0ksdUJBQXVCLDhKQUE4SixzQkFBc0Isd0dBQXdHLHVCQUF1QixlQUFlLHVCQUF1QiwyTUFBMk0sbUJBQW1CLHFFQUFxRSxzREFBc0QscUdBQXFHLHlCQUF5QiwrSUFBK0ksdVBBQXVQLHlCQUF5QixHQUFHLFFBQVEsU0FBUyxjQUFjLCtCQUErQix5QkFBeUIsWUFBWSx5QkFBeUIsaUdBQWlHLHdKQUF3SixtQkFBbUIsb1BBQW9QLGdCQUFnQixNQUFNLHlDQUF5QyxXQUFXLG9GQUFvRixpQkFBaUIsTUFBTSx5Q0FBeUMsV0FBVyxxRkFBcUYsbUJBQW1CLHlDQUF5QyxXQUFXLGFBQWEsRUFBRSxLQUFLLGlCQUFpQixNQUFNLHlDQUF5QyxXQUFXLFdBQVcsRUFBRSw0RUFBNEUsYUFBYSxjQUFjLGVBQWUsVUFBVSxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxVQUFVLFNBQVMsY0FBYyx1TkFBdU4sZ0JBQWdCLDhFQUE4RSxlQUFlLGlEQUFpRCxNQUFNLDZIQUE2SCxnQ0FBZ0MsTUFBTSw2Q0FBNkMsTUFBTSwyQ0FBMkMsTUFBTSxtREFBbUQsTUFBTSxxREFBcUQsTUFBTSx1REFBdUQsTUFBTSxnQ0FBZ0MsTUFBTSxrQ0FBa0MsTUFBTSxxRkFBcUYsR0FBRyxnQkFBZ0IsbUJBQW1CLHVCQUF1Qix3Y0FBd2MscUJBQXFCLDRjQUE0Yyx3QkFBd0IsZUFBZSx5SkFBeUoseUJBQXlCLGVBQWUsMEpBQTBKLG9CQUFvQixlQUFlLDJWQUEyVix5QkFBeUIsTUFBTSwyVkFBMlYseUJBQXlCLE1BQU0sd0RBQXdELHdCQUF3QixzU0FBc1MsZUFBZSxxUkFBcVIsZUFBZSxrQkFBa0IscURBQXFELEVBQUUsa0JBQWtCLGNBQWMsS0FBSyxFQUFFLHFCQUFxQiwrQkFBK0IscUJBQXFCLDRFQUE0RSxpREFBaUQsOEVBQThFLFlBQVksdUNBQXVDLGNBQWMsdUJBQXVCLG1EQUFvQixtQkFBbUIsOENBQWUsQ0FBQyxNQUFNLGdCQUFnQixxQ0FBcUMsMENBQTBDLGNBQWMsSUFBSSxhQUFhLFNBQVMsTUFBTSxjQUFjLElBQUksY0FBYyxTQUFTLE1BQU0sY0FBYyxNQUFNLGlFQUFpRSxLQUFLLGNBQWMsK0JBQStCLElBQUksU0FBUyxtQkFBbUIsNkNBQTZDLDBCQUEwQixndUJBQWd1QixpQkFBaUIsMENBQTBDLDBDQUEwQyx3R0FBd0csaUNBQWlDLGdYQUFnWCw2Q0FBNkMsbUlBQW1JLGVBQWUsbUNBQW1DLEdBQUcsR0FBRyxHQUFHLGtCQUFrQiwwQ0FBMEMsa0dBQWtHLHdHQUF3RyxpQ0FBaUMsZ1hBQWdYLG1JQUFtSSxxRUFBcUUsZUFBZSxtREFBbUQsR0FBRyxHQUFHLHdLQUF3SyxHQUFHLGlCQUFpQixpTkFBaU4sZ0JBQWdCLDZDQUE2Qyw2T0FBNk8sR0FBRyxRQUFRLDRFQUE0RSxjQUFjLFVBQVUsZ0VBQWdFLDZCQUE2QixrQ0FBa0MsU0FBUyxvQ0FBb0MscUNBQXFDLDZEQUE2RCxZQUFZLHNEQUFzRCxlQUFlLHNOQUFzTixRQUFRLGNBQWMsWUFBWSxZQUFZLFdBQVcsU0FBUyxRQUFRLDZDQUE2QywyQkFBMkIsd0RBQXdELGtDQUFrQyxnR0FBZ0csaUNBQWlDLDRFQUE0RSxpQkFBaUIsZ0JBQWdCLHNCQUFzQiwyQkFBMkIscUJBQXFCLHNCQUFzQixZQUFZLCtCQUErQix1QkFBdUIsa0JBQWtCLDBCQUEwQiwwQ0FBMEMsdURBQXVELCtDQUErQyxxQkFBcUIsb0xBQW9MLDJDQUEyQyw4REFBOEQsRUFBRSx5R0FBeUcscUJBQXFCLFFBQVEsOERBQThELEVBQUUsR0FBRywwREFBMEQseUJBQXlCLE1BQU0sU0FBUyxxQkFBcUIsNEhBQTRILGdEQUFnRCxXQUFXLGlPQUFpTyxpR0FBaUcscUJBQXFCLEVBQUUsaURBQWlELHFCQUFxQixFQUFFLGlEQUFpRCxxQkFBcUIsRUFBRSxHQUFHLGlCQUFpQixzQkFBc0IsdUJBQXVCLDZCQUE2QiwrQkFBK0Isd0JBQXdCLHNFQUFzRSx5Q0FBeUMsZ0NBQWdDLE1BQU0sU0FBUyxxREFBcUQsZUFBZSwrQ0FBK0MseUNBQXlDLEdBQUcscUJBQXFCLDhCQUE4QixpQkFBaUIsRUFBRSwrQ0FBK0MseUNBQXlDLEdBQUcsV0FBVyxHQUFHLE1BQU0sU0FBUyxjQUFjLDBGQUEwRixlQUFlLHdGQUF3RixVQUFVLFVBQVUsVUFBVSxTQUFTLGNBQWMsOGFBQThhLDRCQUE0Qiw4RUFBOEUsZ0JBQWdCLCtIQUErSCx1QkFBdUIsS0FBSyxxQkFBcUIsZ05BQWdOLHdCQUF3QixLQUFLLHNCQUFzQix5RUFBeUUsU0FBUyxrQ0FBa0MseUxBQXlMLHFEQUFxRCwyQ0FBMkMsaUNBQWlDLHlMQUF5TCxxREFBcUQsMENBQTBDLGlDQUFpQyx1QkFBdUIseUVBQXlFLG1CQUFtQixrRUFBa0UsY0FBYyxHQUFHLE9BQU8sNkJBQTZCLDhFQUE4RSw2RUFBNkUscURBQXFELEVBQUUsWUFBWSxPQUFPLFlBQVkseUJBQXlCLGdCQUFnQixnQ0FBZ0Msb0ZBQW9GLFlBQVksc0NBQXNDLDhHQUE4RyxjQUFjLEdBQUcsT0FBTyxLQUFLLFNBQVMsY0FBYyw2RkFBNkYsVUFBVSw2RkFBNkYsVUFBVSxpR0FBaUcsU0FBUyxjQUFjLDRCQUE0Qix5QkFBeUIsaUNBQWlDLGdCQUFnQiw0Q0FBNEMsNkJBQTZCLFNBQVMsbUJBQW1CLCtIQUErSCxpRkFBaUYsMENBQTBDLFdBQVcsMENBQTBDLFdBQVcsMkNBQTJDLFdBQVcsMFRBQTBULHdCQUF3QiwrQ0FBK0MsbUNBQW1DLG9DQUFvQyxnQkFBZ0IsNkNBQTZDLCtCQUErQiw0QkFBNEIsMklBQTJJLDJGQUEyRixtQkFBbUIsNkdBQTZHLDZGQUE2RixvQkFBb0IsY0FBYyxvREFBb0QsK0dBQStHLFlBQVksMEJBQTBCLEtBQUssNEJBQTRCLDJDQUEyQyx3S0FBd0ssMENBQTBDLHVDQUF1Qyw2Q0FBNkMsT0FBTyxtQkFBbUIsZUFBZSxvREFBb0QsMkRBQTJELFlBQVksbUJBQW1CLEtBQUsscUJBQXFCLDJDQUEyQyxpUkFBaVIsd0ZBQXdGLE9BQU8sb0JBQW9CLFNBQVMsbUJBQW1CLDZCQUE2QixVQUFVLHlHQUF5RyxTQUFTLG1CQUFtQiw2REFBNkQsMmdDQUEyZ0MsMkVBQTJFLHlCQUF5Qiw0RkFBNEYsOGFBQThhLDJCQUEyQixrREFBa0QsbUJBQW1CLDJCQUEyQix3Q0FBd0MsRUFBRSxhQUFhLFNBQVMsaU9BQWlPLHNCQUFzQix1R0FBdUcsaUJBQWlCLDJCQUEyQixzQ0FBc0MsRUFBRSwyTEFBMkwsb0JBQW9CLDZJQUE2SSxtQkFBbUIscUNBQXFDLEVBQUUsNkVBQTZFLGNBQWMscUJBQXFCLFVBQVUsZ0hBQWdILFFBQVEsNERBQTRELCtMQUErTCx1QkFBdUIsOEJBQThCLFNBQVMsbUJBQW1CLHdEQUF3RCxnQ0FBZ0Msb0hBQW9ILDBEQUEwRCxtTEFBbUwsd0JBQXdCLCtDQUErQyxrQkFBa0IsK0hBQStILDBVQUEwVSxLQUFLLG9KQUFvSiw4Q0FBOEMsd0JBQXdCLGVBQWUsS0FBSyxrQkFBa0Isb0JBQW9CLFNBQVMsMkJBQTJCLG9EQUFvRCw0TUFBNE0sNE9BQTRPLHFHQUFxRyx3REFBd0QsbUJBQW1CLG9LQUFvSyxpQkFBaUIsa0tBQWtLLG9CQUFvQix5S0FBeUsscUJBQXFCLHNLQUFzSywyQkFBMkIsMEdBQTBHLDZCQUE2Qiw2R0FBNkcsU0FBUyxlQUFlLHVCQUF1Qix5QkFBeUIsMkJBQTJCLG9FQUFvRSx1Q0FBdUMsa01BQWtNLDBIQUEwSCxtQkFBbUIsb0VBQW9FLDBDQUEwQyxtR0FBbUcsMkhBQTJILGlCQUFpQixvRUFBb0UsbUdBQW1HLHlIQUF5SCxxQkFBcUIsb0VBQW9FLG1HQUFtRyx5SEFBeUgsb0JBQW9CLG9FQUFvRSxtR0FBbUcsZ0lBQWdJLHFCQUFxQixvRUFBb0UsbUdBQW1HLDBHQUEwRywyQkFBMkIsZ0lBQWdJLDZCQUE2QixtSUFBbUksU0FBUyxxQkFBcUIsaU1BQWlNLHdCQUF3QiwrQ0FBK0MsNkJBQTZCLHdIQUF3SCwyS0FBMkssYUFBYSx3QkFBd0IsMkhBQTJILGdDQUFnQyxvVkFBb1YsK0dBQStHLG9sQkFBb2xCLCtCQUErQiw2T0FBNk8sODFCQUE4MUIsbUNBQW1DLGdFQUFnRSx1SkFBdUosT0FBTyx1SkFBdUosMFFBQTBRLDJCQUEyQixtRUFBbUUsMFRBQTBULHlCQUF5QixvREFBb0QsbUVBQW1FLG9VQUFvVSxpQkFBaUIsaUhBQWlILGlCQUFpQixpSEFBaUgscUJBQXFCLG1GQUFtRixHQUFHLFdBQVcsRUFBRSxJQUFJLEVBQUUsb0ZBQW9GLG1CQUFtQixvREFBb0Qsd0NBQXdDLEdBQUcsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLG1FQUFtRSxnRkFBZ0YsU0FBUyxtQkFBbUIsMlBBQTJQLGlGQUFpRix5REFBeUQsV0FBVyx5REFBeUQsV0FBVywwREFBMEQsV0FBVyw0WkFBNFosWUFBWSxvQkFBb0IseUNBQXlDLFdBQVcsMEdBQTBHLHdCQUF3QiwrQ0FBK0MsaUJBQWlCLDJCQUEyQix3R0FBd0csZUFBZSxxRkFBcUYsV0FBVyx1Q0FBdUMsZ0JBQWdCLDZDQUE2QyxZQUFZLDBCQUEwQiw0Q0FBNEMsK0dBQStHLGNBQWMsNkNBQTZDLHVGQUF1RixZQUFZLDBCQUEwQiwwQ0FBMEMsb0JBQW9CLGVBQWUsaUpBQWlKLG1CQUFtQixvREFBb0QsK0dBQStHLFlBQVksV0FBVyxLQUFLLGtFQUFrRSw0QkFBNEIsaUNBQWlDLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxtRUFBbUUsVUFBVSwySEFBMkgsTUFBTSx1SEFBdUgsTUFBTSw0SEFBNEgsU0FBUyxlQUFlLHNOQUFzTixlQUFlLHVCQUF1QiwrRUFBK0UsZ1VBQWdVLGtDQUFrQywrRUFBK0Usd1ZBQXdWLG9CQUFvQiwwR0FBMEcsVUFBVSxHQUFHLDBCQUEwQixxRUFBcUUseUJBQXlCLHFEQUFxRCxxQkFBcUIsNEJBQTRCLHVOQUF1Tiw0QkFBNEIsK05BQStOLGVBQWUsbUhBQW1ILFlBQVksV0FBVywyRkFBMkYsZUFBZSxvQkFBb0IsMkRBQTJELGlDQUFpQyxxREFBcUQsWUFBWSxnQ0FBZ0MsS0FBSywyREFBMkQsa1ZBQWtWLFlBQVksZ0JBQWdCLE1BQU0sK0VBQStFLG9FQUFvRSxnQ0FBZ0Msa0ZBQWtGLGFBQWEsNDhCQUE0OEIsV0FBVyxHQUFHLFNBQVMsbUJBQW1CLGdIQUFnSCxvQkFBb0Isc0RBQXNELGtFQUFrRSxvQ0FBb0MsaUJBQWlCLG1EQUFtRCxtSEFBbUgsVUFBVSxtREFBbUQsTUFBTSx1REFBdUQsTUFBTSxpSUFBaUksU0FBUyxtQkFBbUIscURBQXFELG1HQUFtRyw4Q0FBOEMsa0dBQWtHLGtCQUFrQiwrRkFBK0YsU0FBUyxjQUFjLHNDQUFzQyxnQkFBZ0Isd0JBQXdCLFNBQVMsaUJBQWlCLG1jQUFtYywrRkFBK0YsNkNBQTZDLHdIQUF3SCxnQ0FBZ0MsbURBQW1ELHlDQUF5QywwQkFBMEIsbUpBQW1KLE9BQU8sNktBQTZLLFdBQVcsZ0NBQWdDLGVBQWUsNkVBQTZFLGlCQUFpQixnRkFBZ0Ysa0JBQWtCLHlCQUF5Qix3QkFBd0IsdUNBQXVDLG1CQUFtQixrRUFBa0Usc0JBQXNCLHNCQUFzQixrR0FBa0cseUJBQXlCLE9BQU8sb0JBQW9CLHFDQUFxQyxnSkFBZ0osdUNBQXVDLDZEQUE2RCxXQUFXLGFBQWEsY0FBYyxnQkFBZ0IsR0FBRyx3QkFBd0IsMkdBQTJHLHFDQUFxQyxhQUFhLCtHQUErRyx5TEFBeUwsU0FBUyxjQUFjLHlDQUF5QyxjQUFjLHVCQUF1QixnQkFBZ0IsOEJBQThCLFNBQVMsMkNBQTJDLFlBQVksOENBQThDLFNBQVMsY0FBYyxrSUFBa0ksMEJBQTBCLDZDQUE2QywrQkFBK0IsdURBQXVELCtCQUErQiw0Q0FBNEMsK0JBQStCLHVEQUF1RCwrQkFBK0IsZ0RBQWdELCtCQUErQiwrQ0FBK0MsK0JBQStCLDZDQUE2QywrQkFBK0Isd0RBQXdELCtCQUErQiwwQ0FBMEMsK0JBQStCLCtDQUErQyxnQ0FBZ0MseUNBQXlDLGdDQUFnQyx5Q0FBeUMsK0NBQStDLHVDQUF1Qyx1Q0FBdUMsMENBQTBDLHdDQUF3Qyw0Q0FBNEMsZ0NBQWdDLDRDQUE0QyxnQ0FBZ0MsMkNBQTJDLHlEQUF5RCx5Q0FBeUMseURBQXlELDJDQUEyQyxpRUFBaUUsNENBQTRDLHlEQUF5RCw2Q0FBNkMseURBQXlELDRDQUE0QyxpRkFBaUYsMENBQTBDLGlGQUFpRiwyQ0FBMkMsaUZBQWlGLHNEQUFzRCx1REFBdUQsdURBQXVELHVEQUF1RCwrQ0FBK0MseURBQXlELGtyQkFBa3JCLDhCQUE4QixVQUFVLG9EQUFvRCxNQUFNLHdEQUF3RCxNQUFNLDZEQUE2RCxFQUFFLEtBQUssYUFBYSxrRUFBa0UsV0FBVyxHQUFHLFNBQVMsY0FBYyxvQ0FBb0MsOEJBQThCLHFDQUFxQywrQkFBK0Isc0NBQXNDLGNBQWMsb0VBQW9FLHFEQUFxRCxzRUFBc0UsS0FBSyxJQUFJLFNBQVMsaUJBQWlCLDhEQUE4RCxtQkFBbUIscUNBQXFDLGVBQWUsaUNBQWlDLHFCQUFxQix1Q0FBdUMsb0JBQW9CLGdHQUFnRyx5RkFBeUYsRUFBRSw2SkFBNkosb0RBQW9ELFFBQVEsdURBQXVELFlBQVksV0FBVywyQ0FBMkMsMEtBQTBLLEdBQUcsSUFBSSxFQUFFLElBQUksU0FBUyxpQkFBaUIsOERBQThELDJCQUEyQixtQkFBbUIsNEVBQTRFLHNIQUFzSCxFQUFFLG9IQUFvSCxzREFBc0QsbUJBQW1CLFFBQVEsbUJBQW1CLHVCQUF1QixpQ0FBaUMsTUFBTSxzQ0FBc0MsTUFBTSxvQ0FBb0MsTUFBTSxzQ0FBc0MsTUFBTSx3Q0FBd0Msa0tBQWtLLEdBQUcsSUFBSSx5QkFBeUIsSUFBSSxTQUFTLGVBQWUsNkJBQTZCLDRCQUE0QiwwRUFBMEUsb0JBQW9CLCtEQUErRCw0QkFBNEIsMEVBQTBFLHFCQUFxQixtRUFBbUUsb0JBQW9CLGtFQUFrRSw2QkFBNkIsNEVBQTRFLFNBQVMsZUFBZSwyQkFBMkIsVUFBVSxnS0FBZ0ssWUFBWSwwREFBMEQsaUdBQWlHLGtCQUFrQix5RkFBeUYsa0JBQWtCLEdBQUcsbUNBQW1DLFNBQVMsZUFBZSx1RUFBdUUsNEVBQTRFLDBDQUEwQyw0RUFBNEUsZ0RBQWdELGlGQUFpRixrQ0FBa0Msa0RBQWtELHNDQUFzQyxzREFBc0QsZ0NBQWdDLGdEQUFnRCw0QkFBNEIsdUxBQXVMLDhJQUE4SSx5ekJBQXl6Qiw4Q0FBOEMsMEdBQTBHLDRFQUE0RSxrREFBa0QsNkNBQTZDLDRGQUE0Riw0Q0FBNEMsNEdBQTRHLCtCQUErQiwrQ0FBK0MsMEdBQTBHLDRFQUE0RSxtREFBbUQsNkNBQTZDLDRGQUE0Riw2Q0FBNkMsNEdBQTRHLGdDQUFnQyxTQUFTLG1CQUFtQixrQ0FBa0MsU0FBUyxpQkFBaUIsbUJBQW1CLFNBQVMsaUJBQWlCLG1CQUFtQixTQUFTLGlCQUFpQix1SUFBdUksOENBQThDLHlJQUF5SSw4R0FBOEcsdVJBQXVSLFNBQVMsNENBQTRDLDZDQUE2Qyw4Q0FBOEMsZ0NBQWdDLHd2QkFBd3ZCLDJEQUEyRCxPQUFPLElBQUksOEJBQThCLGdDQUFnQywrREFBK0QsK0NBQStDLG1FQUFtRSw0SUFBNEksK2pCQUErakIsdUxBQXVMLGdFQUFnRSw4REFBOEQsK0ZBQStGLDhDQUE4QyxzRUFBc0UsbUJBQW1CLCtCQUErQixpREFBaUQsNkVBQTZFLGlFQUFpRSwwQkFBMEIsb1ZBQW9WLGtCQUFrQixzaENBQXNoQywwa0RBQTBrRCwyc0hBQTJzSCxhQUFhLG1FQUFtRSxxREFBcUQsc0RBQXNELHNCQUFzQixpRkFBaUYscUJBQXFCLElBQUkscUVBQXFFLGdLQUFnSyxvQkFBb0IsMkRBQTJELGdEQUFnRCxzRUFBc0UsYUFBYSxVQUFVLGdMQUFnTCxHQUFHLHVKQUF1Six5QkFBeUIsR0FBRyw2SEFBNkgsR0FBRywrRkFBK0Ysa0xBQWtMLEVBQUUsZ0ZBQWdGLEVBQUUsZ0JBQWdCLE1BQU0sNkhBQTZILEdBQUcsdUhBQXVILHlCQUF5QixHQUFHLHlMQUF5TCxFQUFFLGtGQUFrRixFQUFFLGdCQUFnQixNQUFNLHdEQUF3RCxFQUFFLElBQUksZ0lBQWdJLFNBQVMsNEJBQTRCLDJCQUEyQiwwQkFBMEIsaUZBQWlGLG9DQUFvQyxtR0FBbUcsRUFBRSxtREFBbUQsaUJBQWlCLGtIQUFrSCxpQkFBaUIsaUVBQWlFLDZCQUE2QixxSUFBcUksNElBQTRJLHlCQUF5Qiw0RkFBNEYsT0FBTyxxTEFBcUwsMEdBQTBHLG1DQUFtQyx5Q0FBeUMsbUlBQW1JLDhOQUE4TixxQ0FBcUMsK0NBQStDLHdCQUF3Qix1RUFBdUUsMEJBQTBCLHNHQUFzRyxzQ0FBc0Msd0ZBQXdGLHNGQUFzRix3SEFBd0gsbUJBQW1CLDBCQUEwQixzQ0FBc0Msa0JBQWtCLDBCQUEwQixxQ0FBcUMsa0JBQWtCLDBCQUEwQixxQ0FBcUMsYUFBYSx3Q0FBd0MsOEZBQThGLGdEQUFnRCxVQUFVLHVJQUF1SSwwVUFBMFUsaUJBQWlCLGNBQWMsOE5BQThOLFNBQVMsR0FBRyxnTUFBZ00sWUFBWSxtQ0FBbUMsdVRBQXVULFNBQVMsR0FBRyxHQUFHLGtDQUFrQyx3RkFBd0YsNEJBQTRCLG9DQUFvQyxvQ0FBb0MsZ0JBQWdCLDRZQUE0WSx1cUJBQXVxQixTQUFTLDhEQUE4RCx5SkFBeUosZ2FBQWdhLCtCQUErQixrRkFBa0Ysb0lBQW9JLEVBQUUsTUFBTSxpRUFBaUUseUJBQXlCLGlYQUFpWCw2QkFBNkIsNkNBQTZDLE1BQU0sS0FBSyxtQkFBbUIsbUVBQW1FLG9EQUFvRCxXQUFXLDZSQUE2UiwrQ0FBK0MsR0FBRyxzQkFBc0IsMENBQTBDLE1BQU0sS0FBSyxTQUFTLHlCQUF5QixrRkFBa0YscUJBQXFCLHlDQUF5QyxNQUFNLHVHQUF1RyxTQUFTLHdCQUF3Qiw2RkFBNkYsbUNBQW1DLFNBQVMsMkNBQTJDLGtDQUFrQyw4SUFBOEksU0FBUyw0Q0FBNEMscVNBQXFTLG1GQUFtRiw4QkFBOEIsMGNBQTBjLHNCQUFzQiw2REFBNkQsK0JBQStCLDZDQUE2QywwQkFBMEIsdUlBQXVJLHFCQUFxQiw2UkFBNlIseUJBQXlCLHlHQUF5RywwQkFBMEIsb0xBQW9MLDJCQUEyQix3TUFBd00sdUJBQXVCLGlDQUFpQyxzQkFBc0Isc0NBQXNDLFFBQVEsdURBQXVELFdBQVcsOENBQThDLGtCQUFrQixnRkFBZ0YsZ0NBQWdDLEVBQUUsb0JBQW9CLGlDQUFpQyxFQUFFLDJEQUEyRCxrQkFBa0IsRUFBRSxvQkFBb0IsaUNBQWlDLEVBQUUsMkRBQTJELGtCQUFrQixFQUFFLHdCQUF3Qiw4Q0FBOEMsRUFBRSx5REFBeUQsc0JBQXNCLEVBQUUsd0JBQXdCLDhDQUE4QyxFQUFFLHlEQUF5RCxzQkFBc0IsRUFBRSxpQkFBaUIsc0NBQXNDLEVBQUUsMERBQTBELGVBQWUsNkNBQTZDLGtCQUFrQixHQUFHLGNBQWMsOEdBQThHLGNBQWMsRUFBRSxvQkFBb0IsK0lBQStJLHFCQUFxQixtSUFBbUksZUFBZSx1SEFBdUgsc0JBQXNCLG9JQUFvSSxpQkFBaUIsRUFBRSxxQ0FBcUMsMklBQTJJLDJCQUEyQix1RUFBdUUsOERBQThELDJlQUEyZSx5QkFBeUIsMkVBQTJFLDhFQUE4RSx3VUFBd1UsMkJBQTJCLDZFQUE2RSw2REFBNkQsNkJBQTZCLHlCQUF5QixtSkFBbUosNkJBQTZCLDBCQUEwQiw4TkFBOE4seUJBQXlCLDRFQUE0RSxvQkFBb0IscUNBQXFDLG9CQUFvQixxQ0FBcUMsK0JBQStCLHNDQUFzQyxnQ0FBZ0MsaUNBQWlDLHFCQUFxQiw0SkFBNEosd0JBQXdCLDRFQUE0RSwyQkFBMkIsTUFBTSxpS0FBaUssd0JBQXdCLE1BQU0sNkVBQTZFLHdGQUF3RixnRUFBZ0Usd0JBQXdCLE1BQU0sOE5BQThOLDBCQUEwQixNQUFNLGtKQUFrSixvQ0FBb0MseURBQXlELGdCQUFnQiw2REFBNkQsZ0JBQWdCLDZEQUE2RCxnQkFBZ0IsSUFBSSxTQUFTLHNCQUFzQix1Q0FBdUMsZ0NBQWdDLGdEQUFnRCw0QkFBNEIsd0NBQXdDLHFCQUFxQiwrR0FBK0csaUZBQWlGLCtGQUErRiw2REFBNkQsa0xBQWtMLE9BQU8sUUFBUSx3QkFBd0IscUNBQXFDLHNEQUFzRCx3RkFBd0YscUJBQXFCLHVEQUF1RCxPQUFPLFNBQVMsU0FBUywwQkFBMEIsa0NBQWtDLHFEQUFxRCxvQ0FBb0MsaUJBQWlCLElBQUksU0FBUyxlQUFlLHNEQUFzRCxvQkFBb0IsY0FBYyxpQ0FBaUMsYUFBYSxRQUFRLHVKQUF1SixRQUFRLHFCQUFxQixlQUFlLE1BQU0sZ0JBQWdCLGdDQUFnQyxZQUFZLEtBQUsscUNBQXFDLCtOQUErTixxQ0FBcUMsNkhBQTZILDJEQUEyRCxZQUFZLG1CQUFtQixLQUFLLG9DQUFvQyxvYkFBb2IsWUFBWSxnQkFBZ0Isd0ZBQXdGLGtDQUFrQyxTQUFTLGVBQWUsd1BBQXdQLFlBQVksMEZBQTBGLDJCQUEyQixHQUFHLG1CQUFtQiwrSEFBK0gsc0JBQXNCLDJHQUEyRyx3QkFBd0IsR0FBRyx5Q0FBeUMsK0JBQStCLGdCQUFnQixvQ0FBb0MsbURBQW1ELEVBQUUsb0RBQW9ELG1FQUFtRSxzREFBc0QscUVBQXFFLGdDQUFnQyxnWUFBZ1ksZ0NBQWdDLDBsQkFBMGxCLHFGQUFxRixzRUFBc0UsZUFBZSx5Q0FBeUMsTUFBTSxnQ0FBZ0MsWUFBWSxLQUFLLHFDQUFxQyxnTEFBZ0wsNkNBQTZDLHlRQUF5USxpSEFBaUgsMkRBQTJELDhHQUE4RyxlQUFlLEdBQUcsVUFBVSxtQkFBbUIsNkNBQTZDLGNBQWMsbTNCQUFtM0IsMEJBQTBCLDhCQUE4Qiw2QkFBNkIsOEVBQThFLFNBQVMsZUFBZSxnSUFBZ0ksc0NBQXNDLFlBQVksaUNBQWlDLDBjQUEwYyw0Q0FBNEMsSUFBSSx3QkFBd0IsMkJBQTJCLG9EQUFvRCx1REFBdUQsMEdBQTBHLCtFQUErRSxTQUFTLGlCQUFpQixxbUJBQXFtQix5QkFBeUIsb0tBQW9LLG9CQUFvQixxRUFBcUUsZ0hBQWdILGlFQUFpRSx3Q0FBd0MsNkVBQTZFLDJEQUEyRCxzRUFBc0UsaUVBQWlFLHVCQUF1Qiw4RkFBOEYsa0VBQWtFLGtEQUFrRCwrREFBK0QsK0NBQStDLCtEQUErRCwrQ0FBK0MsaUVBQWlFLGlEQUFpRCxpRUFBaUUsbUxBQW1MLGlFQUFpRSw4TEFBOEwsNEVBQTRFLHNNQUFzTSw0RUFBNEUsc01BQXNNLHFFQUFxRSwyTEFBMkwseUVBQXlFLG9FQUFvRSwyREFBMkQsNkJBQTZCLDJDQUEyQyw0QkFBNEIsd0JBQXdCLDZCQUE2QixrTUFBa00sVUFBVSxtREFBbUQsWUFBWSxvREFBb0QsYUFBYSwrQkFBK0IsT0FBTyw0REFBNEQsc0JBQXNCLDRIQUE0SCx1QkFBdUIsK0VBQStFLGVBQWUsd0NBQXdDLG1CQUFtQix3Q0FBd0MsaUJBQWlCLGtWQUFrVixnRkFBZ0Ysb0ZBQW9GLHNCQUFzQix3Q0FBd0MscUJBQXFCLHdDQUF3QyxrQkFBa0Isd0NBQXdDLHNCQUFzQix3RUFBd0Usd0JBQXdCLHdDQUF3QyxpQkFBaUIsR0FBRyxpQkFBaUIsdU9BQXVPLGtCQUFrQixHQUFHLHdCQUF3Qix3Q0FBd0MsUUFBUSxHQUFHLHNCQUFzQixNQUFNLHdDQUF3QyxXQUFXLDJTQUEyUywrRUFBK0UsZ3RCQUFndEIsOEJBQThCLHFEQUFxRCxxQkFBcUIseUdBQXlHLGlCQUFpQixxR0FBcUcsZ0JBQWdCLDJHQUEyRyxxQkFBcUIsNEdBQTRHLGVBQWUseUpBQXlKLHNCQUFzQiwwSUFBMEksOEJBQThCLHdFQUF3RSwrQkFBK0IseUVBQXlFLGlCQUFpQiwyQ0FBMkMsc0JBQXNCLHlDQUF5Qyx5QkFBeUIsNENBQTRDLFdBQVcsaUNBQWlDLDJCQUEyQiw4Q0FBOEMsMEJBQTBCLGtEQUFrRCxzQkFBc0IsOEJBQThCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQW5xNUgsT0FBTyxVQUFVLCtEQUErRCx1QkFBdUIsRUFBRSxvREFBb0QsTUFBTSxPQUFPLHlKQUF5SixFQUFFLFlBQVksVUFBVSxpRkFBTyxZQUFZLGtGQUFRLHVCQUF1Qiw2RkFBbUIsc0JBQXNCLDRGQUFrQixpQkFBaUIsdUZBQWEsb0JBQW9CLDBGQUFnQixxQkFBcUIsMkZBQWlCLENBQUMsS0FBSyxhQUFhLFFBQVEsUUFBUSxtQkFBbUIsMkpBQTJKLE9BQU8saURBQWlELE9BQU8sK0NBQStDLGtCQUFrQixtQkFBbUIsd0NBQXdDLHdHQUF3RyxVQUFVLGlEQUFpRCxZQUFZLHdCQUF3QixXQUFXLHlCQUF5QixrQkFBa0IsMkJBQTJCLHNDQUFzQyw0REFBNEQsOEJBQThCLHNDQUFzQywyREFBMkQsZUFBZSx3R0FBd0csZ0JBQWdCLElBQUksa0JBQWtCLDJCQUEyQixzQ0FBc0MsK0RBQStELDhCQUE4QixzQ0FBc0MsZ0VBQWdFLGVBQWUsd0dBQXdHLGdCQUFnQixJQUFJLGtCQUFrQiwyQkFBMkIsc0NBQXNDLHlEQUF5RCw4QkFBOEIsc0NBQXNDLCtDQUErQyxtNU1BQW01TSxlQUFlLHdHQUF3RyxnQkFBZ0IsSUFBSSxrQkFBa0IsbUJBQW1CLGFBQWEsVUFBVSxrREFBa0Qsa0JBQWtCLDJCQUEyQixzQ0FBc0MsMkRBQTJELDhCQUE4QixzQ0FBc0Msb0NBQW9DLGVBQWUseURBQXlELGtCQUFrQiwyQkFBMkIsc0NBQXNDLDREQUE0RCw4QkFBOEIsc0NBQXNDLGtDQUFrQyxlQUFlLHlEQUF5RCxrQkFBa0IsMkJBQTJCLHNDQUFzQyx3REFBd0QsOEJBQThCLHNDQUFzQywrS0FBK0ssZUFBZSx3R0FBd0csZ0JBQWdCLEdBQUcsbUJBQW1CLDZHQUE2RyxFQUFFLG9EQUFvRCxRQUFRLGNBQWMseVpBQXlaLGtCQUFrQixtV0FBbVcsa0JBQWtCLHVMQUF1TCxtQkFBbUIsd0JBQXdCLHNUQUFzVCxtRUFBbUUsNkRBQTZELHNFQUFzRSx5VUFBeVUsc0VBQXNFLG1UQUFtVCxzRUFBc0Usa1RBQWtULHNFQUFzRSw4WEFBOFgsMEJBQTBCLG1CQUFtQix3QkFBd0Isd1RBQXdULG1FQUFtRSw2REFBNkQsc0VBQXNFLHdUQUF3VCxzRUFBc0UseVRBQXlULHNFQUFzRSxpVUFBaVUsc0VBQXNFLHVYQUF1WCwwQkFBMEIsbUJBQW1CLGdXQUFnVyxLQUFLLCtCQUErQixhQUFhLGlQQUFpUCwwQkFBMEIscUJBQXFCLHdNQUF3TSw4Q0FBOEMsK0xBQStMLFFBQVEsa0JBQWtCLCtTQUErUyxrQkFBa0IscUxBQXFMLG1CQUFtQix3QkFBd0Isd1RBQXdULG1FQUFtRSw2REFBNkQsc0VBQXNFLG04RUFBbThFLHNFQUFzRSxzU0FBc1MsMkJBQTJCLFFBQVEsa0JBQWtCLHlTQUF5UyxrQkFBa0Isd0xBQXdMLGdCQUFnQixxQkFBcUIsOFJBQThSLG1FQUFtRSwwREFBMEQsc0VBQXNFLDhTQUE4UyxzRUFBc0UsZ0tBQWdLLHNFQUFzRSxnVUFBZ1Usd0JBQXdCLFFBQVEsa0JBQWtCLG1TQUFtUyxrQkFBa0IsK0tBQStLLGFBQWEsa0JBQWtCLDRRQUE0USxtRUFBbUUsdURBQXVELHNFQUFzRSx3bUJBQXdtQixxQkFBcUIsUUFBUSxjQUFjLHlGQUF5RixrQkFBa0IsZ1dBQWdXLDBEQUEwRCx1QkFBdUIsUUFBUSxpQkFBaUIsaUNBQWlDLHNCQUFzQix3Q0FBd0MsYUFBYSxvT0FBb08sa0JBQWtCLHVCQUF1QiwyRkFBMkYsc0NBQXNDLHlEQUF5RCx3Q0FBd0MsMkZBQTJGLDBCQUEwQixRQUFRLGNBQWMsdUJBQXVCLGtCQUFrQix1QkFBdUIsb0lBQW9JLHNDQUFzQywwREFBMEQsc0NBQXNDLG9KQUFvSix5QkFBeUIsNkJBQTZCLGlMQUFpTCwwQkFBMEIsbUtBQW1LLE9BQU8sZ0hBQWdILG1CQUFtQix3REFBd0QsT0FBTyxvSEFBb0gsUUFBUSxrQkFBa0IsdUJBQXVCLHlHQUF5RyxzQ0FBc0MsNkhBQTZILHNDQUFzQyxrRkFBa0Ysc0NBQXNDLHFJQUFxSSx5QkFBeUIsZ0NBQWdDLDhQQUE4UCx3QkFBd0IsbVdBQW1XLG9CQUFvQixzREFBc0QsU0FBUyxzakJBQXNqQixRQUFRLHdCQUF3QixtQkFBbUIseURBQXlELHFIQUFxSCxTQUFTLFFBQVEsY0FBYyw2Q0FBNkMsa0JBQWtCLHVCQUF1QixpSUFBaUksc0NBQXNDLDBEQUEwRCxzQ0FBc0MsOElBQThJLHlCQUF5QiwwQkFBMEIsK0JBQStCLG9HQUFvRyxzQ0FBc0MscURBQXFELHNDQUFzQywyQ0FBMkMsMENBQTBDLHVEQUF1RCxzQ0FBc0MsMkZBQTJGLHNDQUFzQyw2TkFBNk4saUNBQWlDLDBCQUEwQixtUkFBbVIsa0JBQWtCLHFMQUFxTCx1QkFBdUIsb0pBQW9KLE9BQU8sZ0hBQWdILG1CQUFtQix3REFBd0QsT0FBTyxtSEFBbUgsZUFBZSxjQUFjLHlEQUF5RCx3QkFBd0IsdURBQXVELHFEQUFxRCx3SUFBd0ksaVVBQWlVLDBTQUEwUywwREFBMEQsNElBQTRJLHV0QkFBdXRCLDRNQUE0TSw0WUFBNFksRUFBRSwrQkFBK0IsdUJBQXVCLFdBQVcsRUFBRSxJQUFJLEVBQUUsRUFBRSx5QkFBeUIsNkJBQTZCLG9DQUFvQyxLQUFLLGNBQWMseUpBQXlKLFFBQVEsY0FBYyx5RkFBeUYsa0JBQWtCLHFTQUFxUyxrQkFBa0IsaUxBQWlMLG9CQUFvQiw4aEJBQThoQixVQUFVLHdSQUF3UixZQUFZLHNiQUFzYixhQUFhLGdhQUFnYSxZQUFZLGdkQUFnZCwyQkFBMkIsWUFBWSwwQkFBMEIscUdBQXFHLFNBQVMsbUJBQW1CLDZIQUE2SCxXQUFXLCtVQUErVSxXQUFXLDJlQUEyZSxXQUFXLHFIQUFxSCxXQUFXLG1SQUFtUixRQUFRLGVBQWUsZ0JBQWdCLGNBQWMscUJBQXFCLGtCQUFrQiwrRkFBK0Ysa0JBQWtCLGVBQWUsNkNBQTZDLGNBQWMscUJBQXFCLHVCQUF1Qix3TkFBd04sZUFBZSxzSEFBc0gsa0JBQWtCLHVCQUF1QixxTEFBcUwsd0NBQXdDLHVMQUF1TCxzQ0FBc0MsMEhBQTBILG9IQUFvSCxHQUFHLHlCQUF5QixZQUFZLHdCQUF3QixXQUFXLDZCQUE2QixhQUFhLGtDQUFrQyxZQUFZLHdDQUF3QyxrQkFBa0IsZUFBZSx1RUFBdUUsY0FBYyxxQkFBcUIsdUJBQXVCLHlOQUF5TixjQUFjLHdWQUF3VixrQkFBa0IsK1JBQStSLDRDQUE0QywySEFBMkgsUUFBUSx1QkFBdUIsaUJBQWlCLG1LQUFtSyxvQkFBb0IsY0FBYyxvREFBb0QsYUFBYSwwQkFBMEIsYUFBYSxrQ0FBa0MsWUFBWSx3Q0FBd0Msa0JBQWtCLGVBQWUsbUVBQW1FLGNBQWMscUJBQXFCLHVCQUF1Qix1TkFBdU4sY0FBYyw2SkFBNkosa0JBQWtCLHVCQUF1QixxTEFBcUwsd0NBQXdDLHFKQUFxSiw4R0FBOEcsR0FBRyx5QkFBeUIsWUFBWSxxQkFBcUIsV0FBVywwQkFBMEIsYUFBYSxrQ0FBa0MsWUFBWSx3Q0FBd0Msa0JBQWtCLGVBQWUsNkdBQTZHLGNBQWMscUJBQXFCLGVBQWUscUxBQXFMLHVCQUF1Qix1TkFBdU4sYUFBYSxrQ0FBa0MsWUFBWSx1Q0FBdUMsa0JBQWtCLHVCQUF1QixtT0FBbU8sd0NBQXdDLHVJQUF1SSx5SEFBeUgseUJBQXlCLGVBQWUseUNBQXlDLEtBQUssNEJBQTRCLGVBQWUseUNBQXlDLHFEQUFxRCxHQUFHLGNBQWMsbURBQW1ELGdCQUFnQixvREFBb0QscUNBQXFDLGVBQWUsMkJBQTJCLFVBQVUsMEJBQTBCLFNBQVMsMkJBQTJCLG9CQUFvQixRQUFRLGVBQWUsOE5BQThOLDBCQUEwQiwrSEFBK0gseUJBQXlCLGtCQUFrQixNQUFNLElBQUksZ0NBQWdDLDREQUE0RCxxRkFBcUYsNEVBQTRFLGtGQUFrRixnRkFBZ0YsNkJBQTZCLDBDQUEwQyxxQ0FBcUMsc0NBQXNDLDhIQUE4SCwyQkFBMkIsMERBQTBELDI3QkFBMjdCLDZDQUE2Qyx1TEFBdUwsZ0RBQWdELHdUQUF3VCxrREFBa0Qsb0tBQW9LLHVFQUF1RSx1TEFBdUwsaURBQWlELGdSQUFnUixvQkFBb0IsNEVBQTRFLG9CQUFvQixtRUFBbUUsdUJBQXVCLCtFQUErRSxzQkFBc0IsOEVBQThFLG1CQUFtQixNQUFNLHNCQUFzQixFQUFFLGVBQWUsb0NBQW9DLDJFQUEyRSxzQkFBc0IsZ0RBQWdELG1GQUFtRixvQkFBb0IsNkNBQTZDLDJFQUEyRSxzQkFBc0IsK0NBQStDLE1BQU0sOEJBQThCLGdLQUFnSywyQ0FBMkMsOERBQThELHdCQUF3QixvS0FBb0ssR0FBRywrQ0FBK0MsdUJBQXVCLHFDQUFxQyxRQUFRLGVBQWUsMmpCQUEyakIsaUJBQWlCLGdnQkFBZ2dCLGdCQUFnQixjQUFjLCtaQUErWixtQ0FBbUMsMkJBQTJCLDZCQUE2QixHQUFHLDBDQUEwQywyQkFBMkIsd0JBQXdCLEdBQUcsNENBQTRDLDJCQUEyQiw0QkFBNEIsR0FBRyxvR0FBb0csdUZBQXVGLG9CQUFvQiw0SUFBNEksb0RBQW9ELGtCQUFrQiw0QkFBNEIsR0FBRyxvQkFBb0IscURBQXFELE1BQU0sMEJBQTBCLGlGQUFpRixNQUFNLGFBQWEsdVBBQXVQLE1BQU0sU0FBUyxxZEFBcWQsTUFBTSwrQ0FBK0MsME9BQTBPLE1BQU0sV0FBVyx5SkFBeUosTUFBTSxVQUFVLG9GQUFvRixNQUFNLHlCQUF5QiwrRUFBK0UsTUFBTSxtQkFBbUIsaUZBQWlGLE1BQU0sa0JBQWtCLHdGQUF3RixNQUFNLGdEQUFnRCxpSUFBaUksa0JBQWtCLDhSQUE4Uix3QkFBd0Isb0pBQW9KLHlCQUF5QixtSUFBbUksMkJBQTJCLGlDQUFpQyx3QkFBd0Isa0NBQWtDLHFCQUFxQixpRkFBaUYscUJBQXFCLDZGQUE2RixrQkFBa0IsdUZBQXVGLG1CQUFtQixrSEFBa0gsb0JBQW9CLHFIQUFxSCxrQkFBa0IsNkRBQTZELGVBQWUsNkRBQTZELGtCQUFrQiwrQkFBK0IsZUFBZSw0QkFBNEIsb0JBQW9CLDRKQUE0SixtQ0FBbUMsaUZBQWlGLHNCQUFzQiw0Q0FBNEMsY0FBYyxxREFBcUQsa0JBQWtCLHVDQUF1Qyx1REFBdUQsc0NBQXNDLDhKQUE4SixrQkFBa0IsNENBQTRDLEVBQUUsK0NBQStDLElBQUksa0hBQWtILHFCQUFxQixtRUFBbUUsb0JBQW9CLDREQUE0RCxpQkFBaUIsK0NBQStDLHFCQUFxQiwrRkFBK0YsZUFBZSwwQkFBMEIscUJBQXFCLHlCQUF5Qix3QkFBd0IsdUJBQXVCLHFCQUFxQiwySUFBMkksa0NBQWtDLHVCQUF1Qix5Q0FBeUMscUJBQXFCLG9ZQUFvWSxtQkFBbUIsK0JBQStCLHdCQUF3QixnREFBZ0QsK0JBQStCLHdQQUF3UCxnQkFBZ0IscURBQXFELGFBQWEsU0FBUyxrQkFBa0IsR0FBRyxZQUFZLDJDQUFTLENBQUMsU0FBUyxTQUFTLGtCQUFrQixHQUFHLFlBQVkseURBQVMsQ0FBQyxTQUFTLFNBQVMsa0JBQWtCLEdBQUcsWUFBWSw2REFBUyxDQUFDLEVBQUUsUUFBUSxlQUFlLDhCQUE4QiwwS0FBMEssOEJBQThCLDBLQUEwSyxxQkFBcUIsU0FBUyx5UUFBeVEsY0FBYyxrQkFBa0IsY0FBYywrQ0FBK0Msd0JBQXdCLCtFQUErRSxnQkFBZ0Isd0hBQXdILHlCQUF5QixpUkFBaVIsK0JBQStCLHFEQUFxRCw2QkFBNkIsZ0ZBQWdGLGdCQUFnQiw2SEFBNkgsaUNBQWlDLGlLQUFpSyxvQkFBb0IsRUFBRSxpQ0FBaUMsRUFBRSxtQkFBbUIsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLDZCQUE2QixFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLCtHQUErRyxnQkFBZ0IsNkdBQTZHLDhCQUE4Qix5REFBeUQsb0JBQW9CLDRCQUE0QixrQkFBa0IsZUFBZSw0QkFBNEIsaUJBQWlCLHVCQUF1QiwwS0FBMEssNkJBQTZCLG9JQUFvSSw4QkFBOEIsNEdBQTRHLGNBQWMsdVBBQXVQLG9CQUFvQix1REFBdUQsdUJBQXVCLDhGQUE4RixxQkFBcUIsOEJBQThCLG9CQUFvQixlQUFlLG9CQUFvQiwyQkFBMkIsZ0JBQWdCLDZTQUE2Uyx3QkFBd0IsMkJBQTJCLFdBQVcsK0JBQStCLG9DQUFvQywrS0FBK0ssZ0NBQWdDLDhHQUE4Ryw0Q0FBNEMsK0RBQStELDRDQUE0Qyw2Q0FBNkMsb0NBQW9DLHFDQUFxQyxhQUFhLHNHQUFzRyxtQkFBbUIsaUVBQWlFLHFCQUFxQix5REFBeUQsZ0dBQWdHLHdNQUF3TSxvQkFBb0IsNEVBQTRFLHNCQUFzQixlQUFlLGlCQUFpQixlQUFlLGdDQUFnQyxpREFBaUQsbUJBQW1CLDZCQUE2QixtQkFBbUIsaUJBQWlCLGlDQUFpQyxjQUFjLHlCQUF5QixpQkFBaUIsaUJBQWlCLHdEQUF3RCxvQkFBb0IsK0NBQStDLGlCQUFpQiw4Q0FBOEMsZ0JBQWdCLDhDQUE4QyxxQkFBcUIsZUFBZSx5RkFBeUYsb0RBQW9ELHlNQUF5TSxrQkFBa0Isc0tBQXNLLGtCQUFrQixpQkFBaUIscUJBQXFCLDhHQUE4RyxvREFBb0QsMkVBQTJFLDJCQUEyQixTQUFTLDRCQUE0QixlQUFlLDBCQUEwQix1SkFBdUosZ0NBQWdDLHFIQUFxSCxrQ0FBa0MsaUNBQWlDLHdDQUF3QyxzQ0FBc0MsZUFBZSw0RUFBNEUsa0JBQWtCLGlKQUFpSix3QkFBd0IsNEJBQTRCLGdCQUFnQixrSEFBa0gsc0JBQXNCLDJDQUEyQyx1QkFBdUIsb0hBQW9ILHFDQUFxQyw2SUFBNkksY0FBYyxpQkFBaUIsaUJBQWlCLHdMQUF3TCxvQkFBb0IsbUJBQW1CLHVCQUF1QiwwSUFBMEksaUJBQWlCLDBHQUEwRyxrRkFBa0YsZ0JBQWdCLHVCQUF1QixhQUFhLG1CQUFtQixtQ0FBbUMsYUFBYSx1QkFBdUIsTUFBTSxvREFBb0QsYUFBYSxJQUFJLDJDQUEyQywrSkFBK0osa0JBQWtCLDRCQUE0Qix3Q0FBd0Msd0NBQXdDLFdBQVcsZ0JBQWdCLHdDQUF3QyxnWEFBZ1gsZ0JBQWdCLG9GQUFvRjs7Ozs7Ozs7Ozs7Ozs7QUNBbG9tRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGlFQUFlLGtCQUFrQjs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCakMscUdBQXFHLHFCQUFxQixtQkFBbUI7O0FBRXRJOztBQUVQLGlFQUFlLFNBQVMsRUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ0pvQjs7QUFFN0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsZ0VBQVM7QUFDekQ7QUFDQTs7QUFFQTtBQUNBLCtGQUErRjtBQUMvRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCLGdFQUFTLFFBQVE7O0FBRTFDO0FBQ0Esc0NBQXNDOztBQUV0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsU0FBUyxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQzFEaUM7QUFDM0I7O0FBRS9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlDQUFRLENBQUMsOEVBQVEsR0FBRztBQUN6QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCw4RUFBUSxHQUFHO0FBQ25FO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQyw4RUFBUSxHQUFHO0FBQ2hEO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw4RUFBUSxHQUFHO0FBQ3BEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsU0FBUyxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pMaUM7QUFDbEI7QUFDTDtBQUMrQjtBQUNJO0FBQ2dCO0FBQ2M7O0FBRXBHLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0EsSUFBSSxLQUFxQyxHQUFHLHdEQUFPLHdDQUF3QyxDQUFNO0FBQ2pHOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRCxnREFBZ0Q7QUFDaEQsNEVBQTRFO0FBQzVFLHlEQUF5RDtBQUN6RDs7O0FBR0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtQ0FBbUM7OztBQUd2QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCLGdCQUFnQjtBQUN0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDBCQUEwQjs7QUFFMUI7QUFDQSxxQkFBcUIsYUFBYSxZQUFZO0FBQzlDO0FBQ0EsMEJBQTBCLDBCQUEwQjtBQUNwRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyRUFBMkU7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5RUFBeUU7QUFDekU7QUFDQSxJQUFJOzs7QUFHSixxREFBcUQ7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxrQ0FBa0M7QUFDL0U7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQSxzREFBc0Q7O0FBRXREO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0M7O0FBRXhDLHNEQUFzRDs7QUFFdEQ7QUFDQSx3Q0FBd0Msa0NBQWtDOztBQUUxRTtBQUNBLHNFQUFzRTtBQUN0RTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsTUFBTSxLQUFxQyxHQUFHLHdEQUFPLDBFQUEwRSxDQUFNO0FBQ3JJOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvRkFBYzs7QUFFaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNEJBQTRCLDRGQUFzQixDQUFDLDRGQUFzQjtBQUN6RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4RUFBUSxHQUFHO0FBQ2pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEsRUFBRSxrRkFBWTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FOztBQUVuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7O0FBRWhEO0FBQ0E7QUFDQSw4QkFBOEIsOEVBQVEsR0FBRztBQUN6QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQSxzQ0FBc0MseUNBQXlDO0FBQy9FOztBQUVBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU0sS0FBcUMsR0FBRyx3REFBTyw2Q0FBNkMsQ0FBTTtBQUN4Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOEVBQVEsR0FBRztBQUN6QztBQUNBLEtBQUs7O0FBRUw7QUFDQSx5Q0FBeUMsOEVBQVEsR0FBRztBQUNwRDtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwyQ0FBMkM7QUFDM0M7O0FBRUE7QUFDQTtBQUNBLHdDQUF3QyxpQkFBaUI7QUFDekQ7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxLQUFxQyxHQUFHLHdEQUFPLDhFQUE4RSxDQUFNO0FBQ3pJO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvRkFBYzs7QUFFaEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4RUFBUSxHQUFHO0FBQ2pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsMEJBQTBCLDJCQUEyQjtBQUNyRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLDJCQUEyQjtBQUNyRCxzREFBc0Q7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLDhFQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnQkFBZ0I7QUFDckI7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQyw4RUFBUSxHQUFHO0FBQzlDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEM7QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMEJBQTBCLDJCQUEyQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBO0FBQ0EsdURBQXVEOztBQUV2RDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7OztBQUdSO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0Esd0NBQXdDOztBQUV4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhFQUFRLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1Q0FBdUM7QUFDdkM7O0FBRUEsa0NBQWtDO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1Q0FBdUM7QUFDM0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLHdDQUF3QztBQUM1RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHlDQUF5QztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQix5Q0FBeUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IsbUNB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O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7Ozs7Ozs7Ozs7Ozs7OztBQ05rRDtBQUNzRDtBQUNMO0FBQ25HO0FBQ08sNENBQTRDLDZHQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0ZBQU0sR0FBRyx1Q0FBdUMsa0VBQWtFO0FBQ3pJLDBCQUEwQiw4R0FBa0M7QUFDNUQ7QUFDQSx1QkFBdUIsMEZBQWM7QUFDckMsK0JBQStCLDJEQUFjO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVlNS4yL2Rpc3QvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQuZXNtLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BlcGljZ2FtZXMtcHMvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWktdWU1LjIvZGlzdC9saWItcGl4ZWxzdHJlYW1pbmdmcm9udGVuZC11aS5lc20uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaHlwaGVuYXRlLXN0eWxlLW5hbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaXMtaW4tYnJvd3Nlci9kaXN0L21vZHVsZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9qc3MtcGx1Z2luLWNhbWVsLWNhc2UvZGlzdC9qc3MtcGx1Z2luLWNhbWVsLWNhc2UuZXNtLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2pzcy1wbHVnaW4tZ2xvYmFsL2Rpc3QvanNzLXBsdWdpbi1nbG9iYWwuZXNtLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2pzcy9kaXN0L2pzcy5lc20uanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvc2RwL3NkcC5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy90aW55LXdhcm5pbmcvZGlzdC90aW55LXdhcm5pbmcuZXNtLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL0xvYWRpbmdPdmVybGF5LnRzIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL01lc3NhZ2VzLnRzIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL1NQU0FwcGxpY2F0aW9uLnRzIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL1NpZ25hbGxpbmdFeHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNMb29zZS5qcyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJpbWl0aXZlLmpzIiwid2VicGFjazovL2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvUHJvcGVydHlLZXkuanMiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwid2VicGFjazovL2Zyb250ZW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Zyb250ZW5kL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2Zyb250ZW5kL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9mcm9udGVuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2Zyb250ZW5kL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZnJvbnRlbmRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiZnJvbnRlbmRcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiaW1wb3J0KmFzIGUgZnJvbVwic2RwXCI7dmFyIHQscyxuPXtkOihlLHQpPT57Zm9yKHZhciBzIGluIHQpbi5vKHQscykmJiFuLm8oZSxzKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtzXX0pfSxvOihlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0scj17fTtuLmQocix7RHo6KCk9Pm1lLGckOigpPT5BLEx0OigpPT5SLFE5OigpPT54LHFmOigpPT5MLGhWOigpPT5NZSx6JDooKT0+VGUsSjA6KCk9PmZlLERlOigpPT5nZSwkQzooKT0+dWUsYWw6KCk9Pl8sX1c6KCk9PlcsdHo6KCk9PkIsTnU6KCk9PkNlLHpnOigpPT5PZSx2cDooKT0+bmUsdlU6KCk9PnJlLHdGOigpPT5xLHJ2OigpPT5wZSxOaDooKT0+dmUsc3M6KCk9PkZlLHFXOigpPT5KLFFMOigpPT5ZLGNmOigpPT5JZSxlTTooKT0+JCxZZDooKT0+aSxpTTooKT0+cCxxeTooKT0+byxjZTooKT0+dixzSzooKT0+b2UsT2s6KCk9PmNlLHE1OigpPT5FZSxnOigpPT52dCx4bDooKT0+TixJOigpPT5LLGJ4OigpPT5RLEliOigpPT5iLEF6OigpPT5NLEl3OigpPT53LHFZOigpPT5rLGRiOigpPT5QLG1SOigpPT5aLFRuOigpPT5DLHJWOigpPT5YLGdoOigpPT5WLGk1OigpPT5qLHhfOigpPT5sZSxBbTooKT0+ZHQsZVI6KCk9PkYscjg6KCk9PkgsdTM6KCk9PlVlLHZkOigpPT5PLGlWOigpPT5JLGpaOigpPT5VLFNXOigpPT5HLFpIOigpPT56LE5pOigpPT5odCxsaDooKT0+RCxicTooKT0+ZiwkZjooKT0+U3QsZXU6KCk9PnNlLEF4OigpPT50ZSxNYzooKT0+ZWV9KTtjbGFzcyBpe3N0YXRpYyBHZXRTdGFja1RyYWNlKCl7Y29uc3QgZT1uZXcgRXJyb3I7bGV0IHQ9XCJObyBTdGFjayBBdmFpbGFibGUgZm9yIHRoaXMgYnJvd3NlclwiO3JldHVybiBlLnN0YWNrJiYodD1lLnN0YWNrLnRvU3RyaW5nKCkucmVwbGFjZSgvRXJyb3IvZyxcIlwiKSksdH1zdGF0aWMgU2V0TG9nZ2VyVmVyYm9zaXR5KGUpe251bGwhPXRoaXMudmVyYm9zZUxvZ0xldmVsJiYodGhpcy52ZXJib3NlTG9nTGV2ZWw9ZSl9c3RhdGljIExvZyhlLHQscyl7aWYocz50aGlzLnZlcmJvc2VMb2dMZXZlbClyZXR1cm47Y29uc3Qgbj1gTGV2ZWw6IExvZ1xcbk1zZzogJHt0fVxcbkNhbGxlcjogJHtlfWA7Y29uc29sZS5sb2cobil9c3RhdGljIEluZm8oZSx0LHMpe2lmKHM+dGhpcy52ZXJib3NlTG9nTGV2ZWwpcmV0dXJuO2NvbnN0IG49YExldmVsOiBJbmZvXFxuTXNnOiAke3R9YDtjb25zb2xlLmluZm8obil9c3RhdGljIEVycm9yKGUsdCl7Y29uc3Qgcz1gTGV2ZWw6IEVycm9yXFxuTXNnOiAke3R9XFxuQ2FsbGVyOiAke2V9YDtjb25zb2xlLmVycm9yKHMpfXN0YXRpYyBXYXJuaW5nKGUsdCl7Y29uc3Qgcz1gTGV2ZWw6IFdhcm5pbmdcXG5DYWxsZXI6ICR7ZX1cXG5Nc2c6ICR7dH1gO2NvbnNvbGUud2FybihzKX19aS52ZXJib3NlTG9nTGV2ZWw9NSxmdW5jdGlvbihlKXtlLkxJU1RfU1RSRUFNRVJTPVwibGlzdFN0cmVhbWVyc1wiLGUuU1VCU0NSSUJFPVwic3Vic2NyaWJlXCIsZS5VTlNVQlNDUklCRT1cInVuc3Vic2NyaWJlXCIsZS5JQ0VfQ0FORElEQVRFPVwiaWNlQ2FuZGlkYXRlXCIsZS5PRkZFUj1cIm9mZmVyXCIsZS5BTlNXRVI9XCJhbnN3ZXJcIixlLkRBVEFDSEFOTkVMUkVRVUVTVD1cImRhdGFDaGFubmVsUmVxdWVzdFwiLGUuU0ZVUkVDVkRBVEFDSEFOTkVMUkVBRFk9XCJwZWVyRGF0YUNoYW5uZWxzUmVhZHlcIixlLlBPTkc9XCJwb25nXCJ9KHR8fCh0PXt9KSk7Y2xhc3Mgb3twYXlsb2FkKCl7cmV0dXJuIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2VuZGluZyA9PiBcXG5cIitKU09OLnN0cmluZ2lmeSh0aGlzLHZvaWQgMCw0KSw2KSxKU09OLnN0cmluZ2lmeSh0aGlzKX19Y2xhc3MgYSBleHRlbmRzIG97Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudHlwZT10LkxJU1RfU1RSRUFNRVJTfX1jbGFzcyBsIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LlNVQlNDUklCRSx0aGlzLnN0cmVhbWVySWQ9ZX19Y2xhc3MgZCBleHRlbmRzIG97Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudHlwZT10LlVOU1VCU0NSSUJFfX1jbGFzcyBjIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LlBPTkcsdGhpcy50aW1lPWV9fWNsYXNzIGggZXh0ZW5kcyBve2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy50eXBlPXQuT0ZGRVIsZSYmKHRoaXMudHlwZT1lLnR5cGUsdGhpcy5zZHA9ZS5zZHApfX1jbGFzcyBnIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LkFOU1dFUixlJiYodGhpcy50eXBlPWUudHlwZSx0aGlzLnNkcD1lLnNkcCl9fWNsYXNzIHUgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnR5cGU9dC5EQVRBQ0hBTk5FTFJFUVVFU1R9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnR5cGU9dC5TRlVSRUNWREFUQUNIQU5ORUxSRUFEWX19Y2xhc3MgU3tjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5JQ0VfQ0FORElEQVRFLHRoaXMuY2FuZGlkYXRlPWV9cGF5bG9hZCgpe3JldHVybiBpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmcgPT4gXFxuXCIrSlNPTi5zdHJpbmdpZnkodGhpcyx2b2lkIDAsNCksNiksSlNPTi5zdHJpbmdpZnkodGhpcyl9fSFmdW5jdGlvbihlKXtlLkNPTkZJRz1cImNvbmZpZ1wiLGUuU1RSRUFNRVJfTElTVD1cInN0cmVhbWVyTGlzdFwiLGUuUExBWUVSX0NPVU5UPVwicGxheWVyQ291bnRcIixlLk9GRkVSPVwib2ZmZXJcIixlLkFOU1dFUj1cImFuc3dlclwiLGUuSUNFX0NBTkRJREFURT1cImljZUNhbmRpZGF0ZVwiLGUuUEVFUl9EQVRBX0NIQU5ORUxTPVwicGVlckRhdGFDaGFubmVsc1wiLGUuUElORz1cInBpbmdcIixlLldBUk5JTkc9XCJ3YXJuaW5nXCJ9KHN8fChzPXt9KSk7Y2xhc3MgcHt9Y2xhc3MgdiBleHRlbmRzIHB7fWNsYXNzIEN7Y29uc3RydWN0b3IoKXt0aGlzLkZyb21VRU1lc3NhZ2VIYW5kbGVycz1uZXcgTWFwfWFkZE1lc3NhZ2VIYW5kbGVyKGUsdCl7dGhpcy5Gcm9tVUVNZXNzYWdlSGFuZGxlcnMuc2V0KGUsdCl9aGFuZGxlTWVzc2FnZShlLHQpe3RoaXMuRnJvbVVFTWVzc2FnZUhhbmRsZXJzLmhhcyhlKT90aGlzLkZyb21VRU1lc3NhZ2VIYW5kbGVycy5nZXQoZSkodCk6aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgTWVzc2FnZSB0eXBlIG9mICR7ZX0gZG9lcyBub3QgaGF2ZSBhIG1lc3NhZ2UgaGFuZGxlciByZWdpc3RlcmVkIG9uIHRoZSBmcm9udGVuZCAtIGlnbm9yaW5nIG1lc3NhZ2UuYCl9c3RhdGljIHNldHVwRGVmYXVsdEhhbmRsZXJzKGUpe2Uuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuUElORywodD0+e2NvbnN0IG49bmV3IGMoKG5ldyBEYXRlKS5nZXRUaW1lKCkpLnBheWxvYWQoKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxzLlBJTkcrXCI6IFwiK3QsNiksZS53ZWJTb2NrZXQuc2VuZChuKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLkNPTkZJRywodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuQ09ORklHLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uQ29uZmlnKG4pfSkpLGUuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuU1RSRUFNRVJfTElTVCwodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuU1RSRUFNRVJfTElTVCw2KTtjb25zdCBuPUpTT04ucGFyc2UodCk7ZS5vblN0cmVhbWVyTGlzdChuKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLlBMQVlFUl9DT1VOVCwoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuUExBWUVSX0NPVU5ULDYpO2NvbnN0IHQ9SlNPTi5wYXJzZShlKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlBsYXllciBDb3VudDogXCIrdC5jb3VudCw2KX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLkFOU1dFUiwodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuQU5TV0VSLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjQW5zd2VyKG4pfSkpLGUuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuT0ZGRVIsKHQ9PntpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxzLk9GRkVSLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjT2ZmZXIobil9KSksZS5zaWduYWxsaW5nUHJvdG9jb2wuYWRkTWVzc2FnZUhhbmRsZXIocy5JQ0VfQ0FORElEQVRFLCh0PT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCkscy5JQ0VfQ0FORElEQVRFLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uSWNlQ2FuZGlkYXRlKG4uY2FuZGlkYXRlKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLldBUk5JTkcsKGU9PntpLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYFdhcm5pbmcgcmVjZWl2ZWQ6ICR7ZX1gKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLlBFRVJfREFUQV9DSEFOTkVMUywodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuUEVFUl9EQVRBX0NIQU5ORUxTLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjUGVlckRhdGFDaGFubmVscyhuKX0pKX19Y2xhc3MgZntjb25zdHJ1Y3Rvcigpe3RoaXMuV1NfT1BFTl9TVEFURT0xLHRoaXMub25PcGVuPW5ldyBFdmVudFRhcmdldCx0aGlzLm9uQ2xvc2U9bmV3IEV2ZW50VGFyZ2V0LHRoaXMuc2lnbmFsbGluZ1Byb3RvY29sPW5ldyBDLEMuc2V0dXBEZWZhdWx0SGFuZGxlcnModGhpcyl9Y29ubmVjdChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlLDYpO3RyeXtyZXR1cm4gdGhpcy53ZWJTb2NrZXQ9bmV3IFdlYlNvY2tldChlKSx0aGlzLndlYlNvY2tldC5vbm9wZW49ZT0+dGhpcy5oYW5kbGVPbk9wZW4oZSksdGhpcy53ZWJTb2NrZXQub25lcnJvcj0oKT0+dGhpcy5oYW5kbGVPbkVycm9yKCksdGhpcy53ZWJTb2NrZXQub25jbG9zZT1lPT50aGlzLmhhbmRsZU9uQ2xvc2UoZSksdGhpcy53ZWJTb2NrZXQub25tZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpLHRoaXMud2ViU29ja2V0Lm9ubWVzc2FnZWJpbmFyeT1lPT50aGlzLmhhbmRsZU9uTWVzc2FnZUJpbmFyeShlKSwhMH1jYXRjaChlKXtyZXR1cm4gaS5FcnJvcihlLGUpLCExfX1oYW5kbGVPbk1lc3NhZ2VCaW5hcnkoZSl7ZSYmZS5kYXRhJiZlLmRhdGEudGV4dCgpLnRoZW4oKGU9Pntjb25zdCB0PW5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlRnJvbUJpbmFyeVwiLHtkYXRhOmV9KTt0aGlzLmhhbmRsZU9uTWVzc2FnZSh0KX0pKS5jYXRjaCgoZT0+e2kuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYEZhaWxlZCB0byBwYXJzZSBiaW5hcnkgYmxvYiBmcm9tIHdlYnNvY2tldCwgcmVhc29uOiAke2V9YCl9KSl9aGFuZGxlT25NZXNzYWdlKGUpe2lmKGUuZGF0YSYmZS5kYXRhIGluc3RhbmNlb2YgQmxvYilyZXR1cm4gdm9pZCB0aGlzLmhhbmRsZU9uTWVzc2FnZUJpbmFyeShlKTtjb25zdCB0PUpTT04ucGFyc2UoZS5kYXRhKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInJlY2VpdmVkID0+IFxcblwiK0pTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UoZS5kYXRhKSx2b2lkIDAsNCksNiksdGhpcy5zaWduYWxsaW5nUHJvdG9jb2wuaGFuZGxlTWVzc2FnZSh0LnR5cGUsZS5kYXRhKX1oYW5kbGVPbk9wZW4oZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJDb25uZWN0ZWQgdG8gdGhlIHNpZ25hbGxpbmcgc2VydmVyIHZpYSBXZWJTb2NrZXRcIiw2KSx0aGlzLm9uT3Blbi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm9wZW5cIikpfWhhbmRsZU9uRXJyb3IoKXtpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiV2ViU29ja2V0IGVycm9yXCIpfWhhbmRsZU9uQ2xvc2UoZSl7dGhpcy5vbldlYlNvY2tldE9uY2xvc2VPdmVybGF5TWVzc2FnZShlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRpc2Nvbm5lY3RlZCB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXIgdmlhIFdlYlNvY2tldDogXCIrSlNPTi5zdHJpbmdpZnkoZS5jb2RlKStcIiAtIFwiK2UucmVhc29uKSx0aGlzLm9uQ2xvc2UuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbG9zZVwiKSl9cmVxdWVzdFN0cmVhbWVyTGlzdCgpe2NvbnN0IGU9bmV3IGE7dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZFN1YnNjcmliZShlKXtjb25zdCB0PW5ldyBsKGUpO3RoaXMud2ViU29ja2V0LnNlbmQodC5wYXlsb2FkKCkpfXNlbmRVbnN1YnNjcmliZSgpe2NvbnN0IGU9bmV3IGQ7dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZFdlYlJ0Y09mZmVyKGUpe2NvbnN0IHQ9bmV3IGgoZSk7dGhpcy53ZWJTb2NrZXQuc2VuZCh0LnBheWxvYWQoKSl9c2VuZFdlYlJ0Y0Fuc3dlcihlKXtjb25zdCB0PW5ldyBnKGUpO3RoaXMud2ViU29ja2V0LnNlbmQodC5wYXlsb2FkKCkpfXNlbmRXZWJSdGNEYXRhY2hhbm5lbFJlcXVlc3QoKXtjb25zdCBlPW5ldyB1O3RoaXMud2ViU29ja2V0LnNlbmQoZS5wYXlsb2FkKCkpfXNlbmRTRlVSZWN2RGF0YUNoYW5uZWxSZWFkeSgpe2NvbnN0IGU9bmV3IG07dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZEljZUNhbmRpZGF0ZShlKXtpZihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmcgSWNlIENhbmRpZGF0ZVwiKSx0aGlzLndlYlNvY2tldCYmdGhpcy53ZWJTb2NrZXQucmVhZHlTdGF0ZT09PXRoaXMuV1NfT1BFTl9TVEFURSl7Y29uc3QgdD1uZXcgUyhlKTt0aGlzLndlYlNvY2tldC5zZW5kKHQucGF5bG9hZCgpKX19Y2xvc2UoKXt0aGlzLndlYlNvY2tldC5jbG9zZSgpfW9uV2ViU29ja2V0T25jbG9zZU92ZXJsYXlNZXNzYWdlKGUpe31vbkNvbmZpZyhlKXt9b25TdHJlYW1lckxpc3QoZSl7fW9uSWNlQ2FuZGlkYXRlKGUpe31vbldlYlJ0Y0Fuc3dlcihlKXt9b25XZWJSdGNPZmZlcihlKXt9b25XZWJSdGNQZWVyRGF0YUNoYW5uZWxzKGUpe319Y2xhc3MgVHtjb25zdHJ1Y3RvcihlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyPWUsdGhpcy5hdWRpb0VsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkF1ZGlvXCIpfWhhbmRsZU9uVHJhY2soZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJoYW5kbGVPblRyYWNrIFwiK0pTT04uc3RyaW5naWZ5KGUuc3RyZWFtcyksNik7Y29uc3QgdD10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO2lmKGUudHJhY2smJmkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiR290IHRyYWNrIC0gXCIrZS50cmFjay5raW5kK1wiIGlkPVwiK2UudHJhY2suaWQrXCIgcmVhZHlTdGF0ZT1cIitlLnRyYWNrLnJlYWR5U3RhdGUsNiksXCJhdWRpb1wiIT1lLnRyYWNrLmtpbmQpcmV0dXJuXCJ2aWRlb1wiPT1lLnRyYWNrLmtpbmQmJnQuc3JjT2JqZWN0IT09ZS5zdHJlYW1zWzBdPyh0LnNyY09iamVjdD1lLnN0cmVhbXNbMF0sdm9pZCBpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNldCB2aWRlbyBzb3VyY2UgZnJvbSB2aWRlbyB0cmFjayBvbnRyYWNrLlwiKSk6dm9pZCAwO3RoaXMuQ3JlYXRlQXVkaW9UcmFjayhlLnN0cmVhbXNbMF0pfUNyZWF0ZUF1ZGlvVHJhY2soZSl7Y29uc3QgdD10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvRWxlbWVudCgpO3Quc3JjT2JqZWN0IT1lJiZ0LnNyY09iamVjdCYmdC5zcmNPYmplY3QhPT1lJiYodGhpcy5hdWRpb0VsZW1lbnQuc3JjT2JqZWN0PWUsaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJDcmVhdGVkIG5ldyBhdWRpbyBlbGVtZW50IHRvIHBsYXkgc2VwYXJhdGUgYXVkaW8gc3RyZWFtLlwiKSl9fWNsYXNzIEV7Y29uc3RydWN0b3IoZSl7dGhpcy5mcmVlemVGcmFtZUhlaWdodD0wLHRoaXMuZnJlZXplRnJhbWVXaWR0aD0wLHRoaXMucm9vdERpdj1lLHRoaXMucm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnJvb3RFbGVtZW50LmlkPVwiZnJlZXplRnJhbWVcIix0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5yb290RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzPVwibm9uZVwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuekluZGV4PVwiMjBcIix0aGlzLmltYWdlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaW1hZ2VFbGVtZW50KSx0aGlzLnJvb3REaXYuYXBwZW5kQ2hpbGQodGhpcy5yb290RWxlbWVudCl9c2V0RWxlbWVudEZvclNob3coKXt0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wifXNldEVsZW1lbnRGb3JIaWRlKCl7dGhpcy5yb290RWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifXVwZGF0ZUltYWdlRWxlbWVudFNvdXJjZShlKXtjb25zdCB0PWJ0b2EoZS5yZWR1Y2UoKChlLHQpPT5lK1N0cmluZy5mcm9tQ2hhckNvZGUodCkpLFwiXCIpKTt0aGlzLmltYWdlRWxlbWVudC5zcmM9XCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiK3R9c2V0RGltZW5zaW9uc0Zyb21FbGVtZW50QW5kUmVzaXplKCl7dGhpcy5mcmVlemVGcmFtZUhlaWdodD10aGlzLmltYWdlRWxlbWVudC5uYXR1cmFsSGVpZ2h0LHRoaXMuZnJlZXplRnJhbWVXaWR0aD10aGlzLmltYWdlRWxlbWVudC5uYXR1cmFsV2lkdGgsdGhpcy5yZXNpemUoKX1yZXNpemUoKXtpZigwIT09dGhpcy5mcmVlemVGcmFtZVdpZHRoJiYwIT09dGhpcy5mcmVlemVGcmFtZUhlaWdodCl7bGV0IGU9MCx0PTAscz0wLG49MDtjb25zdCByPXRoaXMucm9vdERpdi5jbGllbnRXaWR0aC90aGlzLnJvb3REaXYuY2xpZW50SGVpZ2h0LGk9dGhpcy5mcmVlemVGcmFtZVdpZHRoL3RoaXMuZnJlZXplRnJhbWVIZWlnaHQ7cjxpPyhlPXRoaXMucm9vdERpdi5jbGllbnRXaWR0aCx0PU1hdGguZmxvb3IodGhpcy5yb290RGl2LmNsaWVudFdpZHRoL2kpLHM9TWF0aC5mbG9vciguNSoodGhpcy5yb290RGl2LmNsaWVudEhlaWdodC10KSksbj0wKTooZT1NYXRoLmZsb29yKHRoaXMucm9vdERpdi5jbGllbnRIZWlnaHQqaSksdD10aGlzLnJvb3REaXYuY2xpZW50SGVpZ2h0LHM9MCxuPU1hdGguZmxvb3IoLjUqKHRoaXMucm9vdERpdi5jbGllbnRXaWR0aC1lKSkpLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy5yb290RGl2Lm9mZnNldFdpZHRoK1wicHhcIix0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLnJvb3REaXYub2Zmc2V0SGVpZ2h0K1wicHhcIix0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmxlZnQ9XCIwcHhcIix0aGlzLnJvb3RFbGVtZW50LnN0eWxlLnRvcD1cIjBweFwiLHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLndpZHRoPWUrXCJweFwiLHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLmhlaWdodD10K1wicHhcIix0aGlzLmltYWdlRWxlbWVudC5zdHlsZS5sZWZ0PW4rXCJweFwiLHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLnRvcD1zK1wicHhcIn19fWNsYXNzIHl7Y29uc3RydWN0b3IoZSl7dGhpcy5yZWNlaXZpbmc9ITEsdGhpcy5zaXplPTAsdGhpcy5qcGVnPXZvaWQgMCx0aGlzLnZhbGlkPSExLHRoaXMuZnJlZXplRnJhbWVEZWxheT01MCx0aGlzLmZyZWV6ZUZyYW1lPW5ldyBFKGUpfXNob3dGcmVlemVGcmFtZSgpe3RoaXMudmFsaWQmJnRoaXMuZnJlZXplRnJhbWUuc2V0RWxlbWVudEZvclNob3coKX1oaWRlRnJlZXplRnJhbWUoKXt0aGlzLnZhbGlkPSExLHRoaXMuZnJlZXplRnJhbWUuc2V0RWxlbWVudEZvckhpZGUoKX11cGRhdGVGcmVlemVGcmFtZUFuZFNob3coZSx0KXt0aGlzLmZyZWV6ZUZyYW1lLnVwZGF0ZUltYWdlRWxlbWVudFNvdXJjZShlKSx0aGlzLmZyZWV6ZUZyYW1lLmltYWdlRWxlbWVudC5vbmxvYWQ9KCk9Pnt0aGlzLmZyZWV6ZUZyYW1lLnNldERpbWVuc2lvbnNGcm9tRWxlbWVudEFuZFJlc2l6ZSgpLHQoKX19cHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZShlLHQpe3RoaXMucmVjZWl2aW5nfHwodGhpcy5yZWNlaXZpbmc9ITAsdGhpcy52YWxpZD0hMSx0aGlzLnNpemU9MCx0aGlzLmpwZWc9dm9pZCAwKSx0aGlzLnNpemU9bmV3IERhdGFWaWV3KGUuc2xpY2UoMSw1KS5idWZmZXIpLmdldEludDMyKDAsITApO2NvbnN0IHM9ZS5zbGljZSg1KTtpZih0aGlzLmpwZWcpe2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5qcGVnLmxlbmd0aCtzLmxlbmd0aCk7ZS5zZXQodGhpcy5qcGVnLDApLGUuc2V0KHMsdGhpcy5qcGVnLmxlbmd0aCksdGhpcy5qcGVnPWV9ZWxzZSB0aGlzLmpwZWc9cyx0aGlzLnJlY2VpdmluZz0hMCxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgcmVjZWl2ZWQgZmlyc3QgY2h1bmsgb2YgZnJlZXplIGZyYW1lOiAke3RoaXMuanBlZy5sZW5ndGh9LyR7dGhpcy5zaXplfWAsNik7dGhpcy5qcGVnLmxlbmd0aD09PXRoaXMuc2l6ZT8odGhpcy5yZWNlaXZpbmc9ITEsdGhpcy52YWxpZD0hMCxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgcmVjZWl2ZWQgY29tcGxldGUgZnJlZXplIGZyYW1lICR7dGhpcy5zaXplfWAsNiksdGhpcy51cGRhdGVGcmVlemVGcmFtZUFuZFNob3codGhpcy5qcGVnLHQpKTp0aGlzLmpwZWcubGVuZ3RoPnRoaXMuc2l6ZSYmKGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYHJlY2VpdmVkIGJpZ2dlciBmcmVlemUgZnJhbWUgdGhhbiBhZHZlcnRpc2VkOiAke3RoaXMuanBlZy5sZW5ndGh9LyR7dGhpcy5zaXplfWApLHRoaXMuanBlZz12b2lkIDAsdGhpcy5yZWNlaXZpbmc9ITEpfX1jbGFzcyBie2NvbnN0cnVjdG9yKGUsdCxzLG4scj0oKCk9Pnt9KSl7dGhpcy5vbkNoYW5nZT1yLHRoaXMub25DaGFuZ2VFbWl0PSgpPT57fSx0aGlzLmlkPWUsdGhpcy5kZXNjcmlwdGlvbj1zLHRoaXMubGFiZWw9dCx0aGlzLnZhbHVlPW59c2V0IGxhYmVsKGUpe3RoaXMuX2xhYmVsPWUsdGhpcy5vbkNoYW5nZUVtaXQodGhpcy5fdmFsdWUpfWdldCBsYWJlbCgpe3JldHVybiB0aGlzLl9sYWJlbH1nZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5fdmFsdWV9c2V0IHZhbHVlKGUpe3RoaXMuX3ZhbHVlPWUsdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSx0aGlzKSx0aGlzLm9uQ2hhbmdlRW1pdCh0aGlzLl92YWx1ZSl9fWNsYXNzIE0gZXh0ZW5kcyBie2NvbnN0cnVjdG9yKGUsdCxzLG4scixpPSgoKT0+e30pKXtzdXBlcihlLHQscyxuLGkpO2NvbnN0IG89bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtpZihyJiZvLmhhcyh0aGlzLmlkKSl7Y29uc3QgZT10aGlzLmdldFVybFBhcmFtRmxhZygpO3RoaXMuZmxhZz1lfWVsc2UgdGhpcy5mbGFnPW47dGhpcy51c2VVcmxQYXJhbXM9cn1nZXRVcmxQYXJhbUZsYWcoKXtjb25zdCBlPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7cmV0dXJuISFlLmhhcyh0aGlzLmlkKSYmXCJmYWxzZVwiIT09ZS5nZXQodGhpcy5pZCkmJlwiRmFsc2VcIiE9PWUuZ2V0KHRoaXMuaWQpfXVwZGF0ZVVSTFBhcmFtcygpe2lmKHRoaXMudXNlVXJsUGFyYW1zKXtjb25zdCBlPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7ITA9PT10aGlzLmZsYWc/ZS5zZXQodGhpcy5pZCxcInRydWVcIik6ZS5zZXQodGhpcy5pZCxcImZhbHNlXCIpLHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSxcIlwiLFwiXCIhPT1lLnRvU3RyaW5nKCk/YCR7bG9jYXRpb24ucGF0aG5hbWV9PyR7ZX1gOmAke2xvY2F0aW9uLnBhdGhuYW1lfWApfX1lbmFibGUoKXt0aGlzLmZsYWc9ITB9Z2V0IGZsYWcoKXtyZXR1cm4hIXRoaXMudmFsdWV9c2V0IGZsYWcoZSl7dGhpcy52YWx1ZT1lfX1jbGFzcyB3IGV4dGVuZHMgYntjb25zdHJ1Y3RvcihlLHQscyxuLHIsaSxvLGE9KCgpPT57fSkpe3N1cGVyKGUsdCxzLGksYSksdGhpcy5fbWluPW4sdGhpcy5fbWF4PXI7Y29uc3QgbD1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO2lmKG8mJmwuaGFzKHRoaXMuaWQpKXtjb25zdCBlPU51bWJlci5wYXJzZUludChsLmdldCh0aGlzLmlkKSk7dGhpcy5udW1iZXI9TnVtYmVyLmlzTmFOKGUpP2k6ZX1lbHNlIHRoaXMubnVtYmVyPWk7dGhpcy51c2VVcmxQYXJhbXM9b311cGRhdGVVUkxQYXJhbXMoKXtpZih0aGlzLnVzZVVybFBhcmFtcyl7Y29uc3QgZT1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO2Uuc2V0KHRoaXMuaWQsdGhpcy5udW1iZXIudG9TdHJpbmcoKSksd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LFwiXCIsXCJcIiE9PWUudG9TdHJpbmcoKT9gJHtsb2NhdGlvbi5wYXRobmFtZX0/JHtlfWA6YCR7bG9jYXRpb24ucGF0aG5hbWV9YCl9fXNldCBudW1iZXIoZSl7dGhpcy52YWx1ZT10aGlzLmNsYW1wKGUpfWdldCBudW1iZXIoKXtyZXR1cm4gdGhpcy52YWx1ZX1jbGFtcChlKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5fbWF4LGUpLHRoaXMuX21pbil9Z2V0IG1pbigpe3JldHVybiB0aGlzLl9taW59Z2V0IG1heCgpe3JldHVybiB0aGlzLl9tYXh9YWRkT25DaGFuZ2VkTGlzdGVuZXIoZSl7dGhpcy5vbkNoYW5nZT1lfX1jbGFzcyBQIGV4dGVuZHMgYntjb25zdHJ1Y3RvcihlLHQscyxuLHIsaT0oKCk9Pnt9KSl7c3VwZXIoZSx0LHMsbixpKTtjb25zdCBvPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7aWYociYmby5oYXModGhpcy5pZCkpe2NvbnN0IGU9dGhpcy5nZXRVcmxQYXJhbVRleHQoKTt0aGlzLnRleHQ9ZX1lbHNlIHRoaXMudGV4dD1uO3RoaXMudXNlVXJsUGFyYW1zPXJ9Z2V0VXJsUGFyYW1UZXh0KCl7dmFyIGU7Y29uc3QgdD1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO3JldHVybiB0Lmhhcyh0aGlzLmlkKSYmbnVsbCE9PShlPXQuZ2V0KHRoaXMuaWQpKSYmdm9pZCAwIT09ZT9lOlwiXCJ9dXBkYXRlVVJMUGFyYW1zKCl7aWYodGhpcy51c2VVcmxQYXJhbXMpe2NvbnN0IGU9bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtlLnNldCh0aGlzLmlkLHRoaXMudGV4dCksd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LFwiXCIsXCJcIiE9PWUudG9TdHJpbmcoKT9gJHtsb2NhdGlvbi5wYXRobmFtZX0/JHtlfWA6YCR7bG9jYXRpb24ucGF0aG5hbWV9YCl9fWdldCB0ZXh0KCl7cmV0dXJuIHRoaXMudmFsdWV9c2V0IHRleHQoZSl7dGhpcy52YWx1ZT1lfX1jbGFzcyBrIGV4dGVuZHMgYntjb25zdHJ1Y3RvcihlLHQscyxuLHIsaSxvPSgoKT0+e30pKXtzdXBlcihlLHQscyxbbixuXSxvKSx0aGlzLm9wdGlvbnM9cjtjb25zdCBhPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCksbD1pJiZhLmhhcyh0aGlzLmlkKT90aGlzLmdldFVybFBhcmFtVGV4dCgpOm47dGhpcy5zZWxlY3RlZD1sLHRoaXMudXNlVXJsUGFyYW1zPWl9Z2V0VXJsUGFyYW1UZXh0KCl7dmFyIGU7Y29uc3QgdD1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO3JldHVybiB0Lmhhcyh0aGlzLmlkKSYmbnVsbCE9PShlPXQuZ2V0KHRoaXMuaWQpKSYmdm9pZCAwIT09ZT9lOlwiXCJ9dXBkYXRlVVJMUGFyYW1zKCl7aWYodGhpcy51c2VVcmxQYXJhbXMpe2NvbnN0IGU9bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtlLnNldCh0aGlzLmlkLHRoaXMuc2VsZWN0ZWQpLHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSxcIlwiLFwiXCIhPT1lLnRvU3RyaW5nKCk/YCR7bG9jYXRpb24ucGF0aG5hbWV9PyR7ZX1gOmAke2xvY2F0aW9uLnBhdGhuYW1lfWApfX1hZGRPbkNoYW5nZWRMaXN0ZW5lcihlKXt0aGlzLm9uQ2hhbmdlPWV9Z2V0IG9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc31zZXQgb3B0aW9ucyhlKXt0aGlzLl9vcHRpb25zPWUsdGhpcy5vbkNoYW5nZUVtaXQodGhpcy5zZWxlY3RlZCl9Z2V0IHNlbGVjdGVkKCl7cmV0dXJuIHRoaXMudmFsdWV9c2V0IHNlbGVjdGVkKGUpe2NvbnN0IHQ9dGhpcy5vcHRpb25zLmZpbHRlcigodD0+LTEhPT10LmluZGV4T2YoZSkpKTt0Lmxlbmd0aCYmKHRoaXMudmFsdWU9dFswXSl9fWNsYXNzIFIgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImFma1dhcm5pbmdBY3RpdmF0ZVwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgTCBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiYWZrV2FybmluZ1VwZGF0ZVwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgeCBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJhZmtXYXJuaW5nRGVhY3RpdmF0ZVwiKX19Y2xhc3MgQSBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJhZmtUaW1lZE91dFwiKX19Y2xhc3MgRiBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwidmlkZW9FbmNvZGVyQXZnUVBcIiksdGhpcy5kYXRhPWV9fWNsYXNzIEQgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwid2ViUnRjU2RwXCIpfX1jbGFzcyBPIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcIndlYlJ0Y0F1dG9Db25uZWN0XCIpfX1jbGFzcyBVIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcIndlYlJ0Y0Nvbm5lY3RpbmdcIil9fWNsYXNzIEkgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwid2ViUnRjQ29ubmVjdGVkXCIpfX1jbGFzcyB6IGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcIndlYlJ0Y0ZhaWxlZFwiKX19Y2xhc3MgRyBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwid2ViUnRjRGlzY29ubmVjdGVkXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBCIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJkYXRhQ2hhbm5lbE9wZW5cIiksdGhpcy5kYXRhPWV9fWNsYXNzIF8gZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImRhdGFDaGFubmVsQ2xvc2VcIiksdGhpcy5kYXRhPWV9fWNsYXNzIFcgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImRhdGFDaGFubmVsRXJyb3JcIiksdGhpcy5kYXRhPWV9fWNsYXNzIEggZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwidmlkZW9Jbml0aWFsaXplZFwiKX19Y2xhc3MgViBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJzdHJlYW1Mb2FkaW5nXCIpfX1jbGFzcyBOIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJwbGF5U3RyZWFtRXJyb3JcIiksdGhpcy5kYXRhPWV9fWNsYXNzIEsgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwicGxheVN0cmVhbVwiKX19Y2xhc3MgUSBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwicGxheVN0cmVhbVJlamVjdGVkXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyAkIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJsb2FkRnJlZXplRnJhbWVcIiksdGhpcy5kYXRhPWV9fWNsYXNzIHEgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiaGlkZUZyZWV6ZUZyYW1lXCIpfX1jbGFzcyBYIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJzdGF0c1JlY2VpdmVkXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBqIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJzdHJlYW1lckxpc3RNZXNzYWdlXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBZIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJsYXRlbmN5VGVzdFJlc3VsdFwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgSiBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiaW5pdGlhbFNldHRpbmdzXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBaIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJzZXR0aW5nc0NoYW5nZWRcIiksdGhpcy5kYXRhPWV9fWNsYXNzIGVlIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcInhyU2Vzc2lvblN0YXJ0ZWRcIil9fWNsYXNzIHRlIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcInhyU2Vzc2lvbkVuZGVkXCIpfX1jbGFzcyBzZSBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwieHJGcmFtZVwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgbmUgZXh0ZW5kcyBFdmVudFRhcmdldHtkaXNwYXRjaEV2ZW50KGUpe3JldHVybiBzdXBlci5kaXNwYXRjaEV2ZW50KGUpfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXtzdXBlci5hZGRFdmVudExpc3RlbmVyKGUsdCl9cmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpe3N1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX19Y2xhc3MgcmV7fXJlLkF1dG9Db25uZWN0PVwiQXV0b0Nvbm5lY3RcIixyZS5BdXRvUGxheVZpZGVvPVwiQXV0b1BsYXlWaWRlb1wiLHJlLkFGS0RldGVjdGlvbj1cIlRpbWVvdXRJZklkbGVcIixyZS5Ccm93c2VyU2VuZE9mZmVyPVwiT2ZmZXJUb1JlY2VpdmVcIixyZS5Ib3ZlcmluZ01vdXNlTW9kZT1cIkhvdmVyaW5nTW91c2VcIixyZS5Gb3JjZU1vbm9BdWRpbz1cIkZvcmNlTW9ub0F1ZGlvXCIscmUuRm9yY2VUVVJOPVwiRm9yY2VUVVJOXCIscmUuRmFrZU1vdXNlV2l0aFRvdWNoZXM9XCJGYWtlTW91c2VXaXRoVG91Y2hlc1wiLHJlLklzUXVhbGl0eUNvbnRyb2xsZXI9XCJDb250cm9sc1F1YWxpdHlcIixyZS5NYXRjaFZpZXdwb3J0UmVzb2x1dGlvbj1cIk1hdGNoVmlld3BvcnRSZXNcIixyZS5QcmVmZXJTRlU9XCJwcmVmZXJTRlVcIixyZS5TdGFydFZpZGVvTXV0ZWQ9XCJTdGFydFZpZGVvTXV0ZWRcIixyZS5TdXBwcmVzc0Jyb3dzZXJLZXlzPVwiU3VwcHJlc3NCcm93c2VyS2V5c1wiLHJlLlVzZU1pYz1cIlVzZU1pY1wiLHJlLktleWJvYXJkSW5wdXQ9XCJLZXlib2FyZElucHV0XCIscmUuTW91c2VJbnB1dD1cIk1vdXNlSW5wdXRcIixyZS5Ub3VjaElucHV0PVwiVG91Y2hJbnB1dFwiLHJlLkdhbWVwYWRJbnB1dD1cIkdhbWVwYWRJbnB1dFwiLHJlLlhSQ29udHJvbGxlcklucHV0PVwiWFJDb250cm9sbGVySW5wdXRcIjtjb25zdCBpZT1lPT5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyZSkuc29tZSgodD0+cmVbdF09PT1lKSk7Y2xhc3Mgb2V7fW9lLkFGS1RpbWVvdXRTZWNzPVwiQUZLVGltZW91dFwiLG9lLk1pblFQPVwiTWluUVBcIixvZS5NYXhRUD1cIk1heFFQXCIsb2UuV2ViUlRDRlBTPVwiV2ViUlRDRlBTXCIsb2UuV2ViUlRDTWluQml0cmF0ZT1cIldlYlJUQ01pbkJpdHJhdGVcIixvZS5XZWJSVENNYXhCaXRyYXRlPVwiV2ViUlRDTWF4Qml0cmF0ZVwiO2NvbnN0IGFlPWU9Pk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9lKS5zb21lKCh0PT5vZVt0XT09PWUpKTtjbGFzcyBsZXt9bGUuU2lnbmFsbGluZ1NlcnZlclVybD1cInNzXCI7Y29uc3QgZGU9ZT0+T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGUpLnNvbWUoKHQ9PmxlW3RdPT09ZSkpO2NsYXNzIGNle31jZS5QcmVmZXJyZWRDb2RlYz1cIlByZWZlcnJlZENvZGVjXCIsY2UuU3RyZWFtZXJJZD1cIlN0cmVhbWVySWRcIjtjb25zdCBoZT1lPT5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjZSkuc29tZSgodD0+Y2VbdF09PT1lKSk7Y2xhc3MgZ2V7Y29uc3RydWN0b3IoZT17fSl7dGhpcy5mbGFncz1uZXcgTWFwLHRoaXMubnVtZXJpY1BhcmFtZXRlcnM9bmV3IE1hcCx0aGlzLnRleHRQYXJhbWV0ZXJzPW5ldyBNYXAsdGhpcy5vcHRpb25QYXJhbWV0ZXJzPW5ldyBNYXA7Y29uc3R7aW5pdGlhbFNldHRpbmdzOnQsdXNlVXJsUGFyYW1zOnN9PWU7dGhpcy5fdXNlVXJsUGFyYW1zPSEhcyx0aGlzLnBvcHVsYXRlRGVmYXVsdFNldHRpbmdzKHRoaXMuX3VzZVVybFBhcmFtcyksdCYmdGhpcy5zZXRTZXR0aW5ncyh0KX1nZXQgdXNlVXJsUGFyYW1zKCl7cmV0dXJuIHRoaXMuX3VzZVVybFBhcmFtc31wb3B1bGF0ZURlZmF1bHRTZXR0aW5ncyhlKXt0aGlzLnRleHRQYXJhbWV0ZXJzLnNldChsZS5TaWduYWxsaW5nU2VydmVyVXJsLG5ldyBQKGxlLlNpZ25hbGxpbmdTZXJ2ZXJVcmwsXCJTaWduYWxsaW5nIHVybFwiLFwiVXJsIG9mIHRoZSBzaWduYWxsaW5nIHNlcnZlclwiLChcImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2w/XCJ3c3M6Ly9cIjpcIndzOi8vXCIpK3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSsoXCI4MFwiPT09d2luZG93LmxvY2F0aW9uLnBvcnR8fFwiXCI9PT13aW5kb3cubG9jYXRpb24ucG9ydD9cIlwiOmA6JHt3aW5kb3cubG9jYXRpb24ucG9ydH1gKSxlKSksdGhpcy5vcHRpb25QYXJhbWV0ZXJzLnNldChjZS5TdHJlYW1lcklkLG5ldyBrKGNlLlN0cmVhbWVySWQsXCJTdHJlYW1lciBJRFwiLFwiVGhlIElEIG9mIHRoZSBzdHJlYW1lciB0byBzdHJlYW0uXCIsXCJcIixbXSxlKSksdGhpcy5vcHRpb25QYXJhbWV0ZXJzLnNldChjZS5QcmVmZXJyZWRDb2RlYyxuZXcgayhjZS5QcmVmZXJyZWRDb2RlYyxcIlByZWZlcnJlZCBDb2RlY1wiLFwiVGhlIHByZWZlcnJlZCBjb2RlYyB0byBiZSB1c2VkIGR1cmluZyBjb2RlYyBuZWdvdGlhdGlvblwiLFwiSDI2NCBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0xO3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmXCIsZnVuY3Rpb24oKXtjb25zdCBlPVtdO2lmKCFSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMpcmV0dXJuIGUucHVzaChcIk9ubHkgYXZhaWxhYmxlIG9uIENocm9tZVwiKSxlO2NvbnN0IHQ9LyhWUFxcZHxIMjZcXGR8QVYxKS4qLztyZXR1cm4gUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKFwidmlkZW9cIikuY29kZWNzLmZvckVhY2goKHM9Pntjb25zdCBuPXMubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdK1wiIFwiKyhzLnNkcEZtdHBMaW5lfHxcIlwiKTtudWxsIT09dC5leGVjKG4pJiZlLnB1c2gobil9KSksZX0oKSxlKSksdGhpcy5mbGFncy5zZXQocmUuQXV0b0Nvbm5lY3QsbmV3IE0ocmUuQXV0b0Nvbm5lY3QsXCJBdXRvIGNvbm5lY3QgdG8gc3RyZWFtXCIsXCJXaGV0aGVyIHdlIHNob3VsZCBhdHRlbXB0IHRvIGF1dG8gY29ubmVjdCB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXIgb3Igc2hvdyBhIGNsaWNrIHRvIHN0YXJ0IHByb21wdC5cIiwhMSxlKSksdGhpcy5mbGFncy5zZXQocmUuQXV0b1BsYXlWaWRlbyxuZXcgTShyZS5BdXRvUGxheVZpZGVvLFwiQXV0byBwbGF5IHZpZGVvXCIsXCJXaGVuIHZpZGVvIGlzIHJlYWR5IGF1dG9tYXRpY2FsbHkgc3RhcnQgcGxheWluZyBpdCBhcyBvcHBvc2VkIHRvIHNob3dpbmcgYSBwbGF5IGJ1dHRvbi5cIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuQnJvd3NlclNlbmRPZmZlcixuZXcgTShyZS5Ccm93c2VyU2VuZE9mZmVyLFwiQnJvd3NlciBzZW5kIG9mZmVyXCIsXCJCcm93c2VyIHdpbGwgaW5pdGlhdGUgdGhlIFdlYlJUQyBoYW5kc2hha2UgYnkgc2VuZGluZyB0aGUgb2ZmZXIgdG8gdGhlIHN0cmVhbWVyXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlVzZU1pYyxuZXcgTShyZS5Vc2VNaWMsXCJVc2UgbWljcm9waG9uZVwiLFwiTWFrZSBicm93c2VyIHJlcXVlc3QgbWljcm9waG9uZSBhY2Nlc3MgYW5kIG9wZW4gYW4gaW5wdXQgYXVkaW8gdHJhY2suXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlN0YXJ0VmlkZW9NdXRlZCxuZXcgTShyZS5TdGFydFZpZGVvTXV0ZWQsXCJTdGFydCB2aWRlbyBtdXRlZFwiLFwiVmlkZW8gd2lsbCBzdGFydCBtdXRlZCBpZiB0cnVlLlwiLCExLGUpKSx0aGlzLmZsYWdzLnNldChyZS5TdXBwcmVzc0Jyb3dzZXJLZXlzLG5ldyBNKHJlLlN1cHByZXNzQnJvd3NlcktleXMsXCJTdXBwcmVzcyBicm93c2VyIGtleXNcIixcIlN1cHByZXNzIGNlcnRhaW4gYnJvd3NlciBrZXlzIHRoYXQgd2UgdXNlIGluIFVFLCBmb3IgZXhhbXBsZSBGNSB0byBzaG93IHNoYWRlciBjb21wbGV4aXR5IGluc3RlYWQgb2YgcmVmcmVzaCB0aGUgcGFnZS5cIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuUHJlZmVyU0ZVLG5ldyBNKHJlLlByZWZlclNGVSxcIlByZWZlciBTRlVcIixcIlRyeSB0byBjb25uZWN0IHRvIHRoZSBTRlUgaW5zdGVhZCBvZiBQMlAuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLklzUXVhbGl0eUNvbnRyb2xsZXIsbmV3IE0ocmUuSXNRdWFsaXR5Q29udHJvbGxlcixcIklzIHF1YWxpdHkgY29udHJvbGxlcj9cIixcIlRydWUgaWYgdGhpcyBwZWVyIGNvbnRyb2xzIHN0cmVhbSBxdWFsaXR5XCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkZvcmNlTW9ub0F1ZGlvLG5ldyBNKHJlLkZvcmNlTW9ub0F1ZGlvLFwiRm9yY2UgbW9ubyBhdWRpb1wiLFwiRm9yY2UgYnJvd3NlciB0byByZXF1ZXN0IG1vbm8gYXVkaW8gaW4gdGhlIFNEUFwiLCExLGUpKSx0aGlzLmZsYWdzLnNldChyZS5Gb3JjZVRVUk4sbmV3IE0ocmUuRm9yY2VUVVJOLFwiRm9yY2UgVFVSTlwiLFwiT25seSBnZW5lcmF0ZSBUVVJOL1JlbGF5ZWQgSUNFIGNhbmRpZGF0ZXMuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkFGS0RldGVjdGlvbixuZXcgTShyZS5BRktEZXRlY3Rpb24sXCJBRksgaWYgaWRsZVwiLFwiVGltZW91dCB0aGUgZXhwZXJpZW5jZSBpZiB1c2VyIGlzIEFGSyBmb3IgYSBwZXJpb2QuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uLG5ldyBNKHJlLk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uLFwiTWF0Y2ggdmlld3BvcnQgcmVzb2x1dGlvblwiLFwiUGl4ZWwgU3RyZWFtaW5nIHdpbGwgYmUgaW5zdHJ1Y3RlZCB0byBkeW5hbWljYWxseSByZXNpemUgdGhlIHZpZGVvIHN0cmVhbSB0byBtYXRjaCB0aGUgc2l6ZSBvZiB0aGUgdmlkZW8gZWxlbWVudC5cIiwhMSxlKSksdGhpcy5mbGFncy5zZXQocmUuSG92ZXJpbmdNb3VzZU1vZGUsbmV3IE0ocmUuSG92ZXJpbmdNb3VzZU1vZGUsXCJDb250cm9sIFNjaGVtZTogTG9ja2VkIE1vdXNlXCIsXCJFaXRoZXIgbG9ja2VkIG1vdXNlLCB3aGVyZSB0aGUgcG9pbnRlciBpcyBjb25zdW1lZCBieSB0aGUgdmlkZW8gYW5kIGxvY2tlZCB0byBpdCwgb3IgaG92ZXJpbmcgbW91c2UsIHdoZXJlIHRoZSBtb3VzZSBpcyBub3QgY29uc3VtZWQuXCIsITEsZSwoKGUsdCk9Pnt0LmxhYmVsPWBDb250cm9sIFNjaGVtZTogJHtlP1wiSG92ZXJpbmdcIjpcIkxvY2tlZFwifSBNb3VzZWB9KSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkZha2VNb3VzZVdpdGhUb3VjaGVzLG5ldyBNKHJlLkZha2VNb3VzZVdpdGhUb3VjaGVzLFwiRmFrZSBtb3VzZSB3aXRoIHRvdWNoZXNcIixcIkEgc2luZ2xlIGZpbmdlciB0b3VjaCBpcyBjb252ZXJ0ZWQgaW50byBhIG1vdXNlIGV2ZW50LiBUaGlzIGFsbG93cyBhIG5vbi10b3VjaCBhcHBsaWNhdGlvbiB0byBiZSBjb250cm9sbGVkIHBhcnRpYWxseSB2aWEgYSB0b3VjaCBkZXZpY2UuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLktleWJvYXJkSW5wdXQsbmV3IE0ocmUuS2V5Ym9hcmRJbnB1dCxcIktleWJvYXJkIGlucHV0XCIsXCJJZiBlbmFibGVkLCBzZW5kIGtleWJvYXJkIGV2ZW50cyB0byBzdHJlYW1lclwiLCEwLGUpKSx0aGlzLmZsYWdzLnNldChyZS5Nb3VzZUlucHV0LG5ldyBNKHJlLk1vdXNlSW5wdXQsXCJNb3VzZSBpbnB1dFwiLFwiSWYgZW5hYmxlZCwgc2VuZCBtb3VzZSBldmVudHMgdG8gc3RyZWFtZXJcIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuVG91Y2hJbnB1dCxuZXcgTShyZS5Ub3VjaElucHV0LFwiVG91Y2ggaW5wdXRcIixcIklmIGVuYWJsZWQsIHNlbmQgdG91Y2ggZXZlbnRzIHRvIHN0cmVhbWVyXCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkdhbWVwYWRJbnB1dCxuZXcgTShyZS5HYW1lcGFkSW5wdXQsXCJHYW1lcGFkIGlucHV0XCIsXCJJZiBlbmFibGVkLCBzZW5kIGdhbWVwYWQgZXZlbnRzIHRvIHN0cmVhbWVyXCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlhSQ29udHJvbGxlcklucHV0LG5ldyBNKHJlLlhSQ29udHJvbGxlcklucHV0LFwiWFIgY29udHJvbGxlciBpbnB1dFwiLFwiSWYgZW5hYmxlZCwgc2VuZCBYUiBjb250cm9sbGVyIGV2ZW50cyB0byBzdHJlYW1lclwiLCEwLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5BRktUaW1lb3V0U2VjcyxuZXcgdyhvZS5BRktUaW1lb3V0U2VjcyxcIkFGSyB0aW1lb3V0XCIsXCJUaGUgdGltZSAoaW4gc2Vjb25kcykgaXQgdGFrZXMgZm9yIHRoZSBhcHBsaWNhdGlvbiB0byB0aW1lIG91dCBpZiBBRksgdGltZW91dCBpcyBlbmFibGVkLlwiLDAsNjAwLDEyMCxlKSksdGhpcy5udW1lcmljUGFyYW1ldGVycy5zZXQob2UuTWluUVAsbmV3IHcob2UuTWluUVAsXCJNaW4gUVBcIixcIlRoZSBsb3dlciBib3VuZCBmb3IgdGhlIHF1YW50aXphdGlvbiBwYXJhbWV0ZXIgKFFQKSBvZiB0aGUgZW5jb2Rlci4gMCA9IEJlc3QgcXVhbGl0eSwgNTEgPSB3b3JzdCBxdWFsaXR5LlwiLDAsNTEsMCxlKSksdGhpcy5udW1lcmljUGFyYW1ldGVycy5zZXQob2UuTWF4UVAsbmV3IHcob2UuTWF4UVAsXCJNYXggUVBcIixcIlRoZSB1cHBlciBib3VuZCBmb3IgdGhlIHF1YW50aXphdGlvbiBwYXJhbWV0ZXIgKFFQKSBvZiB0aGUgZW5jb2Rlci4gMCA9IEJlc3QgcXVhbGl0eSwgNTEgPSB3b3JzdCBxdWFsaXR5LlwiLDAsNTEsNTEsZSkpLHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuc2V0KG9lLldlYlJUQ0ZQUyxuZXcgdyhvZS5XZWJSVENGUFMsXCJNYXggRlBTXCIsXCJUaGUgbWF4aW11bSBGUFMgdGhhdCBXZWJSVEMgd2lsbCB0cnkgdG8gdHJhbnNtaXQgZnJhbWVzIGF0LlwiLDEsOTk5LDYwLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5XZWJSVENNaW5CaXRyYXRlLG5ldyB3KG9lLldlYlJUQ01pbkJpdHJhdGUsXCJNaW4gQml0cmF0ZSAoa2JwcylcIixcIlRoZSBtaW5pbXVtIGJpdHJhdGUgdGhhdCBXZWJSVEMgc2hvdWxkIHVzZS5cIiwwLDVlNSwwLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5XZWJSVENNYXhCaXRyYXRlLG5ldyB3KG9lLldlYlJUQ01heEJpdHJhdGUsXCJNYXggQml0cmF0ZSAoa2JwcylcIixcIlRoZSBtYXhpbXVtIGJpdHJhdGUgdGhhdCBXZWJSVEMgc2hvdWxkIHVzZS5cIiwwLDVlNSwwLGUpKX1fYWRkT25OdW1lcmljU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihlLHQpe3RoaXMubnVtZXJpY1BhcmFtZXRlcnMuaGFzKGUpJiZ0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmdldChlKS5hZGRPbkNoYW5nZWRMaXN0ZW5lcih0KX1fYWRkT25PcHRpb25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKGUsdCl7dGhpcy5vcHRpb25QYXJhbWV0ZXJzLmhhcyhlKSYmdGhpcy5vcHRpb25QYXJhbWV0ZXJzLmdldChlKS5hZGRPbkNoYW5nZWRMaXN0ZW5lcih0KX1nZXROdW1lcmljU2V0dGluZ1ZhbHVlKGUpe2lmKHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuaGFzKGUpKXJldHVybiB0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmdldChlKS5udW1iZXI7dGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBubyBudW1lcmljIHNldHRpbmcgd2l0aCB0aGUgaWQgb2YgJHtlfWApfWdldFRleHRTZXR0aW5nVmFsdWUoZSl7aWYodGhpcy50ZXh0UGFyYW1ldGVycy5oYXMoZSkpcmV0dXJuIHRoaXMudGV4dFBhcmFtZXRlcnMuZ2V0KGUpLnZhbHVlO3Rocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgbm8gbnVtZXJpYyBzZXR0aW5nIHdpdGggdGhlIGlkIG9mICR7ZX1gKX1zZXROdW1lcmljU2V0dGluZyhlLHQpe2lmKCF0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmhhcyhlKSl0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIG51bWVyaWMgc2V0dGluZyB3aXRoIHRoZSBpZCBvZiAke2V9YCk7dGhpcy5udW1lcmljUGFyYW1ldGVycy5nZXQoZSkubnVtYmVyPXR9X2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihlLHQpe3RoaXMuZmxhZ3MuaGFzKGUpJiYodGhpcy5mbGFncy5nZXQoZSkub25DaGFuZ2U9dCl9X2FkZE9uVGV4dFNldHRpbmdDaGFuZ2VkTGlzdGVuZXIoZSx0KXt0aGlzLnRleHRQYXJhbWV0ZXJzLmhhcyhlKSYmKHRoaXMudGV4dFBhcmFtZXRlcnMuZ2V0KGUpLm9uQ2hhbmdlPXQpfWdldFNldHRpbmdPcHRpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9uUGFyYW1ldGVycy5nZXQoZSl9aXNGbGFnRW5hYmxlZChlKXtyZXR1cm4gdGhpcy5mbGFncy5nZXQoZSkuZmxhZ31zZXRGbGFnRW5hYmxlZChlLHQpe3RoaXMuZmxhZ3MuaGFzKGUpP3RoaXMuZmxhZ3MuZ2V0KGUpLmZsYWc9dDppLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYENhbm5vdCB0b2dnbGUgZmxhZyBjYWxsZWQgJHtlfSAtIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBDb25maWcuZmxhZ3MgbWFwLmApfXNldFRleHRTZXR0aW5nKGUsdCl7dGhpcy50ZXh0UGFyYW1ldGVycy5oYXMoZSk/dGhpcy50ZXh0UGFyYW1ldGVycy5nZXQoZSkudGV4dD10OmkuV2FybmluZyhpLkdldFN0YWNrVHJhY2UoKSxgQ2Fubm90IHNldCB0ZXh0IHNldHRpbmcgY2FsbGVkICR7ZX0gLSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgQ29uZmlnLnRleHRQYXJhbWV0ZXJzIG1hcC5gKX1zZXRPcHRpb25TZXR0aW5nT3B0aW9ucyhlLHQpe3RoaXMub3B0aW9uUGFyYW1ldGVycy5oYXMoZSk/dGhpcy5vcHRpb25QYXJhbWV0ZXJzLmdldChlKS5vcHRpb25zPXQ6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLGBDYW5ub3Qgc2V0IHRleHQgc2V0dGluZyBjYWxsZWQgJHtlfSAtIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBDb25maWcub3B0aW9uUGFyYW1ldGVycyBtYXAuYCl9c2V0T3B0aW9uU2V0dGluZ1ZhbHVlKGUsdCl7dGhpcy5vcHRpb25QYXJhbWV0ZXJzLmhhcyhlKT90aGlzLm9wdGlvblBhcmFtZXRlcnMuZ2V0KGUpLnNlbGVjdGVkPXQ6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLGBDYW5ub3Qgc2V0IHRleHQgc2V0dGluZyBjYWxsZWQgJHtlfSAtIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBDb25maWcuZW51bVBhcmFtZXRlcnMgbWFwLmApfXNldEZsYWdMYWJlbChlLHQpe3RoaXMuZmxhZ3MuaGFzKGUpP3RoaXMuZmxhZ3MuZ2V0KGUpLmxhYmVsPXQ6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLGBDYW5ub3Qgc2V0IGxhYmVsIGZvciBmbGFnIGNhbGxlZCAke2V9IC0gaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIENvbmZpZy5mbGFncyBtYXAuYCl9c2V0U2V0dGluZ3MoZSl7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMoZSkpaWUodCk/dGhpcy5zZXRGbGFnRW5hYmxlZCh0LGVbdF0pOmFlKHQpP3RoaXMuc2V0TnVtZXJpY1NldHRpbmcodCxlW3RdKTpkZSh0KT90aGlzLnNldFRleHRTZXR0aW5nKHQsZVt0XSk6aGUodCkmJnRoaXMuc2V0T3B0aW9uU2V0dGluZ1ZhbHVlKHQsZVt0XSl9Z2V0U2V0dGluZ3MoKXtjb25zdCBlPXt9O2Zvcihjb25zdFt0LHNdb2YgdGhpcy5mbGFncy5lbnRyaWVzKCkpZVt0XT1zLmZsYWc7Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmVudHJpZXMoKSllW3RdPXMubnVtYmVyO2Zvcihjb25zdFt0LHNdb2YgdGhpcy50ZXh0UGFyYW1ldGVycy5lbnRyaWVzKCkpZVt0XT1zLnRleHQ7Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLm9wdGlvblBhcmFtZXRlcnMuZW50cmllcygpKWVbdF09cy5zZWxlY3RlZDtyZXR1cm4gZX1nZXRGbGFncygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhZ3MudmFsdWVzKCkpfWdldFRleHRTZXR0aW5ncygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMudGV4dFBhcmFtZXRlcnMudmFsdWVzKCkpfWdldE51bWVyaWNTZXR0aW5ncygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMubnVtZXJpY1BhcmFtZXRlcnMudmFsdWVzKCkpfWdldE9wdGlvblNldHRpbmdzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5vcHRpb25QYXJhbWV0ZXJzLnZhbHVlcygpKX1fcmVnaXN0ZXJPbkNoYW5nZUV2ZW50cyhlKXtmb3IoY29uc3QgdCBvZiB0aGlzLmZsYWdzLmtleXMoKSl7Y29uc3Qgcz10aGlzLmZsYWdzLmdldCh0KTtzJiYocy5vbkNoYW5nZUVtaXQ9dD0+ZS5kaXNwYXRjaEV2ZW50KG5ldyBaKHtpZDpzLmlkLHR5cGU6XCJmbGFnXCIsdmFsdWU6dCx0YXJnZXQ6c30pKSl9Zm9yKGNvbnN0IHQgb2YgdGhpcy5udW1lcmljUGFyYW1ldGVycy5rZXlzKCkpe2NvbnN0IHM9dGhpcy5udW1lcmljUGFyYW1ldGVycy5nZXQodCk7cyYmKHMub25DaGFuZ2VFbWl0PXQ9PmUuZGlzcGF0Y2hFdmVudChuZXcgWih7aWQ6cy5pZCx0eXBlOlwibnVtYmVyXCIsdmFsdWU6dCx0YXJnZXQ6c30pKSl9Zm9yKGNvbnN0IHQgb2YgdGhpcy50ZXh0UGFyYW1ldGVycy5rZXlzKCkpe2NvbnN0IHM9dGhpcy50ZXh0UGFyYW1ldGVycy5nZXQodCk7cyYmKHMub25DaGFuZ2VFbWl0PXQ9PmUuZGlzcGF0Y2hFdmVudChuZXcgWih7aWQ6cy5pZCx0eXBlOlwidGV4dFwiLHZhbHVlOnQsdGFyZ2V0OnN9KSkpfWZvcihjb25zdCB0IG9mIHRoaXMub3B0aW9uUGFyYW1ldGVycy5rZXlzKCkpe2NvbnN0IHM9dGhpcy5vcHRpb25QYXJhbWV0ZXJzLmdldCh0KTtzJiYocy5vbkNoYW5nZUVtaXQ9dD0+ZS5kaXNwYXRjaEV2ZW50KG5ldyBaKHtpZDpzLmlkLHR5cGU6XCJvcHRpb25cIix2YWx1ZTp0LHRhcmdldDpzfSkpKX19fXZhciB1ZTshZnVuY3Rpb24oZSl7ZVtlLkxvY2tlZE1vdXNlPTBdPVwiTG9ja2VkTW91c2VcIixlW2UuSG92ZXJpbmdNb3VzZT0xXT1cIkhvdmVyaW5nTW91c2VcIn0odWV8fCh1ZT17fSkpO2NsYXNzIG1le2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLmNsb3NlVGltZW91dD0xMCx0aGlzLmFjdGl2ZT0hMSx0aGlzLmNvdW50ZG93bkFjdGl2ZT0hMSx0aGlzLndhcm5UaW1lcj12b2lkIDAsdGhpcy5jb3VudERvd249MCx0aGlzLmNvdW50RG93blRpbWVyPXZvaWQgMCx0aGlzLmNvbmZpZz1lLHRoaXMucGl4ZWxTdHJlYW1pbmc9dCx0aGlzLm9uRGlzbWlzc0Fmaz1zLHRoaXMub25BRktUaW1lZE91dENhbGxiYWNrPSgpPT57Y29uc29sZS5sb2coXCJBRksgdGltZWQgb3V0LCBkaWQgeW91IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyBjYWxsYmFjaz9cIil9fW9uQWZrQ2xpY2soKXtjbGVhckludGVydmFsKHRoaXMuY291bnREb3duVGltZXIpLCh0aGlzLmFjdGl2ZXx8dGhpcy5jb3VudGRvd25BY3RpdmUpJiYodGhpcy5zdGFydEFma1dhcm5pbmdUaW1lcigpLHRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgeCkpfXN0YXJ0QWZrV2FybmluZ1RpbWVyKCl7dGhpcy5jb25maWcuZ2V0TnVtZXJpY1NldHRpbmdWYWx1ZShvZS5BRktUaW1lb3V0U2Vjcyk+MCYmdGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5BRktEZXRlY3Rpb24pP3RoaXMuYWN0aXZlPSEwOnRoaXMuYWN0aXZlPSExLHRoaXMucmVzZXRBZmtXYXJuaW5nVGltZXIoKX1zdG9wQWZrV2FybmluZ1RpbWVyKCl7dGhpcy5hY3RpdmU9ITEsdGhpcy5jb3VudGRvd25BY3RpdmU9ITEsY2xlYXJJbnRlcnZhbCh0aGlzLndhcm5UaW1lciksY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50RG93blRpbWVyKX1wYXVzZUFma1dhcm5pbmdUaW1lcigpe3RoaXMuYWN0aXZlPSExfXJlc2V0QWZrV2FybmluZ1RpbWVyKCl7dGhpcy5hY3RpdmUmJnRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuQUZLRGV0ZWN0aW9uKSYmKGNsZWFyVGltZW91dCh0aGlzLndhcm5UaW1lciksdGhpcy53YXJuVGltZXI9c2V0VGltZW91dCgoKCk9PnRoaXMuYWN0aXZhdGVBZmtFdmVudCgpKSwxZTMqdGhpcy5jb25maWcuZ2V0TnVtZXJpY1NldHRpbmdWYWx1ZShvZS5BRktUaW1lb3V0U2VjcykpKX1hY3RpdmF0ZUFma0V2ZW50KCl7dGhpcy5wYXVzZUFma1dhcm5pbmdUaW1lcigpLHRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgUih7Y291bnREb3duOnRoaXMuY291bnREb3duLGRpc21pc3NBZms6dGhpcy5vbkRpc21pc3NBZmt9KSksdGhpcy5jb3VudERvd249dGhpcy5jbG9zZVRpbWVvdXQsdGhpcy5jb3VudGRvd25BY3RpdmU9ITAsdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBMKHtjb3VudERvd246dGhpcy5jb3VudERvd259KSksdGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Ib3ZlcmluZ01vdXNlTW9kZSl8fGRvY3VtZW50LmV4aXRQb2ludGVyTG9jayYmZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCksdGhpcy5jb3VudERvd25UaW1lcj1zZXRJbnRlcnZhbCgoKCk9Pnt0aGlzLmNvdW50RG93bi0tLDA9PXRoaXMuY291bnREb3duPyh0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IEEpLHRoaXMub25BRktUaW1lZE91dENhbGxiYWNrKCksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJZb3UgaGF2ZSBiZWVuIGRpc2Nvbm5lY3RlZCBkdWUgdG8gaW5hY3Rpdml0eVwiKSx0aGlzLnN0b3BBZmtXYXJuaW5nVGltZXIoKSk6dGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBMKHtjb3VudERvd246dGhpcy5jb3VudERvd259KSl9KSwxZTMpfX1jbGFzcyBTZXtjb25zdHJ1Y3Rvcigpe3RoaXMuaXNSZWNlaXZpbmdGcmVlemVGcmFtZT0hMX1nZXREYXRhQ2hhbm5lbEluc3RhbmNlKCl7cmV0dXJuIHRoaXN9Y3JlYXRlRGF0YUNoYW5uZWwoZSx0LHMpe3RoaXMucGVlckNvbm5lY3Rpb249ZSx0aGlzLmxhYmVsPXQsdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnM9cyxudWxsPT1zJiYodGhpcy5kYXRhY2hhbm5lbE9wdGlvbnM9e30sdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMub3JkZXJlZD0hMCksdGhpcy5kYXRhQ2hhbm5lbD10aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMubGFiZWwsdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMpLHRoaXMuc2V0dXBEYXRhQ2hhbm5lbCgpfXNldHVwRGF0YUNoYW5uZWwoKXt0aGlzLmRhdGFDaGFubmVsLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHRoaXMuZGF0YUNoYW5uZWwub25vcGVuPWU9PnRoaXMuaGFuZGxlT25PcGVuKGUpLHRoaXMuZGF0YUNoYW5uZWwub25jbG9zZT1lPT50aGlzLmhhbmRsZU9uQ2xvc2UoZSksdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2U9ZT0+dGhpcy5oYW5kbGVPbk1lc3NhZ2UoZSksdGhpcy5kYXRhQ2hhbm5lbC5vbmVycm9yPWU9PnRoaXMuaGFuZGxlT25FcnJvcihlKX1oYW5kbGVPbk9wZW4oZSl7dmFyIHQ7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYERhdGEgQ2hhbm5lbCAoJHt0aGlzLmxhYmVsfSkgb3BlbmVkLmAsNyksdGhpcy5vbk9wZW4obnVsbD09PSh0PXRoaXMuZGF0YUNoYW5uZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmxhYmVsLGUpfWhhbmRsZU9uQ2xvc2UoZSl7dmFyIHQ7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYERhdGEgQ2hhbm5lbCAoJHt0aGlzLmxhYmVsfSkgY2xvc2VkLmAsNyksdGhpcy5vbkNsb3NlKG51bGw9PT0odD10aGlzLmRhdGFDaGFubmVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sYWJlbCxlKX1oYW5kbGVPbk1lc3NhZ2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYERhdGEgQ2hhbm5lbCAoJHt0aGlzLmxhYmVsfSkgbWVzc2FnZTogJHtlfWAsOCl9aGFuZGxlT25FcnJvcihlKXt2YXIgdDtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgRGF0YSBDaGFubmVsICgke3RoaXMubGFiZWx9KSBlcnJvcjogJHtlfWAsNyksdGhpcy5vbkVycm9yKG51bGw9PT0odD10aGlzLmRhdGFDaGFubmVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sYWJlbCxlKX1vbk9wZW4oZSx0KXt9b25DbG9zZShlLHQpe31vbkVycm9yKGUsdCl7fX1jbGFzcyBwZXt9Y2xhc3MgdmV7fWNsYXNzIENle31jbGFzcyBmZXt9Y2xhc3MgVGV7fWNsYXNzIEVle31jbGFzcyB5ZXt9Y2xhc3MgYmV7fWNsYXNzIE1le2NvbnN0cnVjdG9yKCl7dGhpcy5pbmJvdW5kVmlkZW9TdGF0cz1uZXcgdmUsdGhpcy5pbmJvdW5kQXVkaW9TdGF0cz1uZXcgcGUsdGhpcy5jYW5kaWRhdGVQYWlyPW5ldyBUZSx0aGlzLkRhdGFDaGFubmVsU3RhdHM9bmV3IENlLHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzPW5ldyBFZSx0aGlzLnNlc3Npb25TdGF0cz1uZXcgeWUsdGhpcy5zdHJlYW1TdGF0cz1uZXcgYmUsdGhpcy5jb2RlY3M9bmV3IE1hcH1wcm9jZXNzU3RhdHMoZSl7dGhpcy5sb2NhbENhbmRpZGF0ZXM9bmV3IEFycmF5LHRoaXMucmVtb3RlQ2FuZGlkYXRlcz1uZXcgQXJyYXksZS5mb3JFYWNoKChlPT57c3dpdGNoKGUudHlwZSl7Y2FzZVwiY2FuZGlkYXRlLXBhaXJcIjp0aGlzLmhhbmRsZUNhbmRpZGF0ZVBhaXIoZSk7YnJlYWs7Y2FzZVwiY2VydGlmaWNhdGVcIjpjYXNlXCJtZWRpYS1zb3VyY2VcIjpjYXNlXCJvdXRib3VuZC1ydHBcIjpjYXNlXCJwZWVyLWNvbm5lY3Rpb25cIjpjYXNlXCJyZW1vdGUtaW5ib3VuZC1ydHBcIjpjYXNlXCJ0cmFuc3BvcnRcIjpicmVhaztjYXNlXCJjb2RlY1wiOnRoaXMuaGFuZGxlQ29kZWMoZSk7YnJlYWs7Y2FzZVwiZGF0YS1jaGFubmVsXCI6dGhpcy5oYW5kbGVEYXRhQ2hhbm5lbChlKTticmVhaztjYXNlXCJpbmJvdW5kLXJ0cFwiOnRoaXMuaGFuZGxlSW5Cb3VuZFJUUChlKTticmVhaztjYXNlXCJsb2NhbC1jYW5kaWRhdGVcIjp0aGlzLmhhbmRsZUxvY2FsQ2FuZGlkYXRlKGUpO2JyZWFrO2Nhc2VcInJlbW90ZS1jYW5kaWRhdGVcIjp0aGlzLmhhbmRsZVJlbW90ZUNhbmRpZGF0ZShlKTticmVhaztjYXNlXCJyZW1vdGUtb3V0Ym91bmQtcnRwXCI6dGhpcy5oYW5kbGVSZW1vdGVPdXRCb3VuZChlKTticmVhaztjYXNlXCJ0cmFja1wiOnRoaXMuaGFuZGxlVHJhY2soZSk7YnJlYWs7Y2FzZVwic3RyZWFtXCI6dGhpcy5oYW5kbGVTdHJlYW0oZSk7YnJlYWs7ZGVmYXVsdDppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwidW5oYW5kbGVkIFN0YXQgVHlwZVwiKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlKX19KSl9aGFuZGxlU3RyZWFtKGUpe3RoaXMuc3RyZWFtU3RhdHM9ZX1oYW5kbGVDYW5kaWRhdGVQYWlyKGUpe3RoaXMuY2FuZGlkYXRlUGFpci5ieXRlc1JlY2VpdmVkPWUuYnl0ZXNSZWNlaXZlZCx0aGlzLmNhbmRpZGF0ZVBhaXIuYnl0ZXNTZW50PWUuYnl0ZXNTZW50LHRoaXMuY2FuZGlkYXRlUGFpci5sb2NhbENhbmRpZGF0ZUlkPWUubG9jYWxDYW5kaWRhdGVJZCx0aGlzLmNhbmRpZGF0ZVBhaXIucmVtb3RlQ2FuZGlkYXRlSWQ9ZS5yZW1vdGVDYW5kaWRhdGVJZCx0aGlzLmNhbmRpZGF0ZVBhaXIubm9taW5hdGVkPWUubm9taW5hdGVkLHRoaXMuY2FuZGlkYXRlUGFpci5yZWFkYWJsZT1lLnJlYWRhYmxlLHRoaXMuY2FuZGlkYXRlUGFpci5zZWxlY3RlZD1lLnNlbGVjdGVkLHRoaXMuY2FuZGlkYXRlUGFpci53cml0YWJsZT1lLndyaXRhYmxlLHRoaXMuY2FuZGlkYXRlUGFpci5zdGF0ZT1lLnN0YXRlLHRoaXMuY2FuZGlkYXRlUGFpci5jdXJyZW50Um91bmRUcmlwVGltZT1lLmN1cnJlbnRSb3VuZFRyaXBUaW1lfWhhbmRsZURhdGFDaGFubmVsKGUpe3RoaXMuRGF0YUNoYW5uZWxTdGF0cy5ieXRlc1JlY2VpdmVkPWUuYnl0ZXNSZWNlaXZlZCx0aGlzLkRhdGFDaGFubmVsU3RhdHMuYnl0ZXNTZW50PWUuYnl0ZXNTZW50LHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5kYXRhQ2hhbm5lbElkZW50aWZpZXI9ZS5kYXRhQ2hhbm5lbElkZW50aWZpZXIsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLmlkPWUuaWQsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLmxhYmVsPWUubGFiZWwsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLm1lc3NhZ2VzUmVjZWl2ZWQ9ZS5tZXNzYWdlc1JlY2VpdmVkLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5tZXNzYWdlc1NlbnQ9ZS5tZXNzYWdlc1NlbnQsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLnByb3RvY29sPWUucHJvdG9jb2wsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLnN0YXRlPWUuc3RhdGUsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLnRpbWVzdGFtcD1lLnRpbWVzdGFtcH1oYW5kbGVMb2NhbENhbmRpZGF0ZShlKXtjb25zdCB0PW5ldyBmZTt0LmxhYmVsPVwibG9jYWwtY2FuZGlkYXRlXCIsdC5hZGRyZXNzPWUuYWRkcmVzcyx0LnBvcnQ9ZS5wb3J0LHQucHJvdG9jb2w9ZS5wcm90b2NvbCx0LmNhbmRpZGF0ZVR5cGU9ZS5jYW5kaWRhdGVUeXBlLHQuaWQ9ZS5pZCx0aGlzLmxvY2FsQ2FuZGlkYXRlcy5wdXNoKHQpfWhhbmRsZVJlbW90ZUNhbmRpZGF0ZShlKXtjb25zdCB0PW5ldyBmZTt0LmxhYmVsPVwibG9jYWwtY2FuZGlkYXRlXCIsdC5hZGRyZXNzPWUuYWRkcmVzcyx0LnBvcnQ9ZS5wb3J0LHQucHJvdG9jb2w9ZS5wcm90b2NvbCx0LmlkPWUuaWQsdC5jYW5kaWRhdGVUeXBlPWUuY2FuZGlkYXRlVHlwZSx0aGlzLnJlbW90ZUNhbmRpZGF0ZXMucHVzaCh0KX1oYW5kbGVJbkJvdW5kUlRQKGUpe3N3aXRjaChlLmtpbmQpe2Nhc2VcInZpZGVvXCI6dGhpcy5pbmJvdW5kVmlkZW9TdGF0cz1lLG51bGwhPXRoaXMubGFzdFZpZGVvU3RhdHMmJih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGU9OCoodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkLXRoaXMubGFzdFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZCkvKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMudGltZXN0YW1wLXRoaXMubGFzdFZpZGVvU3RhdHMudGltZXN0YW1wKSx0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGU9TWF0aC5mbG9vcih0aGlzLmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUpKSx0aGlzLmxhc3RWaWRlb1N0YXRzPU9iamVjdC5hc3NpZ24oe30sdGhpcy5pbmJvdW5kVmlkZW9TdGF0cyk7YnJlYWs7Y2FzZVwiYXVkaW9cIjp0aGlzLmluYm91bmRBdWRpb1N0YXRzPWUsbnVsbCE9dGhpcy5sYXN0QXVkaW9TdGF0cyYmKHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMuYml0cmF0ZT04Kih0aGlzLmluYm91bmRBdWRpb1N0YXRzLmJ5dGVzUmVjZWl2ZWQtdGhpcy5sYXN0QXVkaW9TdGF0cy5ieXRlc1JlY2VpdmVkKS8odGhpcy5pbmJvdW5kQXVkaW9TdGF0cy50aW1lc3RhbXAtdGhpcy5sYXN0QXVkaW9TdGF0cy50aW1lc3RhbXApLHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMuYml0cmF0ZT1NYXRoLmZsb29yKHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMuYml0cmF0ZSkpLHRoaXMubGFzdEF1ZGlvU3RhdHM9T2JqZWN0LmFzc2lnbih7fSx0aGlzLmluYm91bmRBdWRpb1N0YXRzKTticmVhaztkZWZhdWx0OmkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiS2luZCBpcyBub3QgaGFuZGxlZFwiKX19aGFuZGxlUmVtb3RlT3V0Qm91bmQoZSl7XCJ2aWRlb1wiPT09ZS5raW5kJiYodGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMuYnl0ZXNTZW50PWUuYnl0ZXNTZW50LHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLmlkPWUuaWQsdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMubG9jYWxJZD1lLmxvY2FsSWQsdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMucGFja2V0c1NlbnQ9ZS5wYWNrZXRzU2VudCx0aGlzLm91dEJvdW5kVmlkZW9TdGF0cy5yZW1vdGVUaW1lc3RhbXA9ZS5yZW1vdGVUaW1lc3RhbXAsdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMudGltZXN0YW1wPWUudGltZXN0YW1wKX1oYW5kbGVUcmFjayhlKXtcInRyYWNrXCIhPT1lLnR5cGV8fFwidmlkZW9fbGFiZWxcIiE9PWUudHJhY2tJZGVudGlmaWVyJiZcInZpZGVvXCIhPT1lLmtpbmR8fCh0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0Ryb3BwZWQ9ZS5mcmFtZXNEcm9wcGVkLHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzUmVjZWl2ZWQ9ZS5mcmFtZXNSZWNlaXZlZCx0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lSGVpZ2h0PWUuZnJhbWVIZWlnaHQsdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZVdpZHRoPWUuZnJhbWVXaWR0aCl9aGFuZGxlQ29kZWMoZSl7Y29uc3QgdD1lLmlkLHM9YCR7ZS5taW1lVHlwZS5yZXBsYWNlKFwidmlkZW8vXCIsXCJcIikucmVwbGFjZShcImF1ZGlvL1wiLFwiXCIpfSR7ZS5zZHBGbXRwTGluZT9gICR7ZS5zZHBGbXRwTGluZX1gOlwiXCJ9YDt0aGlzLmNvZGVjcy5zZXQodCxzKX1oYW5kbGVTZXNzaW9uU3RhdGlzdGljcyhlLHQscyl7Y29uc3Qgbj1EYXRlLm5vdygpLWU7dGhpcy5zZXNzaW9uU3RhdHMucnVuVGltZT1uZXcgRGF0ZShuKS50b0lTT1N0cmluZygpLnN1YnN0cigxMSw4KS50b1N0cmluZygpO2NvbnN0IHI9bnVsbD09PXQ/XCJOb3Qgc2VudCB5ZXRcIjp0P1widHJ1ZVwiOlwiZmFsc2VcIjt0aGlzLnNlc3Npb25TdGF0cy5jb250cm9sc1N0cmVhbUlucHV0PXIsdGhpcy5zZXNzaW9uU3RhdHMudmlkZW9FbmNvZGVyQXZnUVA9c31pc051bWJlcihlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmaXNGaW5pdGUoZSl9fWNvbnN0IHdlPShQZT17cGFyc2VSdHBQYXJhbWV0ZXJzOigpPT5lLnBhcnNlUnRwUGFyYW1ldGVycyxzcGxpdFNlY3Rpb25zOigpPT5lLnNwbGl0U2VjdGlvbnN9LGtlPXt9LG4uZChrZSxQZSksa2UpO3ZhciBQZSxrZSxSZSxMZSx4ZT1mdW5jdGlvbihlLHQscyxuKXtyZXR1cm4gbmV3KHN8fChzPVByb21pc2UpKSgoZnVuY3Rpb24ocixpKXtmdW5jdGlvbiBvKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7aShlKX19ZnVuY3Rpb24gYShlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXtpKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIHM/dDpuZXcgcygoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihvLGEpfWwoKG49bi5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX07Y2xhc3MgQWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuY29uZmlnPXQsdGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbihlLHMpfWNyZWF0ZVBlZXJDb25uZWN0aW9uKGUsdCl7dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Gb3JjZVRVUk4pJiYoZS5pY2VUcmFuc3BvcnRQb2xpY3k9XCJyZWxheVwiLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiRm9yY2luZyBUVVJOIHVzYWdlIGJ5IHNldHRpbmcgSUNFIFRyYW5zcG9ydCBQb2xpY3kgaW4gcGVlciBjb25uZWN0aW9uIGNvbmZpZy5cIikpLHRoaXMucGVlckNvbm5lY3Rpb249bmV3IFJUQ1BlZXJDb25uZWN0aW9uKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1lPT50aGlzLmhhbmRsZVNpZ25hbFN0YXRlQ2hhbmdlKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZT0+dGhpcy5oYW5kbGVJY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UoZSksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPWU9PnRoaXMuaGFuZGxlSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UoZSksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrPWU9PnRoaXMuaGFuZGxlT25UcmFjayhlKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPWU9PnRoaXMuaGFuZGxlSWNlQ2FuZGlkYXRlKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub25kYXRhY2hhbm5lbD1lPT50aGlzLmhhbmRsZURhdGFDaGFubmVsKGUpLHRoaXMuYWdncmVnYXRlZFN0YXRzPW5ldyBNZSx0aGlzLnByZWZlcnJlZENvZGVjPXQsdGhpcy51cGRhdGVDb2RlY1NlbGVjdGlvbj0hMH1jcmVhdGVPZmZlcihlLHQpe3JldHVybiB4ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiQ3JlYXRlIE9mZmVyXCIsNik7Y29uc3Qgcz1cImxvY2FsaG9zdFwiPT09bG9jYXRpb24uaG9zdG5hbWV8fFwiMTI3LjAuMC4xXCI9PT1sb2NhdGlvbi5ob3N0bmFtZSxuPVwiaHR0cHM6XCI9PT1sb2NhdGlvbi5wcm90b2NvbDtsZXQgcj10LmlzRmxhZ0VuYWJsZWQocmUuVXNlTWljKTshcnx8c3x8bnx8KHI9ITEsaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxcIk1pY3JvcGhvbmUgYWNjZXNzIGluIHRoZSBicm93c2VyIHdpbGwgbm90IHdvcmsgaWYgeW91IGFyZSBub3Qgb24gSFRUUFMgb3IgbG9jYWxob3N0LiBEaXNhYmxpbmcgbWljIGFjY2Vzcy5cIiksaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxcIkZvciB0ZXN0aW5nIHlvdSBjYW4gZW5hYmxlIEhUVFAgbWljcm9waG9uZSBhY2Nlc3MgQ2hyb21lIGJ5IHZpc2l0aW5nIGNocm9tZTovL2ZsYWdzLyBhbmQgZW5hYmxpbmcgJ3Vuc2FmZWx5LXRyZWF0LWluc2VjdXJlLW9yaWdpbi1hcy1zZWN1cmUnXCIpKSx0aGlzLnNldHVwVHJhbnNjZWl2ZXJzQXN5bmMocikuZmluYWxseSgoKCk9Pnt0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKGUpLnRoZW4oKGU9Pnt0aGlzLnNob3dUZXh0T3ZlcmxheUNvbm5lY3RpbmcoKSxlLnNkcD10aGlzLm11bmdlU0RQKGUuc2RwLHIpLHRoaXMucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKSx0aGlzLm9uU2VuZFdlYlJUQ09mZmVyKGUpfSkpLmNhdGNoKCgoKT0+e3RoaXMuc2hvd1RleHRPdmVybGF5U2V0dXBGYWlsdXJlKCl9KSl9KSl9KSl9cmVjZWl2ZU9mZmVyKGUsdCl7cmV0dXJuIHhlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJSZWNlaXZlIE9mZmVyXCIsNiksdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihlKS50aGVuKCgoKT0+e2NvbnN0IGU9XCJsb2NhbGhvc3RcIj09PWxvY2F0aW9uLmhvc3RuYW1lfHxcIjEyNy4wLjAuMVwiPT09bG9jYXRpb24uaG9zdG5hbWUscz1cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2w7bGV0IG49dC5pc0ZsYWdFbmFibGVkKHJlLlVzZU1pYyk7IW58fGV8fHN8fChuPSExLGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksXCJNaWNyb3Bob25lIGFjY2VzcyBpbiB0aGUgYnJvd3NlciB3aWxsIG5vdCB3b3JrIGlmIHlvdSBhcmUgbm90IG9uIEhUVFBTIG9yIGxvY2FsaG9zdC4gRGlzYWJsaW5nIG1pYyBhY2Nlc3MuXCIpLGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksXCJGb3IgdGVzdGluZyB5b3UgY2FuIGVuYWJsZSBIVFRQIG1pY3JvcGhvbmUgYWNjZXNzIENocm9tZSBieSB2aXNpdGluZyBjaHJvbWU6Ly9mbGFncy8gYW5kIGVuYWJsaW5nICd1bnNhZmVseS10cmVhdC1pbnNlY3VyZS1vcmlnaW4tYXMtc2VjdXJlJ1wiKSksdGhpcy5zZXR1cFRyYW5zY2VpdmVyc0FzeW5jKG4pLmZpbmFsbHkoKCgpPT57dGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoKS50aGVuKChlPT4oZS5zZHA9dGhpcy5tdW5nZVNEUChlLnNkcCxuKSx0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSkpKSkudGhlbigoKCk9Pnt0aGlzLm9uU2VuZFdlYlJUQ0Fuc3dlcih0aGlzLnBlZXJDb25uZWN0aW9uLmN1cnJlbnRMb2NhbERlc2NyaXB0aW9uKX0pKS5jYXRjaCgoKCk9PntpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiY3JlYXRlQW5zd2VyKCkgZmFpbGVkXCIpfSkpfSkpfSkpLHRoaXMuY29uZmlnLnNldE9wdGlvblNldHRpbmdPcHRpb25zKGNlLlByZWZlcnJlZENvZGVjLHRoaXMucGFyc2VBdmFpbGFibGVDb2RlY3MoZSkuZmlsdGVyKChlPT50aGlzLmNvbmZpZy5nZXRTZXR0aW5nT3B0aW9uKGNlLlByZWZlcnJlZENvZGVjKS5vcHRpb25zLmluY2x1ZGVzKGUpKSkpfSkpfXJlY2VpdmVBbnN3ZXIoZSl7dGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihlKSx0aGlzLmNvbmZpZy5zZXRPcHRpb25TZXR0aW5nT3B0aW9ucyhjZS5QcmVmZXJyZWRDb2RlYyx0aGlzLnBhcnNlQXZhaWxhYmxlQ29kZWNzKGUpLmZpbHRlcigoZT0+dGhpcy5jb25maWcuZ2V0U2V0dGluZ09wdGlvbihjZS5QcmVmZXJyZWRDb2RlYykub3B0aW9ucy5pbmNsdWRlcyhlKSkpKX1nZW5lcmF0ZVN0YXRzKCl7dGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cyhudWxsKS50aGVuKChlPT57dGhpcy5hZ2dyZWdhdGVkU3RhdHMucHJvY2Vzc1N0YXRzKGUpLHRoaXMub25WaWRlb1N0YXRzKHRoaXMuYWdncmVnYXRlZFN0YXRzKSx0aGlzLnVwZGF0ZUNvZGVjU2VsZWN0aW9uJiZ0aGlzLmNvbmZpZy5zZXRPcHRpb25TZXR0aW5nVmFsdWUoY2UuUHJlZmVycmVkQ29kZWMsdGhpcy5hZ2dyZWdhdGVkU3RhdHMuY29kZWNzLmdldCh0aGlzLmFnZ3JlZ2F0ZWRTdGF0cy5pbmJvdW5kVmlkZW9TdGF0cy5jb2RlY0lkKSl9KSl9Y2xvc2UoKXt0aGlzLnBlZXJDb25uZWN0aW9uJiYodGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpLHRoaXMucGVlckNvbm5lY3Rpb249bnVsbCl9bXVuZ2VTRFAoZSx0KXtjb25zdCBzPWU7cy5yZXBsYWNlKC8oYT1mbXRwOlxcZCsgLipsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0uKilcXHJcXG4vZ20sXCIkMTt4LWdvb2dsZS1zdGFydC1iaXRyYXRlPTEwMDAwO3gtZ29vZ2xlLW1heC1iaXRyYXRlPTEwMDAwMFxcclxcblwiKTtsZXQgbj1cIlwiO3JldHVybiBuKz1cIm1heGF2ZXJhZ2ViaXRyYXRlPTUxMDAwMDtcIix0JiYobis9XCJzcHJvcC1tYXhjYXB0dXJlcmF0ZT00ODAwMDtcIiksbis9dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Gb3JjZU1vbm9BdWRpbyk/XCJzdGVyZW89MDtcIjpcInN0ZXJlbz0xO1wiLG4rPVwidXNlaW5iYW5kZmVjPTFcIixzLnJlcGxhY2UoXCJ1c2VpbmJhbmRmZWM9MVwiLG4pLHN9aGFuZGxlT25JY2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJwZWVyY29ubmVjdGlvbiBoYW5kbGVPbkljZVwiLDYpLHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuRm9yY2VUVVJOKSYmZS5jYW5kaWRhdGUuaW5kZXhPZihcInJlbGF5XCIpPDA/aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLGBEcm9wcGluZyBjYW5kaWRhdGUgYmVjYXVzZSBpdCB3YXMgbm90IFRVUk4gcmVsYXkuIHwgVHlwZT0gJHtlLnR5cGV9IHwgUHJvdG9jb2w9ICR7ZS5wcm90b2NvbH0gfCBBZGRyZXNzPSR7ZS5hZGRyZXNzfSB8IFBvcnQ9JHtlLnBvcnR9IHxgLDYpOnRoaXMucGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGUpfWhhbmRsZVNpZ25hbFN0YXRlQ2hhbmdlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwic2lnbmFsaW5nIHN0YXRlIGNoYW5nZTogXCIrZSw2KX1oYW5kbGVJY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJpY2UgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2U6IFwiK2UsNiksdGhpcy5vbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZShlKX1oYW5kbGVJY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcImljZSBnYXRoZXJpbmcgc3RhdGUgY2hhbmdlOiBcIitKU09OLnN0cmluZ2lmeShlKSw2KX1oYW5kbGVPblRyYWNrKGUpe3RoaXMub25UcmFjayhlKX1oYW5kbGVJY2VDYW5kaWRhdGUoZSl7dGhpcy5vblBlZXJJY2VDYW5kaWRhdGUoZSl9aGFuZGxlRGF0YUNoYW5uZWwoZSl7dGhpcy5vbkRhdGFDaGFubmVsKGUpfW9uVHJhY2soZSl7fW9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlKGUpe31vblBlZXJJY2VDYW5kaWRhdGUoZSl7fW9uRGF0YUNoYW5uZWwoZSl7fXNldHVwVHJhbnNjZWl2ZXJzQXN5bmMoZSl7cmV0dXJuIHhlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD10aGlzLnBlZXJDb25uZWN0aW9uLmdldFRyYW5zY2VpdmVycygpLmxlbmd0aD4wO2lmKHRoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSksUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzJiZcIlwiIT10aGlzLnByZWZlcnJlZENvZGVjKWZvcihjb25zdCBlIG9mIHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkpaWYoZSYmZS5yZWNlaXZlciYmZS5yZWNlaXZlci50cmFjayYmXCJ2aWRlb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kKXtjb25zdCB0PXRoaXMucHJlZmVycmVkQ29kZWMuc3BsaXQoXCIgXCIpLHM9W3ttaW1lVHlwZTpcInZpZGVvL1wiK3RbMF0sY2xvY2tSYXRlOjllNCxzZHBGbXRwTGluZTp0WzFdP3RbMV06XCJcIn1dO3RoaXMuY29uZmlnLmdldFNldHRpbmdPcHRpb24oY2UuUHJlZmVycmVkQ29kZWMpLm9wdGlvbnMuZmlsdGVyKChlPT5lIT10aGlzLnByZWZlcnJlZENvZGVjKSkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS5zcGxpdChcIiBcIik7cy5wdXNoKHttaW1lVHlwZTpcInZpZGVvL1wiK3RbMF0sY2xvY2tSYXRlOjllNCxzZHBGbXRwTGluZTp0WzFdP3RbMV06XCJcIn0pfSkpO2Zvcihjb25zdCBlIG9mIHMpXCJcIj09PWUuc2RwRm10cExpbmUmJmRlbGV0ZSBlLnNkcEZtdHBMaW5lO2Uuc2V0Q29kZWNQcmVmZXJlbmNlcyhzKX1pZihlKXtjb25zdCBzPXt2aWRlbzohMSxhdWRpbzohIWUmJnthdXRvR2FpbkNvbnRyb2w6ITEsY2hhbm5lbENvdW50OjEsZWNob0NhbmNlbGxhdGlvbjohMSxsYXRlbmN5OjAsbm9pc2VTdXBwcmVzc2lvbjohMSxzYW1wbGVSYXRlOjQ4ZTMsc2FtcGxlU2l6ZToxNix2b2x1bWU6MX19LG49eWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEocyk7aWYobilpZih0KXtmb3IoY29uc3QgZSBvZiB0aGlzLnBlZXJDb25uZWN0aW9uLmdldFRyYW5zY2VpdmVycygpKWlmKGUmJmUucmVjZWl2ZXImJmUucmVjZWl2ZXIudHJhY2smJlwiYXVkaW9cIj09PWUucmVjZWl2ZXIudHJhY2sua2luZClmb3IoY29uc3QgdCBvZiBuLmdldFRyYWNrcygpKXQua2luZCYmXCJhdWRpb1wiPT10LmtpbmQmJihlLnNlbmRlci5yZXBsYWNlVHJhY2sodCksZS5kaXJlY3Rpb249XCJzZW5kcmVjdlwiKX1lbHNlIGZvcihjb25zdCBlIG9mIG4uZ2V0VHJhY2tzKCkpZS5raW5kJiZcImF1ZGlvXCI9PWUua2luZCYmdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihlLHtkaXJlY3Rpb246XCJzZW5kcmVjdlwifSk7ZWxzZSB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pfWVsc2UgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIse2RpcmVjdGlvbjpcInJlY3Zvbmx5XCJ9KX0pKX1vblZpZGVvU3RhdHMoZSl7fW9uU2VuZFdlYlJUQ09mZmVyKGUpe31vblNlbmRXZWJSVENBbnN3ZXIoZSl7fXNob3dUZXh0T3ZlcmxheUNvbm5lY3RpbmcoKXt9c2hvd1RleHRPdmVybGF5U2V0dXBGYWlsdXJlKCl7fXBhcnNlQXZhaWxhYmxlQ29kZWNzKGUpe2lmKCFSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMpcmV0dXJuW1wiT25seSBhdmFpbGFibGUgb24gQ2hyb21lXCJdO2NvbnN0IHQ9W10scz0oMCx3ZS5zcGxpdFNlY3Rpb25zKShlLnNkcCk7cmV0dXJuIHMuc2hpZnQoKSxzLmZvckVhY2goKGU9Pntjb25zdHtjb2RlY3M6c309KDAsd2UucGFyc2VSdHBQYXJhbWV0ZXJzKShlKSxuPS8oVlBcXGR8SDI2XFxkfEFWMSkuKi87cy5mb3JFYWNoKChlPT57Y29uc3Qgcz1lLm5hbWUrXCIgXCIrT2JqZWN0LmtleXMoZS5wYXJhbWV0ZXJzfHx7fSkubWFwKCh0PT50K1wiPVwiK2UucGFyYW1ldGVyc1t0XSkpLmpvaW4oXCI7XCIpO2lmKG51bGwhPT1uLmV4ZWMocykpe1wiVlA5XCI9PWUubmFtZSYmKGUucGFyYW1ldGVycz17XCJwcm9maWxlLWlkXCI6XCIwXCJ9KTtjb25zdCBzPWUubmFtZStcIiBcIitPYmplY3Qua2V5cyhlLnBhcmFtZXRlcnN8fHt9KS5tYXAoKHQ9PnQrXCI9XCIrZS5wYXJhbWV0ZXJzW3RdKSkuam9pbihcIjtcIik7dC5wdXNoKHMpfX0pKX0pKSx0fX1jbGFzcyBGZXtjb25zdHJ1Y3Rvcigpe3RoaXMuUGl4ZWxTdHJlYW1pbmdTZXR0aW5ncz1uZXcgRGUsdGhpcy5FbmNvZGVyU2V0dGluZ3M9bmV3IE9lLHRoaXMuV2ViUlRDU2V0dGluZ3M9bmV3IFVlfXVlQ29tcGF0aWJsZSgpe251bGwhPXRoaXMuV2ViUlRDU2V0dGluZ3MuTWF4RlBTJiYodGhpcy5XZWJSVENTZXR0aW5ncy5GUFM9dGhpcy5XZWJSVENTZXR0aW5ncy5NYXhGUFMpfX1jbGFzcyBEZXt9Y2xhc3MgT2V7fWNsYXNzIFVle31jbGFzcyBJZXtjb25zdHJ1Y3Rvcigpe3RoaXMuUmVjZWlwdFRpbWVNcz1udWxsLHRoaXMuVHJhbnNtaXNzaW9uVGltZU1zPW51bGwsdGhpcy5QcmVDYXB0dXJlVGltZU1zPW51bGwsdGhpcy5Qb3N0Q2FwdHVyZVRpbWVNcz1udWxsLHRoaXMuUHJlRW5jb2RlVGltZU1zPW51bGwsdGhpcy5Qb3N0RW5jb2RlVGltZU1zPW51bGwsdGhpcy5FbmNvZGVNcz1udWxsLHRoaXMuQ2FwdHVyZVRvU2VuZE1zPW51bGwsdGhpcy50ZXN0U3RhcnRUaW1lTXM9MCx0aGlzLmJyb3dzZXJSZWNlaXB0VGltZU1zPTAsdGhpcy5sYXRlbmN5RXhjbHVkaW5nRGVjb2RlPTAsdGhpcy50ZXN0RHVyYXRpb249MCx0aGlzLm5ldHdvcmtMYXRlbmN5PTAsdGhpcy5icm93c2VyU2VuZExhdGVuY3k9MCx0aGlzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zPTAsdGhpcy5lbmRUb0VuZExhdGVuY3k9MCx0aGlzLmVuY29kZUxhdGVuY3k9MH1zZXRGcmFtZURpc3BsYXlEZWx0YVRpbWUoZSl7MD09dGhpcy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyYmKHRoaXMuZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXM9TWF0aC5yb3VuZChlKSl9cHJvY2Vzc0ZpZWxkcygpe251bGwhPXRoaXMuRW5jb2RlTXN8fG51bGw9PXRoaXMuUHJlRW5jb2RlVGltZU1zJiZudWxsPT10aGlzLlBvc3RFbmNvZGVUaW1lTXN8fChpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgU2V0dGluZyBFbmNvZGUgTXMgXFxuICR7dGhpcy5Qb3N0RW5jb2RlVGltZU1zfSBcXG4gJHt0aGlzLlByZUVuY29kZVRpbWVNc31gLDYpLHRoaXMuRW5jb2RlTXM9dGhpcy5Qb3N0RW5jb2RlVGltZU1zLXRoaXMuUHJlRW5jb2RlVGltZU1zKSxudWxsIT10aGlzLkNhcHR1cmVUb1NlbmRNc3x8bnVsbD09dGhpcy5QcmVDYXB0dXJlVGltZU1zJiZudWxsPT10aGlzLlBvc3RDYXB0dXJlVGltZU1zfHwoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFNldHRpbmcgQ2FwdHVyZVRvU2VuZE1zIE1zIFxcbiAke3RoaXMuUG9zdENhcHR1cmVUaW1lTXN9IFxcbiAke3RoaXMuUHJlQ2FwdHVyZVRpbWVNc31gLDYpLHRoaXMuQ2FwdHVyZVRvU2VuZE1zPXRoaXMuUG9zdENhcHR1cmVUaW1lTXMtdGhpcy5QcmVDYXB0dXJlVGltZU1zKX19Y2xhc3MgemV7c3RhdGljIHNldEV4dGVuc2lvbkZyb21CeXRlcyhlLHQpe3QucmVjZWl2aW5nfHwodC5taW1ldHlwZT1cIlwiLHQuZXh0ZW5zaW9uPVwiXCIsdC5yZWNlaXZpbmc9ITAsdC52YWxpZD0hMSx0LnNpemU9MCx0LmRhdGE9W10sdC50aW1lc3RhbXBTdGFydD0obmV3IERhdGUpLmdldFRpbWUoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlJlY2VpdmVkIGZpcnN0IGNodW5rIG9mIGZpbGVcIiw2KSk7Y29uc3Qgcz1uZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMsNiksdC5leHRlbnNpb249c31zdGF0aWMgc2V0TWltZVR5cGVGcm9tQnl0ZXMoZSx0KXt0LnJlY2VpdmluZ3x8KHQubWltZXR5cGU9XCJcIix0LmV4dGVuc2lvbj1cIlwiLHQucmVjZWl2aW5nPSEwLHQudmFsaWQ9ITEsdC5zaXplPTAsdC5kYXRhPVtdLHQudGltZXN0YW1wU3RhcnQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJSZWNlaXZlZCBmaXJzdCBjaHVuayBvZiBmaWxlXCIsNikpO2NvbnN0IHM9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxzLDYpLHQubWltZXR5cGU9c31zdGF0aWMgc2V0Q29udGVudHNGcm9tQnl0ZXMoZSx0KXtpZighdC5yZWNlaXZpbmcpcmV0dXJuO3Quc2l6ZT1NYXRoLmNlaWwobmV3IERhdGFWaWV3KGUuc2xpY2UoMSw1KS5idWZmZXIpLmdldEludDMyKDAsITApLzE2Mzc5KTtjb25zdCBzPWUuc2xpY2UoNSk7aWYodC5kYXRhLnB1c2gocyksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFJlY2VpdmVkIGZpbGUgY2h1bms6ICR7dC5kYXRhLmxlbmd0aH0vJHt0LnNpemV9YCw2KSx0LmRhdGEubGVuZ3RoPT09dC5zaXplKXt0LnJlY2VpdmluZz0hMSx0LnZhbGlkPSEwLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVjZWl2ZWQgY29tcGxldGUgZmlsZVwiLDYpO2NvbnN0IGU9KG5ldyBEYXRlKS5nZXRUaW1lKCktdC50aW1lc3RhbXBTdGFydCxzPU1hdGgucm91bmQoMTYqdC5zaXplKjEwMjQvZSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEF2ZXJhZ2UgdHJhbnNmZXIgYml0cmF0ZTogJHtzfWtiL3Mgb3ZlciAke2UvMWUzfSBzZWNvbmRzYCw2KTtjb25zdCBuPW5ldyBCbG9iKHQuZGF0YSx7dHlwZTp0Lm1pbWV0eXBlfSkscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtyLnNldEF0dHJpYnV0ZShcImhyZWZcIixVUkwuY3JlYXRlT2JqZWN0VVJMKG4pKSxyLnNldEF0dHJpYnV0ZShcImRvd25sb2FkXCIsYHRyYW5zZmVyLiR7dC5leHRlbnNpb259YCksZG9jdW1lbnQuYm9keS5hcHBlbmQociksci5yZW1vdmUoKX1lbHNlIHQuZGF0YS5sZW5ndGg+dC5zaXplJiYodC5yZWNlaXZpbmc9ITEsaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgUmVjZWl2ZWQgYmlnZ2VyIGZpbGUgdGhhbiBhZHZlcnRpc2VkOiAke3QuZGF0YS5sZW5ndGh9LyR7dC5zaXplfWApKX19Y2xhc3MgR2V7Y29uc3RydWN0b3IoKXt0aGlzLm1pbWV0eXBlPVwiXCIsdGhpcy5leHRlbnNpb249XCJcIix0aGlzLnJlY2VpdmluZz0hMSx0aGlzLnNpemU9MCx0aGlzLmRhdGE9W10sdGhpcy52YWxpZD0hMX19Y2xhc3MgQmV7fUJlLm1haW5CdXR0b249MCxCZS5hdXhpbGlhcnlCdXR0b249MSxCZS5zZWNvbmRhcnlCdXR0b249MixCZS5mb3VydGhCdXR0b249MyxCZS5maWZ0aEJ1dHRvbj00O2NsYXNzIF9le31fZS5wcmltYXJ5QnV0dG9uPTEsX2Uuc2Vjb25kYXJ5QnV0dG9uPTIsX2UuYXV4aWxpYXJ5QnV0dG9uPTQsX2UuZm91cnRoQnV0dG9uPTgsX2UuZmlmdGhCdXR0b249MTY7Y2xhc3MgV2V7Y29uc3RydWN0b3IoKXt0aGlzLnVucmVnaXN0ZXJDYWxsYmFja3M9W119YWRkVW5yZWdpc3RlckNhbGxiYWNrKGUpe3RoaXMudW5yZWdpc3RlckNhbGxiYWNrcy5wdXNoKGUpfXVucmVnaXN0ZXJBbGwoKXtmb3IoY29uc3QgZSBvZiB0aGlzLnVucmVnaXN0ZXJDYWxsYmFja3MpZSgpO3RoaXMudW5yZWdpc3RlckNhbGxiYWNrcz1bXX19Y2xhc3MgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlcj1uZXcgV2UsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9dCx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXI9cztjb25zdCBuPWU9PnRoaXMub25Ub3VjaFN0YXJ0KGUpLHI9ZT0+dGhpcy5vblRvdWNoRW5kKGUpLGk9ZT0+dGhpcy5vblRvdWNoTW92ZShlKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLG4se3Bhc3NpdmU6ITF9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixyLHtwYXNzaXZlOiExfSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGkse3Bhc3NpdmU6ITF9KSx0aGlzLnRvdWNoRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixuKSkpLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixyKSkpLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsaSkpKX11bnJlZ2lzdGVyVG91Y2hFdmVudHMoKXt0aGlzLnRvdWNoRXZlbnRMaXN0ZW5lclRyYWNrZXIudW5yZWdpc3RlckFsbCgpfXNldFZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3QoZSl7dGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0PWV9b25Ub3VjaFN0YXJ0KGUpe2lmKHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpe2lmKG51bGw9PXRoaXMuZmFrZVRvdWNoRmluZ2VyKXtjb25zdCB0PWUuY2hhbmdlZFRvdWNoZXNbMF07dGhpcy5mYWtlVG91Y2hGaW5nZXI9bmV3IFZlKHQuaWRlbnRpZmllcix0LmNsaWVudFgtdGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0LmxlZnQsdC5jbGllbnRZLXRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdC50b3ApO2NvbnN0IHM9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSxuPW5ldyBNb3VzZUV2ZW50KFwibW91c2VlbnRlclwiLHQpO3MuZGlzcGF0Y2hFdmVudChuKTtjb25zdCByPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKHRoaXMuZmFrZVRvdWNoRmluZ2VyLngsdGhpcy5mYWtlVG91Y2hGaW5nZXIueSk7dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VEb3duXCIpKFtCZS5tYWluQnV0dG9uLHIueCxyLnldKX1lLnByZXZlbnREZWZhdWx0KCl9fW9uVG91Y2hFbmQoZSl7aWYoIXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSxzPXRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzO2ZvcihsZXQgbj0wO248ZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7bisrKXtjb25zdCByPWUuY2hhbmdlZFRvdWNoZXNbbl07aWYoci5pZGVudGlmaWVyPT09dGhpcy5mYWtlVG91Y2hGaW5nZXIuaWQpe2NvbnN0IGU9ci5jbGllbnRYLXRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdC5sZWZ0LG49ci5jbGllbnRZLXRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdC50b3AsaT10aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLG4pO3MuZ2V0KFwiTW91c2VVcFwiKShbQmUubWFpbkJ1dHRvbixpLngsaS55XSk7Y29uc3Qgbz1uZXcgTW91c2VFdmVudChcIm1vdXNlbGVhdmVcIixyKTt0LmRpc3BhdGNoRXZlbnQobyksdGhpcy5mYWtlVG91Y2hGaW5nZXI9bnVsbDticmVha319ZS5wcmV2ZW50RGVmYXVsdCgpfW9uVG91Y2hNb3ZlKGUpe2lmKCF0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCB0PXRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzO2ZvcihsZXQgcz0wO3M8ZS50b3VjaGVzLmxlbmd0aDtzKyspe2NvbnN0IG49ZS50b3VjaGVzW3NdO2lmKG4uaWRlbnRpZmllcj09PXRoaXMuZmFrZVRvdWNoRmluZ2VyLmlkKXtjb25zdCBlPW4uY2xpZW50WC10aGlzLnZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3QubGVmdCxzPW4uY2xpZW50WS10aGlzLnZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3QudG9wLHI9dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZSxzKSxpPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZChlLXRoaXMuZmFrZVRvdWNoRmluZ2VyLngscy10aGlzLmZha2VUb3VjaEZpbmdlci55KTt0LmdldChcIk1vdXNlTW92ZVwiKShbci54LHIueSxpLngsaS55XSksdGhpcy5mYWtlVG91Y2hGaW5nZXIueD1lLHRoaXMuZmFrZVRvdWNoRmluZ2VyLnk9czticmVha319ZS5wcmV2ZW50RGVmYXVsdCgpfX1jbGFzcyBWZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5pZD1lLHRoaXMueD10LHRoaXMueT1zfX1jbGFzcyBOZXt9TmUuYmFja1NwYWNlPTgsTmUuc2hpZnQ9MTYsTmUuY29udHJvbD0xNyxOZS5hbHQ9MTgsTmUucmlnaHRTaGlmdD0yNTMsTmUucmlnaHRDb250cm9sPTI1NCxOZS5yaWdodEFsdD0yNTU7Y2xhc3MgS2V7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMua2V5Ym9hcmRFdmVudExpc3RlbmVyVHJhY2tlcj1uZXcgV2UsdGhpcy5Db2RlVG9LZXlDb2RlPXtFc2NhcGU6MjcsRGlnaXQwOjQ4LERpZ2l0MTo0OSxEaWdpdDI6NTAsRGlnaXQzOjUxLERpZ2l0NDo1MixEaWdpdDU6NTMsRGlnaXQ2OjU0LERpZ2l0Nzo1NSxEaWdpdDg6NTYsRGlnaXQ5OjU3LE1pbnVzOjE3MyxFcXVhbDoxODcsQmFja3NwYWNlOjgsVGFiOjksS2V5UTo4MSxLZXlXOjg3LEtleUU6NjksS2V5Ujo4MixLZXlUOjg0LEtleVk6ODksS2V5VTo4NSxLZXlJOjczLEtleU86NzksS2V5UDo4MCxCcmFja2V0TGVmdDoyMTksQnJhY2tldFJpZ2h0OjIyMSxFbnRlcjoxMyxDb250cm9sTGVmdDoxNyxLZXlBOjY1LEtleVM6ODMsS2V5RDo2OCxLZXlGOjcwLEtleUc6NzEsS2V5SDo3MixLZXlKOjc0LEtleUs6NzUsS2V5TDo3NixTZW1pY29sb246MTg2LFF1b3RlOjIyMixCYWNrcXVvdGU6MTkyLFNoaWZ0TGVmdDoxNixCYWNrc2xhc2g6MjIwLEtleVo6OTAsS2V5WDo4OCxLZXlDOjY3LEtleVY6ODYsS2V5Qjo2NixLZXlOOjc4LEtleU06NzcsQ29tbWE6MTg4LFBlcmlvZDoxOTAsU2xhc2g6MTkxLFNoaWZ0UmlnaHQ6MjUzLEFsdExlZnQ6MTgsU3BhY2U6MzIsQ2Fwc0xvY2s6MjAsRjE6MTEyLEYyOjExMyxGMzoxMTQsRjQ6MTE1LEY1OjExNixGNjoxMTcsRjc6MTE4LEY4OjExOSxGOToxMjAsRjEwOjEyMSxGMTE6MTIyLEYxMjoxMjMsUGF1c2U6MTksU2Nyb2xsTG9jazoxNDUsTnVtcGFkRGl2aWRlOjExMSxOdW1wYWRNdWx0aXBseToxMDYsTnVtcGFkU3VidHJhY3Q6MTA5LE51bXBhZEFkZDoxMDcsTnVtcGFkRGVjaW1hbDoxMTAsTnVtcGFkOToxMDUsTnVtcGFkODoxMDQsTnVtcGFkNzoxMDMsTnVtcGFkNjoxMDIsTnVtcGFkNToxMDEsTnVtcGFkNDoxMDAsTnVtcGFkMzo5OSxOdW1wYWQyOjk4LE51bXBhZDE6OTcsTnVtcGFkMDo5NixOdW1Mb2NrOjE0NCxDb250cm9sUmlnaHQ6MjU0LEFsdFJpZ2h0OjI1NSxIb21lOjM2LEVuZDozNSxBcnJvd1VwOjM4LEFycm93TGVmdDozNyxBcnJvd1JpZ2h0OjM5LEFycm93RG93bjo0MCxQYWdlVXA6MzMsUGFnZURvd246MzQsSW5zZXJ0OjQ1LERlbGV0ZTo0NixDb250ZXh0TWVudTo5M30sdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMuY29uZmlnPXQsdGhpcy5hY3RpdmVLZXlzUHJvdmlkZXI9c31yZWdpc3RlcktleUJvYXJkRXZlbnRzKCl7Y29uc3QgZT1lPT50aGlzLmhhbmRsZU9uS2V5RG93bihlKSx0PWU9PnRoaXMuaGFuZGxlT25LZXlVcChlKSxzPWU9PnRoaXMuaGFuZGxlT25LZXlQcmVzcyhlKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGUpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLHQpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLHMpLHRoaXMua2V5Ym9hcmRFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGUpKSksdGhpcy5rZXlib2FyZEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLHQpKSksdGhpcy5rZXlib2FyZEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLHMpKSl9dW5yZWdpc3RlcktleUJvYXJkRXZlbnRzKCl7dGhpcy5rZXlib2FyZEV2ZW50TGlzdGVuZXJUcmFja2VyLnVucmVnaXN0ZXJBbGwoKX1oYW5kbGVPbktleURvd24oZSl7Y29uc3QgdD10aGlzLmdldEtleWNvZGUoZSk7dCYmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBrZXkgZG93biAke3R9LCByZXBlYXQgPSAke2UucmVwZWF0fWAsNiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiS2V5RG93blwiKShbdGhpcy5nZXRLZXljb2RlKGUpLGUucmVwZWF0PzE6MF0pLHRoaXMuYWN0aXZlS2V5c1Byb3ZpZGVyLmdldEFjdGl2ZUtleXMoKS5wdXNoKHQpLHQ9PT1OZS5iYWNrU3BhY2UmJmRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoXCJrZXlwcmVzc1wiLHtjaGFyQ29kZTpOZS5iYWNrU3BhY2V9KSksdGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5TdXBwcmVzc0Jyb3dzZXJLZXlzKSYmdGhpcy5pc0tleUNvZGVCcm93c2VyS2V5KHQpJiZlLnByZXZlbnREZWZhdWx0KCkpfWhhbmRsZU9uS2V5VXAoZSl7Y29uc3QgdD10aGlzLmdldEtleWNvZGUoZSk7dCYmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBrZXkgdXAgJHt0fWAsNiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiS2V5VXBcIikoW3QsZS5yZXBlYXQ/MTowXSksdGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5TdXBwcmVzc0Jyb3dzZXJLZXlzKSYmdGhpcy5pc0tleUNvZGVCcm93c2VyS2V5KHQpJiZlLnByZXZlbnREZWZhdWx0KCkpfWhhbmRsZU9uS2V5UHJlc3MoZSl7aWYoIShcImNoYXJDb2RlXCJpbiBlKSlyZXR1cm4gdm9pZCBpLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksXCJLZXlib2FyZEV2ZW50LmNoYXJDb2RlIGlzIGRlcHJlY2F0ZWQgaW4gdGhpcyBicm93c2VyLCBjYW5ub3Qgc2VuZCBrZXkgcHJlc3MuXCIpO2NvbnN0IHQ9ZS5jaGFyQ29kZTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxga2V5IHByZXNzICR7dH1gLDYpLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIktleVByZXNzXCIpKFt0XSl9Z2V0S2V5Y29kZShlKXtpZighKFwia2V5Q29kZVwiaW4gZSkpe2NvbnN0IHQ9ZTtyZXR1cm4gdC5jb2RlIGluIHRoaXMuQ29kZVRvS2V5Q29kZT90aGlzLkNvZGVUb0tleUNvZGVbdC5jb2RlXTooaS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLGBLZXlib2FyZCBjb2RlIG9mICR7dC5jb2RlfSBpcyBub3Qgc3VwcG9ydGVkIGluIG91ciBtYXBwaW5nLCBpZ25vcmluZyB0aGlzIGtleS5gKSxudWxsKX1yZXR1cm4gZS5rZXlDb2RlPT09TmUuc2hpZnQmJlwiU2hpZnRSaWdodFwiPT09ZS5jb2RlP05lLnJpZ2h0U2hpZnQ6ZS5rZXlDb2RlPT09TmUuY29udHJvbCYmXCJDb250cm9sUmlnaHRcIj09PWUuY29kZT9OZS5yaWdodENvbnRyb2w6ZS5rZXlDb2RlPT09TmUuYWx0JiZcIkFsdFJpZ2h0XCI9PT1lLmNvZGU/TmUucmlnaHRBbHQ6ZS5rZXlDb2RlfWlzS2V5Q29kZUJyb3dzZXJLZXkoZSl7cmV0dXJuIGU+PTExMiYmZTw9MTIzfHw5PT09ZX19Y2xhc3MgUWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMueD0wLHRoaXMueT0wLHRoaXMudXBkYXRlTW91c2VNb3ZlUG9zaXRpb25FdmVudD1lPT57dGhpcy51cGRhdGVNb3VzZU1vdmVQb3NpdGlvbihlKX0sdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyPW5ldyBXZSx0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyPWUsdGhpcy5tb3VzZUNvbnRyb2xsZXI9dCx0aGlzLmFjdGl2ZUtleXNQcm92aWRlcj1zO2NvbnN0IG49dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKTt0aGlzLng9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC8yLHRoaXMueT1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodC8yLHRoaXMuY29vcmQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKHRoaXMueCx0aGlzLnkpfXVucmVnaXN0ZXJNb3VzZUV2ZW50cygpe3RoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci51bnJlZ2lzdGVyQWxsKCl9bG9ja1N0YXRlQ2hhbmdlKCl7Y29uc3QgZT10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLHQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzO2lmKGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudD09PWV8fGRvY3VtZW50Lm1velBvaW50ZXJMb2NrRWxlbWVudD09PWUpaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJQb2ludGVyIGxvY2tlZFwiLDYpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLnVwZGF0ZU1vdXNlTW92ZVBvc2l0aW9uRXZlbnQsITEpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy51cGRhdGVNb3VzZU1vdmVQb3NpdGlvbkV2ZW50LCExKSkpO2Vsc2V7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJUaGUgcG9pbnRlciBsb2NrIHN0YXR1cyBpcyBub3cgdW5sb2NrZWRcIiw2KSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy51cGRhdGVNb3VzZU1vdmVQb3NpdGlvbkV2ZW50LCExKTtsZXQgZT10aGlzLmFjdGl2ZUtleXNQcm92aWRlci5nZXRBY3RpdmVLZXlzKCk7Y29uc3Qgcz1uZXcgU2V0KGUpLG49W107cy5mb3JFYWNoKChlPT57bltlXX0pKSxuLmZvckVhY2goKGU9Pnt0LmdldChcIktleVVwXCIpKFtlXSl9KSksZT1bXX19dXBkYXRlTW91c2VNb3ZlUG9zaXRpb24oZSl7aWYoIXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLHM9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKS5jbGllbnRXaWR0aCxuPXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCkuY2xpZW50SGVpZ2h0O3RoaXMueCs9ZS5tb3ZlbWVudFgsdGhpcy55Kz1lLm1vdmVtZW50WSx0aGlzLng+cyYmKHRoaXMueC09cyksdGhpcy55Pm4mJih0aGlzLnktPW4pLHRoaXMueDwwJiYodGhpcy54PXMrdGhpcy54KSx0aGlzLnk8MCYmKHRoaXMueT1uLXRoaXMueSksdGhpcy5jb29yZD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQodGhpcy54LHRoaXMueSk7Y29uc3Qgcj10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGUubW92ZW1lbnRYLGUubW92ZW1lbnRZKTt0LmdldChcIk1vdXNlTW92ZVwiKShbdGhpcy5jb29yZC54LHRoaXMuY29vcmQueSxyLngsci55XSl9aGFuZGxlTW91c2VEb3duKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZURvd25cIikoW2UuYnV0dG9uLHRoaXMuY29vcmQueCx0aGlzLmNvb3JkLnldKX1oYW5kbGVNb3VzZVVwKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZVVwXCIpKFtlLmJ1dHRvbix0aGlzLmNvb3JkLngsdGhpcy5jb29yZC55XSl9aGFuZGxlTW91c2VXaGVlbChlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiZ0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VXaGVlbFwiKShbZS53aGVlbERlbHRhLHRoaXMuY29vcmQueCx0aGlzLmNvb3JkLnldKX1oYW5kbGVNb3VzZURvdWJsZShlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiZ0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VEb3VibGVcIikoW2UuYnV0dG9uLHRoaXMuY29vcmQueCx0aGlzLmNvb3JkLnldKX1oYW5kbGVQcmVzc01vdXNlQnV0dG9ucyhlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiZ0aGlzLm1vdXNlQ29udHJvbGxlci5wcmVzc01vdXNlQnV0dG9ucyhlLmJ1dHRvbnMsdGhpcy54LHRoaXMueSl9aGFuZGxlUmVsZWFzZU1vdXNlQnV0dG9ucyhlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiZ0aGlzLm1vdXNlQ29udHJvbGxlci5yZWxlYXNlTW91c2VCdXR0b25zKGUuYnV0dG9ucyx0aGlzLngsdGhpcy55KX19Y2xhc3MgJGV7Y29uc3RydWN0b3IoZSl7dGhpcy5tb3VzZUNvbnRyb2xsZXI9ZX11bnJlZ2lzdGVyTW91c2VFdmVudHMoKXt9dXBkYXRlTW91c2VNb3ZlUG9zaXRpb24oZSl7aWYoIXRoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIk1vdXNlTW92ZVwiLDYpO2NvbnN0IHQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGUub2Zmc2V0WCxlLm9mZnNldFkpLHM9dGhpcy5tb3VzZUNvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZChlLm1vdmVtZW50WCxlLm1vdmVtZW50WSk7dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlTW92ZVwiKShbdC54LHQueSxzLngscy55XSksZS5wcmV2ZW50RGVmYXVsdCgpfWhhbmRsZU1vdXNlRG93bihlKXtpZighdGhpcy5tb3VzZUNvbnRyb2xsZXIudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwib25Nb3VzZSBEb3duXCIsNik7Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZS5vZmZzZXRYLGUub2Zmc2V0WSk7dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlRG93blwiKShbZS5idXR0b24sdC54LHQueV0pLGUucHJldmVudERlZmF1bHQoKX1oYW5kbGVNb3VzZVVwKGUpe2lmKCF0aGlzLm1vdXNlQ29udHJvbGxlci52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZS5vZmZzZXRYLGUub2Zmc2V0WSk7dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlVXBcIikoW2UuYnV0dG9uLHQueCx0LnldKSxlLnByZXZlbnREZWZhdWx0KCl9aGFuZGxlQ29udGV4dE1lbnUoZSl7aWYoIXRoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCB0PXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLm9mZnNldFgsZS5vZmZzZXRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VVcFwiKShbZS5idXR0b24sdC54LHQueV0pLGUucHJldmVudERlZmF1bHQoKX1oYW5kbGVNb3VzZVdoZWVsKGUpe2lmKCF0aGlzLm1vdXNlQ29udHJvbGxlci52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZS5vZmZzZXRYLGUub2Zmc2V0WSk7dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlV2hlZWxcIikoW2Uud2hlZWxEZWx0YSx0LngsdC55XSksZS5wcmV2ZW50RGVmYXVsdCgpfWhhbmRsZU1vdXNlRG91YmxlKGUpe2lmKCF0aGlzLm1vdXNlQ29udHJvbGxlci52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZS5vZmZzZXRYLGUub2Zmc2V0WSk7dGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlRG91YmxlXCIpKFtlLmJ1dHRvbix0LngsdC55XSl9aGFuZGxlUHJlc3NNb3VzZUJ1dHRvbnMoZSl7dGhpcy5tb3VzZUNvbnRyb2xsZXIudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnByZXNzTW91c2VCdXR0b25zKGUuYnV0dG9ucyxlLm9mZnNldFgsZS5vZmZzZXRZKX1oYW5kbGVSZWxlYXNlTW91c2VCdXR0b25zKGUpe3RoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiZ0aGlzLm1vdXNlQ29udHJvbGxlci5yZWxlYXNlTW91c2VCdXR0b25zKGUuYnV0dG9ucyxlLm9mZnNldFgsZS5vZmZzZXRZKX19Y2xhc3MgcWV7Y29uc3RydWN0b3IoZSx0LHMsbil7dGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyPW5ldyBXZSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyPWUsdGhpcy5jb29yZGluYXRlQ29udmVydGVyPXMsdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcj10LHRoaXMuYWN0aXZlS2V5c1Byb3ZpZGVyPW4sdGhpcy5yZWdpc3Rlck1vdXNlRW50ZXJBbmRMZWF2ZUV2ZW50cygpfXVucmVnaXN0ZXJNb3VzZUV2ZW50cygpe3RoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci51bnJlZ2lzdGVyQWxsKCl9cmVnaXN0ZXJMb2NrZWRNb3VzZUV2ZW50cyhlKXtjb25zdCB0PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCkscz1uZXcgUWUodGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcixlLHRoaXMuYWN0aXZlS2V5c1Byb3ZpZGVyKTtpZih0LnJlcXVlc3RQb2ludGVyTG9jaz10LnJlcXVlc3RQb2ludGVyTG9ja3x8dC5tb3pSZXF1ZXN0UG9pbnRlckxvY2ssZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrPWRvY3VtZW50LmV4aXRQb2ludGVyTG9ja3x8ZG9jdW1lbnQubW96RXhpdFBvaW50ZXJMb2NrLHQucmVxdWVzdFBvaW50ZXJMb2NrKXtjb25zdCBlPSgpPT57dC5yZXF1ZXN0UG9pbnRlckxvY2soKX07dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixlKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixlKSkpfWNvbnN0IG49KCk9PnMubG9ja1N0YXRlQ2hhbmdlKCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsb2NrY2hhbmdlXCIsbiwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1venBvaW50ZXJsb2NrY2hhbmdlXCIsbiwhMSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybG9ja2NoYW5nZVwiLG4sITEpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3pwb2ludGVybG9ja2NoYW5nZVwiLG4sITEpKSk7Y29uc3Qgcj1lPT5zLmhhbmRsZU1vdXNlRG93bihlKSxpPWU9PnMuaGFuZGxlTW91c2VVcChlKSxvPWU9PnMuaGFuZGxlTW91c2VXaGVlbChlKSxhPWU9PnMuaGFuZGxlTW91c2VEb3VibGUoZSk7dC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsciksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsbyksdC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixhKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIscikpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGkpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsbykpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixhKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5zLnVucmVnaXN0ZXJNb3VzZUV2ZW50cygpKSl9cmVnaXN0ZXJIb3ZlcmluZ01vdXNlRXZlbnRzKGUpe2NvbnN0IHQ9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSxzPW5ldyAkZShlKSxuPWU9PnMudXBkYXRlTW91c2VNb3ZlUG9zaXRpb24oZSkscj1lPT5zLmhhbmRsZU1vdXNlRG93bihlKSxpPWU9PnMuaGFuZGxlTW91c2VVcChlKSxvPWU9PnMuaGFuZGxlQ29udGV4dE1lbnUoZSksYT1lPT5zLmhhbmRsZU1vdXNlV2hlZWwoZSksbD1lPT5zLmhhbmRsZU1vdXNlRG91YmxlKGUpO3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLG4pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixpKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLG8pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsYSksdC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixsKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbikpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIscikpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGkpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsbykpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIixhKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLGwpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnMudW5yZWdpc3Rlck1vdXNlRXZlbnRzKCkpKX1yZWdpc3Rlck1vdXNlRW50ZXJBbmRMZWF2ZUV2ZW50cygpe2NvbnN0IGU9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSx0PWU9Pnt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiYoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJNb3VzZSBFbnRlcmVkXCIsNiksdGhpcy5zZW5kTW91c2VFbnRlcigpLHRoaXMucHJlc3NNb3VzZUJ1dHRvbnMoZS5idXR0b25zLGUueCxlLnkpKX0scz1lPT57dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiTW91c2UgTGVmdFwiLDYpLHRoaXMuc2VuZE1vdXNlTGVhdmUoKSx0aGlzLnJlbGVhc2VNb3VzZUJ1dHRvbnMoZS5idXR0b25zLGUueCxlLnkpKX07ZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHQpLGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIixzKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHQpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIixzKSkpfXJlbGVhc2VNb3VzZUJ1dHRvbnMoZSx0LHMpe2NvbnN0IG49dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQodCxzKTtlJl9lLnByaW1hcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlVXAoQmUubWFpbkJ1dHRvbixuLngsbi55KSxlJl9lLnNlY29uZGFyeUJ1dHRvbiYmdGhpcy5zZW5kTW91c2VVcChCZS5zZWNvbmRhcnlCdXR0b24sbi54LG4ueSksZSZfZS5hdXhpbGlhcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlVXAoQmUuYXV4aWxpYXJ5QnV0dG9uLG4ueCxuLnkpLGUmX2UuZm91cnRoQnV0dG9uJiZ0aGlzLnNlbmRNb3VzZVVwKEJlLmZvdXJ0aEJ1dHRvbixuLngsbi55KSxlJl9lLmZpZnRoQnV0dG9uJiZ0aGlzLnNlbmRNb3VzZVVwKEJlLmZpZnRoQnV0dG9uLG4ueCxuLnkpfXByZXNzTW91c2VCdXR0b25zKGUsdCxzKXtpZighdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3Qgbj10aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZCh0LHMpO2UmX2UucHJpbWFyeUJ1dHRvbiYmdGhpcy5zZW5kTW91c2VEb3duKEJlLm1haW5CdXR0b24sbi54LG4ueSksZSZfZS5zZWNvbmRhcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlRG93bihCZS5zZWNvbmRhcnlCdXR0b24sbi54LG4ueSksZSZfZS5hdXhpbGlhcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlRG93bihCZS5hdXhpbGlhcnlCdXR0b24sbi54LG4ueSksZSZfZS5mb3VydGhCdXR0b24mJnRoaXMuc2VuZE1vdXNlRG93bihCZS5mb3VydGhCdXR0b24sbi54LG4ueSksZSZfZS5maWZ0aEJ1dHRvbiYmdGhpcy5zZW5kTW91c2VEb3duKEJlLmZpZnRoQnV0dG9uLG4ueCxuLnkpfXNlbmRNb3VzZUVudGVyKCl7dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VFbnRlclwiKSgpfXNlbmRNb3VzZUxlYXZlKCl7dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VMZWF2ZVwiKSgpfXNlbmRNb3VzZURvd24oZSx0LHMpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgbW91c2UgYnV0dG9uICR7ZX0gZG93biBhdCAoJHt0fSwgJHtzfSlgLDYpLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlRG93blwiKShbZSx0LHNdKSl9c2VuZE1vdXNlVXAoZSx0LHMpe2lmKCF0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgbW91c2UgYnV0dG9uICR7ZX0gdXAgYXQgKCR7dH0sICR7c30pYCw2KTtjb25zdCBuPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKHQscyk7dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VVcFwiKShbZSxuLngsbi55XSl9fWNsYXNzIFhle2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLmZpbmdlcnM9WzksOCw3LDYsNSw0LDMsMiwxLDBdLHRoaXMuZmluZ2VySWRzPW5ldyBNYXAsdGhpcy5tYXhCeXRlVmFsdWU9MjU1LHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlcj1uZXcgV2UsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9dCx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXI9cyx0aGlzLnZpZGVvRWxlbWVudFBhcmVudD10LmdldFZpZGVvRWxlbWVudCgpO2NvbnN0IG49ZT0+dGhpcy5vblRvdWNoU3RhcnQoZSkscj1lPT50aGlzLm9uVG91Y2hFbmQoZSksbz1lPT50aGlzLm9uVG91Y2hNb3ZlKGUpO3RoaXMudmlkZW9FbGVtZW50UGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsbix7cGFzc2l2ZTohMX0pLHRoaXMudmlkZW9FbGVtZW50UGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHIse3Bhc3NpdmU6ITF9KSx0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsbyx7cGFzc2l2ZTohMX0pLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50aGlzLnZpZGVvRWxlbWVudFBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLG4pKSksdGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnRoaXMudmlkZW9FbGVtZW50UGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHIpKSksdGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnRoaXMudmlkZW9FbGVtZW50UGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixvKSkpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiVG91Y2ggRXZlbnRzIFJlZ2lzdGVyZWRcIiw2KTtjb25zdCBhPWU9PntlLnByZXZlbnREZWZhdWx0KCl9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixhLHtwYXNzaXZlOiExfSksdGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixhKSkpfXVucmVnaXN0ZXJUb3VjaEV2ZW50cygpe3RoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci51bnJlZ2lzdGVyQWxsKCl9cmVtZW1iZXJUb3VjaChlKXtjb25zdCB0PXRoaXMuZmluZ2Vycy5wb3AoKTt2b2lkIDA9PT10JiZpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcImV4aGF1c3RlZCB0b3VjaCBpZGVudGlmaWVyc1wiLDYpLHRoaXMuZmluZ2VySWRzLnNldChlLmlkZW50aWZpZXIsdCl9Zm9yZ2V0VG91Y2goZSl7dGhpcy5maW5nZXJzLnB1c2godGhpcy5maW5nZXJJZHMuZ2V0KGUuaWRlbnRpZmllcikpLHRoaXMuZmluZ2Vycy5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0LWV9KSksdGhpcy5maW5nZXJJZHMuZGVsZXRlKGUuaWRlbnRpZmllcil9b25Ub3VjaFN0YXJ0KGUpe2lmKHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpe2ZvcihsZXQgdD0wO3Q8ZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7dCsrKXRoaXMucmVtZW1iZXJUb3VjaChlLmNoYW5nZWRUb3VjaGVzW3RdKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInRvdWNoIHN0YXJ0XCIsNiksdGhpcy5lbWl0VG91Y2hEYXRhKFwiVG91Y2hTdGFydFwiLGUuY2hhbmdlZFRvdWNoZXMpLGUucHJldmVudERlZmF1bHQoKX19b25Ub3VjaEVuZChlKXtpZih0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInRvdWNoIGVuZFwiLDYpLHRoaXMuZW1pdFRvdWNoRGF0YShcIlRvdWNoRW5kXCIsZS5jaGFuZ2VkVG91Y2hlcyk7Zm9yKGxldCB0PTA7dDxlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDt0KyspdGhpcy5mb3JnZXRUb3VjaChlLmNoYW5nZWRUb3VjaGVzW3RdKTtlLnByZXZlbnREZWZhdWx0KCl9fW9uVG91Y2hNb3ZlKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInRvdWNoIG1vdmVcIiw2KSx0aGlzLmVtaXRUb3VjaERhdGEoXCJUb3VjaE1vdmVcIixlLnRvdWNoZXMpLGUucHJldmVudERlZmF1bHQoKSl9ZW1pdFRvdWNoRGF0YShlLHQpe2lmKCF0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCBzPXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCksbj10aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycztmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7Y29uc3Qgbz0xLGE9dFtyXSxsPWEuY2xpZW50WC1zLm9mZnNldExlZnQsZD1hLmNsaWVudFktcy5vZmZzZXRUb3A7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEYke3RoaXMuZmluZ2VySWRzLmdldChhLmlkZW50aWZpZXIpfT0oJHtsfSwgJHtkfSlgLDYpO2NvbnN0IGM9dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQobCxkKTtzd2l0Y2goZSl7Y2FzZVwiVG91Y2hTdGFydFwiOm4uZ2V0KFwiVG91Y2hTdGFydFwiKShbbyxjLngsYy55LHRoaXMuZmluZ2VySWRzLmdldChhLmlkZW50aWZpZXIpLHRoaXMubWF4Qnl0ZVZhbHVlKmEuZm9yY2UsYy5pblJhbmdlPzE6MF0pO2JyZWFrO2Nhc2VcIlRvdWNoRW5kXCI6bi5nZXQoXCJUb3VjaEVuZFwiKShbbyxjLngsYy55LHRoaXMuZmluZ2VySWRzLmdldChhLmlkZW50aWZpZXIpLHRoaXMubWF4Qnl0ZVZhbHVlKmEuZm9yY2UsYy5pblJhbmdlPzE6MF0pO2JyZWFrO2Nhc2VcIlRvdWNoTW92ZVwiOm4uZ2V0KFwiVG91Y2hNb3ZlXCIpKFtvLGMueCxjLnksdGhpcy5maW5nZXJJZHMuZ2V0KGEuaWRlbnRpZmllciksdGhpcy5tYXhCeXRlVmFsdWUqYS5mb3JjZSxjLmluUmFuZ2U/MTowXSl9fX19Y2xhc3MgamV7Y29uc3RydWN0b3IoZSl7dGhpcy5nYW1lUGFkRXZlbnRMaXN0ZW5lclRyYWNrZXI9bmV3IFdlLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXI9ZSx0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZT0od2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkuYmluZCh3aW5kb3cpO2NvbnN0IHQ9d2luZG93O2lmKFwiR2FtZXBhZEV2ZW50XCJpbiB0KXtjb25zdCBlPWU9PnRoaXMuZ2FtZVBhZENvbm5lY3RIYW5kbGVyKGUpLHQ9ZT0+dGhpcy5nYW1lUGFkRGlzY29ubmVjdEhhbmRsZXIoZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkY29ubmVjdGVkXCIsZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkZGlzY29ubmVjdGVkXCIsdCksdGhpcy5nYW1lUGFkRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkY29ubmVjdGVkXCIsZSkpKSx0aGlzLmdhbWVQYWRFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImdhbWVwYWRkaXNjb25uZWN0ZWRcIix0KSkpfWVsc2UgaWYoXCJXZWJLaXRHYW1lcGFkRXZlbnRcImluIHQpe2NvbnN0IGU9ZT0+dGhpcy5nYW1lUGFkQ29ubmVjdEhhbmRsZXIoZSksdD1lPT50aGlzLmdhbWVQYWREaXNjb25uZWN0SGFuZGxlcihlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmtpdGdhbWVwYWRjb25uZWN0ZWRcIixlKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmtpdGdhbWVwYWRkaXNjb25uZWN0ZWRcIix0KSx0aGlzLmdhbWVQYWRFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGdhbWVwYWRjb25uZWN0ZWRcIixlKSkpLHRoaXMuZ2FtZVBhZEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2Via2l0Z2FtZXBhZGRpc2Nvbm5lY3RlZFwiLHQpKSl9dGhpcy5jb250cm9sbGVycz1bXTtmb3IoY29uc3QgZSBvZiBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSllJiZ0aGlzLmdhbWVQYWRDb25uZWN0SGFuZGxlcihuZXcgR2FtZXBhZEV2ZW50KFwiZ2FtZXBhZGNvbm5lY3RlZFwiLHtnYW1lcGFkOmV9KSl9dW5yZWdpc3RlckdhbWVQYWRFdmVudHMoKXt0aGlzLmdhbWVQYWRFdmVudExpc3RlbmVyVHJhY2tlci51bnJlZ2lzdGVyQWxsKCksdGhpcy5jb250cm9sbGVycz1bXX1nYW1lUGFkQ29ubmVjdEhhbmRsZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJHYW1lcGFkIGNvbm5lY3QgaGFuZGxlclwiLDYpO2NvbnN0IHQ9ZS5nYW1lcGFkLHM9e2N1cnJlbnRTdGF0ZTp0LHByZXZTdGF0ZTp0fTt0aGlzLmNvbnRyb2xsZXJzLnB1c2gocyksdGhpcy5jb250cm9sbGVyc1t0LmluZGV4XS5jdXJyZW50U3RhdGU9dCx0aGlzLmNvbnRyb2xsZXJzW3QuaW5kZXhdLnByZXZTdGF0ZT10LGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiZ2FtZXBhZDogXCIrdC5pZCtcIiBjb25uZWN0ZWRcIiw2KSx0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMudXBkYXRlU3RhdHVzKCkpKX1nYW1lUGFkRGlzY29ubmVjdEhhbmRsZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJHYW1lcGFkIGRpc2Nvbm5lY3QgaGFuZGxlclwiLDYpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiZ2FtZXBhZDogXCIrZS5nYW1lcGFkLmlkK1wiIGRpc2Nvbm5lY3RlZFwiLDYpLGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXJzW2UuZ2FtZXBhZC5pbmRleF0sdGhpcy5jb250cm9sbGVycz10aGlzLmNvbnRyb2xsZXJzLmZpbHRlcigoZT0+dm9pZCAwIT09ZSkpfXNjYW5HYW1lUGFkcygpe2NvbnN0IGU9bmF2aWdhdG9yLmdldEdhbWVwYWRzP25hdmlnYXRvci5nZXRHYW1lcGFkcygpOm5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcz9uYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTpbXTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdJiZlW3RdLmluZGV4IGluIHRoaXMuY29udHJvbGxlcnMmJih0aGlzLmNvbnRyb2xsZXJzW2VbdF0uaW5kZXhdLmN1cnJlbnRTdGF0ZT1lW3RdKX11cGRhdGVTdGF0dXMoKXt0aGlzLnNjYW5HYW1lUGFkcygpO2NvbnN0IGU9dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnM7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jb250cm9sbGVycyl7Y29uc3Qgcz10aGlzLmNvbnRyb2xsZXJzLmluZGV4T2YodCksbj10LmN1cnJlbnRTdGF0ZTtmb3IobGV0IG49MDtuPHQuY3VycmVudFN0YXRlLmJ1dHRvbnMubGVuZ3RoO24rKyl7Y29uc3Qgcj10LmN1cnJlbnRTdGF0ZS5idXR0b25zW25dLGk9dC5wcmV2U3RhdGUuYnV0dG9uc1tuXTtyLnByZXNzZWQ/bj09UmUuTGVmdFRyaWdnZXI/ZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLDUsci52YWx1ZV0pOm49PVJlLlJpZ2h0VHJpZ2dlcj9lLmdldChcIkdhbWVwYWRBbmFsb2dcIikoW3MsNixyLnZhbHVlXSk6ZS5nZXQoXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiKShbcyxuLGkucHJlc3NlZD8xOjBdKTohci5wcmVzc2VkJiZpLnByZXNzZWQmJihuPT1SZS5MZWZ0VHJpZ2dlcj9lLmdldChcIkdhbWVwYWRBbmFsb2dcIikoW3MsNSwwXSk6bj09UmUuUmlnaHRUcmlnZ2VyP2UuZ2V0KFwiR2FtZXBhZEFuYWxvZ1wiKShbcyw2LDBdKTplLmdldChcIkdhbWVwYWRCdXR0b25SZWxlYXNlZFwiKShbcyxuXSkpfWZvcihsZXQgdD0wO3Q8bi5heGVzLmxlbmd0aDt0Kz0yKXtjb25zdCByPXBhcnNlRmxvYXQobi5heGVzW3RdLnRvRml4ZWQoNCkpLGk9LXBhcnNlRmxvYXQobi5heGVzW3QrMV0udG9GaXhlZCg0KSk7ZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLHQrMSxyXSksZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLHQrMixpXSl9dGhpcy5jb250cm9sbGVyc1tzXS5wcmV2U3RhdGU9bn10aGlzLmNvbnRyb2xsZXJzLmxlbmd0aD4wJiZ0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMudXBkYXRlU3RhdHVzKCkpKX19IWZ1bmN0aW9uKGUpe2VbZS5SaWdodENsdXN0ZXJCb3R0b21CdXR0b249MF09XCJSaWdodENsdXN0ZXJCb3R0b21CdXR0b25cIixlW2UuUmlnaHRDbHVzdGVyUmlnaHRCdXR0b249MV09XCJSaWdodENsdXN0ZXJSaWdodEJ1dHRvblwiLGVbZS5SaWdodENsdXN0ZXJMZWZ0QnV0dG9uPTJdPVwiUmlnaHRDbHVzdGVyTGVmdEJ1dHRvblwiLGVbZS5SaWdodENsdXN0ZXJUb3BCdXR0b249M109XCJSaWdodENsdXN0ZXJUb3BCdXR0b25cIixlW2UuTGVmdFNob3VsZGVyPTRdPVwiTGVmdFNob3VsZGVyXCIsZVtlLlJpZ2h0U2hvdWxkZXI9NV09XCJSaWdodFNob3VsZGVyXCIsZVtlLkxlZnRUcmlnZ2VyPTZdPVwiTGVmdFRyaWdnZXJcIixlW2UuUmlnaHRUcmlnZ2VyPTddPVwiUmlnaHRUcmlnZ2VyXCIsZVtlLlNlbGVjdE9yQmFjaz04XT1cIlNlbGVjdE9yQmFja1wiLGVbZS5TdGFydE9yRm9yd2FyZD05XT1cIlN0YXJ0T3JGb3J3YXJkXCIsZVtlLkxlZnRBbmFsb2dQcmVzcz0xMF09XCJMZWZ0QW5hbG9nUHJlc3NcIixlW2UuUmlnaHRBbmFsb2dQcmVzcz0xMV09XCJSaWdodEFuYWxvZ1ByZXNzXCIsZVtlLkxlZnRDbHVzdGVyVG9wQnV0dG9uPTEyXT1cIkxlZnRDbHVzdGVyVG9wQnV0dG9uXCIsZVtlLkxlZnRDbHVzdGVyQm90dG9tQnV0dG9uPTEzXT1cIkxlZnRDbHVzdGVyQm90dG9tQnV0dG9uXCIsZVtlLkxlZnRDbHVzdGVyTGVmdEJ1dHRvbj0xNF09XCJMZWZ0Q2x1c3RlckxlZnRCdXR0b25cIixlW2UuTGVmdENsdXN0ZXJSaWdodEJ1dHRvbj0xNV09XCJMZWZ0Q2x1c3RlclJpZ2h0QnV0dG9uXCIsZVtlLkNlbnRyZUJ1dHRvbj0xNl09XCJDZW50cmVCdXR0b25cIixlW2UuTGVmdFN0aWNrSG9yaXpvbnRhbD0wXT1cIkxlZnRTdGlja0hvcml6b250YWxcIixlW2UuTGVmdFN0aWNrVmVydGljYWw9MV09XCJMZWZ0U3RpY2tWZXJ0aWNhbFwiLGVbZS5SaWdodFN0aWNrSG9yaXpvbnRhbD0yXT1cIlJpZ2h0U3RpY2tIb3Jpem9udGFsXCIsZVtlLlJpZ2h0U3RpY2tWZXJ0aWNhbD0zXT1cIlJpZ2h0U3RpY2tWZXJ0aWNhbFwifShSZXx8KFJlPXt9KSk7Y2xhc3MgWWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuYWN0aXZlS2V5cz1uZXcgSmUsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9dCx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXI9c31yZWdpc3RlcktleUJvYXJkKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVnaXN0ZXIgS2V5Ym9hcmQgRXZlbnRzXCIsNyk7Y29uc3QgdD1uZXcgS2UodGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcixlLHRoaXMuYWN0aXZlS2V5cyk7cmV0dXJuIHQucmVnaXN0ZXJLZXlCb2FyZEV2ZW50cygpLHR9cmVnaXN0ZXJNb3VzZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlJlZ2lzdGVyIE1vdXNlIEV2ZW50c1wiLDcpO2NvbnN0IHQ9bmV3IHFlKHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIsdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcix0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIsdGhpcy5hY3RpdmVLZXlzKTtzd2l0Y2goZSl7Y2FzZSB1ZS5Mb2NrZWRNb3VzZTp0LnJlZ2lzdGVyTG9ja2VkTW91c2VFdmVudHModCk7YnJlYWs7Y2FzZSB1ZS5Ib3ZlcmluZ01vdXNlOnQucmVnaXN0ZXJIb3ZlcmluZ01vdXNlRXZlbnRzKHQpO2JyZWFrO2RlZmF1bHQ6aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwidW5rbm93biBDb250cm9sIFNjaGVtZSBUeXBlIERlZmF1bHRpbmcgdG8gTG9ja2VkIE1vdXNlIEV2ZW50c1wiKSx0LnJlZ2lzdGVyTG9ja2VkTW91c2VFdmVudHModCl9cmV0dXJuIHR9cmVnaXN0ZXJUb3VjaChlLHQpe2lmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVnaXN0ZXJpbmcgVG91Y2hcIiw2KSxlKXtjb25zdCBlPW5ldyBIZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIsdGhpcy5jb29yZGluYXRlQ29udmVydGVyKTtyZXR1cm4gZS5zZXRWaWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0KHQpLGV9cmV0dXJuIG5ldyBYZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIsdGhpcy5jb29yZGluYXRlQ29udmVydGVyKX1yZWdpc3RlckdhbWVQYWQoKXtyZXR1cm4gaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJSZWdpc3RlciBHYW1lIFBhZFwiLDcpLG5ldyBqZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyKX19Y2xhc3MgSmV7Y29uc3RydWN0b3IoKXt0aGlzLmFjdGl2ZUtleXM9W10sdGhpcy5hY3RpdmVLZXlzPVtdfWdldEFjdGl2ZUtleXMoKXtyZXR1cm4gdGhpcy5hY3RpdmVLZXlzfX1jbGFzcyBaZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMubGFzdFRpbWVSZXNpemVkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMudmlkZW9FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSx0aGlzLmNvbmZpZz10LHRoaXMudmlkZW9FbGVtZW50LmlkPVwic3RyZWFtaW5nVmlkZW9cIix0aGlzLnZpZGVvRWxlbWVudC5kaXNhYmxlUGljdHVyZUluUGljdHVyZT0hMCx0aGlzLnZpZGVvRWxlbWVudC5wbGF5c0lubGluZT0hMCx0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS53aWR0aD1cIjEwMCVcIix0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy52aWRlb0VsZW1lbnQuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJhbGxcIixlLmFwcGVuZENoaWxkKHRoaXMudmlkZW9FbGVtZW50KSx0aGlzLm9uUmVzaXplUGxheWVyQ2FsbGJhY2s9KCk9Pntjb25zb2xlLmxvZyhcIlJlc29sdXRpb24gY2hhbmdlZCwgcmVzdHlsaW5nIHBsYXllciwgZGlkIHlvdSBmb3JnZXQgdG8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbj9cIil9LHRoaXMub25NYXRjaFZpZXdwb3J0UmVzb2x1dGlvbkNhbGxiYWNrPSgpPT57Y29uc29sZS5sb2coXCJSZXNvbHV0aW9uIGNoYW5nZWQgYW5kIG1hdGNoIHZpZXdwb3J0IHJlc29sdXRpb24gaXMgdHVybmVkIG9uLCBkaWQgeW91IGZvcmdldCB0byBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uP1wiKX0sdGhpcy52aWRlb0VsZW1lbnQub25jbGljaz0oKT0+e3RoaXMudmlkZW9FbGVtZW50LnBhdXNlZCYmdGhpcy52aWRlb0VsZW1lbnQucGxheSgpfSx0aGlzLnZpZGVvRWxlbWVudC5vbmxvYWRlZG1ldGFkYXRhPSgpPT57dGhpcy5vblZpZGVvSW5pdGlhbGl6ZWQoKX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwoKCk9PnRoaXMucmVzaXplUGxheWVyU3R5bGUoKSksITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwoKCk9PnRoaXMub25PcmllbnRhdGlvbkNoYW5nZSgpKSl9cGxheSgpe3JldHVybiB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZD10aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN0YXJ0VmlkZW9NdXRlZCksdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXk9dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5BdXRvUGxheVZpZGVvKSx0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCl9aXNQYXVzZWQoKXtyZXR1cm4gdGhpcy52aWRlb0VsZW1lbnQucGF1c2VkfWlzVmlkZW9SZWFkeSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlJiZ0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlPjB9aGFzVmlkZW9Tb3VyY2UoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0JiZudWxsIT09dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0fWdldFZpZGVvRWxlbWVudCgpe3JldHVybiB0aGlzLnZpZGVvRWxlbWVudH1nZXRWaWRlb1BhcmVudEVsZW1lbnQoKXtyZXR1cm4gdGhpcy52aWRlb0VsZW1lbnQucGFyZW50RWxlbWVudH1zZXRWaWRlb0VuYWJsZWQoZSl7dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0LmdldFRyYWNrcygpLmZvckVhY2goKHQ9PnQuZW5hYmxlZD1lKSl9b25WaWRlb0luaXRpYWxpemVkKCl7fW9uT3JpZW50YXRpb25DaGFuZ2UoKXtjbGVhclRpbWVvdXQodGhpcy5vcmllbnRhdGlvbkNoYW5nZVRpbWVvdXQpLHRoaXMub3JpZW50YXRpb25DaGFuZ2VUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e3RoaXMucmVzaXplUGxheWVyU3R5bGUoKX0pLDUwMCl9cmVzaXplUGxheWVyU3R5bGUoKXtjb25zdCBlPXRoaXMuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7ZSYmKHRoaXMudXBkYXRlVmlkZW9TdHJlYW1TaXplKCksZS5jbGFzc0xpc3QuY29udGFpbnMoXCJmaXhlZC1zaXplXCIpfHx0aGlzLnJlc2l6ZVBsYXllclN0eWxlVG9GaWxsUGFyZW50RWxlbWVudCgpLHRoaXMub25SZXNpemVQbGF5ZXJDYWxsYmFjaygpKX1yZXNpemVQbGF5ZXJTdHlsZVRvRmlsbFBhcmVudEVsZW1lbnQoKXt0aGlzLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ0b3A6IDBweDsgbGVmdDogMHB4OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBjdXJzb3I6IGRlZmF1bHQ7XCIpfXVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpe2lmKHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuTWF0Y2hWaWV3cG9ydFJlc29sdXRpb24pKWlmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMubGFzdFRpbWVSZXNpemVkPjFlMyl7Y29uc3QgZT10aGlzLmdldFZpZGVvUGFyZW50RWxlbWVudCgpO2lmKCFlKXJldHVybjt0aGlzLm9uTWF0Y2hWaWV3cG9ydFJlc29sdXRpb25DYWxsYmFjayhlLmNsaWVudFdpZHRoLGUuY2xpZW50SGVpZ2h0KSx0aGlzLmxhc3RUaW1lUmVzaXplZD0obmV3IERhdGUpLmdldFRpbWUoKX1lbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVzaXppbmcgdG9vIG9mdGVuIC0gc2tpcHBpbmdcIiw2KSxjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0SGFuZGxlKSx0aGlzLnJlc2l6ZVRpbWVvdXRIYW5kbGU9d2luZG93LnNldFRpbWVvdXQoKCgpPT50aGlzLnVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSksMWUzKX19Y2xhc3MgZXR7Y29uc3RydWN0b3IoKXt0aGlzLm1hcD1uZXcgTWFwLHRoaXMucmV2ZXJzZU1hcD1uZXcgTWFwfWdldEZyb21LZXkoZSl7cmV0dXJuIHRoaXMubWFwLmdldChlKX1nZXRGcm9tVmFsdWUoZSl7cmV0dXJuIHRoaXMucmV2ZXJzZU1hcC5nZXQoZSl9YWRkKGUsdCl7dGhpcy5tYXAuc2V0KGUsdCksdGhpcy5yZXZlcnNlTWFwLnNldCh0LGUpfXJlbW92ZShlLHQpe3RoaXMubWFwLmRlbGV0ZShlKSx0aGlzLnJldmVyc2VNYXAuZGVsZXRlKHQpfX1jbGFzcyB0dHtjb25zdHJ1Y3Rvcigpe3RoaXMudG9TdHJlYW1lckhhbmRsZXJzPW5ldyBNYXAsdGhpcy5mcm9tU3RyZWFtZXJIYW5kbGVycz1uZXcgTWFwLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzPW5ldyBldCx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzPW5ldyBldH1wb3B1bGF0ZURlZmF1bHRQcm90b2NvbCgpe3RoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIklGcmFtZVJlcXVlc3RcIix7aWQ6MCxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIse2lkOjEsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZwc1JlcXVlc3RcIix7aWQ6MixieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiQXZlcmFnZUJpdHJhdGVSZXF1ZXN0XCIse2lkOjMsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlN0YXJ0U3RyZWFtaW5nXCIse2lkOjQsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlN0b3BTdHJlYW1pbmdcIix7aWQ6NSxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTGF0ZW5jeVRlc3RcIix7aWQ6NixieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUmVxdWVzdEluaXRpYWxTZXR0aW5nc1wiLHtpZDo3LGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUZXN0RWNob1wiLHtpZDo4LGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJVSUludGVyYWN0aW9uXCIse2lkOjUwLGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJDb21tYW5kXCIse2lkOjUxLGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJLZXlEb3duXCIse2lkOjYwLGJ5dGVMZW5ndGg6MixzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiS2V5VXBcIix7aWQ6NjEsYnl0ZUxlbmd0aDoxLHN0cnVjdHVyZTpbXCJ1aW50OFwiXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIktleVByZXNzXCIse2lkOjYyLGJ5dGVMZW5ndGg6MixzdHJ1Y3R1cmU6W1widWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VFbnRlclwiLHtpZDo3MCxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VMZWF2ZVwiLHtpZDo3MSxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VEb3duXCIse2lkOjcyLGJ5dGVMZW5ndGg6NSxzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQxNlwiLFwidWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VVcFwiLHtpZDo3MyxieXRlTGVuZ3RoOjUsc3RydWN0dXJlOltcInVpbnQ4XCIsXCJ1aW50MTZcIixcInVpbnQxNlwiXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIk1vdXNlTW92ZVwiLHtpZDo3NCxieXRlTGVuZ3RoOjgsc3RydWN0dXJlOltcInVpbnQxNlwiLFwidWludDE2XCIsXCJpbnQxNlwiLFwiaW50MTZcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJNb3VzZVdoZWVsXCIse2lkOjc1LGJ5dGVMZW5ndGg6NixzdHJ1Y3R1cmU6W1wiaW50MTZcIixcInVpbnQxNlwiLFwidWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VEb3VibGVcIix7aWQ6NzYsYnl0ZUxlbmd0aDo1LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUb3VjaFN0YXJ0XCIse2lkOjgwLGJ5dGVMZW5ndGg6OCxzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQxNlwiLFwidWludDE2XCIsXCJ1aW50OFwiLFwidWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVG91Y2hFbmRcIix7aWQ6ODEsYnl0ZUxlbmd0aDo4LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIixcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUb3VjaE1vdmVcIix7aWQ6ODIsYnl0ZUxlbmd0aDo4LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIixcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiLHtpZDo5MCxieXRlTGVuZ3RoOjMsc3RydWN0dXJlOltcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkQnV0dG9uUmVsZWFzZWRcIix7aWQ6OTEsYnl0ZUxlbmd0aDozLHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiR2FtZXBhZEFuYWxvZ1wiLHtpZDo5MixieXRlTGVuZ3RoOjEwLHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDhcIixcImRvdWJsZVwiXX0pLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUXVhbGl0eUNvbnRyb2xPd25lcnNoaXBcIiwwKSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlJlc3BvbnNlXCIsMSksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJDb21tYW5kXCIsMiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJGcmVlemVGcmFtZVwiLDMpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVW5mcmVlemVGcmFtZVwiLDQpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVmlkZW9FbmNvZGVyQXZnUVBcIiw1KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkxhdGVuY3lUZXN0XCIsNiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJJbml0aWFsU2V0dGluZ3NcIiw3KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZpbGVFeHRlbnNpb25cIiw4KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZpbGVNaW1lVHlwZVwiLDkpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiRmlsZUNvbnRlbnRzXCIsMTApLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVGVzdEVjaG9cIiwxMSksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJJbnB1dENvbnRyb2xPd25lcnNoaXBcIiwxMiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJQcm90b2NvbFwiLDI1NSl9cmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihlLHQscyl7c3dpdGNoKGUpe2Nhc2UgTGUuVG9TdHJlYW1lcjp0aGlzLnRvU3RyZWFtZXJIYW5kbGVycy5zZXQodCxzKTticmVhaztjYXNlIExlLkZyb21TdHJlYW1lcjp0aGlzLmZyb21TdHJlYW1lckhhbmRsZXJzLnNldCh0LHMpO2JyZWFrO2RlZmF1bHQ6aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFVua25vd24gbWVzc2FnZSBkaXJlY3Rpb24gJHtlfWApfX19IWZ1bmN0aW9uKGUpe2VbZS5Ub1N0cmVhbWVyPTBdPVwiVG9TdHJlYW1lclwiLGVbZS5Gcm9tU3RyZWFtZXI9MV09XCJGcm9tU3RyZWFtZXJcIn0oTGV8fChMZT17fSkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKCl7dGhpcy5yZXNwb25zZUV2ZW50TGlzdGVuZXJzPW5ldyBNYXB9YWRkUmVzcG9uc2VFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5yZXNwb25zZUV2ZW50TGlzdGVuZXJzLnNldChlLHQpfXJlbW92ZVJlc3BvbnNlRXZlbnRMaXN0ZW5lcihlKXt0aGlzLnJlc3BvbnNlRXZlbnRMaXN0ZW5lcnMuZGVsZXRlKGUpfW9uUmVzcG9uc2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5SZXNwb25zZVwiLDYpO2NvbnN0IHQ9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSx0LDYpLHRoaXMucmVzcG9uc2VFdmVudExpc3RlbmVycy5mb3JFYWNoKChlPT57ZSh0KX0pKX19Y2xhc3MgbnR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmRhdGFDaGFubmVsU2VuZGVyPWUsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNNYXBQcm92aWRlcj10fXNlbmRMYXRlbmN5VGVzdChlKXt0aGlzLnNlbmREZXNjcmlwdG9yKFwiTGF0ZW5jeVRlc3RcIixlKX1lbWl0Q29tbWFuZChlKXt0aGlzLnNlbmREZXNjcmlwdG9yKFwiQ29tbWFuZFwiLGUpfWVtaXRVSUludGVyYWN0aW9uKGUpe3RoaXMuc2VuZERlc2NyaXB0b3IoXCJVSUludGVyYWN0aW9uXCIsZSl9c2VuZERlc2NyaXB0b3IoZSx0KXtjb25zdCBzPUpTT04uc3RyaW5naWZ5KHQpLG49dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNNYXBQcm92aWRlci50b1N0cmVhbWVyTWVzc2FnZXMuZ2V0RnJvbUtleShlKTt2b2lkIDA9PT1uJiZpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBBdHRlbXB0ZWQgdG8gZW1pdCBkZXNjcmlwdG9yIHdpdGggbWVzc2FnZSB0eXBlOiAke2V9LCBidXQgdGhlIGZyb250ZW5kIGhhc24ndCBiZWVuIGNvbmZpZ3VyZWQgdG8gc2VuZCBzdWNoIGEgbWVzc2FnZS4gQ2hlY2sgeW91J3ZlIGFkZGVkIHRoZSBtZXNzYWdlIHR5cGUgaW4geW91ciBjcHBgKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmc6IFwiK3QsNik7Y29uc3Qgcj1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMrMipzLmxlbmd0aCkpO2xldCBvPTA7ci5zZXRVaW50OChvLG4uaWQpLG8rKyxyLnNldFVpbnQxNihvLHMubGVuZ3RoLCEwKSxvKz0yO2ZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSsrKXIuc2V0VWludDE2KG8scy5jaGFyQ29kZUF0KGUpLCEwKSxvKz0yO3RoaXMuZGF0YUNoYW5uZWxTZW5kZXIuY2FuU2VuZCgpP3RoaXMuZGF0YUNoYW5uZWxTZW5kZXIuc2VuZERhdGEoci5idWZmZXIpOmkuSW5mbyhpLkdldFN0YWNrVHJhY2UoKSxgRGF0YSBjaGFubmVsIGNhbm5vdCBzZW5kIHlldCwgc2tpcHBpbmcgc2VuZGluZyBkZXNjcmlwdG9yIG1lc3NhZ2U6ICR7ZX0gLSAke3N9YCl9fWNsYXNzIHJ0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5kYXRhQ2hhbm5lbFNlbmRlcj1lLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzTWFwUHJvdmlkZXI9dH1zZW5kTWVzc2FnZVRvU3RyZWFtZXIoZSx0KXt2b2lkIDA9PT10JiYodD1bXSk7Y29uc3Qgcz10aGlzLnRvU3RyZWFtZXJNZXNzYWdlc01hcFByb3ZpZGVyLnRvU3RyZWFtZXJNZXNzYWdlcy5nZXRGcm9tS2V5KGUpO2lmKHZvaWQgMD09PXMpcmV0dXJuIHZvaWQgaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgQXR0ZW1wdGVkIHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzdHJlYW1lciB3aXRoIG1lc3NhZ2UgdHlwZTogJHtlfSwgYnV0IHRoZSBmcm9udGVuZCBoYXNuJ3QgYmVlbiBjb25maWd1cmVkIHRvIHNlbmQgc3VjaCBhIG1lc3NhZ2UuIENoZWNrIHlvdSd2ZSBhZGRlZCB0aGUgbWVzc2FnZSB0eXBlIGluIHlvdXIgY3BwYCk7Y29uc3Qgbj1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHMuYnl0ZUxlbmd0aCsxKSk7bi5zZXRVaW50OCgwLHMuaWQpO2xldCByPTE7dC5mb3JFYWNoKCgoZSx0KT0+e3N3aXRjaChzLnN0cnVjdHVyZVt0XSl7Y2FzZVwidWludDhcIjpuLnNldFVpbnQ4KHIsZSkscis9MTticmVhaztjYXNlXCJ1aW50MTZcIjpuLnNldFVpbnQxNihyLGUsITApLHIrPTI7YnJlYWs7Y2FzZVwiaW50MTZcIjpuLnNldEludDE2KHIsZSwhMCkscis9MjticmVhaztjYXNlXCJmbG9hdFwiOm4uc2V0RmxvYXQzMihyLGUsITApLHIrPTQ7YnJlYWs7Y2FzZVwiZG91YmxlXCI6bi5zZXRGbG9hdDY0KHIsZSwhMCkscis9OH19KSksdGhpcy5kYXRhQ2hhbm5lbFNlbmRlci5jYW5TZW5kKCk/dGhpcy5kYXRhQ2hhbm5lbFNlbmRlci5zZW5kRGF0YShuLmJ1ZmZlcik6aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLGBEYXRhIGNoYW5uZWwgY2Fubm90IHNlbmQgeWV0LCBza2lwcGluZyBzZW5kaW5nIG1lc3NhZ2U6ICR7ZX0gLSAke25ldyBVaW50OEFycmF5KG4uYnVmZmVyKX1gKX19Y2xhc3MgaXR7Y29uc3RydWN0b3IoZSl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXI9ZX1TZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sKCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIpfVNlbmRNYXhGcHNSZXF1ZXN0KCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiRnBzUmVxdWVzdFwiKX1TZW5kQXZlcmFnZUJpdHJhdGVSZXF1ZXN0KCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiQXZlcmFnZUJpdHJhdGVSZXF1ZXN0XCIpfVNlbmRTdGFydFN0cmVhbWluZygpe3RoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlN0YXJ0U3RyZWFtaW5nXCIpfVNlbmRTdG9wU3RyZWFtaW5nKCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiU3RvcFN0cmVhbWluZ1wiKX1TZW5kUmVxdWVzdEluaXRpYWxTZXR0aW5ncygpe3RoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlJlcXVlc3RJbml0aWFsU2V0dGluZ3NcIil9fWNsYXNzIG90e2NvbnN0cnVjdG9yKGUpe3RoaXMuZGF0YUNoYW5uZWxQcm92aWRlcj1lfWNhblNlbmQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5kYXRhQ2hhbm5lbFByb3ZpZGVyLmdldERhdGFDaGFubmVsSW5zdGFuY2UoKS5kYXRhQ2hhbm5lbCYmXCJvcGVuXCI9PXRoaXMuZGF0YUNoYW5uZWxQcm92aWRlci5nZXREYXRhQ2hhbm5lbEluc3RhbmNlKCkuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZX1zZW5kRGF0YShlKXtjb25zdCB0PXRoaXMuZGF0YUNoYW5uZWxQcm92aWRlci5nZXREYXRhQ2hhbm5lbEluc3RhbmNlKCk7XCJvcGVuXCI9PXQuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZT8odC5kYXRhQ2hhbm5lbC5zZW5kKGUpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBNZXNzYWdlIFNlbnQ6ICR7bmV3IFVpbnQ4QXJyYXkoZSl9YCw2KSx0aGlzLnJlc2V0QWZrV2FybmluZ1RpbWVyT25EYXRhU2VuZCgpKTppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBNZXNzYWdlIEZhaWxlZDogJHtuZXcgVWludDhBcnJheShlKX1gKX1yZXNldEFma1dhcm5pbmdUaW1lck9uRGF0YVNlbmQoKXt9fWNsYXNzIGF0e2NvbnN0cnVjdG9yKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9ZSx0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiTm9ybWFsaXplIGFuZCBxdWFudGl6ZSB1bnNpZ25lZCwgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiTm9ybWFsaXplIGFuZCB1bnF1YW50aXplIHNpZ25lZCwgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiRGVub3JtYWxpemUgYW5kIHVucXVhbnRpemUgdW5zaWduZWQsIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfX1ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGUsdCl7cmV0dXJuIHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZEZ1bmMoZSx0KX11bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChlLHQpe3JldHVybiB0aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkRnVuYyhlLHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGUsdCl7cmV0dXJuIHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jKGUsdCl9c2V0dXBOb3JtYWxpemVBbmRRdWFudGl6ZSgpe2lmKHRoaXMudmlkZW9FbGVtZW50UGFyZW50PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCksdGhpcy52aWRlb0VsZW1lbnQ9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKSx0aGlzLnZpZGVvRWxlbWVudFBhcmVudCYmdGhpcy52aWRlb0VsZW1lbnQpe2NvbnN0IGU9dGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0L3RoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoLHQ9dGhpcy52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQvdGhpcy52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtlPnQ/KGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPiB2aWRlb0FzcGVjdFJhdGlvXCIsNiksdGhpcy5yYXRpbz1lL3QsdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkUGxheWVyQmlnZ2VyKGUsdCksdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZEZ1bmM9KGUsdCk9PnRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRQbGF5ZXJCaWdnZXIoZSx0KSx0aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5kZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZFBsYXllckJpZ2dlcihlLHQpKTooaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA8PSB2aWRlb0FzcGVjdFJhdGlvXCIsNiksdGhpcy5yYXRpbz10L2UsdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkUGxheWVyU21hbGxlcihlLHQpLHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jPShlLHQpPT50aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyU21hbGxlcihlLHQpLHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jPShlLHQpPT50aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkUGxheWVyU21hbGxlcihlLHQpKX19bm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZFBsYXllckJpZ2dlcihlLHQpe2NvbnN0IHM9ZS90aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCxuPXRoaXMucmF0aW8qKHQvdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0LS41KSsuNTtyZXR1cm4gczwwfHxzPjF8fG48MHx8bj4xP25ldyBsdCghMSw2NTUzNSw2NTUzNSk6bmV3IGx0KCEwLDY1NTM2KnMsNjU1MzYqbil9ZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRQbGF5ZXJCaWdnZXIoZSx0KXtjb25zdCBzPWUvNjU1MzYsbj0odC82NTUzNi0uNSkvdGhpcy5yYXRpbysuNTtyZXR1cm4gbmV3IGR0KHMqdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgsbip0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyQmlnZ2VyKGUsdCl7Y29uc3Qgcz1lLyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCksbj10aGlzLnJhdGlvKnQvKC41KnRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudEhlaWdodCk7cmV0dXJuIG5ldyBjdCgzMjc2NypzLDMyNzY3Km4pfW5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRQbGF5ZXJTbWFsbGVyKGUsdCl7Y29uc3Qgcz10aGlzLnJhdGlvKihlL3RoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoLS41KSsuNSxuPXQvdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0O3JldHVybiBzPDB8fHM+MXx8bjwwfHxuPjE/bmV3IGx0KCExLDY1NTM1LDY1NTM1KTpuZXcgbHQoITAsNjU1MzYqcyw2NTUzNipuKX1kZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZFBsYXllclNtYWxsZXIoZSx0KXtjb25zdCBzPShlLzY1NTM2LS41KS90aGlzLnJhdGlvKy41LG49dC82NTUzNjtyZXR1cm4gbmV3IGR0KHMqdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgsbip0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyU21hbGxlcihlLHQpe2NvbnN0IHM9dGhpcy5yYXRpbyplLyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCksbj10LyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpO3JldHVybiBuZXcgY3QoMzI3NjcqcywzMjc2NypuKX19Y2xhc3MgbHR7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuaW5SYW5nZT1lLHRoaXMueD10LHRoaXMueT1zfX1jbGFzcyBkdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMueD1lLHRoaXMueT10fX1jbGFzcyBjdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMueD1lLHRoaXMueT10fX1jbGFzcyBodHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5PSEwLHRoaXMuY29uZmlnPWUsdGhpcy5waXhlbFN0cmVhbWluZz10LHRoaXMucmVzcG9uc2VDb250cm9sbGVyPW5ldyBzdCx0aGlzLmZpbGU9bmV3IEdlLHRoaXMuc2RwQ29uc3RyYWludHM9e29mZmVyVG9SZWNlaXZlQXVkaW86ITAsb2ZmZXJUb1JlY2VpdmVWaWRlbzohMH0sdGhpcy5hZmtDb250cm9sbGVyPW5ldyBtZSh0aGlzLmNvbmZpZyx0aGlzLnBpeGVsU3RyZWFtaW5nLHRoaXMub25BZmtUcmlnZ2VyZWQuYmluZCh0aGlzKSksdGhpcy5hZmtDb250cm9sbGVyLm9uQUZLVGltZWRPdXRDYWxsYmFjaz0oKT0+e3RoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpLHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKX0sdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXI9bmV3IHkodGhpcy5waXhlbFN0cmVhbWluZy52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMudmlkZW9QbGF5ZXI9bmV3IFplKHRoaXMucGl4ZWxTdHJlYW1pbmcudmlkZW9FbGVtZW50UGFyZW50LHRoaXMuY29uZmlnKSx0aGlzLnZpZGVvUGxheWVyLm9uVmlkZW9Jbml0aWFsaXplZD0oKT0+dGhpcy5oYW5kbGVWaWRlb0luaXRpYWxpemVkKCksdGhpcy52aWRlb1BsYXllci5vbk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uQ2FsbGJhY2s9KGUsdCk9Pntjb25zdCBzPXtcIlJlc29sdXRpb24uV2lkdGhcIjplLFwiUmVzb2x1dGlvbi5IZWlnaHRcIjp0fTt0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZChzKX0sdGhpcy52aWRlb1BsYXllci5vblJlc2l6ZVBsYXllckNhbGxiYWNrPSgpPT57dGhpcy5zZXRVcE1vdXNlQW5kRnJlZXplRnJhbWUoKX0sdGhpcy5zdHJlYW1Db250cm9sbGVyPW5ldyBUKHRoaXMudmlkZW9QbGF5ZXIpLHRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlcj1uZXcgYXQodGhpcy52aWRlb1BsYXllciksdGhpcy5zZW5kcmVjdkRhdGFDaGFubmVsQ29udHJvbGxlcj1uZXcgU2UsdGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyPW5ldyBTZSx0aGlzLnJlZ2lzdGVyRGF0YUNoYW5uZWxFdmVudEVtaXR0ZXJzKHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIpLHRoaXMucmVnaXN0ZXJEYXRhQ2hhbm5lbEV2ZW50RW1pdHRlcnModGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyKSx0aGlzLmRhdGFDaGFubmVsU2VuZGVyPW5ldyBvdCh0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyKSx0aGlzLmRhdGFDaGFubmVsU2VuZGVyLnJlc2V0QWZrV2FybmluZ1RpbWVyT25EYXRhU2VuZD0oKT0+dGhpcy5hZmtDb250cm9sbGVyLnJlc2V0QWZrV2FybmluZ1RpbWVyKCksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlcj1uZXcgdHQsdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyPW5ldyBmLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbkNvbmZpZz1lPT50aGlzLmhhbmRsZU9uQ29uZmlnTWVzc2FnZShlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25TdHJlYW1lckxpc3Q9ZT0+dGhpcy5oYW5kbGVTdHJlYW1lckxpc3RNZXNzYWdlKGUpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbldlYlNvY2tldE9uY2xvc2VPdmVybGF5TWVzc2FnZT1lPT57dGhpcy5waXhlbFN0cmVhbWluZy5fb25EaXNjb25uZWN0KGBXZWJzb2NrZXQgZGlzY29ubmVjdCAoJHtlLmNvZGV9KSAke1wiXCIhPWUucmVhc29uP1wiLSBcIitlLnJlYXNvbjpcIlwifWApLHRoaXMuc2V0VmlkZW9FbmNvZGVyQXZnUVAoMCl9LHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwoKCk9Pnt0aGlzLndlYlNvY2tldENvbnRyb2xsZXIucmVxdWVzdFN0cmVhbWVyTGlzdCgpfSkpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCgoKT0+e3RoaXMuYWZrQ29udHJvbGxlci5zdG9wQWZrV2FybmluZ1RpbWVyKCksdGhpcy5zdGF0c1RpbWVySGFuZGxlJiZ2b2lkIDAhPT10aGlzLnN0YXRzVGltZXJIYW5kbGUmJndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc3RhdHNUaW1lckhhbmRsZSl9KSksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXI9bmV3IG50KHRoaXMuZGF0YUNoYW5uZWxTZW5kZXIsdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlciksdGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXI9bmV3IHJ0KHRoaXMuZGF0YUNoYW5uZWxTZW5kZXIsdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlciksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNDb250cm9sbGVyPW5ldyBpdCh0aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlciksdGhpcy5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVycygpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucG9wdWxhdGVEZWZhdWx0UHJvdG9jb2woKSx0aGlzLmlucHV0Q2xhc3Nlc0ZhY3Rvcnk9bmV3IFllKHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIsdGhpcy52aWRlb1BsYXllcix0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIpLHRoaXMuaXNVc2luZ1NGVT0hMSx0aGlzLmlzUXVhbGl0eUNvbnRyb2xsZXI9ITEsdGhpcy5wcmVmZXJyZWRDb2RlYz1cIlwiLHRoaXMuY29uZmlnLl9hZGRPbk9wdGlvblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIoY2UuU3RyZWFtZXJJZCwoZT0+e3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLmNsb3NlKCksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuY3JlYXRlUGVlckNvbm5lY3Rpb24odGhpcy5wZWVyQ29uZmlnLHRoaXMucHJlZmVycmVkQ29kZWMpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kU3Vic2NyaWJlKGUpfSkpLHRoaXMuc2V0VmlkZW9FbmNvZGVyQXZnUVAoLTEpLHRoaXMuc2lnbmFsbGluZ1VybEJ1aWxkZXI9KCk9PntsZXQgZT10aGlzLmNvbmZpZy5nZXRUZXh0U2V0dGluZ1ZhbHVlKGxlLlNpZ25hbGxpbmdTZXJ2ZXJVcmwpO3JldHVybiB0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkJyb3dzZXJTZW5kT2ZmZXIpJiYoZSs9XCI/XCIrcmUuQnJvd3NlclNlbmRPZmZlcitcIj10cnVlXCIpLGV9fXJlcXVlc3RVbnF1YW50aXplZEFuZERlbm9ybWFsaXplVW5zaWduZWQoZSx0KXtyZXR1cm4gdGhpcy5jb29yZGluYXRlQ29udmVydGVyLnVucXVhbnRpemVBbmREZW5vcm1hbGl6ZVVuc2lnbmVkKGUsdCl9aGFuZGxlT25NZXNzYWdlKGUpe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoZS5kYXRhKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIk1lc3NhZ2UgaW5jb21pbmc6XCIrdCw2KTtjb25zdCBzPXRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIuZnJvbVN0cmVhbWVyTWVzc2FnZXMuZ2V0RnJvbVZhbHVlKHRbMF0pO3RoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIuZnJvbVN0cmVhbWVySGFuZGxlcnMuZ2V0KHMpKGUuZGF0YSl9cmVnaXN0ZXJNZXNzYWdlSGFuZGxlcnMoKXt0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiUXVhbGl0eUNvbnRyb2xPd25lcnNoaXBcIiwoZT0+dGhpcy5vblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIlJlc3BvbnNlXCIsKGU9PnRoaXMucmVzcG9uc2VDb250cm9sbGVyLm9uUmVzcG9uc2UoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiQ29tbWFuZFwiLChlPT57dGhpcy5vbkNvbW1hbmQoZSl9KSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIkZyZWV6ZUZyYW1lXCIsKGU9PnRoaXMub25GcmVlemVGcmFtZU1lc3NhZ2UoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiVW5mcmVlemVGcmFtZVwiLCgoKT0+dGhpcy5pbnZhbGlkYXRlRnJlZXplRnJhbWVBbmRFbmFibGVWaWRlbygpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIlZpZGVvRW5jb2RlckF2Z1FQXCIsKGU9PnRoaXMuaGFuZGxlVmlkZW9FbmNvZGVyQXZnUVAoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiTGF0ZW5jeVRlc3RcIiwoZT0+dGhpcy5oYW5kbGVMYXRlbmN5VGVzdFJlc3VsdChlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJJbml0aWFsU2V0dGluZ3NcIiwoZT0+dGhpcy5oYW5kbGVJbml0aWFsU2V0dGluZ3MoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiRmlsZUV4dGVuc2lvblwiLChlPT50aGlzLm9uRmlsZUV4dGVuc2lvbihlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJGaWxlTWltZVR5cGVcIiwoZT0+dGhpcy5vbkZpbGVNaW1lVHlwZShlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJGaWxlQ29udGVudHNcIiwoZT0+dGhpcy5vbkZpbGVDb250ZW50cyhlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJUZXN0RWNob1wiLCgoKT0+e30pKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiSW5wdXRDb250cm9sT3duZXJzaGlwXCIsKGU9PnRoaXMub25JbnB1dENvbnRyb2xPd25lcnNoaXAoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiUHJvdG9jb2xcIiwoZT0+dGhpcy5vblByb3RvY29sTWVzc2FnZShlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiSUZyYW1lUmVxdWVzdFwiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiSUZyYW1lUmVxdWVzdFwiKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIsKCgpPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJSZXF1ZXN0UXVhbGl0eUNvbnRyb2xcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIkZwc1JlcXVlc3RcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIkZwc1JlcXVlc3RcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIkF2ZXJhZ2VCaXRyYXRlUmVxdWVzdFwiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiQXZlcmFnZUJpdHJhdGVSZXF1ZXN0XCIpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJTdGFydFN0cmVhbWluZ1wiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiU3RhcnRTdHJlYW1pbmdcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlN0b3BTdHJlYW1pbmdcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlN0b3BTdHJlYW1pbmdcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIkxhdGVuY3lUZXN0XCIsKCgpPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJMYXRlbmN5VGVzdFwiKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiUmVxdWVzdEluaXRpYWxTZXR0aW5nc1wiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiUmVxdWVzdEluaXRpYWxTZXR0aW5nc1wiKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiVGVzdEVjaG9cIiwoKCk9Pnt9KSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJVSUludGVyYWN0aW9uXCIsKGU9PnRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRVSUludGVyYWN0aW9uKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJDb21tYW5kXCIsKGU9PnRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJLZXlEb3duXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIktleURvd25cIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiS2V5VXBcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiS2V5VXBcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiS2V5UHJlc3NcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiS2V5UHJlc3NcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiTW91c2VFbnRlclwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJNb3VzZUVudGVyXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIk1vdXNlTGVhdmVcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VMZWF2ZVwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZURvd25cIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VEb3duXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIk1vdXNlVXBcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VVcFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZU1vdmVcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VNb3ZlXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIk1vdXNlV2hlZWxcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VXaGVlbFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZURvdWJsZVwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJNb3VzZURvdWJsZVwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJUb3VjaFN0YXJ0XCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlRvdWNoU3RhcnRcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiVG91Y2hFbmRcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiVG91Y2hFbmRcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiVG91Y2hNb3ZlXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlRvdWNoTW92ZVwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJHYW1lcGFkQnV0dG9uUmVsZWFzZWRcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiR2FtZXBhZEJ1dHRvblJlbGVhc2VkXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIkdhbWVwYWRBbmFsb2dcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiR2FtZXBhZEFuYWxvZ1wiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJYUkhNRFRyYW5zZm9ybVwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJYUkhNRFRyYW5zZm9ybVwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJYUkNvbnRyb2xsZXJUcmFuc2Zvcm1cIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiWFJDb250cm9sbGVyVHJhbnNmb3JtXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlhSU3lzdGVtXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlhSU3lzdGVtXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlhSQnV0dG9uVG91Y2hlZFwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJYUkJ1dHRvblRvdWNoZWRcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiWFJCdXR0b25QcmVzc2VkXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlhSQnV0dG9uUHJlc3NlZFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJYUkJ1dHRvblJlbGVhc2VkXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlhSQnV0dG9uUmVsZWFzZWRcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiWFJBbmFsb2dcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiWFJBbmFsb2dcIixlKSkpfW9uQ29tbWFuZChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkNvbW1hbmRcIiw2KTtjb25zdCB0PW5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUoZS5zbGljZSgxKSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhIENoYW5uZWwgQ29tbWFuZDogXCIrdCw2KTtjb25zdCBzPUpTT04ucGFyc2UodCk7XCJvblNjcmVlbktleWJvYXJkXCI9PT1zLmNvbW1hbmQmJnRoaXMucGl4ZWxTdHJlYW1pbmcuX2FjdGl2YXRlT25TY3JlZW5LZXlib2FyZChzKX1vblByb3RvY29sTWVzc2FnZShlKXt0cnl7Y29uc3QgdD1uZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpLHM9SlNPTi5wYXJzZSh0KTtPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocyxcIkRpcmVjdGlvblwiKXx8aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxcIk1hbGZvcm1lZCBwcm90b2NvbCByZWNlaXZlZC4gRW5zdXJlIHRoZSBwcm90b2NvbCBtZXNzYWdlIGNvbnRhaW5zIGEgZGlyZWN0aW9uXCIpO2NvbnN0IG49cy5EaXJlY3Rpb247ZGVsZXRlIHMuRGlyZWN0aW9uLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBSZWNlaXZlZCBuZXcgJHtuPT1MZS5Gcm9tU3RyZWFtZXI/XCJGcm9tU3RyZWFtZXJcIjpcIlRvU3RyZWFtZXJcIn0gcHJvdG9jb2wuIFVwZGF0aW5nIGV4aXN0aW5nIHByb3RvY29sLi4uYCksT2JqZWN0LmtleXMocykuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9c1tlXTtzd2l0Y2gobil7Y2FzZSBMZS5Ub1N0cmVhbWVyOmlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcImlkXCIpfHwhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsXCJieXRlTGVuZ3RoXCIpKXJldHVybiB2b2lkIGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYFRvU3RyZWFtZXItPiR7ZX0gcHJvdG9jb2wgZGVmaW5pdGlvbiB3YXMgbWFsZm9ybWVkIGFzIGl0IGRpZG4ndCBjb250YWluIGF0IGxlYXN0IGFuIGlkIGFuZCBhIGJ5dGVMZW5ndGhcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmaW5pdGlvbiB3YXM6ICR7SlNPTi5zdHJpbmdpZnkodCxudWxsLDIpfWApO2lmKHQuYnl0ZUxlbmd0aD4wJiYhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsXCJzdHJ1Y3R1cmVcIikpcmV0dXJuIHZvaWQgaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgVG9TdHJlYW1lci0+JHtlfSBwcm90b2NvbCBkZWZpbml0aW9uIHdhcyBtYWxmb3JtZWQgYXMgaXQgc3BlY2lmaWVkIGEgYnl0ZUxlbmd0aCBidXQgbm8gYWNjb21wYW55aW5nIHN0cnVjdHVyZWApO3RoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChlKT90aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoZSx0KTppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBUaGVyZSB3YXMgbm8gcmVnaXN0ZXJlZCBoYW5kbGVyIGZvciBcIiR7ZX1cIiAtIHRyeSBhZGRpbmcgb25lIHVzaW5nIHJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZURpcmVjdGlvbi5Ub1N0cmVhbWVyLCBcIiR7ZX1cIiwgbXlIYW5kbGVyKWApO2JyZWFrO2Nhc2UgTGUuRnJvbVN0cmVhbWVyOmlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcImlkXCIpKXJldHVybiB2b2lkIGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYEZyb21TdHJlYW1lci0+JHtlfSBwcm90b2NvbCBkZWZpbml0aW9uIHdhcyBtYWxmb3JtZWQgYXMgaXQgZGlkbid0IGNvbnRhaW4gYXQgbGVhc3QgYW4gaWRcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmaW5pdGlvbiB3YXM6ICR7SlNPTi5zdHJpbmdpZnkodCxudWxsLDIpfWApO3RoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIuZnJvbVN0cmVhbWVySGFuZGxlcnMuZ2V0KGUpP3RoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKGUsdC5pZCk6aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgVGhlcmUgd2FzIG5vIHJlZ2lzdGVyZWQgaGFuZGxlciBmb3IgXCIke3R9XCIgLSB0cnkgYWRkaW5nIG9uZSB1c2luZyByZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKE1lc3NhZ2VEaXJlY3Rpb24uRnJvbVN0cmVhbWVyLCBcIiR7ZX1cIiwgbXlIYW5kbGVyKWApO2JyZWFrO2RlZmF1bHQ6aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgVW5rbm93biBkaXJlY3Rpb246ICR7bn1gKX19KSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNDb250cm9sbGVyLlNlbmRSZXF1ZXN0SW5pdGlhbFNldHRpbmdzKCksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNDb250cm9sbGVyLlNlbmRSZXF1ZXN0UXVhbGl0eUNvbnRyb2woKX1jYXRjaChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlKX19b25JbnB1dENvbnRyb2xPd25lcnNoaXAoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLklucHV0Q29udHJvbE93bmVyc2hpcFwiLDYpO2NvbnN0IHM9bmV3IEJvb2xlYW4odFsxXSkudmFsdWVPZigpO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBSZWNlaXZlZCBpbnB1dCBjb250cm9sbGVyIG1lc3NhZ2UgLSB3aWxsIHlvdXIgaW5wdXQgY29udHJvbCB0aGUgc3RyZWFtOiAke3N9YCksdGhpcy5waXhlbFN0cmVhbWluZy5fb25JbnB1dENvbnRyb2xPd25lcnNoaXAocyl9b25BZmtUcmlnZ2VyZWQoKXt0aGlzLmFma0NvbnRyb2xsZXIub25BZmtDbGljaygpLHRoaXMudmlkZW9QbGF5ZXIuaXNQYXVzZWQoKSYmdGhpcy52aWRlb1BsYXllci5oYXNWaWRlb1NvdXJjZSgpJiZ0aGlzLnBsYXlTdHJlYW0oKX1zZXRBZmtFbmFibGVkKGUpe2U/dGhpcy5vbkFma1RyaWdnZXJlZCgpOnRoaXMuYWZrQ29udHJvbGxlci5zdG9wQWZrV2FybmluZ1RpbWVyKCl9cmVzdGFydFN0cmVhbUF1dG9tYXRpY2FsbHkoKXtpZih0aGlzLndlYlNvY2tldENvbnRyb2xsZXIpaWYodGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLndlYlNvY2tldCYmdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLndlYlNvY2tldC5yZWFkeVN0YXRlIT09V2ViU29ja2V0LkNMT1NFRCl7dGhpcy5waXhlbFN0cmVhbWluZy5fc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3Q9ITEsdGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiUmVzdGFydGluZyBzdHJlYW0uLi5cIiksdGhpcy5jbG9zZVNpZ25hbGluZ1NlcnZlcigpO2NvbnN0IGU9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0F1dG9Db25uZWN0KCksdGhpcy5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCksY2xlYXJUaW1lb3V0KGUpfSksM2UzKX1lbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiQSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBoYXMgbm90IGJlZW4gbWFkZSB5ZXQgc28gd2Ugd2lsbCBzdGFydCB0aGUgc3RyZWFtXCIpLHRoaXMucGl4ZWxTdHJlYW1pbmcuX29uV2ViUnRjQXV0b0Nvbm5lY3QoKSx0aGlzLmNvbm5lY3RUb1NpZ25hbGxpbmdTZXJ2ZXIoKTtlbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiVGhlIFdlYiBTb2NrZXQgQ29udHJvbGxlciBkb2VzIG5vdCBleGlzdCBzbyB0aGlzIHdpbGwgbm90IHdvcmsgcmlnaHQgbm93LlwiKX1sb2FkRnJlZXplRnJhbWVPclNob3dQbGF5T3ZlcmxheSgpe3RoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgJCh7c2hvdWxkU2hvd1BsYXlPdmVybGF5OnRoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5LGlzVmFsaWQ6dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIudmFsaWQsanBlZ0RhdGE6dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuanBlZ30pKSwhMD09PXRoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5PyhpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInNob3dpbmcgcGxheSBvdmVybGF5XCIpLHRoaXMucmVzaXplUGxheWVyU3R5bGUoKSk6KGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwic2hvd2luZyBmcmVlemUgZnJhbWVcIiksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuc2hvd0ZyZWV6ZUZyYW1lKCkpLHNldFRpbWVvdXQoKCgpPT57dGhpcy52aWRlb1BsYXllci5zZXRWaWRlb0VuYWJsZWQoITEpfSksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuZnJlZXplRnJhbWVEZWxheSl9b25GcmVlemVGcmFtZU1lc3NhZ2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5GcmVlemVGcmFtZVwiLDYpO2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoZSk7dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIucHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSh0LCgoKT0+dGhpcy5sb2FkRnJlZXplRnJhbWVPclNob3dQbGF5T3ZlcmxheSgpKSl9aW52YWxpZGF0ZUZyZWV6ZUZyYW1lQW5kRW5hYmxlVmlkZW8oKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkZyZWV6ZUZyYW1lXCIsNiksc2V0VGltZW91dCgoKCk9Pnt0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IHEpLHRoaXMuZnJlZXplRnJhbWVDb250cm9sbGVyLmhpZGVGcmVlemVGcmFtZSgpfSksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuZnJlZXplRnJhbWVEZWxheSksdGhpcy52aWRlb1BsYXllci5nZXRWaWRlb0VsZW1lbnQoKSYmdGhpcy52aWRlb1BsYXllci5zZXRWaWRlb0VuYWJsZWQoITApfW9uRmlsZUV4dGVuc2lvbihlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUpO3plLnNldEV4dGVuc2lvbkZyb21CeXRlcyh0LHRoaXMuZmlsZSl9b25GaWxlTWltZVR5cGUoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTt6ZS5zZXRNaW1lVHlwZUZyb21CeXRlcyh0LHRoaXMuZmlsZSl9b25GaWxlQ29udGVudHMoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTt6ZS5zZXRDb250ZW50c0Zyb21CeXRlcyh0LHRoaXMuZmlsZSl9cGxheVN0cmVhbSgpe2lmKCF0aGlzLnZpZGVvUGxheWVyLmdldFZpZGVvRWxlbWVudCgpKXtjb25zdCBlPVwiQ291bGQgbm90IHBsYXkgdmlkZW8gc3RyZWFtIGJlY2F1c2UgdGhlIHZpZGVvIHBsYXllciB3YXMgbm90IGluaXRpYWxpemVkIGNvcnJlY3RseS5cIjtyZXR1cm4gdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBOKHttZXNzYWdlOmV9KSksaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxlKSx0aGlzLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoXCJTdHJlYW0gbm90IGluaXRpYWxpemVkIGNvcnJlY3RseVwiKSx2b2lkIHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKX10aGlzLnZpZGVvUGxheWVyLmhhc1ZpZGVvU291cmNlKCk/KHRoaXMuc2V0VG91Y2hJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Ub3VjaElucHV0KSksdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBLKSx0aGlzLnN0cmVhbUNvbnRyb2xsZXIuYXVkaW9FbGVtZW50LnNyY09iamVjdD8odGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5tdXRlZD10aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN0YXJ0VmlkZW9NdXRlZCksdGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5wbGF5KCkudGhlbigoKCk9Pnt0aGlzLnBsYXlWaWRlbygpfSkpLmNhdGNoKChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksZSksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXV0b3BsYXlpbmcgdmlkZW8gd2l0aG91dCBpbnRlcmFjdGlvbiAtIHRvIHJlc29sdmUgdGhpcyB3ZSBhcmUgZ29pbmcgdG8gc2hvdyB0aGUgcGxheSBidXR0b24gb3ZlcmxheS5cIiksdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBRKHtyZWFzb246ZX0pKX0pKSk6dGhpcy5wbGF5VmlkZW8oKSx0aGlzLnNob3VsZFNob3dQbGF5T3ZlcmxheT0hMSx0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5zaG93RnJlZXplRnJhbWUoKSk6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLFwiQ2Fubm90IHBsYXkgc3RyZWFtLCB0aGUgdmlkZW8gZWxlbWVudCBoYXMgbm8gc3JjT2JqZWN0IHRvIHBsYXkuXCIpfXBsYXlWaWRlbygpe3RoaXMudmlkZW9QbGF5ZXIucGxheSgpLmNhdGNoKChlPT57dGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5zcmNPYmplY3QmJnRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQucGF1c2UoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBhdXRvcGxheWluZyB2aWRlbyB3aXRob3V0IGludGVyYWN0aW9uIC0gdG8gcmVzb2x2ZSB0aGlzIHdlIGFyZSBnb2luZyB0byBzaG93IHRoZSBwbGF5IGJ1dHRvbiBvdmVybGF5LlwiKSx0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IFEoe3JlYXNvbjplfSkpfSkpfWF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKXt0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkF1dG9QbGF5VmlkZW8pJiZ0aGlzLnBsYXlTdHJlYW0oKSx0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCl9Y29ubmVjdFRvU2lnbmFsbGluZ1NlcnZlcigpe2NvbnN0IGU9dGhpcy5zaWduYWxsaW5nVXJsQnVpbGRlcigpO3RoaXMud2ViU29ja2V0Q29udHJvbGxlci5jb25uZWN0KGUpfXN0YXJ0U2Vzc2lvbihlKXtpZih0aGlzLnBlZXJDb25maWc9ZSx0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkZvcmNlVFVSTikmJiF0aGlzLmNoZWNrVHVyblNlcnZlckF2YWlsYWJpbGl0eShlKSlyZXR1cm4gaS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwiTm8gdHVybiBzZXJ2ZXIgd2FzIGZvdW5kIGluIHRoZSBQZWVyIENvbm5lY3Rpb24gT3B0aW9ucy4gVFVSTiBjYW5ub3QgYmUgZm9yY2VkLCBjbG9zaW5nIGNvbm5lY3Rpb24uIFBsZWFzZSB1c2UgU1RVTiBpbnN0ZWFkXCIpLHRoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIlRVUk4gY2Fubm90IGJlIGZvcmNlZCwgY2xvc2luZyBjb25uZWN0aW9uLiBQbGVhc2UgdXNlIFNUVU4gaW5zdGVhZC5cIiksdm9pZCB0aGlzLmNsb3NlU2lnbmFsaW5nU2VydmVyKCk7dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXI9bmV3IEFlKHRoaXMucGVlckNvbmZpZyx0aGlzLmNvbmZpZyx0aGlzLnByZWZlcnJlZENvZGVjKSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vblZpZGVvU3RhdHM9ZT0+dGhpcy5oYW5kbGVWaWRlb1N0YXRzKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uU2VuZFdlYlJUQ09mZmVyPWU9PnRoaXMuaGFuZGxlU2VuZFdlYlJUQ09mZmVyKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uU2VuZFdlYlJUQ0Fuc3dlcj1lPT50aGlzLmhhbmRsZVNlbmRXZWJSVENBbnN3ZXIoZSksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25QZWVySWNlQ2FuZGlkYXRlPWU9PnRoaXMuaGFuZGxlU2VuZEljZUNhbmRpZGF0ZShlKSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vbkRhdGFDaGFubmVsPWU9PnRoaXMuaGFuZGxlRGF0YUNoYW5uZWwoZSksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2hvd1RleHRPdmVybGF5Q29ubmVjdGluZz0oKT0+dGhpcy5waXhlbFN0cmVhbWluZy5fb25XZWJSdGNDb25uZWN0aW5nKCksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2hvd1RleHRPdmVybGF5U2V0dXBGYWlsdXJlPSgpPT50aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0ZhaWxlZCgpO2xldCB0PSExO3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlPSgpPT57IXQmJltcImNvbm5lY3RlZFwiLFwiY29tcGxldGVkXCJdLmluY2x1ZGVzKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSkmJih0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0Nvbm5lY3RlZCgpLHQ9ITApfSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vblRyYWNrPWU9PnRoaXMuc3RyZWFtQ29udHJvbGxlci5oYW5kbGVPblRyYWNrKGUpLHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuQnJvd3NlclNlbmRPZmZlcikmJih0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLFwiY2lycnVzXCIsdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMpLHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25NZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmNyZWF0ZU9mZmVyKHRoaXMuc2RwQ29uc3RyYWludHMsdGhpcy5jb25maWcpKX1jaGVja1R1cm5TZXJ2ZXJBdmFpbGFiaWxpdHkoZSl7aWYoIWUuaWNlU2VydmVycylyZXR1cm4gaS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwiQSB0dXJuIHNldmVyIHdhcyBub3QgZm91bmRcIiksITE7Zm9yKGNvbnN0IHQgb2YgZS5pY2VTZXJ2ZXJzKWZvcihjb25zdCBlIG9mIHQudXJscylpZihlLmluY2x1ZGVzKFwidHVyblwiKSlyZXR1cm4gaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEEgdHVybiBzZXZlciB3YXMgZm91bmQgYXQgJHtlfWApLCEwO3JldHVybiBpLkluZm8oaS5HZXRTdGFja1RyYWNlKCksXCJBIHR1cm4gc2V2ZXIgd2FzIG5vdCBmb3VuZFwiKSwhMX1oYW5kbGVPbkNvbmZpZ01lc3NhZ2UoZSl7dGhpcy5yZXNpemVQbGF5ZXJTdHlsZSgpLHRoaXMuc3RhcnRTZXNzaW9uKGUucGVlckNvbm5lY3Rpb25PcHRpb25zKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25XZWJSdGNBbnN3ZXI9ZT0+dGhpcy5oYW5kbGVXZWJSdGNBbnN3ZXIoZSksdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uV2ViUnRjT2ZmZXI9ZT0+dGhpcy5oYW5kbGVXZWJSdGNPZmZlcihlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25XZWJSdGNQZWVyRGF0YUNoYW5uZWxzPWU9PnRoaXMuaGFuZGxlV2ViUnRjU0ZVUGVlckRhdGFjaGFubmVscyhlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25JY2VDYW5kaWRhdGU9ZT0+dGhpcy5oYW5kbGVJY2VDYW5kaWRhdGUoZSl9aGFuZGxlU3RyZWFtZXJMaXN0TWVzc2FnZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgR290IHN0cmVhbWVyIGxpc3QgJHtlLmlkc31gLDYpO2NvbnN0IHQ9Wy4uLmUuaWRzXTt0LnVuc2hpZnQoXCJcIiksdGhpcy5jb25maWcuc2V0T3B0aW9uU2V0dGluZ09wdGlvbnMoY2UuU3RyZWFtZXJJZCx0KTtjb25zdCBzPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7bGV0IG49bnVsbDsxPT1lLmlkcy5sZW5ndGg/bj1lLmlkc1swXTp0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlByZWZlclNGVSkmJmUuaWRzLmluY2x1ZGVzKFwiU0ZVXCIpP249XCJTRlVcIjpzLmhhcyhjZS5TdHJlYW1lcklkKSYmZS5pZHMuaW5jbHVkZXMocy5nZXQoY2UuU3RyZWFtZXJJZCkpJiYobj1zLmdldChjZS5TdHJlYW1lcklkKSksbnVsbCE9PW4mJnRoaXMuY29uZmlnLnNldE9wdGlvblNldHRpbmdWYWx1ZShjZS5TdHJlYW1lcklkLG4pLHRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgaih7bWVzc2FnZVN0cmVhbWVyTGlzdDplLGF1dG9TZWxlY3RlZFN0cmVhbWVySWQ6bn0pKX1oYW5kbGVXZWJSdGNBbnN3ZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEdvdCBhbnN3ZXIgc2RwICR7ZS5zZHB9YCw2KTtjb25zdCB0PXtzZHA6ZS5zZHAsdHlwZTpcImFuc3dlclwifTt0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5yZWNlaXZlQW5zd2VyKHQpLHRoaXMuaGFuZGxlUG9zdFdlYnJ0Y05lZ290aWF0aW9uKCl9aGFuZGxlV2ViUnRjT2ZmZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEdvdCBvZmZlciBzZHAgJHtlLnNkcH1gLDYpLHRoaXMuaXNVc2luZ1NGVT0hIWUuc2Z1JiZlLnNmdSx0aGlzLmlzVXNpbmdTRlUmJih0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5wcmVmZXJyZWRDb2RlYz1cIlwiKTtjb25zdCB0PXtzZHA6ZS5zZHAsdHlwZTpcIm9mZmVyXCJ9O3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnJlY2VpdmVPZmZlcih0LHRoaXMuY29uZmlnKSx0aGlzLmhhbmRsZVBvc3RXZWJydGNOZWdvdGlhdGlvbigpfWhhbmRsZVdlYlJ0Y1NGVVBlZXJEYXRhY2hhbm5lbHMoZSl7Y29uc3QgdD17b3JkZXJlZDohMCxuZWdvdGlhdGVkOiEwLGlkOmUuc2VuZFN0cmVhbUlkfSxzPWUuc2VuZFN0cmVhbUlkIT1lLnJlY3ZTdHJlYW1JZDtpZih0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLHM/XCJzZW5kLWRhdGFjaGFubmVsXCI6XCJkYXRhY2hhbm5lbFwiLHQpLHMpe2NvbnN0IHQ9e29yZGVyZWQ6ITAsbmVnb3RpYXRlZDohMCxpZDplLnJlY3ZTdHJlYW1JZH07dGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLFwicmVjdi1kYXRhY2hhbm5lbFwiLHQpLHRoaXMucmVjdkRhdGFDaGFubmVsQ29udHJvbGxlci5oYW5kbGVPbk9wZW49KCk9PnRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kU0ZVUmVjdkRhdGFDaGFubmVsUmVhZHkoKSx0aGlzLnJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25NZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpfWVsc2UgdGhpcy5zZW5kcmVjdkRhdGFDaGFubmVsQ29udHJvbGxlci5oYW5kbGVPbk1lc3NhZ2U9ZT0+dGhpcy5oYW5kbGVPbk1lc3NhZ2UoZSl9aGFuZGxlUG9zdFdlYnJ0Y05lZ290aWF0aW9uKCl7dGhpcy5hZmtDb250cm9sbGVyLnN0YXJ0QWZrV2FybmluZ1RpbWVyKCksdGhpcy5waXhlbFN0cmVhbWluZy5fb25XZWJSdGNTZHAoKSx0aGlzLnN0YXRzVGltZXJIYW5kbGUmJnZvaWQgMCE9PXRoaXMuc3RhdHNUaW1lckhhbmRsZSYmd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zdGF0c1RpbWVySGFuZGxlKSx0aGlzLnN0YXRzVGltZXJIYW5kbGU9d2luZG93LnNldEludGVydmFsKCgoKT0+dGhpcy5nZXRTdGF0cygpKSwxZTMpLHRoaXMuc2V0TW91c2VJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Nb3VzZUlucHV0KSksdGhpcy5zZXRLZXlib2FyZElucHV0RW5hYmxlZCh0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLktleWJvYXJkSW5wdXQpKSx0aGlzLnNldEdhbWVQYWRJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5HYW1lcGFkSW5wdXQpKX1oYW5kbGVJY2VDYW5kaWRhdGUoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJXZWIgUlRDIENvbnRyb2xsZXI6IG9uV2ViUnRjSWNlXCIsNik7Y29uc3QgdD1uZXcgUlRDSWNlQ2FuZGlkYXRlKGUpO3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmhhbmRsZU9uSWNlKHQpfWhhbmRsZVNlbmRJY2VDYW5kaWRhdGUoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJPbkljZUNhbmRpZGF0ZVwiLDYpLGUuY2FuZGlkYXRlJiZlLmNhbmRpZGF0ZS5jYW5kaWRhdGUmJnRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKX1oYW5kbGVEYXRhQ2hhbm5lbChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGEgY2hhbm5lbCBjcmVhdGVkIGZvciB1cyBieSBicm93c2VyIGFzIHdlIGFyZSBhIHJlY2VpdmluZyBwZWVyLlwiLDYpLHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuZGF0YUNoYW5uZWw9ZS5jaGFubmVsLHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuc2V0dXBEYXRhQ2hhbm5lbCgpLHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25NZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpfWhhbmRsZVNlbmRXZWJSVENPZmZlcihlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmcgdGhlIG9mZmVyIHRvIHRoZSBTZXJ2ZXJcIiw2KSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZFdlYlJ0Y09mZmVyKGUpfWhhbmRsZVNlbmRXZWJSVENBbnN3ZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJTZW5kaW5nIHRoZSBhbnN3ZXIgdG8gdGhlIFNlcnZlclwiLDYpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kV2ViUnRjQW5zd2VyKGUpLHRoaXMuaXNVc2luZ1NGVSYmdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLnNlbmRXZWJSdGNEYXRhY2hhbm5lbFJlcXVlc3QoKX1zZXRVcE1vdXNlQW5kRnJlZXplRnJhbWUoKXt0aGlzLnZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3Q9dGhpcy52aWRlb1BsYXllci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIuc2V0dXBOb3JtYWxpemVBbmRRdWFudGl6ZSgpLHRoaXMuZnJlZXplRnJhbWVDb250cm9sbGVyLmZyZWV6ZUZyYW1lLnJlc2l6ZSgpfWNsb3NlU2lnbmFsaW5nU2VydmVyKCl7dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLmNsb3NlKCl9Y2xvc2VQZWVyQ29ubmVjdGlvbigpe3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmNsb3NlKCl9Y2xvc2UoKXt0aGlzLmNsb3NlU2lnbmFsaW5nU2VydmVyKCksdGhpcy5jbG9zZVBlZXJDb25uZWN0aW9uKCl9Z2V0U3RhdHMoKXt0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5nZW5lcmF0ZVN0YXRzKCl9c2VuZExhdGVuY3lUZXN0KCl7dGhpcy5sYXRlbmN5U3RhcnRUaW1lPURhdGUubm93KCksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuc2VuZExhdGVuY3lUZXN0KHtTdGFydFRpbWU6dGhpcy5sYXRlbmN5U3RhcnRUaW1lfSl9c2VuZEVuY29kZXJNaW5RUChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgTWluUVA9JHtlfVxcbmAsNiksbnVsbCE9ZSYmdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoe1wiRW5jb2Rlci5NaW5RUFwiOmV9KX1zZW5kRW5jb2Rlck1heFFQKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBNYXhRUD0ke2V9XFxuYCw2KSxudWxsIT1lJiZ0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJFbmNvZGVyLk1heFFQXCI6ZX0pfXNlbmRXZWJSVENNaW5CaXRyYXRlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBXZWJSVEMgTWluIEJpdHJhdGU9JHtlfWAsNiksbnVsbCE9ZSYmdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoe1wiV2ViUlRDLk1pbkJpdHJhdGVcIjplfSl9c2VuZFdlYlJUQ01heEJpdHJhdGUoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFdlYlJUQyBNYXggQml0cmF0ZT0ke2V9YCw2KSxudWxsIT1lJiZ0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJXZWJSVEMuTWF4Qml0cmF0ZVwiOmV9KX1zZW5kV2ViUlRDRnBzKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBXZWJSVEMgRlBTPSR7ZX1gLDYpLG51bGwhPWUmJih0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJXZWJSVEMuRnBzXCI6ZX0pLHRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKHtcIldlYlJUQy5NYXhGcHNcIjplfSkpfXNlbmRTaG93RnBzKCl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tICAgU2VuZGluZyBzaG93IHN0YXQgdG8gVUUgICAtLS0tXCIsNiksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoe1wic3RhdC5mcHNcIjpcIlwifSl9c2VuZElmcmFtZVJlcXVlc3QoKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIFJlcXVlc3QgZm9yIGFuIElGcmFtZSAgLS0tLVwiLDYpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIklGcmFtZVJlcXVlc3RcIikoKX1lbWl0VUlJbnRlcmFjdGlvbihlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIGN1c3RvbSBVSUludGVyYWN0aW9uIG1lc3NhZ2UgICAtLS0tXCIsNiksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdFVJSW50ZXJhY3Rpb24oZSl9ZW1pdENvbW1hbmQoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tICAgU2VuZGluZyBjdXN0b20gQ29tbWFuZCBtZXNzYWdlICAgLS0tLVwiLDYpLHRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKGUpfWVtaXRDb25zb2xlQ29tbWFuZChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIGN1c3RvbSBDb21tYW5kOkNvbnNvbGVDb21tYW5kIG1lc3NhZ2UgICAtLS0tXCIsNiksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoe0NvbnNvbGVDb21tYW5kOmV9KX1zZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sT3duZXJzaGlwKCl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tICAgU2VuZGluZyBSZXF1ZXN0IHRvIENvbnRyb2wgUXVhbGl0eSAgLS0tLVwiLDYpLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzQ29udHJvbGxlci5TZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sKCl9aGFuZGxlTGF0ZW5jeVRlc3RSZXN1bHQoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5sYXRlbmN5VGVzdFwiLDYpO2NvbnN0IHQ9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKSxzPW5ldyBJZTtPYmplY3QuYXNzaWduKHMsSlNPTi5wYXJzZSh0KSkscy5wcm9jZXNzRmllbGRzKCkscy50ZXN0U3RhcnRUaW1lTXM9dGhpcy5sYXRlbmN5U3RhcnRUaW1lLHMuYnJvd3NlclJlY2VpcHRUaW1lTXM9RGF0ZS5ub3coKSxzLmxhdGVuY3lFeGNsdWRpbmdEZWNvZGU9fn4ocy5icm93c2VyUmVjZWlwdFRpbWVNcy1zLnRlc3RTdGFydFRpbWVNcykscy50ZXN0RHVyYXRpb249fn4ocy5UcmFuc21pc3Npb25UaW1lTXMtcy5SZWNlaXB0VGltZU1zKSxzLm5ldHdvcmtMYXRlbmN5PX5+KHMubGF0ZW5jeUV4Y2x1ZGluZ0RlY29kZS1zLnRlc3REdXJhdGlvbikscy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcyYmcy5icm93c2VyUmVjZWlwdFRpbWVNcyYmKHMuZW5kVG9FbmRMYXRlbmN5PShzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zLHMubmV0d29ya0xhdGVuY3ksfn4rcy5DYXB0dXJlVG9TZW5kTXMpKSx0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbkxhdGVuY3lUZXN0UmVzdWx0KHMpfWhhbmRsZUluaXRpYWxTZXR0aW5ncyhlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkluaXRpYWxTZXR0aW5nc1wiLDYpO2NvbnN0IHQ9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKSxzPUpTT04ucGFyc2UodCksbj1uZXcgRmU7cy5FbmNvZGVyJiYobi5FbmNvZGVyU2V0dGluZ3M9cy5FbmNvZGVyKSxzLldlYlJUQyYmKG4uV2ViUlRDU2V0dGluZ3M9cy5XZWJSVEMpLHMuUGl4ZWxTdHJlYW1pbmcmJihuLlBpeGVsU3RyZWFtaW5nU2V0dGluZ3M9cy5QaXhlbFN0cmVhbWluZykscy5Db25maWdPcHRpb25zJiZ0aGlzLmNvbmZpZy5zZXRGbGFnRW5hYmxlZChyZS5Ib3ZlcmluZ01vdXNlTW9kZSwhIXMuQ29uZmlnT3B0aW9ucy5EZWZhdWx0VG9Ib3Zlciksbi51ZUNvbXBhdGlibGUoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSx0LDYpLHRoaXMucGl4ZWxTdHJlYW1pbmcuX29uSW5pdGlhbFNldHRpbmdzKG4pfWhhbmRsZVZpZGVvRW5jb2RlckF2Z1FQKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuVmlkZW9FbmNvZGVyQXZnUVBcIiw2KTtjb25zdCB0PU51bWJlcihuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpKTt0aGlzLnNldFZpZGVvRW5jb2RlckF2Z1FQKHQpfWhhbmRsZVZpZGVvSW5pdGlhbGl6ZWQoKXt0aGlzLnBpeGVsU3RyZWFtaW5nLl9vblZpZGVvSW5pdGlhbGl6ZWQoKSx0aGlzLmF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKSx0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCksdGhpcy52aWRlb1BsYXllci51cGRhdGVWaWRlb1N0cmVhbVNpemUoKX1vblF1YWxpdHlDb250cm9sT3duZXJzaGlwKGUpe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoZSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5RdWFsaXR5Q29udHJvbE93bmVyc2hpcFwiLDYpLHRoaXMuaXNRdWFsaXR5Q29udHJvbGxlcj1uZXcgQm9vbGVhbih0WzFdKS52YWx1ZU9mKCksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFJlY2VpdmVkIHF1YWxpdHkgY29udHJvbGxlciBtZXNzYWdlLCB3aWxsIGNvbnRyb2wgcXVhbGl0eTogJHt0aGlzLmlzUXVhbGl0eUNvbnRyb2xsZXJ9YCksdGhpcy5waXhlbFN0cmVhbWluZy5fb25RdWFsaXR5Q29udHJvbE93bmVyc2hpcCh0aGlzLmlzUXVhbGl0eUNvbnRyb2xsZXIpfWhhbmRsZVZpZGVvU3RhdHMoZSl7dGhpcy5waXhlbFN0cmVhbWluZy5fb25WaWRlb1N0YXRzKGUpfXJlc2l6ZVBsYXllclN0eWxlKCl7dGhpcy52aWRlb1BsYXllci5yZXNpemVQbGF5ZXJTdHlsZSgpfWdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKXtyZXR1cm4gdGhpcy5kaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlfXNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoZSl7dGhpcy5kaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlPWV9c2V0UHJlZmVycmVkQ29kZWMoZSl7dGhpcy5wcmVmZXJyZWRDb2RlYz1lLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyJiYodGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIucHJlZmVycmVkQ29kZWM9ZSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci51cGRhdGVDb2RlY1NlbGVjdGlvbj0hMSl9c2V0VmlkZW9FbmNvZGVyQXZnUVAoZSl7dGhpcy52aWRlb0F2Z1FwPWUsdGhpcy5waXhlbFN0cmVhbWluZy5fb25WaWRlb0VuY29kZXJBdmdRUCh0aGlzLnZpZGVvQXZnUXApfXNldEtleWJvYXJkSW5wdXRFbmFibGVkKGUpe3ZhciB0O251bGw9PT0odD10aGlzLmtleWJvYXJkQ29udHJvbGxlcil8fHZvaWQgMD09PXR8fHQudW5yZWdpc3RlcktleUJvYXJkRXZlbnRzKCksZSYmKHRoaXMua2V5Ym9hcmRDb250cm9sbGVyPXRoaXMuaW5wdXRDbGFzc2VzRmFjdG9yeS5yZWdpc3RlcktleUJvYXJkKHRoaXMuY29uZmlnKSl9c2V0TW91c2VJbnB1dEVuYWJsZWQoZSl7dmFyIHQ7aWYobnVsbD09PSh0PXRoaXMubW91c2VDb250cm9sbGVyKXx8dm9pZCAwPT09dHx8dC51bnJlZ2lzdGVyTW91c2VFdmVudHMoKSxlKXtjb25zdCBlPXRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuSG92ZXJpbmdNb3VzZU1vZGUpP3VlLkhvdmVyaW5nTW91c2U6dWUuTG9ja2VkTW91c2U7dGhpcy5tb3VzZUNvbnRyb2xsZXI9dGhpcy5pbnB1dENsYXNzZXNGYWN0b3J5LnJlZ2lzdGVyTW91c2UoZSl9fXNldFRvdWNoSW5wdXRFbmFibGVkKGUpe3ZhciB0O251bGw9PT0odD10aGlzLnRvdWNoQ29udHJvbGxlcil8fHZvaWQgMD09PXR8fHQudW5yZWdpc3RlclRvdWNoRXZlbnRzKCksZSYmKHRoaXMudG91Y2hDb250cm9sbGVyPXRoaXMuaW5wdXRDbGFzc2VzRmFjdG9yeS5yZWdpc3RlclRvdWNoKHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuRmFrZU1vdXNlV2l0aFRvdWNoZXMpLHRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdCkpfXNldEdhbWVQYWRJbnB1dEVuYWJsZWQoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuZ2FtZVBhZENvbnRyb2xsZXIpfHx2b2lkIDA9PT10fHx0LnVucmVnaXN0ZXJHYW1lUGFkRXZlbnRzKCksZSYmKHRoaXMuZ2FtZVBhZENvbnRyb2xsZXI9dGhpcy5pbnB1dENsYXNzZXNGYWN0b3J5LnJlZ2lzdGVyR2FtZVBhZCgpKX1yZWdpc3RlckRhdGFDaGFubmVsRXZlbnRFbWl0dGVycyhlKXtlLm9uT3Blbj0oZSx0KT0+dGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBCKHtsYWJlbDplLGV2ZW50OnR9KSksZS5vbkNsb3NlPShlLHQpPT50aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IF8oe2xhYmVsOmUsZXZlbnQ6dH0pKSxlLm9uRXJyb3I9KGUsdCk9PnRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgVyh7bGFiZWw6ZSxldmVudDp0fSkpfX1jbGFzcyBndHtzdGF0aWMgdmVydGV4U2hhZGVyKCl7cmV0dXJuXCJcXG5cXHRcXHRhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcblxcdFxcdGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Q29vcmQ7XFxuXFxuXFx0XFx0Ly8gaW5wdXRcXG5cXHRcXHR1bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xcblxcdFxcdHVuaWZvcm0gdmVjNCB1X29mZnNldDtcXG5cXG5cXHRcXHQvL1xcblxcdFxcdHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xcblxcblxcdFxcdHZvaWQgbWFpbigpIHtcXG5cXHRcXHQgICAvLyBjb252ZXJ0IHRoZSByZWN0YW5nbGUgZnJvbSBwaXhlbHMgdG8gMC4wIHRvIDEuMFxcblxcdFxcdCAgIHZlYzIgemVyb1RvT25lID0gYV9wb3NpdGlvbiAvIHVfcmVzb2x1dGlvbjtcXG5cXG5cXHRcXHQgICAvLyBjb252ZXJ0IGZyb20gMC0+MSB0byAwLT4yXFxuXFx0XFx0ICAgdmVjMiB6ZXJvVG9Ud28gPSB6ZXJvVG9PbmUgKiAyLjA7XFxuXFxuXFx0XFx0ICAgLy8gY29udmVydCBmcm9tIDAtPjIgdG8gLTEtPisxIChjbGlwc3BhY2UpXFxuXFx0XFx0ICAgdmVjMiBjbGlwU3BhY2UgPSB6ZXJvVG9Ud28gLSAxLjA7XFxuXFxuXFx0XFx0ICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGNsaXBTcGFjZSAqIHZlYzIoMSwgLTEpLCAwLCAxKTtcXG5cXHRcXHQgICAvLyBwYXNzIHRoZSB0ZXhDb29yZCB0byB0aGUgZnJhZ21lbnQgc2hhZGVyXFxuXFx0XFx0ICAgLy8gVGhlIEdQVSB3aWxsIGludGVycG9sYXRlIHRoaXMgdmFsdWUgYmV0d2VlbiBwb2ludHMuXFxuXFx0XFx0ICAgdl90ZXhDb29yZCA9IChhX3RleENvb3JkICogdV9vZmZzZXQueHkpICsgdV9vZmZzZXQuenc7XFxuXFx0XFx0fVxcblxcdFxcdFwifXN0YXRpYyBmcmFnbWVudFNoYWRlcigpe3JldHVyblwiXFxuXFx0XFx0cHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuXFxuXFx0XFx0Ly8gb3VyIHRleHR1cmVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcblxcblxcdFxcdC8vIHRoZSB0ZXhDb29yZHMgcGFzc2VkIGluIGZyb20gdGhlIHZlcnRleCBzaGFkZXIuXFxuXFx0XFx0dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XFxuXFxuXFx0XFx0dm9pZCBtYWluKCkge1xcblxcdFxcdCAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTtcXG5cXHRcXHR9XFxuXFx0XFx0XCJ9fWNsYXNzIHV0e3N0YXRpYyBkZWVwQ29weUdhbWVwYWQoZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoe2J1dHRvbnM6ZS5idXR0b25zLm1hcCgoZT0+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7cHJlc3NlZDplLnByZXNzZWQsdG91Y2hlZDplLnRvdWNoZWR9KSkpKSxheGVzOmUuYXhlc30pKX19Y2xhc3MgbXR7Y29uc3RydWN0b3IoZSl7dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMuY29udHJvbGxlcnM9W119dXBkYXRlU3RhdHVzKGUsdCxzKXtpZihlLmdhbWVwYWQpe2NvbnN0IG49dC5nZXRQb3NlKGUuZ3JpcFNwYWNlLHMpO2lmKCFuKXJldHVybjtsZXQgcj0wO2UucHJvZmlsZXMuaW5jbHVkZXMoXCJodGMtdml2ZVwiKT9yPTE6ZS5wcm9maWxlcy5pbmNsdWRlcyhcIm9jdWx1cy10b3VjaFwiKSYmKHI9MiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJTeXN0ZW1cIikoW3JdKTtsZXQgaT0yO3N3aXRjaChlLmhhbmRlZG5lc3Mpe2Nhc2VcImxlZnRcIjppPTA7YnJlYWs7Y2FzZVwicmlnaHRcIjppPTF9Y29uc3Qgbz1uLnRyYW5zZm9ybS5tYXRyaXgsYT1bXTtmb3IobGV0IGU9MDtlPDE2O2UrKylhW2VdPW5ldyBGbG9hdDMyQXJyYXkoW29bZV1dKVswXTt0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkNvbnRyb2xsZXJUcmFuc2Zvcm1cIikoW2FbMF0sYVs0XSxhWzhdLGFbMTJdLGFbMV0sYVs1XSxhWzldLGFbMTNdLGFbMl0sYVs2XSxhWzEwXSxhWzE0XSxhWzNdLGFbN10sYVsxMV0sYVsxNV0saV0pLHZvaWQgMD09PXRoaXMuY29udHJvbGxlcnNbaV0mJih0aGlzLmNvbnRyb2xsZXJzW2ldPXtwcmV2U3RhdGU6dm9pZCAwLGN1cnJlbnRTdGF0ZTp2b2lkIDB9LHRoaXMuY29udHJvbGxlcnNbaV0ucHJldlN0YXRlPXV0LmRlZXBDb3B5R2FtZXBhZChlLmdhbWVwYWQpKSx0aGlzLmNvbnRyb2xsZXJzW2ldLmN1cnJlbnRTdGF0ZT11dC5kZWVwQ29weUdhbWVwYWQoZS5nYW1lcGFkKTtjb25zdCBsPXRoaXMuY29udHJvbGxlcnNbaV0sZD1sLmN1cnJlbnRTdGF0ZSxjPWwucHJldlN0YXRlO2ZvcihsZXQgZT0wO2U8ZC5idXR0b25zLmxlbmd0aDtlKyspe2NvbnN0IHQ9ZC5idXR0b25zW2VdLHM9Yy5idXR0b25zW2VdO3QucHJlc3NlZD90aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkJ1dHRvblByZXNzZWRcIikoW2ksZSxzLnByZXNzZWQ/MTowXSk6IXQucHJlc3NlZCYmcy5wcmVzc2VkJiZ0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkJ1dHRvblJlbGVhc2VkXCIpKFtpLGUsMF0pLHQudG91Y2hlZCYmIXQucHJlc3NlZD90aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkJ1dHRvblByZXNzZWRcIikoW2ksMyxzLnRvdWNoZWQ/MTowXSk6IXQudG91Y2hlZCYmcy50b3VjaGVkJiZ0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkJ1dHRvblJlbGVhc2VkXCIpKFtpLDMsMF0pfWZvcihsZXQgZT0wO2U8ZC5heGVzLmxlbmd0aDtlKyspdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJBbmFsb2dcIikoW2ksZSxkLmF4ZXNbZV1dKTt0aGlzLmNvbnRyb2xsZXJzW2ldLnByZXZTdGF0ZT1kfX19Y2xhc3MgU3R7Y29uc3RydWN0b3IoZSl7dGhpcy54clNlc3Npb249bnVsbCx0aGlzLndlYlJ0Y0NvbnRyb2xsZXI9ZSx0aGlzLnhyQ29udHJvbGxlcnM9W10sdGhpcy54ckdhbWVwYWRDb250cm9sbGVyPW5ldyBtdCh0aGlzLndlYlJ0Y0NvbnRyb2xsZXIuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIpLHRoaXMub25TZXNzaW9uRW5kZWQ9bmV3IEV2ZW50VGFyZ2V0LHRoaXMub25TZXNzaW9uU3RhcnRlZD1uZXcgRXZlbnRUYXJnZXQsdGhpcy5vbkZyYW1lPW5ldyBFdmVudFRhcmdldH14ckNsaWNrZWQoKXt0aGlzLnhyU2Vzc2lvbj90aGlzLnhyU2Vzc2lvbi5lbmQoKTpuYXZpZ2F0b3IueHIucmVxdWVzdFNlc3Npb24oXCJpbW1lcnNpdmUtdnJcIikudGhlbigoZT0+e3RoaXMub25YclNlc3Npb25TdGFydGVkKGUpfSkpfW9uWHJTZXNzaW9uRW5kZWQoKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlhSIFNlc3Npb24gZW5kZWRcIiksdGhpcy54clNlc3Npb249bnVsbCx0aGlzLm9uU2Vzc2lvbkVuZGVkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwieHJTZXNzaW9uRW5kZWRcIikpfW9uWHJTZXNzaW9uU3RhcnRlZChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlhSIFNlc3Npb24gc3RhcnRlZFwiKSx0aGlzLnhyU2Vzc2lvbj1lLHRoaXMueHJTZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRcIiwoKCk9Pnt0aGlzLm9uWHJTZXNzaW9uRW5kZWQoKX0pKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7dGhpcy5nbD10LmdldENvbnRleHQoXCJ3ZWJnbDJcIix7eHJDb21wYXRpYmxlOiEwfSksdGhpcy54clNlc3Npb24udXBkYXRlUmVuZGVyU3RhdGUoe2Jhc2VMYXllcjpuZXcgWFJXZWJHTExheWVyKHRoaXMueHJTZXNzaW9uLHRoaXMuZ2wpfSk7Y29uc3Qgcz10aGlzLmdsLmNyZWF0ZVNoYWRlcih0aGlzLmdsLlZFUlRFWF9TSEFERVIpO3RoaXMuZ2wuc2hhZGVyU291cmNlKHMsZ3QudmVydGV4U2hhZGVyKCkpLHRoaXMuZ2wuY29tcGlsZVNoYWRlcihzKTtjb25zdCBuPXRoaXMuZ2wuY3JlYXRlU2hhZGVyKHRoaXMuZ2wuRlJBR01FTlRfU0hBREVSKTt0aGlzLmdsLnNoYWRlclNvdXJjZShuLGd0LmZyYWdtZW50U2hhZGVyKCkpLHRoaXMuZ2wuY29tcGlsZVNoYWRlcihuKTtjb25zdCByPXRoaXMuZ2wuY3JlYXRlUHJvZ3JhbSgpO3RoaXMuZ2wuYXR0YWNoU2hhZGVyKHIscyksdGhpcy5nbC5hdHRhY2hTaGFkZXIocixuKSx0aGlzLmdsLmxpbmtQcm9ncmFtKHIpLHRoaXMuZ2wudXNlUHJvZ3JhbShyKSx0aGlzLnBvc2l0aW9uTG9jYXRpb249dGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihyLFwiYV9wb3NpdGlvblwiKSx0aGlzLnRleGNvb3JkTG9jYXRpb249dGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihyLFwiYV90ZXhDb29yZFwiKSx0aGlzLnBvc2l0aW9uQnVmZmVyPXRoaXMuZ2wuY3JlYXRlQnVmZmVyKCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHRoaXMucG9zaXRpb25CdWZmZXIpLHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5wb3NpdGlvbkxvY2F0aW9uKTtjb25zdCBvPXRoaXMuZ2wuY3JlYXRlVGV4dHVyZSgpO3RoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELG8pLHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsdGhpcy5nbC5URVhUVVJFX1dSQVBfUyx0aGlzLmdsLkNMQU1QX1RPX0VER0UpLHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsdGhpcy5nbC5URVhUVVJFX1dSQVBfVCx0aGlzLmdsLkNMQU1QX1RPX0VER0UpLHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsdGhpcy5nbC5URVhUVVJFX01JTl9GSUxURVIsdGhpcy5nbC5ORUFSRVNUKSx0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy5nbC5URVhUVVJFXzJELHRoaXMuZ2wuVEVYVFVSRV9NQUdfRklMVEVSLHRoaXMuZ2wuTkVBUkVTVCksdGhpcy50ZXhjb29yZEJ1ZmZlcj10aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMucmVzb2x1dGlvbkxvY2F0aW9uPXRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHIsXCJ1X3Jlc29sdXRpb25cIiksdGhpcy5vZmZzZXRMb2NhdGlvbj10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihyLFwidV9vZmZzZXRcIiksZS5yZXF1ZXN0UmVmZXJlbmNlU3BhY2UoXCJsb2NhbFwiKS50aGVuKChlPT57dGhpcy54clJlZlNwYWNlPWUsdGhpcy54clNlc3Npb24ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoZSx0KT0+dGhpcy5vblhyRnJhbWUoZSx0KSkpfSkpLHRoaXMub25TZXNzaW9uU3RhcnRlZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInhyU2Vzc2lvblN0YXJ0ZWRcIikpfW9uWHJGcmFtZShlLHQpe2NvbnN0IHM9dC5nZXRWaWV3ZXJQb3NlKHRoaXMueHJSZWZTcGFjZSk7aWYocyl7Y29uc3QgZT1zLnRyYW5zZm9ybS5tYXRyaXgsdD1bXTtmb3IobGV0IHM9MDtzPDE2O3MrKyl0W3NdPW5ldyBGbG9hdDMyQXJyYXkoW2Vbc11dKVswXTt0aGlzLndlYlJ0Y0NvbnRyb2xsZXIuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIlhSSE1EVHJhbnNmb3JtXCIpKFt0WzBdLHRbNF0sdFs4XSx0WzEyXSx0WzFdLHRbNV0sdFs5XSx0WzEzXSx0WzJdLHRbNl0sdFsxMF0sdFsxNF0sdFszXSx0WzddLHRbMTFdLHRbMTVdXSk7Y29uc3Qgbj10aGlzLnhyU2Vzc2lvbi5yZW5kZXJTdGF0ZS5iYXNlTGF5ZXI7dGhpcy5nbC5iaW5kRnJhbWVidWZmZXIodGhpcy5nbC5GUkFNRUJVRkZFUixuLmZyYW1lYnVmZmVyKSx0aGlzLmdsLnRleEltYWdlMkQodGhpcy5nbC5URVhUVVJFXzJELDAsdGhpcy5nbC5SR0JBLHRoaXMuZ2wuUkdCQSx0aGlzLmdsLlVOU0lHTkVEX0JZVEUsdGhpcy53ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmdldFZpZGVvRWxlbWVudCgpKSx0aGlzLnJlbmRlcih0aGlzLndlYlJ0Y0NvbnRyb2xsZXIudmlkZW9QbGF5ZXIuZ2V0VmlkZW9FbGVtZW50KCkpfXRoaXMud2ViUnRjQ29udHJvbGxlci5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5YUkNvbnRyb2xsZXJJbnB1dCkmJnRoaXMueHJTZXNzaW9uLmlucHV0U291cmNlcy5mb3JFYWNoKCgoZSxzLG4pPT57dGhpcy54ckdhbWVwYWRDb250cm9sbGVyLnVwZGF0ZVN0YXR1cyhlLHQsdGhpcy54clJlZlNwYWNlKX0pLHRoaXMpLHRoaXMueHJTZXNzaW9uLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKGUsdCk9PnRoaXMub25YckZyYW1lKGUsdCkpKSx0aGlzLm9uRnJhbWUuZGlzcGF0Y2hFdmVudChuZXcgc2Uoe3RpbWU6ZSxmcmFtZTp0fSkpfXJlbmRlcihlKXtpZighdGhpcy5nbClyZXR1cm47Y29uc3QgdD10aGlzLnhyU2Vzc2lvbi5yZW5kZXJTdGF0ZS5iYXNlTGF5ZXI7bGV0IHMsbixyLGksbzt0aGlzLmdsLnZpZXdwb3J0KDAsMCx0LmZyYW1lYnVmZmVyV2lkdGgsdC5mcmFtZWJ1ZmZlckhlaWdodCksdGhpcy5nbC51bmlmb3JtNGYodGhpcy5vZmZzZXRMb2NhdGlvbiwxLDEsMCwwKSx0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLGUudmlkZW9XaWR0aCwwLDAsZS52aWRlb0hlaWdodCwwLGUudmlkZW9IZWlnaHQsZS52aWRlb1dpZHRoLDAsZS52aWRlb1dpZHRoLGUudmlkZW9IZWlnaHRdKSx0aGlzLmdsLlNUQVRJQ19EUkFXKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsdGhpcy50ZXhjb29yZEJ1ZmZlciksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoWzAsMCwxLDAsMCwxLDAsMSwxLDAsMSwxXSksdGhpcy5nbC5TVEFUSUNfRFJBVyksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHRoaXMucG9zaXRpb25CdWZmZXIpLHM9MixuPXRoaXMuZ2wuRkxPQVQscj0hMSxpPTAsbz0wLHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLnBvc2l0aW9uTG9jYXRpb24scyxuLHIsaSxvKSx0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMudGV4Y29vcmRMb2NhdGlvbiksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHRoaXMudGV4Y29vcmRCdWZmZXIpLHM9MixuPXRoaXMuZ2wuRkxPQVQscj0hMSxpPTAsbz0wLHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLnRleGNvb3JkTG9jYXRpb24scyxuLHIsaSxvKSx0aGlzLmdsLnVuaWZvcm0yZih0aGlzLnJlc29sdXRpb25Mb2NhdGlvbixlLnZpZGVvV2lkdGgsZS52aWRlb0hlaWdodCk7Y29uc3QgYT10aGlzLmdsLlRSSUFOR0xFUztvPTAsdGhpcy5nbC5kcmF3QXJyYXlzKGEsbyw2KX1zdGF0aWMgaXNTZXNzaW9uU3VwcG9ydGVkKGUpe3JldHVybiBuYXZpZ2F0b3IueHI/bmF2aWdhdG9yLnhyLmlzU2Vzc2lvblN1cHBvcnRlZChlKTpuZXcgUHJvbWlzZSgoKCk9PiExKSl9fWNsYXNzIHB0e2NvbnN0cnVjdG9yKGUpe3RoaXMuZWRpdFRleHRCdXR0b249bnVsbCx0aGlzLmhpZGRlbklucHV0PW51bGwsXCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmdGhpcy5jcmVhdGVPblNjcmVlbktleWJvYXJkSGVscGVycyhlKX11bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChlLHQpe3JldHVybiBudWxsfWNyZWF0ZU9uU2NyZWVuS2V5Ym9hcmRIZWxwZXJzKGUpe3RoaXMuaGlkZGVuSW5wdXR8fCh0aGlzLmhpZGRlbklucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx0aGlzLmhpZGRlbklucHV0LmlkPVwiaGlkZGVuSW5wdXRcIix0aGlzLmhpZGRlbklucHV0Lm1heExlbmd0aD0wLGUuYXBwZW5kQ2hpbGQodGhpcy5oaWRkZW5JbnB1dCkpLHRoaXMuZWRpdFRleHRCdXR0b258fCh0aGlzLmVkaXRUZXh0QnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksdGhpcy5lZGl0VGV4dEJ1dHRvbi5pZD1cImVkaXRUZXh0QnV0dG9uXCIsdGhpcy5lZGl0VGV4dEJ1dHRvbi5pbm5lckhUTUw9XCJlZGl0IHRleHRcIixlLmFwcGVuZENoaWxkKHRoaXMuZWRpdFRleHRCdXR0b24pLHRoaXMuZWRpdFRleHRCdXR0b24uY2xhc3NMaXN0LmFkZChcImhpZGRlblN0YXRlXCIpLHRoaXMuZWRpdFRleHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsKGU9Pnt0aGlzLmhpZGRlbklucHV0LmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpfSkpKX1zaG93T25TY3JlZW5LZXlib2FyZChlKXtpZihlLnNob3dPblNjcmVlbktleWJvYXJkKXt0aGlzLmVkaXRUZXh0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5TdGF0ZVwiKTtjb25zdCB0PXRoaXMudW5xdWFudGl6ZUFuZERlbm9ybWFsaXplVW5zaWduZWQoZS54LGUueSk7dGhpcy5lZGl0VGV4dEJ1dHRvbi5zdHlsZS50b3A9dC55LnRvU3RyaW5nKCkrXCJweFwiLHRoaXMuZWRpdFRleHRCdXR0b24uc3R5bGUubGVmdD0odC54LTQwKS50b1N0cmluZygpK1wicHhcIn1lbHNlIHRoaXMuZWRpdFRleHRCdXR0b24uY2xhc3NMaXN0LmFkZChcImhpZGRlblN0YXRlXCIpLHRoaXMuaGlkZGVuSW5wdXQuYmx1cigpfX1jbGFzcyB2dHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3Nob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0PSEwLHRoaXMuYWxsb3dDb25zb2xlQ29tbWFuZHM9ITEsdGhpcy5jb25maWc9ZSwobnVsbD09dD92b2lkIDA6dC52aWRlb0VsZW1lbnRQYXJlbnQpJiYodGhpcy5fdmlkZW9FbGVtZW50UGFyZW50PXQudmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLl9ldmVudEVtaXR0ZXI9bmV3IG5lLHRoaXMuY29uZmlndXJlU2V0dGluZ3MoKSx0aGlzLnNldFdlYlJ0Y1BsYXllckNvbnRyb2xsZXIobmV3IGh0KHRoaXMuY29uZmlnLHRoaXMpKSx0aGlzLm9uU2NyZWVuS2V5Ym9hcmRIZWxwZXI9bmV3IHB0KHRoaXMudmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLm9uU2NyZWVuS2V5Ym9hcmRIZWxwZXIudW5xdWFudGl6ZUFuZERlbm9ybWFsaXplVW5zaWduZWQ9KGUsdCk9PnRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIucmVxdWVzdFVucXVhbnRpemVkQW5kRGVub3JtYWxpemVVbnNpZ25lZChlLHQpLHRoaXMuX2FjdGl2YXRlT25TY3JlZW5LZXlib2FyZD1lPT50aGlzLm9uU2NyZWVuS2V5Ym9hcmRIZWxwZXIuc2hvd09uU2NyZWVuS2V5Ym9hcmQoZSksdGhpcy5fd2ViWHJDb250cm9sbGVyPW5ldyBTdCh0aGlzLl93ZWJSdGNDb250cm9sbGVyKX1nZXQgdmlkZW9FbGVtZW50UGFyZW50KCl7cmV0dXJuIHRoaXMuX3ZpZGVvRWxlbWVudFBhcmVudHx8KHRoaXMuX3ZpZGVvRWxlbWVudFBhcmVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3ZpZGVvRWxlbWVudFBhcmVudC5pZD1cInZpZGVvRWxlbWVudFBhcmVudFwiKSx0aGlzLl92aWRlb0VsZW1lbnRQYXJlbnR9Y29uZmlndXJlU2V0dGluZ3MoKXt0aGlzLmNvbmZpZy5fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKHJlLklzUXVhbGl0eUNvbnRyb2xsZXIsKGU9PnshMCE9PWV8fHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuaXNRdWFsaXR5Q29udHJvbGxlcnx8dGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sT3duZXJzaGlwKCl9KSksdGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5BRktEZXRlY3Rpb24sKGU9Pnt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldEFma0VuYWJsZWQoZSl9KSksdGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5NYXRjaFZpZXdwb3J0UmVzb2x1dGlvbiwoKCk9Pnt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLnVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpfSkpLHRoaXMuY29uZmlnLl9hZGRPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIocmUuSG92ZXJpbmdNb3VzZU1vZGUsKGU9Pnt0aGlzLmNvbmZpZy5zZXRGbGFnTGFiZWwocmUuSG92ZXJpbmdNb3VzZU1vZGUsYENvbnRyb2wgU2NoZW1lOiAke2U/XCJIb3ZlcmluZ1wiOlwiTG9ja2VkXCJ9IE1vdXNlYCksdGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXRNb3VzZUlucHV0RW5hYmxlZCh0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLk1vdXNlSW5wdXQpKX0pKSx0aGlzLmNvbmZpZy5fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKHJlLktleWJvYXJkSW5wdXQsKGU9Pnt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldEtleWJvYXJkSW5wdXRFbmFibGVkKGUpfSkpLHRoaXMuY29uZmlnLl9hZGRPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIocmUuTW91c2VJbnB1dCwoZT0+e3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0TW91c2VJbnB1dEVuYWJsZWQoZSl9KSksdGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5Ub3VjaElucHV0LChlPT57dGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXRUb3VjaElucHV0RW5hYmxlZChlKX0pKSx0aGlzLmNvbmZpZy5fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKHJlLkdhbWVwYWRJbnB1dCwoZT0+e3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0R2FtZVBhZElucHV0RW5hYmxlZChlKX0pKSx0aGlzLmNvbmZpZy5fYWRkT25OdW1lcmljU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihvZS5NaW5RUCwoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0gIFNlbmRpbmcgTWluUVAgIC0tLS0tLS0tXCIsNyksdGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZW5kRW5jb2Rlck1pblFQKGUpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLDcpfSkpLHRoaXMuY29uZmlnLl9hZGRPbk51bWVyaWNTZXR0aW5nQ2hhbmdlZExpc3RlbmVyKG9lLk1heFFQLChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLSAgU2VuZGluZyBlbmNvZGVyIHNldHRpbmdzICAtLS0tLS0tLVwiLDcpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZEVuY29kZXJNYXhRUChlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiw3KX0pKSx0aGlzLmNvbmZpZy5fYWRkT25OdW1lcmljU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihvZS5XZWJSVENNaW5CaXRyYXRlLChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLSAgU2VuZGluZyB3ZWIgcnRjIHNldHRpbmdzICAtLS0tLS0tLVwiLDcpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZFdlYlJUQ01pbkJpdHJhdGUoMWUzKmUpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLDcpfSkpLHRoaXMuY29uZmlnLl9hZGRPbk51bWVyaWNTZXR0aW5nQ2hhbmdlZExpc3RlbmVyKG9lLldlYlJUQ01heEJpdHJhdGUsKGU9PntpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tICBTZW5kaW5nIHdlYiBydGMgc2V0dGluZ3MgIC0tLS0tLS0tXCIsNyksdGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZW5kV2ViUlRDTWF4Qml0cmF0ZSgxZTMqZSksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsNyl9KSksdGhpcy5jb25maWcuX2FkZE9uTnVtZXJpY1NldHRpbmdDaGFuZ2VkTGlzdGVuZXIob2UuV2ViUlRDRlBTLChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLSAgU2VuZGluZyB3ZWIgcnRjIHNldHRpbmdzICAtLS0tLS0tLVwiLDcpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZFdlYlJUQ0ZwcyhlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiw3KX0pKSx0aGlzLmNvbmZpZy5fYWRkT25PcHRpb25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKGNlLlByZWZlcnJlZENvZGVjLChlPT57dGhpcy5fd2ViUnRjQ29udHJvbGxlciYmdGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXRQcmVmZXJyZWRDb2RlYyhlKX0pKSx0aGlzLmNvbmZpZy5fcmVnaXN0ZXJPbkNoYW5nZUV2ZW50cyh0aGlzLl9ldmVudEVtaXR0ZXIpfV9hY3RpdmF0ZU9uU2NyZWVuS2V5Ym9hcmQoZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9X29uSW5wdXRDb250cm9sT3duZXJzaGlwKGUpe3RoaXMuX2lucHV0Q29udHJvbGxlcj1lfXNldFdlYlJ0Y1BsYXllckNvbnRyb2xsZXIoZSl7dGhpcy5fd2ViUnRjQ29udHJvbGxlcj1lLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0UHJlZmVycmVkQ29kZWModGhpcy5jb25maWcuZ2V0U2V0dGluZ09wdGlvbihjZS5QcmVmZXJyZWRDb2RlYykuc2VsZWN0ZWQpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIucmVzaXplUGxheWVyU3R5bGUoKSx0aGlzLmNoZWNrRm9yQXV0b0Nvbm5lY3QoKX1jb25uZWN0KCl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCl9cmVjb25uZWN0KCl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5yZXN0YXJ0U3RyZWFtQXV0b21hdGljYWxseSgpfWRpc2Nvbm5lY3QoKXt0aGlzLl93ZWJSdGNDb250cm9sbGVyLmNsb3NlKCl9cGxheSgpe3RoaXMuX29uU3RyZWFtTG9hZGluZygpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIucGxheVN0cmVhbSgpfWNoZWNrRm9yQXV0b0Nvbm5lY3QoKXt0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkF1dG9Db25uZWN0KSYmKHRoaXMuX29uV2ViUnRjQXV0b0Nvbm5lY3QoKSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLmNvbm5lY3RUb1NpZ25hbGxpbmdTZXJ2ZXIoKSl9X29uV2ViUnRjQXV0b0Nvbm5lY3QoKXt0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgTyksdGhpcy5fc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3Q9ITB9X29uV2ViUnRjU2RwKCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IEQpfV9vblN0cmVhbUxvYWRpbmcoKXt0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgVil9X29uRGlzY29ubmVjdChlKXtcIlwiIT10aGlzLl93ZWJSdGNDb250cm9sbGVyLmdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKSYmdm9pZCAwIT09dGhpcy5fd2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCkmJm51bGwhPXRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuZ2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpJiYoZT10aGlzLl93ZWJSdGNDb250cm9sbGVyLmdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoXCJcIikpLHRoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBHKHtldmVudFN0cmluZzplLHNob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0OnRoaXMuX3Nob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0fSkpLDA9PXRoaXMuX3Nob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0JiYodGhpcy5fc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3Q9ITApfV9vbldlYlJ0Y0Nvbm5lY3RpbmcoKXt0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgVSl9X29uV2ViUnRjQ29ubmVjdGVkKCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IEkpfV9vbldlYlJ0Y0ZhaWxlZCgpe3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyB6KX1fb25WaWRlb0luaXRpYWxpemVkKCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IEgpLHRoaXMuX3ZpZGVvU3RhcnRUaW1lPURhdGUubm93KCl9X29uTGF0ZW5jeVRlc3RSZXN1bHQoZSl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IFkoe2xhdGVuY3lUaW1pbmdzOmV9KSl9X29uVmlkZW9TdGF0cyhlKXt0aGlzLl92aWRlb1N0YXJ0VGltZSYmdm9pZCAwIT09dGhpcy5fdmlkZW9TdGFydFRpbWV8fCh0aGlzLl92aWRlb1N0YXJ0VGltZT1EYXRlLm5vdygpKSxlLmhhbmRsZVNlc3Npb25TdGF0aXN0aWNzKHRoaXMuX3ZpZGVvU3RhcnRUaW1lLHRoaXMuX2lucHV0Q29udHJvbGxlcix0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvQXZnUXApLHRoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBYKHthZ2dyZWdhdGVkU3RhdHM6ZX0pKX1fb25WaWRlb0VuY29kZXJBdmdRUChlKXt0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgRih7YXZnUVA6ZX0pKX1fb25Jbml0aWFsU2V0dGluZ3MoZSl7dmFyIHQ7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IEooe3NldHRpbmdzOmV9KSksZS5QaXhlbFN0cmVhbWluZ1NldHRpbmdzJiYodGhpcy5hbGxvd0NvbnNvbGVDb21tYW5kcz1udWxsIT09KHQ9ZS5QaXhlbFN0cmVhbWluZ1NldHRpbmdzLkFsbG93UGl4ZWxTdHJlYW1pbmdDb21tYW5kcykmJnZvaWQgMCE9PXQmJnQsITE9PT10aGlzLmFsbG93Q29uc29sZUNvbW1hbmRzJiZpLkluZm8oaS5HZXRTdGFja1RyYWNlKCksXCItQWxsb3dQaXhlbFN0cmVhbWluZ0NvbW1hbmRzPWZhbHNlLCBzZW5kaW5nIGFyYml0cmFyeSBjb25zb2xlIGNvbW1hbmRzIGZyb20gYnJvd3NlciB0byBVRSBpcyBkaXNhYmxlZC5cIikpO2NvbnN0IHM9dGhpcy5jb25maWcudXNlVXJsUGFyYW1zLG49bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtlLkVuY29kZXJTZXR0aW5ncyYmKHRoaXMuY29uZmlnLnNldE51bWVyaWNTZXR0aW5nKG9lLk1pblFQLHMmJm4uaGFzKG9lLk1pblFQKT9OdW1iZXIucGFyc2VJbnQobi5nZXQob2UuTWluUVApKTplLkVuY29kZXJTZXR0aW5ncy5NaW5RUCksdGhpcy5jb25maWcuc2V0TnVtZXJpY1NldHRpbmcob2UuTWF4UVAscyYmbi5oYXMob2UuTWF4UVApP051bWJlci5wYXJzZUludChuLmdldChvZS5NYXhRUCkpOmUuRW5jb2RlclNldHRpbmdzLk1heFFQKSksZS5XZWJSVENTZXR0aW5ncyYmKHRoaXMuY29uZmlnLnNldE51bWVyaWNTZXR0aW5nKG9lLldlYlJUQ01pbkJpdHJhdGUscyYmbi5oYXMob2UuV2ViUlRDTWluQml0cmF0ZSk/TnVtYmVyLnBhcnNlSW50KG4uZ2V0KG9lLldlYlJUQ01pbkJpdHJhdGUpKS8xZTM6ZS5XZWJSVENTZXR0aW5ncy5NaW5CaXRyYXRlLzFlMyksdGhpcy5jb25maWcuc2V0TnVtZXJpY1NldHRpbmcob2UuV2ViUlRDTWF4Qml0cmF0ZSxzJiZuLmhhcyhvZS5XZWJSVENNYXhCaXRyYXRlKT9OdW1iZXIucGFyc2VJbnQobi5nZXQob2UuV2ViUlRDTWF4Qml0cmF0ZSkpLzFlMzplLldlYlJUQ1NldHRpbmdzLk1heEJpdHJhdGUvMWUzKSx0aGlzLmNvbmZpZy5zZXROdW1lcmljU2V0dGluZyhvZS5XZWJSVENGUFMscyYmbi5oYXMob2UuV2ViUlRDRlBTKT9OdW1iZXIucGFyc2VJbnQobi5nZXQob2UuV2ViUlRDRlBTKSk6ZS5XZWJSVENTZXR0aW5ncy5GUFMpKX1fb25RdWFsaXR5Q29udHJvbE93bmVyc2hpcChlKXt0aGlzLmNvbmZpZy5zZXRGbGFnRW5hYmxlZChyZS5Jc1F1YWxpdHlDb250cm9sbGVyLGUpfXJlcXVlc3RMYXRlbmN5VGVzdCgpe3JldHVybiEhdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5pc1ZpZGVvUmVhZHkoKSYmKHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZExhdGVuY3lUZXN0KCksITApfXJlcXVlc3RTaG93RnBzKCl7cmV0dXJuISF0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmlzVmlkZW9SZWFkeSgpJiYodGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZW5kU2hvd0ZwcygpLCEwKX1yZXF1ZXN0SWZyYW1lKCl7cmV0dXJuISF0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmlzVmlkZW9SZWFkeSgpJiYodGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZW5kSWZyYW1lUmVxdWVzdCgpLCEwKX1lbWl0VUlJbnRlcmFjdGlvbihlKXtyZXR1cm4hIXRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIudmlkZW9QbGF5ZXIuaXNWaWRlb1JlYWR5KCkmJih0aGlzLl93ZWJSdGNDb250cm9sbGVyLmVtaXRVSUludGVyYWN0aW9uKGUpLCEwKX1lbWl0Q29tbWFuZChlKXtyZXR1cm4hKCF0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmlzVmlkZW9SZWFkeSgpfHwhdGhpcy5hbGxvd0NvbnNvbGVDb21tYW5kcyYmXCJDb25zb2xlQ29tbWFuZFwiaW4gZXx8KHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuZW1pdENvbW1hbmQoZSksMCkpfWVtaXRDb25zb2xlQ29tbWFuZChlKXtyZXR1cm4hKCF0aGlzLmFsbG93Q29uc29sZUNvbW1hbmRzfHwhdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5pc1ZpZGVvUmVhZHkoKXx8KHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuZW1pdENvbnNvbGVDb21tYW5kKGUpLDApKX1hZGRSZXNwb25zZUV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnJlc3BvbnNlQ29udHJvbGxlci5hZGRSZXNwb25zZUV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVSZXNwb25zZUV2ZW50TGlzdGVuZXIoZSl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5yZXNwb25zZUNvbnRyb2xsZXIucmVtb3ZlUmVzcG9uc2VFdmVudExpc3RlbmVyKGUpfWRpc3BhdGNoRXZlbnQoZSl7cmV0dXJuIHRoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KGUpfWFkZEV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLl9ldmVudEVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihlLHQpfXJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KXt0aGlzLl9ldmVudEVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfXRvZ2dsZVhSKCl7dGhpcy53ZWJYckNvbnRyb2xsZXIueHJDbGlja2VkKCl9c2V0U2lnbmFsbGluZ1VybEJ1aWxkZXIoZSl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5zaWduYWxsaW5nVXJsQnVpbGRlcj1lfWdldCB3ZWJTb2NrZXRDb250cm9sbGVyKCl7cmV0dXJuIHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIud2ViU29ja2V0Q29udHJvbGxlcn1nZXQgd2ViWHJDb250cm9sbGVyKCl7cmV0dXJuIHRoaXMuX3dlYlhyQ29udHJvbGxlcn19dmFyIEN0PXIuRHosZnQ9ci5nJCxUdD1yLkx0LEV0PXIuUTkseXQ9ci5xZixidD1yLmhWLE10PXIueiQsd3Q9ci5KMCxQdD1yLkRlLGt0PXIuJEMsUnQ9ci5hbCxMdD1yLl9XLHh0PXIudHosQXQ9ci5OdSxGdD1yLnpnLER0PXIudnAsT3Q9ci52VSxVdD1yLndGLEl0PXIucnYsenQ9ci5OaCxHdD1yLnNzLEJ0PXIucVcsX3Q9ci5RTCxXdD1yLmNmLEh0PXIuZU0sVnQ9ci5ZZCxOdD1yLmlNLEt0PXIucXksUXQ9ci5jZSwkdD1yLnNLLHF0PXIuT2ssWHQ9ci5xNSxqdD1yLmcsWXQ9ci54bCxKdD1yLkksWnQ9ci5ieCxlcz1yLkliLHRzPXIuQXosc3M9ci5Jdyxucz1yLnFZLHJzPXIuZGIsaXM9ci5tUixvcz1yLlRuLGFzPXIuclYsbHM9ci5naCxkcz1yLmk1LGNzPXIueF8saHM9ci5BbSxncz1yLmVSLHVzPXIucjgsbXM9ci51MyxTcz1yLnZkLHBzPXIuaVYsdnM9ci5qWixDcz1yLlNXLGZzPXIuWkgsVHM9ci5OaSxFcz1yLmxoLHlzPXIuYnEsYnM9ci4kZixNcz1yLmV1LHdzPXIuQXgsUHM9ci5NYztleHBvcnR7Q3QgYXMgQWZrTG9naWMsZnQgYXMgQWZrVGltZWRPdXRFdmVudCxUdCBhcyBBZmtXYXJuaW5nQWN0aXZhdGVFdmVudCxFdCBhcyBBZmtXYXJuaW5nRGVhY3RpdmF0ZUV2ZW50LHl0IGFzIEFma1dhcm5pbmdVcGRhdGVFdmVudCxidCBhcyBBZ2dyZWdhdGVkU3RhdHMsTXQgYXMgQ2FuZGlkYXRlUGFpclN0YXRzLHd0IGFzIENhbmRpZGF0ZVN0YXQsUHQgYXMgQ29uZmlnLGt0IGFzIENvbnRyb2xTY2hlbWVUeXBlLFJ0IGFzIERhdGFDaGFubmVsQ2xvc2VFdmVudCxMdCBhcyBEYXRhQ2hhbm5lbEVycm9yRXZlbnQseHQgYXMgRGF0YUNoYW5uZWxPcGVuRXZlbnQsQXQgYXMgRGF0YUNoYW5uZWxTdGF0cyxGdCBhcyBFbmNvZGVyU2V0dGluZ3MsRHQgYXMgRXZlbnRFbWl0dGVyLE90IGFzIEZsYWdzLFV0IGFzIEhpZGVGcmVlemVGcmFtZUV2ZW50LEl0IGFzIEluYm91bmRBdWRpb1N0YXRzLHp0IGFzIEluYm91bmRWaWRlb1N0YXRzLEd0IGFzIEluaXRpYWxTZXR0aW5ncyxCdCBhcyBJbml0aWFsU2V0dGluZ3NFdmVudCxfdCBhcyBMYXRlbmN5VGVzdFJlc3VsdEV2ZW50LFd0IGFzIExhdGVuY3lUZXN0UmVzdWx0cyxIdCBhcyBMb2FkRnJlZXplRnJhbWVFdmVudCxWdCBhcyBMb2dnZXIsTnQgYXMgTWVzc2FnZVJlY3YsS3QgYXMgTWVzc2FnZVNlbmQsUXQgYXMgTWVzc2FnZVN0cmVhbWVyTGlzdCwkdCBhcyBOdW1lcmljUGFyYW1ldGVycyxxdCBhcyBPcHRpb25QYXJhbWV0ZXJzLFh0IGFzIE91dEJvdW5kVmlkZW9TdGF0cyxqdCBhcyBQaXhlbFN0cmVhbWluZyxZdCBhcyBQbGF5U3RyZWFtRXJyb3JFdmVudCxKdCBhcyBQbGF5U3RyZWFtRXZlbnQsWnQgYXMgUGxheVN0cmVhbVJlamVjdGVkRXZlbnQsZXMgYXMgU2V0dGluZ0Jhc2UsdHMgYXMgU2V0dGluZ0ZsYWcsc3MgYXMgU2V0dGluZ051bWJlcixucyBhcyBTZXR0aW5nT3B0aW9uLHJzIGFzIFNldHRpbmdUZXh0LGlzIGFzIFNldHRpbmdzQ2hhbmdlZEV2ZW50LG9zIGFzIFNpZ25hbGxpbmdQcm90b2NvbCxhcyBhcyBTdGF0c1JlY2VpdmVkRXZlbnQsbHMgYXMgU3RyZWFtTG9hZGluZ0V2ZW50LGRzIGFzIFN0cmVhbWVyTGlzdE1lc3NhZ2VFdmVudCxjcyBhcyBUZXh0UGFyYW1ldGVycyxocyBhcyBVbnF1YW50aXplZEFuZERlbm9ybWFsaXplVW5zaWduZWQsZ3MgYXMgVmlkZW9FbmNvZGVyQXZnUVBFdmVudCx1cyBhcyBWaWRlb0luaXRpYWxpemVkRXZlbnQsbXMgYXMgV2ViUlRDU2V0dGluZ3MsU3MgYXMgV2ViUnRjQXV0b0Nvbm5lY3RFdmVudCxwcyBhcyBXZWJSdGNDb25uZWN0ZWRFdmVudCx2cyBhcyBXZWJSdGNDb25uZWN0aW5nRXZlbnQsQ3MgYXMgV2ViUnRjRGlzY29ubmVjdGVkRXZlbnQsZnMgYXMgV2ViUnRjRmFpbGVkRXZlbnQsVHMgYXMgV2ViUnRjUGxheWVyQ29udHJvbGxlcixFcyBhcyBXZWJSdGNTZHBFdmVudCx5cyBhcyBXZWJTb2NrZXRDb250cm9sbGVyLGJzIGFzIFdlYlhSQ29udHJvbGxlcixNcyBhcyBYckZyYW1lRXZlbnQsd3MgYXMgWHJTZXNzaW9uRW5kZWRFdmVudCxQcyBhcyBYclNlc3Npb25TdGFydGVkRXZlbnR9OyIsImltcG9ydCphcyB0IGZyb21cIkBlcGljZ2FtZXMtcHMvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWU1LjJcIjtpbXBvcnQqYXMgZSBmcm9tXCJqc3NcIjtpbXBvcnQqYXMgcyBmcm9tXCJqc3MtcGx1Z2luLWdsb2JhbFwiO2ltcG9ydCphcyBpIGZyb21cImpzcy1wbHVnaW4tY2FtZWwtY2FzZVwiO3ZhciBuPXtkOih0LGUpPT57Zm9yKHZhciBzIGluIGUpbi5vKGUscykmJiFuLm8odCxzKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscyx7ZW51bWVyYWJsZTohMCxnZXQ6ZVtzXX0pfSxvOih0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbz17fTtuLmQobyx7eW06KCk9PnYsRVc6KCk9PmQsTXg6KCk9PnosTDM6KCk9PlIscmw6KCk9PmgsTlI6KCk9Pm0sZjE6KCk9PkUsSVk6KCk9PnAsUlo6KCk9PmMsWFk6KCk9PkgsRms6KCk9PnUsWmg6KCk9PkYsZWs6KCk9PkEsTUc6KCk9PlAsZ0U6KCk9Pk0sdFc6KCk9Pk8sd3I6KCk9Pmd9KTtjb25zdCBsPShhPXtGbGFnczooKT0+dC5GbGFncyxMb2dnZXI6KCk9PnQuTG9nZ2VyLE51bWVyaWNQYXJhbWV0ZXJzOigpPT50Lk51bWVyaWNQYXJhbWV0ZXJzLE9wdGlvblBhcmFtZXRlcnM6KCk9PnQuT3B0aW9uUGFyYW1ldGVycyxTZXR0aW5nRmxhZzooKT0+dC5TZXR0aW5nRmxhZyxUZXh0UGFyYW1ldGVyczooKT0+dC5UZXh0UGFyYW1ldGVycyxXZWJYUkNvbnRyb2xsZXI6KCk9PnQuV2ViWFJDb250cm9sbGVyfSxyPXt9LG4uZChyLGEpLHIpO3ZhciBhLHI7Y2xhc3MgY3tjb25zdHJ1Y3Rvcih0LGUscyl7dGhpcy5yb290RGl2PXQsdGhpcy5yb290RWxlbWVudD1lLHRoaXMudGV4dEVsZW1lbnQ9cyx0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGV4dEVsZW1lbnQpLHRoaXMuaGlkZSgpLHRoaXMucm9vdERpdi5hcHBlbmRDaGlsZCh0aGlzLnJvb3RFbGVtZW50KX1zaG93KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuU3RhdGVcIil9aGlkZSgpe3RoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblN0YXRlXCIpfX1jbGFzcyBkIGV4dGVuZHMgY3tjb25zdHJ1Y3Rvcih0LGUscyl7c3VwZXIodCxlLHMpLHRoaXMub25BY3Rpb25DYWxsYmFjaz0oKT0+e2wuTG9nZ2VyLkluZm8obC5Mb2dnZXIuR2V0U3RhY2tUcmFjZSgpLFwiRGlkIHlvdSBmb3JnZXQgdG8gc2V0IHRoZSBvbkFjdGlvbiBjYWxsYmFjayBpbiB5b3VyIG92ZXJsYXk/XCIpfX11cGRhdGUodCl7bnVsbD09dCYmbnVsbD09dHx8KHRoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPXQpfW9uQWN0aW9uKHQpe3RoaXMub25BY3Rpb25DYWxsYmFjaz10fWFjdGl2YXRlKCl7dGhpcy5vbkFjdGlvbkNhbGxiYWNrKCl9fWNsYXNzIGggZXh0ZW5kcyBke3N0YXRpYyBjcmVhdGVSb290RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImNvbm5lY3RPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJjbGlja2FibGVTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiY29ubmVjdEJ1dHRvblwiLHQuaW5uZXJIVE1MPVwiQ2xpY2sgdG8gc3RhcnRcIix0fWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQsaC5jcmVhdGVSb290RWxlbWVudCgpLGguY3JlYXRlQ29udGVudEVsZW1lbnQoKSksdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9Pnt0aGlzLmFjdGl2YXRlKCl9KSl9fWNsYXNzIG0gZXh0ZW5kcyBke3N0YXRpYyBjcmVhdGVSb290RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImRpc2Nvbm5lY3RPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJjbGlja2FibGVTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiZGlzY29ubmVjdEJ1dHRvblwiLHQuaW5uZXJIVE1MPVwiQ2xpY2sgVG8gUmVzdGFydFwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCxtLmNyZWF0ZVJvb3RFbGVtZW50KCksbS5jcmVhdGVDb250ZW50RWxlbWVudCgpKSx0aGlzLnJvb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgoKT0+e3RoaXMuYWN0aXZhdGUoKX0pKX19Y2xhc3MgdSBleHRlbmRzIGR7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwicGxheU92ZXJsYXlcIix0LmNsYXNzTmFtZT1cImNsaWNrYWJsZVN0YXRlXCIsdH1zdGF0aWMgY3JlYXRlQ29udGVudEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7cmV0dXJuIHQuaWQ9XCJwbGF5QnV0dG9uXCIsdC5zcmM9XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVBFQUFBRDVDQVlBQUFEMm1OTmtBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNNQUFBN0RBY2R2cUdRQUFBQVpkRVZZZEZOdlpuUjNZWEpsQUhCaGFXNTBMbTVsZENBMExqQXVNakh4SUdtVkFBQVNna2xFUVZSNFh1MmRDN0JkVlgySHFVQ0NJUkFTQ1BqQUZJUVJFQlJCQlNSWWJGT3Q4bElyRlVXUkZxWFdzVDV3Ykl0VXFGV3MwS3FJTVBLb1lFV3BSUzA2S0RqUzFCZVZGa1ZRYkN3K3dDZmlBd0doQ0tXUDlQdVp0VTI0dVRlNTl6ejIyWS92bS9uR2tYdHo3amxycjkrc2RmWmVhLzAzV2IxNjlRdHhHVzYyaVlpMEQ4TDdOYndZajhFZGNkUHlJeEZwQTRUMlAvRi84VWE4Q0kvR2hQblh5cStJU0pNaHJBbHh4WDloUnVZTDhTaDhTUGsxRVdrcUJIWGRFRmZjZzZ2dzNmaHMzS2I4dW9nMERRSTZYWWdyOHJPdllzSjhPTTR2LzB4RW1rSUo2b2I0UDh6SWZBTmVnQ3ZRTUlzMEJRSzVzUkJYSk15L3dJek01K0J5WEZCZVJrUW1CVUdjYllqWDVTNU1tTS9BQTNDTDhuSWlVamNFY0pBUVY5eUJYOGEvd1NlaXo1aEY2b2JnRFJQaWtHZk1DZk9YOERUY3U3eTBpTlFCb1JzMnhCWC9nM2Rpd3Z3bTNLbjhDUkVaSjRSdFZDR3VxTUtjdTlrbjR4SjA5WmZJdUNCZ293NXh5SjNzVExOekF5d3J3RjZKMjZOaEZoazFCR3NjSVY2WGhQbHV2QTZQeHgzS254YVJVVUNveGgzaWlvUTV6NW4vQlkvRkplVXRpTWd3RUthNlFseVJNTitIbjhIbjRaYmxyWWpJSUJDaXVrTWM4cDI1V3M2Wk1EK3p2QjBSbVNzRWFCSWhua3JldzVWNEVIckNpTWhjS0FGcUN2K05sK0ordUJDOW15MnlNUWhLazBKY2tlL003OEdzeTA2WUgxVGVyb2hNaFlBME1jUVZQOE56OFVEY0NsMmJMVElWZ3RIa0VGZDhEOC9FL1hGcmRHUVdxU0FRYlFoeHlLT3BtL0IwM0FjOU1rZ2tFSWEyaExnaU43OFM1bFB4MGJnSXZRRW0vWVVBdEMzRUZRbnp6ZmdudURjNnpaWitRc2R2YTRqWDVTdjRhdHdYSFptbFg5RGh1eERpa0MyUW44ZFhZVWJtUmVVamluUWJPbnRYUWx5UlRSYWZ3bGRnd3J4VithZ2kzWVJPM3JVUVYvd2NWK0xMOERIb3laelNUZWpjWFExeFJjNy91aHl6bDNrdjNMeDhkSkZ1UUtmdWVvaERuakZuWlA0by9qN20wWlFINEVzM29EUDNJY1FWMmY2WU1GK0NPWmpnVWVpWjJkSnU2TVI5Q3ZHNjNJTHZ4NHpNQ2ZPODBpUWk3WUxPMjljUVYzd2IzNHNwc3I0cnVtQkUyZ1dkdHU4aERsbjk5UzFNWGVZWDRNNmxlVVNhRHgzV0VLOGxSZFlUNWxSL3pQbGZuc3dwelllT2FvalhKNGNTZkIzUHcrZmd0dWcwVzVvSm5kTVFUMC91WkdlYVhaVnlmVFp1VjVwTnBEblFNUTN4eHNrME85VWZ6OFpEY2R2U2ZDS1RodzVwaUdkUDJpb0Y0OTZKVDBjM1djamtLUjFUNWtZV2pDVE03OERmUWhlTXlPU2dBeHJpd2NoMzVsUi92QWJQd09Yb3pTK3BIenFlSVI2T2FsMTJ3dngyZkJ5NnlVTHFndzVuaUVkRHdweVIrVnBNa2ZYc21ISXBwNHdmT3BvaEhqMjM0UmZ3Rk53RG5XYkwrS0NER2VMeGtKSDVwM2cxdmc1M0swMHVNbHJvWElaNHZHVEJTTUo4RmVaa3ptV2w2VVZHQTUzS0VOZkQvWml5TkNteW52Ty9GcGRMSURJY2RDWkRYQzhabWZPZCtkL3dKZWpaWHpJY2RDSkRYRDk1eHB3amRuUCtWNzR6SDRXdS9wTEJvUE1ZNHNtU01OK0ZLYkorQkJwbW1SdDBHa1BjREJMbXUvRmplQWk2bEZObUI1M0ZFRGVIVExQemFDb2o4MGR3QmZxTVdUWU1uY1FRTjVlc0FQc3c3bGN1bDhqNjBFRU1jZlBKRGJEM1lVN2wzS3hjT3BFMTBDa01jVHZJVkR2Zm1jL0UzWEVMdFBxakdPS1draFZncCtHZW1ERDd2Ym5QMEFFTWNYdEprZlUzNEdOeEFUb3k5eEV1dkNGdVA2dndKTXlPcVlYbDBrcGY0S0liNG01UW5jeVpUUmFwWkdHWSt3SVgyeEIzaTN2eE9zd21pMTNRYVhiWDRRSWI0bTZTWTNhL2lNZGg3bVliNXE3Q2hUWEUzYVhhYUxFU3E3ck1XNVpMTDEyQmkycUkrOEU5ZURrbXpMdWhZZTRLWEV4RDNCOHlNdCtPbCtLTDBDTHJYWUNMYUlqN1I4SjhLMTZDUjZQTE9kc01GODhROTVmc21Qb1JYb3pQeGR6TmR2VlgyK0NpR1dMSnphK0VPWFdaajhTZDBBUHcyd0lYeXhCTHFQWXkzNExuWThLOERBMXowK0VpR1dLWlNnSjlJNzRMVTJSOVIzU2EzVlM0T0laWVpxSmF5bmtXcHNqNncwdTNrU2JCaFRIRXNqSHV3eHN3cFZ3UHc2V2wrMGdUNElJWVlwa05tV0tucjF5UHFmNTRLRzVWdXBGTWtuSmhSR1pMd3B6Vlg2bisrRFo4R3JwamFwSndBUXl4REVMQ25CMVRxV1R4MS9nVWRHU2VCRFM4SVpaQlNaQmp6djc2UFA0VkhvU0d1VTVvY0VNc295QmhUc0c0Vkg5OEl4NkE4MHMzazNGQ1F4dGlHU1ZaTVBJVC9Dd216UHVoejVqSENRMXNpR1VjWkNsbnd2eHBQQVgzTEYxT1JnMk5hNGhsWEdTS25RVWpDZk5uOFBYNENOeTBkRDhaQlRTb0laWnhrekJYSS9QbjhBVE11bXpEUEFwb1NFTXNkWkV3NXp2ekR6SFQ3SmRqd3V6Wlg4TkFBeHBpbVFTWlppZk1uOFRqOGFHbFM4cGNvZkVNc1V5S2pNdzVsVE9uakh3Y2MyVFFrdEkxWmJiUWFJWllKazNDbkUwV0dabXZ3T2VoKzVobkM0MWxpS1VwVkNOend2d0pQQnk5K2JVeGFDUkRMRTBqWWI0ZlUvMHgwK3lEOGNHbHk4cFVhQnhETEUwa1FhN0NmQ2ZtTUw4RDBTTjJwMEtqR0dKcE9nbHp0V2draC9rOUNUMWl0NExHTU1UU0ZoTG1MQnJKM2V4emNKL1NqZnNORFdHSXBZMGswRC9BTS9HUnBUdjNFeHJBRUV1YnFWYUFuWTVMc1g5M3MvblFobGk2UUxVRjhuV1lJM2JuWVQrV2MvSkJEYkYwaGVxTzlqZndsZmhJbkkvZERqTWYwQkJMRjBtWXI4TnNza2lOcVMyd20ySG1neGxpNlRKNXpwd2pnLzRRZDhidUxScmhReGxpNlFNNVpqZEhCaDJIK2M3Y25VVWpmQmhETEgwaFUreTdjQ1UrSDdPWGVWNkpRbnZoUXhoaTZSc0pjMGJteS9CWitNc2JZQ1VTN1lNM2I0aWxyeVRNMlFMNVFVekJ1SHhuYnQ4MG16ZHRpRVZXcjc0Tkw4S1VjazJSOWZhTXpMeFpReXl5aG96TVdjcDVJZjR1SnN6TlA1eUFOMm1JUlI1SVZuL2RqT2ZoRWRqc3cveDRjNFpZWkhyeWpQa21QQnNQd1llVjJEUUwzcGdoRnBtWlRMRnpaRkRDbkxyTXo4RHRzVGtiTFhnemhsaGs0eVRNMmN1OENyTmpLaU56d2p6NU9sTzhDVU1zTWpjUzVxekxmZ3VteVByMkpVNlRnVGRnaUVVR295cXlucnJNdjQyVE9UT2JQMnlJUlFZbjArd3M1YndhVThyMU4zSHJFcTk2NEE4YVlwSGhTWmp2d0JTTVM1Z1B3bnJXWmZPSERMSEk2TWd6NWh5eG00SnhmNGtINEhqRHpCOHd4Q0tqSjJIT05QdWY4Yzl4SHh6UFhtWmUyQkNMaklkTXNXTXFXZndUbm9pUHdkR096THlnSVJZWlB3bHpWV1BxdGJnWGptYkJDQzlraUVYcUk4K1lzOG5pY253TjdsYWlPRGk4aUNFV3FaZU15bG1YblRDbllGeE81dHl4UkhMdThJOE5zY2hrU0ppekx2djdtSkg1cGJnWTU3WmppbjlnaUVVbVN6VXlmdzlUWlAxWTNMWkVkT1B3eTRaWXBCa2t6S24rK0IzOEtCNkYyNVdvemd5L1pJaEZta1hDbkxPL3Zvc2Z3cHd5c3FoRWRuMzRvU0VXYVNZSjh5OHcwK3dQNEdHNC9vSVIvcU1oRm1rMlZaZ3p6VTZZczJOcTdUNW0vbzhoRm1rSENYTzJQeWJNRitPKytDQkRMTkl1RXVTc3k4NTM1bHZ4WkVNczBqNnFXc3paSmJYVUVJdTBpMXZ3clpocUZadjVuVmlrUFdUcWZBNW1GOVFERCtmalB4aGlrZWFSNzc3eGRyd0FuMUFpdXo3ODBCQ0xOSXZzZE1xQkFxa050UnczWEJlS1h6REVJcE1ubzI3Q2V6ZGVpay9HQlNXbUc0WmZOTVFpa3lQaHpYcnBWR1hNNlI4cmNHN2xWZmtIaGxpa2ZoTGU3RnpLbzZLVitIdTQ1bTd6WE9FZkdtS1Jlc2tlNG9UM2szZ01ibG5pT0JpOGdDRVdxWWVNdkQvR0svRjQzS0hFY0RoNElVTXNNbDV5dytwSG1MT29YNGFESDhVekhieWdJUllaRC9uZW01SDNLandCZDhMUlYxSGtSUTJ4eUdqSjNlYWNOWjFpYXlmaHIrUDQ2aG56NG9aWVpEUmsycHp3cGg3VFgrQ3VPUDc2eGZ3UlF5d3lITmxWVklYM1ZIeDhpVmM5OEFjTnNjamdaSkZHeXBxK0dmZkh3WjcxRGdOLzFCQ0x6SjJmNDcvaVd6QmxUSWQ3MWpzTS9IRkRMREk3Y3JmNUhyd0czNFlIWTcwRnhhZUROMkdJUlRaTXdwdmpjSzdGZCtCVGNmTGhyZUROR0dLUm1jbkllejIrRXcvRmhUaTNNaXZqaGpka2lFWFdKMGZFZmhYUHdtZmk0aEtaNXNHYk04UWlhOG42NWxYNExremxoWWVWcURRWDNxUWhGbG56clBjLzhGek10c0JsMkt4cDgwendSZzJ4OUowY3huNGVwb0JabGtqVy82eDNHSGpEaGxqNlNKWkk1Z1RKOStEek1lSGR2TVNpWGZER0RiSDBpV3BiWU1xZ0pMeTdZTHRHM3Fud0FReXg5SVZzQzd3RVg0Qzc0L2gyRnRVSkg4UVFTOWZKVVRnNVFmSTQzQVBubGU3ZkRmaEFobGk2U281Ly9SaStHQlBleWExdkhpZDhNRU1zWFNNSDBYMENYNEo3NGNMUzNic0pIOUFRUzFmSVRhdnM2ZjFWZUxFZHozcUhnUTlwaUtYdFpITkMxamZuRUxwZlRwdXgrK0d0NE1NYVlta3JtVFovR1YrTENXKzNwODB6d1FjM3hOSTJza1R5QnN3aGRIdGljN1lGVGdJYXdCQkxtN2dSVDhISDRkYlluMm56VE5BSWhsamFRQ3JrdndrVDN0eXdHdjhwa20yQnhqREUwbFJ5b2tiT3Nqb0RVeUUvTjZ3TTcxUm9GRU1zVFNQaHZSUGZqWS9HQmVpMGVTWm9IRU1zVGVKMi9BRHVnKzNjVlZRM05KUWhsaWFRa2ZjZjhTbm9xRHNYYURCRExKTWlqNHJ1eGN2d2FlaklPd2cwbkNHV3Vzbnl5SVQzQ2p3TSs3bElZMVRRZ0laWTZpQTNxekx5Wm1kUlNuMGVpYzA5UWJKTjBKQ0dXTVpKd3B1Ujl3NzhFcjRRdTdrbGNGTFFvSVpZeGtYcTlPWnVjMm9XWlhOQ3Y1ZEhqZ3NhMWhETHFLbkNtMnFCMlp6dzBOTGRaQnpRd0laWVJrV216VC9EaFBkRTNLVjBNeGtuTkxRaGxtSEo5OTZFTndYSHNqa2hxNnhjSGxrWE5MWWhsa0ZKZUhQREtodnlzemtoNFczMzhhOXRoRVkzeERKWDhxZ29HeE1TM3RUcGZTek9MMTFLNm9iR044UXlXeExlTEkvTXREbWxQdmRIcDgyVGhvdGdpR1UyWk9TdHdyc0NYU0xaRkxnWWhsZzJ4RjJZYzZ6T3hxZWpDeldhQmhmRkVNdDBwTWoyVnpCMWVnL0JKYVhMU05QZzRoaGlxY2pkNWl6VVNJWDhsUHA4Rmk0dFhVV2FDaGZKRUV0SWhmd1UyYjRRVTJSN08zUmZieHZnUWhuaWZwT0QxNytKQ1c5S2ZTNUY3emkzQ1M2WUllNG5PWGo5Vy9oM2VBdyt2SFFKYVJ0Y1BFUGNML0tzOTJhOENJL0ZYZEZwYzV2aEFocmkvdkI5L0h2OEEzd1V1a1N5QzNBaERYSDMrU24rQXg2UHFaRHZFc2t1d1FVMXhOMmtPZ29uSjBpbTFHYzJKMnhSTHJ0MENTNnNJZTRXMWM2aWoyTkczbFJPbUZjdXQzUVJMckFoN2c0Sjc1WDRSN2czR3Q0K3dJVTJ4TzBuMCtaUDRhc3dCY2RjMzl3bnVPQ0d1TDNrV2UvbjhEVzRMeTRxbDFYNkJCZmVFTGVUTCtBSitBVGNCbjNXMjFlNCtJYTRQZVNPODlmd1QvR0p1QWhkSXRsMzZBU0d1UGxrWjlHMzhmV1lvM0F5OGhwZVdRT2R3UkEzbHh3QmV4TytHVlBxMDdJbnNqNTBERVBjVExLKytlMlljNndXbzk5NVpYcm9ISWE0V2R5S09RcG5PV2JhdkdtNVZDTFRReWN4eE0wZ3AwaWVqMC9HM0xBeXZESTc2Q3lHZUhKVXgrRzhIdzlFd3l0emgwNWppQ2RERHFLN0hBL0FoZWgzWGhrTU9vOGhycGUwOTZmeGQ5RDl2REk4cFZQSitMa1hQNHZQUWFmTU1qcm9VSVo0Zk9RN2I5WTNYNFU1eDhvaTJ6SjY2RmlHZVBSa2VXUk9rZndpSG9lZTNTempndzVtaUVkRFJ0MTREK2J3OVpmakRxV1pSY1lISGMwUUQwOTFGRTZPZ1AwejlPQjFxUTg2bXlFZW5LeHRUbmd6OHI0QkhYbWxmdWg0aG5qdUpMd3A5WmxxZ2FmaDdxVTVSZXFIRG1pSVowK216VmtlZVFPK0ZSOWZtbEZrY3RBUkRmSHNTSjNlZjhkcVo1R0gwRWt6b0RNYTRwbkozZWEwVDA3VE9BZXp2bmxCYVRxUlpsQTZxVHlRaERkcm0xZmhCWGd3R2w1cEpuUk9RN3lXNmpsdnd2dGVmQVp1WHBwS3BKbVVUaXRycDgwcDlabjF6UTh1VFNUU2JPaXNmUTl4cHMycGtKL3dQaGUzSzAwajBnN290SDBOOGYzNGRYd2ZIbzBXMlpaMlF1ZnRZNGl6UERLbmFid0lINEVlL3lydGhRN2NseEJubGRVUDhCSjhNU2E4N3V1VjlrTkg3bnFJYzRaVnd2c2hmQ2t1UThNcjNZRU8zZFVRWjRua0QvSERtRktmZTVTUExOSXQ2TnhkREhIQyt4RjhCYWJzaVNPdmRCYzZlSmRDZkJ0ZWhnbHZpbXo3ckZlNkR4MjlDeUhPUW8wcjhOV1lPcjBXMlpiK1FJZHZhNGl6UkRMUGVsZGk2dlNtMU9mQzhyRkUrZ01kdjQwaHpudStHbE1oZnovY0VqME9SL29KbmI5TkljNTd2UVpQeENlaEk2OUlDVWJUeWRuTjErTEptUEF1S1c5ZlJBaEVrME9jWjczWFl3NmhPd2c5djFsa0tnU2pxU0hPNW9SVDhUZHdLYnErV1dRNkNFZVRRcHc3emxtb2NUcW1UbS9PYjdib21NaUdJQ1JOQ0hHbXpUL0JzekNsUGpQeXVzcEtaRFlRbGttSCtNZjR0N2djdDBlbnpTSnpnZEJNS3NRSjcwWDRWSFRrRlJrVXdsTjNpRk01NFlONEtHNkxIa1FuTWd5RXFLNFE1MW52cFpqd1p1UTF2Q0tqZ0REVkVlSXI4WEJNZUwzYkxESktDTlc0UXB5Ujl6bzhBcmRCYjFpSmpBUENOZW9RSjd5cEZuZ3N6a2MzSm9pTUUwSTJxaERuV1c4S2p2MHh1akZCcEM0STNEQWh6Z3FySEVTWFVwL1owL3VROHJJaVVoY0ViNUFRSjd6MzRUZndKTnk1dkp5STFBMEJuRzJJRTl5WXNpZmZ3VGZpenVoM1hwRkpRZ2huRStKODMwMTR2NHVwa0w4citxaElwQWtReGcyRk9PSE56ek50UGhmM1JFZGVrU1pSUWpxVlRKdHpndVNOZUQ0ZVdINWRSSm9HQVowYTRydnhtM2docmtDbnpTSk5ocEJXSWM3L3BscGd3cHVkUlo3ZExOSUdDT3Z0SmJ3WDQyRzR1UHhJUk5vQW9VMmQzaU54VWZsUEl0SWFOdG5rL3dFR0JvTWRwRUNHSEFBQUFBQkpSVTVFcmtKZ2dnPT1cIix0LmFsdD1cIlN0YXJ0IFN0cmVhbWluZ1wiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCx1LmNyZWF0ZVJvb3RFbGVtZW50KCksdS5jcmVhdGVDb250ZW50RWxlbWVudCgpKSx0aGlzLnJvb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgoKT0+e3RoaXMuYWN0aXZhdGUoKX0pKX19Y2xhc3MgZyBleHRlbmRzIGN7Y29uc3RydWN0b3IodCxlLHMpe3N1cGVyKHQsZSxzKX11cGRhdGUodCl7bnVsbD09dCYmbnVsbD09dHx8KHRoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPXQpfX1jbGFzcyBwIGV4dGVuZHMgZ3tzdGF0aWMgY3JlYXRlUm9vdEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuaWQ9XCJpbmZvT3ZlcmxheVwiLHQuY2xhc3NOYW1lPVwidGV4dERpc3BsYXlTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwibWVzc2FnZU92ZXJsYXlJbm5lclwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCxwLmNyZWF0ZVJvb3RFbGVtZW50KCkscC5jcmVhdGVDb250ZW50RWxlbWVudCgpKX19Y2xhc3MgRSBleHRlbmRzIGd7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiZXJyb3JPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJ0ZXh0RGlzcGxheVN0YXRlXCIsdH1zdGF0aWMgY3JlYXRlQ29udGVudEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuaWQ9XCJlcnJvck92ZXJsYXlJbm5lclwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCxFLmNyZWF0ZVJvb3RFbGVtZW50KCksRS5jcmVhdGVDb250ZW50RWxlbWVudCgpKX19Y2xhc3MgdiBleHRlbmRzIGR7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiYWZrT3ZlcmxheVwiLHQuY2xhc3NOYW1lPVwiY2xpY2thYmxlU3RhdGVcIix0fXN0YXRpYyBjcmVhdGVDb250ZW50RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImFma092ZXJsYXlJbm5lclwiLHQuaW5uZXJIVE1MPSc8Y2VudGVyPk5vIGFjdGl2aXR5IGRldGVjdGVkPGJyPkRpc2Nvbm5lY3RpbmcgaW4gPHNwYW4gaWQ9XCJhZmtDb3VudERvd25OdW1iZXJcIj48L3NwYW4+IHNlY29uZHM8YnI+Q2xpY2sgdG8gY29udGludWU8YnI+PC9jZW50ZXI+Jyx0fWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQsdi5jcmVhdGVSb290RWxlbWVudCgpLHYuY3JlYXRlQ29udGVudEVsZW1lbnQoKSksdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9Pnt0aGlzLmFjdGl2YXRlKCl9KSl9dXBkYXRlQ291bnRkb3duKHQpe3RoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPWA8Y2VudGVyPk5vIGFjdGl2aXR5IGRldGVjdGVkPGJyPkRpc2Nvbm5lY3RpbmcgaW4gPHNwYW4gaWQ9XCJhZmtDb3VudERvd25OdW1iZXJcIj4ke3R9PC9zcGFuPiBzZWNvbmRzPGJyPkNsaWNrIHRvIGNvbnRpbnVlPGJyPjwvY2VudGVyPmB9fWNsYXNzIGJ7Y29uc3RydWN0b3IoKXt0aGlzLmlzRnVsbHNjcmVlbj0hMSx0aGlzLnJvb3RFbGVtZW50Lm9uY2xpY2s9KCk9PnRoaXMudG9nZ2xlRnVsbHNjcmVlbigpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsKCgpPT50aGlzLm9uRnVsbHNjcmVlbkNoYW5nZSgpKSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vemZ1bGxzY3JlZW5jaGFuZ2VcIiwoKCk9PnRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKCkpLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZnVsbHNjcmVlbmNoYW5nZVwiLCgoKT0+dGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2UoKSksITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJNU0Z1bGxzY3JlZW5DaGFuZ2VcIiwoKCk9PnRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKCkpLCExKX1nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLHRoaXMuX3Jvb3RFbGVtZW50LnR5cGU9XCJidXR0b25cIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiVWlUb29sXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwiZnVsbHNjcmVlbi1idG5cIix0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLm1heGltaXplSWNvbiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5taW5pbWl6ZUljb24pLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9vbHRpcFRleHQpKSx0aGlzLl9yb290RWxlbWVudH1nZXQgdG9vbHRpcFRleHQoKXtyZXR1cm4gdGhpcy5fdG9vbHRpcFRleHR8fCh0aGlzLl90b29sdGlwVGV4dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLl90b29sdGlwVGV4dC5jbGFzc0xpc3QuYWRkKFwidG9vbHRpcHRleHRcIiksdGhpcy5fdG9vbHRpcFRleHQuaW5uZXJIVE1MPVwiRnVsbHNjcmVlblwiKSx0aGlzLl90b29sdGlwVGV4dH1nZXQgbWF4aW1pemVJY29uKCl7aWYoIXRoaXMuX21heGltaXplSWNvbil7dGhpcy5fbWF4aW1pemVJY29uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIiksdGhpcy5fbWF4aW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwibWF4aW1pemVJY29uXCIpLHRoaXMuX21heGltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieFwiLFwiMHB4XCIpLHRoaXMuX21heGltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieVwiLFwiMHB4XCIpLHRoaXMuX21heGltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidmlld0JveFwiLFwiMCAwIDM4NC45NyAzODQuOTdcIik7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwiZ1wiKTt0LmNsYXNzTGlzdC5hZGQoXCJzdmdJY29uXCIpLHRoaXMuX21heGltaXplSWNvbi5hcHBlbmRDaGlsZCh0KTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO2Uuc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0zODQuOTcsMTIuMDNjMC02LjcxMy01LjMxNy0xMi4wMy0xMi4wMy0xMi4wM0gyNjQuODQ3Yy02LjgzMywwLTExLjkyMiw1LjM5LTExLjkzNCwxMi4yMjNjMCw2LjgyMSw1LjEwMSwxMS44MzgsMTEuOTM0LDExLjgzOGg5Ni4wNjJsLTAuMTkzLDk2LjUxOWMwLDYuODMzLDUuMTk3LDEyLjAzLDEyLjAzLDEyLjAzYzYuODMzLTAuMDEyLDEyLjAzLTUuMTk3LDEyLjAzLTEyLjAzbDAuMTkzLTEwOC4zNjljMC0wLjAzNi0wLjAxMi0wLjA2LTAuMDEyLTAuMDg0QzM4NC45NTgsMTIuMDksMzg0Ljk3LDEyLjA2NiwzODQuOTcsMTIuMDN6XCIpO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTEyMC40OTYsMEgxMi40MDNjLTAuMDM2LDAtMC4wNiwwLjAxMi0wLjA5NiwwLjAxMkMxMi4yODMsMC4wMTIsMTIuMjQ3LDAsMTIuMjIzLDBDNS41MSwwLDAuMTkyLDUuMzE3LDAuMTkyLDEyLjAzTDAsMTIwLjM5OWMwLDYuODMzLDUuMzksMTEuOTM0LDEyLjIyMywxMS45MzRjNi44MjEsMCwxMS44MzgtNS4xMDEsMTEuODM4LTExLjkzNGwwLjE5Mi05Ni4zMzloOTYuMjQyYzYuODMzLDAsMTIuMDMtNS4xOTcsMTIuMDMtMTIuMDNDMTMyLjUxNCw1LjE5NywxMjcuMzE3LDAsMTIwLjQ5NiwwelwiKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO2kuc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0xMjAuMTIzLDM2MC45MDlIMjQuMDYxdi05Ni4yNDJjMC02LjgzMy01LjE5Ny0xMi4wMy0xMi4wMy0xMi4wM1MwLDI1Ny44MzMsMCwyNjQuNjY3djEwOC4wOTJjMCwwLjAzNiwwLjAxMiwwLjA2LDAuMDEyLDAuMDg0YzAsMC4wMzYtMC4wMTIsMC4wNi0wLjAxMiwwLjA5NmMwLDYuNzEzLDUuMzE3LDEyLjAzLDEyLjAzLDEyLjAzaDEwOC4wOTJjNi44MzMsMCwxMS45MjItNS4zOSwxMS45MzQtMTIuMjIzQzEzMi4wNTcsMzY1LjkyNiwxMjYuOTU2LDM2MC45MDksMTIwLjEyMywzNjAuOTA5elwiKTtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO24uc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0zNzIuNzQ3LDI1Mi45MTNjLTYuODMzLDAtMTEuODUsNS4xMDEtMTEuODM4LDExLjkzNHY5Ni4wNjJoLTk2LjI0MmMtNi44MzMsMC0xMi4wMyw1LjE5Ny0xMi4wMywxMi4wM3M1LjE5NywxMi4wMywxMi4wMywxMi4wM2gxMDguMDkyYzAuMDM2LDAsMC4wNi0wLjAxMiwwLjA4NC0wLjAxMmMwLjAzNi0wLjAxMiwwLjA2LDAuMDEyLDAuMDk2LDAuMDEyYzYuNzEzLDAsMTIuMDMtNS4zMTcsMTIuMDMtMTIuMDNWMjY0Ljg0N0MzODQuOTcsMjU4LjAxNCwzNzkuNTgsMjUyLjkxMywzNzIuNzQ3LDI1Mi45MTN6XCIpLHQuYXBwZW5kQ2hpbGQoZSksdC5hcHBlbmRDaGlsZChzKSx0LmFwcGVuZENoaWxkKGkpLHQuYXBwZW5kQ2hpbGQobil9cmV0dXJuIHRoaXMuX21heGltaXplSWNvbn1nZXQgbWluaW1pemVJY29uKCl7aWYoIXRoaXMuX21pbmltaXplSWNvbil7dGhpcy5fbWluaW1pemVJY29uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIiksdGhpcy5fbWluaW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwibWluaW1pemVJY29uXCIpLHRoaXMuX21pbmltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieFwiLFwiMHB4XCIpLHRoaXMuX21pbmltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieVwiLFwiMHB4XCIpLHRoaXMuX21pbmltaXplSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidmlld0JveFwiLFwiMCAwIDM4NS4zMzEgMzg1LjMzMVwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5fbWluaW1pemVJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTI2NC45NDMsMTU2LjY2NWgxMDguMjczYzYuODMzLDAsMTEuOTM0LTUuMzksMTEuOTM0LTEyLjIxMWMwLTYuODMzLTUuMTAxLTExLjg1LTExLjkzNC0xMS44MzhoLTk2LjI0MlYzNi4xODFjMC02LjgzMy01LjE5Ny0xMi4wMy0xMi4wMy0xMi4wM3MtMTIuMDMsNS4xOTctMTIuMDMsMTIuMDN2MTA4LjI3M2MwLDAuMDM2LDAuMDEyLDAuMDYsMC4wMTIsMC4wODRjMCwwLjAzNi0wLjAxMiwwLjA2LTAuMDEyLDAuMDk2QzI1Mi45MTMsMTUxLjM0NywyNTguMjMsMTU2LjY3NywyNjQuOTQzLDE1Ni42NjV6XCIpO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTEyMC4yOTEsMjQuMjQ3Yy02LjgyMSwwLTExLjgzOCw1LjExMy0xMS44MzgsMTEuOTM0djk2LjI0MkgxMi4wM2MtNi44MzMsMC0xMi4wMyw1LjE5Ny0xMi4wMywxMi4wM2MwLDYuODMzLDUuMTk3LDEyLjAzLDEyLjAzLDEyLjAzaDEwOC4yNzNjMC4wMzYsMCwwLjA2LTAuMDEyLDAuMDg0LTAuMDEyYzAuMDM2LDAsMC4wNiwwLjAxMiwwLjA5NiwwLjAxMmM2LjcxMywwLDEyLjAzLTUuMzE3LDEyLjAzLTEyLjAzVjM2LjE4MUMxMzIuNTE0LDI5LjM2LDEyNy4xMjQsMjQuMjU5LDEyMC4yOTEsMjQuMjQ3elwiKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO2kuc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0xMjAuMzg3LDIyOC42NjZIMTIuMTE1Yy02LjgzMywwLjAxMi0xMS45MzQsNS4zOS0xMS45MzQsMTIuMjIzYzAsNi44MzMsNS4xMDEsMTEuODUsMTEuOTM0LDExLjgzOGg5Ni4yNDJ2OTYuNDIzYzAsNi44MzMsNS4xOTcsMTIuMDMsMTIuMDMsMTIuMDNjNi44MzMsMCwxMi4wMy01LjE5NywxMi4wMy0xMi4wM1YyNDAuODc3YzAtMC4wMzYtMC4wMTItMC4wNi0wLjAxMi0wLjA4NGMwLTAuMDM2LDAuMDEyLTAuMDYsMC4wMTItMC4wOTZDMTMyLjQxOCwyMzMuOTgzLDEyNy4xLDIyOC42NjYsMTIwLjM4NywyMjguNjY2elwiKTtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO24uc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0zNzMuMywyMjguNjY2SDI2NS4wMjhjLTAuMDM2LDAtMC4wNiwwLjAxMi0wLjA4NCwwLjAxMmMtMC4wMzYsMC0wLjA2LTAuMDEyLTAuMDk2LTAuMDEyYy02LjcxMywwLTEyLjAzLDUuMzE3LTEyLjAzLDEyLjAzdjEwOC4yNzNjMCw2LjgzMyw1LjM5LDExLjkyMiwxMi4yMjMsMTEuOTM0YzYuODIxLDAuMDEyLDExLjgzOC01LjEwMSwxMS44MzgtMTEuOTIydi05Ni4yNDJIMzczLjNjNi44MzMsMCwxMi4wMy01LjE5NywxMi4wMy0xMi4wM1MzODAuMTM0LDIyOC42NzgsMzczLjMsMjI4LjY2NnpcIiksdC5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKHMpLHQuYXBwZW5kQ2hpbGQoaSksdC5hcHBlbmRDaGlsZChuKX1yZXR1cm4gdGhpcy5fbWluaW1pemVJY29ufXRvZ2dsZUZ1bGxzY3JlZW4oKXtpZihkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnR8fGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50fHxkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50KWRvY3VtZW50LmV4aXRGdWxsc2NyZWVuP2RvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk6ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbj9kb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk6ZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4/ZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTpkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuJiZkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7ZWxzZXtjb25zdCB0PXRoaXMuZnVsbHNjcmVlbkVsZW1lbnQ7aWYoIXQpcmV0dXJuO3QucmVxdWVzdEZ1bGxzY3JlZW4/dC5yZXF1ZXN0RnVsbHNjcmVlbigpOnQubW96UmVxdWVzdEZ1bGxzY3JlZW4/dC5tb3pSZXF1ZXN0RnVsbHNjcmVlbigpOnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4/dC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpOnQubXNSZXF1ZXN0RnVsbHNjcmVlbj90Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTp0LndlYmtpdEVudGVyRnVsbHNjcmVlbiYmdC53ZWJraXRFbnRlckZ1bGxzY3JlZW4oKX10aGlzLm9uRnVsbHNjcmVlbkNoYW5nZSgpfW9uRnVsbHNjcmVlbkNoYW5nZSgpe3RoaXMuaXNGdWxsc2NyZWVuPWRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbnx8ZG9jdW1lbnQubW96RnVsbFNjcmVlbnx8ZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCYmbnVsbCE9PWRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnR8fGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50JiZudWxsIT09ZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQ7Y29uc3QgdD10aGlzLm1pbmltaXplSWNvbixlPXRoaXMubWF4aW1pemVJY29uO3RoaXMuaXNGdWxsc2NyZWVuPyh0LnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIix0LnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLCAwKVwiLGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIik6KHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixlLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIixlLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLCAwKVwiKX19Y2xhc3MgeHtnZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLHRoaXMuX3Jvb3RFbGVtZW50LnR5cGU9XCJidXR0b25cIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiVWlUb29sXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwic2V0dGluZ3NCdG5cIix0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzSWNvbiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwVGV4dCkpLHRoaXMuX3Jvb3RFbGVtZW50fWdldCB0b29sdGlwVGV4dCgpe3JldHVybiB0aGlzLl90b29sdGlwVGV4dHx8KHRoaXMuX3Rvb2x0aXBUZXh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuX3Rvb2x0aXBUZXh0LmNsYXNzTGlzdC5hZGQoXCJ0b29sdGlwdGV4dFwiKSx0aGlzLl90b29sdGlwVGV4dC5pbm5lckhUTUw9XCJTZXR0aW5nc1wiKSx0aGlzLl90b29sdGlwVGV4dH1nZXQgc2V0dGluZ3NJY29uKCl7aWYoIXRoaXMuX3NldHRpbmdzSWNvbil7dGhpcy5fc2V0dGluZ3NJY29uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIiksdGhpcy5fc2V0dGluZ3NJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwic2V0dGluZ3NJY29uXCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieFwiLFwiMHB4XCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieVwiLFwiMHB4XCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidmlld0JveFwiLFwiMCAwIDQ3OC43MDMgNDc4LjcwM1wiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5fc2V0dGluZ3NJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTQ1NC4yLDE4OS4xMDFsLTMzLjYtNS43Yy0zLjUtMTEuMy04LTIyLjItMTMuNS0zMi42bDE5LjgtMjcuN2M4LjQtMTEuOCw3LjEtMjcuOS0zLjItMzguMWwtMjkuOC0yOS44XFx0XFx0XFx0Yy01LjYtNS42LTEzLTguNy0yMC45LTguN2MtNi4yLDAtMTIuMSwxLjktMTcuMSw1LjVsLTI3LjgsMTkuOGMtMTAuOC01LjctMjIuMS0xMC40LTMzLjgtMTMuOWwtNS42LTMzLjJcXHRcXHRcXHRjLTIuNC0xNC4zLTE0LjctMjQuNy0yOS4yLTI0LjdoLTQyLjFjLTE0LjUsMC0yNi44LDEwLjQtMjkuMiwyNC43bC01LjgsMzRjLTExLjIsMy41LTIyLjEsOC4xLTMyLjUsMTMuN2wtMjcuNS0xOS44XFx0XFx0XFx0Yy01LTMuNi0xMS01LjUtMTcuMi01LjVjLTcuOSwwLTE1LjQsMy4xLTIwLjksOC43bC0yOS45LDI5LjhjLTEwLjIsMTAuMi0xMS42LDI2LjMtMy4yLDM4LjFsMjAsMjguMVxcdFxcdFxcdGMtNS41LDEwLjUtOS45LDIxLjQtMTMuMywzMi43bC0zMy4yLDUuNmMtMTQuMywyLjQtMjQuNywxNC43LTI0LjcsMjkuMnY0Mi4xYzAsMTQuNSwxMC40LDI2LjgsMjQuNywyOS4ybDM0LDUuOFxcdFxcdFxcdGMzLjUsMTEuMiw4LjEsMjIuMSwxMy43LDMyLjVsLTE5LjcsMjcuNGMtOC40LDExLjgtNy4xLDI3LjksMy4yLDM4LjFsMjkuOCwyOS44YzUuNiw1LjYsMTMsOC43LDIwLjksOC43YzYuMiwwLDEyLjEtMS45LDE3LjEtNS41XFx0XFx0XFx0bDI4LjEtMjBjMTAuMSw1LjMsMjAuNyw5LjYsMzEuNiwxM2w1LjYsMzMuNmMyLjQsMTQuMywxNC43LDI0LjcsMjkuMiwyNC43aDQyLjJjMTQuNSwwLDI2LjgtMTAuNCwyOS4yLTI0LjdsNS43LTMzLjZcXHRcXHRcXHRjMTEuMy0zLjUsMjIuMi04LDMyLjYtMTMuNWwyNy43LDE5LjhjNSwzLjYsMTEsNS41LDE3LjIsNS41bDAsMGM3LjksMCwxNS4zLTMuMSwyMC45LTguN2wyOS44LTI5LjhjMTAuMi0xMC4yLDExLjYtMjYuMywzLjItMzguMVxcdFxcdFxcdGwtMTkuOC0yNy44YzUuNS0xMC41LDEwLjEtMjEuNCwxMy41LTMyLjZsMzMuNi01LjZjMTQuMy0yLjQsMjQuNy0xNC43LDI0LjctMjkuMnYtNDIuMVxcdFxcdFxcdEM0NzguOSwyMDMuODAxLDQ2OC41LDE5MS41MDEsNDU0LjIsMTg5LjEwMXogTTQ1MS45LDI2MC40MDFjMCwxLjMtMC45LDIuNC0yLjIsMi42bC00Miw3Yy01LjMsMC45LTkuNSw0LjgtMTAuOCw5LjlcXHRcXHRcXHRjLTMuOCwxNC43LTkuNiwyOC44LTE3LjQsNDEuOWMtMi43LDQuNi0yLjUsMTAuMywwLjYsMTQuN2wyNC43LDM0LjhjMC43LDEsMC42LDIuNS0wLjMsMy40bC0yOS44LDI5LjhjLTAuNywwLjctMS40LDAuOC0xLjksMC44XFx0XFx0XFx0Yy0wLjYsMC0xLjEtMC4yLTEuNS0wLjVsLTM0LjctMjQuN2MtNC4zLTMuMS0xMC4xLTMuMy0xNC43LTAuNmMtMTMuMSw3LjgtMjcuMiwxMy42LTQxLjksMTcuNGMtNS4yLDEuMy05LjEsNS42LTkuOSwxMC44bC03LjEsNDJcXHRcXHRcXHRjLTAuMiwxLjMtMS4zLDIuMi0yLjYsMi4yaC00Mi4xYy0xLjMsMC0yLjQtMC45LTIuNi0yLjJsLTctNDJjLTAuOS01LjMtNC44LTkuNS05LjktMTAuOGMtMTQuMy0zLjctMjguMS05LjQtNDEtMTYuOFxcdFxcdFxcdGMtMi4xLTEuMi00LjUtMS44LTYuOC0xLjhjLTIuNywwLTUuNSwwLjgtNy44LDIuNWwtMzUsMjQuOWMtMC41LDAuMy0xLDAuNS0xLjUsMC41Yy0wLjQsMC0xLjItMC4xLTEuOS0wLjhsLTI5LjgtMjkuOFxcdFxcdFxcdGMtMC45LTAuOS0xLTIuMy0wLjMtMy40bDI0LjYtMzQuNWMzLjEtNC40LDMuMy0xMC4yLDAuNi0xNC44Yy03LjgtMTMtMTMuOC0yNy4xLTE3LjYtNDEuOGMtMS40LTUuMS01LjYtOS0xMC44LTkuOWwtNDIuMy03LjJcXHRcXHRcXHRjLTEuMy0wLjItMi4yLTEuMy0yLjItMi42di00Mi4xYzAtMS4zLDAuOS0yLjQsMi4yLTIuNmw0MS43LTdjNS4zLTAuOSw5LjYtNC44LDEwLjktMTBjMy43LTE0LjcsOS40LTI4LjksMTcuMS00MlxcdFxcdFxcdGMyLjctNC42LDIuNC0xMC4zLTAuNy0xNC42bC0yNC45LTM1Yy0wLjctMS0wLjYtMi41LDAuMy0zLjRsMjkuOC0yOS44YzAuNy0wLjcsMS40LTAuOCwxLjktMC44YzAuNiwwLDEuMSwwLjIsMS41LDAuNWwzNC41LDI0LjZcXHRcXHRcXHRjNC40LDMuMSwxMC4yLDMuMywxNC44LDAuNmMxMy03LjgsMjcuMS0xMy44LDQxLjgtMTcuNmM1LjEtMS40LDktNS42LDkuOS0xMC44bDcuMi00Mi4zYzAuMi0xLjMsMS4zLTIuMiwyLjYtMi4yaDQyLjFcXHRcXHRcXHRjMS4zLDAsMi40LDAuOSwyLjYsMi4ybDcsNDEuN2MwLjksNS4zLDQuOCw5LjYsMTAsMTAuOWMxNS4xLDMuOCwyOS41LDkuNyw0Mi45LDE3LjZjNC42LDIuNywxMC4zLDIuNSwxNC43LTAuNmwzNC41LTI0LjhcXHRcXHRcXHRjMC41LTAuMywxLTAuNSwxLjUtMC41YzAuNCwwLDEuMiwwLjEsMS45LDAuOGwyOS44LDI5LjhjMC45LDAuOSwxLDIuMywwLjMsMy40bC0yNC43LDM0LjdjLTMuMSw0LjMtMy4zLDEwLjEtMC42LDE0LjdcXHRcXHRcXHRjNy44LDEzLjEsMTMuNiwyNy4yLDE3LjQsNDEuOWMxLjMsNS4yLDUuNiw5LjEsMTAuOCw5LjlsNDIsNy4xYzEuMywwLjIsMi4yLDEuMywyLjIsMi42djQyLjFINDUxLjl6XCIpO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTIzOS40LDEzNi4wMDFjLTU3LDAtMTAzLjMsNDYuMy0xMDMuMywxMDMuM3M0Ni4zLDEwMy4zLDEwMy4zLDEwMy4zczEwMy4zLTQ2LjMsMTAzLjMtMTAzLjNTMjk2LjQsMTM2LjAwMSwyMzkuNCwxMzYuMDAxeiBNMjM5LjQsMzE1LjYwMWMtNDIuMSwwLTc2LjMtMzQuMi03Ni4zLTc2LjNzMzQuMi03Ni4zLDc2LjMtNzYuM3M3Ni4zLDM0LjIsNzYuMyw3Ni4zUzI4MS41LDMxNS42MDEsMjM5LjQsMzE1LjYwMXpcIiksdC5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKHMpfXJldHVybiB0aGlzLl9zZXR0aW5nc0ljb259fWNsYXNzIHl7Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fHwodGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSx0aGlzLl9yb290RWxlbWVudC50eXBlPVwiYnV0dG9uXCIsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIlVpVG9vbFwiKSx0aGlzLl9yb290RWxlbWVudC5pZD1cInN0YXRzQnRuXCIsdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c0ljb24pLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9vbHRpcFRleHQpKSx0aGlzLl9yb290RWxlbWVudH1nZXQgdG9vbHRpcFRleHQoKXtyZXR1cm4gdGhpcy5fdG9vbHRpcFRleHR8fCh0aGlzLl90b29sdGlwVGV4dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLl90b29sdGlwVGV4dC5jbGFzc0xpc3QuYWRkKFwidG9vbHRpcHRleHRcIiksdGhpcy5fdG9vbHRpcFRleHQuaW5uZXJIVE1MPVwiSW5mb3JtYXRpb25cIiksdGhpcy5fdG9vbHRpcFRleHR9Z2V0IHN0YXRzSWNvbigpe2lmKCF0aGlzLl9zdGF0c0ljb24pe3RoaXMuX3N0YXRzSWNvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwic3ZnXCIpLHRoaXMuX3N0YXRzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcInN0YXRzSWNvblwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInhcIixcIjBweFwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInlcIixcIjBweFwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInZpZXdCb3hcIixcIjAgMCAzMzAgMzMwXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIik7dC5jbGFzc0xpc3QuYWRkKFwic3ZnSWNvblwiKSx0aGlzLl9zdGF0c0ljb24uYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTY1LDAuMDA4Qzc0LjAxOSwwLjAwOCwwLDc0LjAyNCwwLDE2NC45OTljMCw5MC45NzcsNzQuMDE5LDE2NC45OTIsMTY1LDE2NC45OTJzMTY1LTc0LjAxNSwxNjUtMTY0Ljk5MkMzMzAsNzQuMDI0LDI1NS45ODEsMC4wMDgsMTY1LDAuMDA4eiBNMTY1LDI5OS45OTJjLTc0LjQzOSwwLTEzNS02MC41NTctMTM1LTEzNC45OTJTOTAuNTYxLDMwLjAwOCwxNjUsMzAuMDA4czEzNSw2MC41NTcsMTM1LDEzNC45OTFDMzAwLDIzOS40MzYsMjM5LjQzOSwyOTkuOTkyLDE2NSwyOTkuOTkyelwiKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO3Muc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0xNjUsMTMwLjAwOGMtOC4yODQsMC0xNSw2LjcxNi0xNSwxNXY5OS45ODNjMCw4LjI4NCw2LjcxNiwxNSwxNSwxNXMxNS02LjcxNiwxNS0xNXYtOTkuOTgzQzE4MCwxMzYuNzI1LDE3My4yODQsMTMwLjAwOCwxNjUsMTMwLjAwOHpcIik7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTY1LDcwLjAxMWMtMy45NSwwLTcuODExLDEuNi0xMC42MSw0LjM5Yy0yLjc5LDIuNzktNC4zOSw2LjY2LTQuMzksMTAuNjFzMS42LDcuODEsNC4zOSwxMC42MWMyLjc5LDIuNzksNi42Niw0LjM5LDEwLjYxLDQuMzlzNy44MS0xLjYsMTAuNjA5LTQuMzljMi43OS0yLjgsNC4zOTEtNi42Niw0LjM5MS0xMC42MXMtMS42MDEtNy44Mi00LjM5MS0xMC42MUMxNzIuODEsNzEuNjEsMTY4Ljk1LDcwLjAxMSwxNjUsNzAuMDExelwiKSx0LmFwcGVuZENoaWxkKGUpLHQuYXBwZW5kQ2hpbGQocyksdC5hcHBlbmRDaGlsZChpKX1yZXR1cm4gdGhpcy5fc3RhdHNJY29ufX1jbGFzcyBTe2dldCByb290RWxlbWVudCgpe3JldHVybiB0aGlzLl9yb290RWxlbWVudHx8KHRoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksdGhpcy5fcm9vdEVsZW1lbnQudHlwZT1cImJ1dHRvblwiLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJVaVRvb2xcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9XCJ4ckJ0blwiLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMueHJJY29uKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBUZXh0KSksdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IHRvb2x0aXBUZXh0KCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXBUZXh0fHwodGhpcy5fdG9vbHRpcFRleHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5fdG9vbHRpcFRleHQuY2xhc3NMaXN0LmFkZChcInRvb2x0aXB0ZXh0XCIpLHRoaXMuX3Rvb2x0aXBUZXh0LmlubmVySFRNTD1cIlhSXCIpLHRoaXMuX3Rvb2x0aXBUZXh0fWdldCB4ckljb24oKXtpZighdGhpcy5feHJJY29uKXt0aGlzLl94ckljb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInN2Z1wiKSx0aGlzLl94ckljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJ4ckljb25cIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ4XCIsXCIwcHhcIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ5XCIsXCIwcHhcIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgMTAwIDEwMFwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5feHJJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTI5IDQxYy01IDAtOSA0LTkgOXM0IDkgOSA5IDktNCA5LTktNC05LTktOXptMCAxNGMtMi44IDAtNS0yLjItNS01czIuMi01IDUtNSA1IDIuMiA1IDUtMi4yIDUtNSA1em00Mi0xNGMtNSAwLTkgNC05IDlzNCA5IDkgOSA5LTQgOS05LTQtOS05LTl6bTAgMTRjLTIuOCAwLTUtMi4yLTUtNXMyLjItNSA1LTUgNSAyLjIgNSA1LTIuMiA1LTUgNXptMTItMzFIMTdjLTYuNiAwLTEyIDUuNC0xMiAxMnYyOGMwIDYuNiA1LjQgMTIgMTIgMTJoMTQuNWMzLjUgMCA2LjgtMS41IDktNC4xbDMuNS00YzEuNS0xLjcgMy43LTIuNyA2LTIuN3M0LjUgMSA2IDIuN2wzLjUgNGMyLjMgMi42IDUuNiA0LjEgOSA0LjFIODNjNi42IDAgMTItNS40IDEyLTEyVjM2YzAtNi42LTUuNC0xMi0xMi0xMnptOCA0MGMwIDQuNC0zLjYgOC04IDhINjguNWMtMi4zIDAtNC41LTEtNi0yLjdsLTMuNS00Yy0yLjMtMi42LTUuNi00LjEtOS00LjEtMy41IDAtNi44IDEuNS05IDQuMWwtMy41IDRDMzYgNzEgMzMuOCA3MiAzMS41IDcySDE3Yy00LjQgMC04LTMuNi04LThWMzZjMC00LjQgMy42LTggOC04aDY2YzQuNCAwIDggMy42IDggOHYyOHpcIiksdC5hcHBlbmRDaGlsZChlKX1yZXR1cm4gdGhpcy5feHJJY29ufX1jbGFzcyBme2NvbnN0cnVjdG9yKCl7dGhpcy5zdGF0c0ljb249bmV3IHksdGhpcy5zZXR0aW5nc0ljb249bmV3IHgsdGhpcy5mdWxsc2NyZWVuSWNvbj1uZXcgYix0aGlzLnhySWNvbj1uZXcgU31nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwiY29udHJvbHNcIix0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmZ1bGxzY3JlZW5JY29uLnJvb3RFbGVtZW50KSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzSWNvbi5yb290RWxlbWVudCksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c0ljb24ucm9vdEVsZW1lbnQpLGwuV2ViWFJDb250cm9sbGVyLmlzU2Vzc2lvblN1cHBvcnRlZChcImltbWVyc2l2ZS12clwiKS50aGVuKCh0PT57dCYmdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy54ckljb24ucm9vdEVsZW1lbnQpfSkpKSx0aGlzLl9yb290RWxlbWVudH19Y2xhc3MgQ3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX2xhYmVsPXQsdGhpcy5fYnV0dG9uVGV4dD1lfWFkZE9uQ2xpY2tMaXN0ZW5lcih0KXt0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0KX1nZXQgYnV0dG9uKCl7cmV0dXJuIHRoaXMuX2J1dHRvbnx8KHRoaXMuX2J1dHRvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdGhpcy5fYnV0dG9uLnR5cGU9XCJidXR0b25cIix0aGlzLl9idXR0b24udmFsdWU9dGhpcy5fYnV0dG9uVGV4dCx0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZChcIm92ZXJsYXktYnV0dG9uXCIpLHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnRuLWZsYXRcIikpLHRoaXMuX2J1dHRvbn1nZXQgcm9vdEVsZW1lbnQoKXtpZighdGhpcy5fcm9vdEVsZW1lbnQpe3RoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdcIik7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaW5uZXJUZXh0PXRoaXMuX2xhYmVsLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO2UuY2xhc3NMaXN0LmFkZChcImJ0bi1vdmVybGF5XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKGUpLGUuYXBwZW5kQ2hpbGQodGhpcy5idXR0b24pfXJldHVybiB0aGlzLl9yb290RWxlbWVudH19Y2xhc3Mgd3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3Jvb3RFbGVtZW50PW51bGx9Z2V0IHJvb3RFbGVtZW50KCl7aWYoIXRoaXMuX3Jvb3RFbGVtZW50KXt0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwic2V0dGluZ3MtcGFuZWxcIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGFuZWwtd3JhcFwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc0xpc3QuYWRkKFwicGFuZWxcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJzZXR0aW5nc0hlYWRpbmdcIixlLnRleHRDb250ZW50PVwiU2V0dGluZ3NcIix0LmFwcGVuZENoaWxkKGUpLHQuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc0Nsb3NlQnV0dG9uKSx0LmFwcGVuZENoaWxkKHRoaXMuc2V0dGluZ3NDb250ZW50RWxlbWVudCl9cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fWdldCBzZXR0aW5nc0NvbnRlbnRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzQ29udGVudEVsZW1lbnR8fCh0aGlzLl9zZXR0aW5nc0NvbnRlbnRFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc2V0dGluZ3NDb250ZW50RWxlbWVudC5pZD1cInNldHRpbmdzQ29udGVudFwiKSx0aGlzLl9zZXR0aW5nc0NvbnRlbnRFbGVtZW50fWdldCBzZXR0aW5nc0Nsb3NlQnV0dG9uKCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzQ2xvc2VCdXR0b258fCh0aGlzLl9zZXR0aW5nc0Nsb3NlQnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc2V0dGluZ3NDbG9zZUJ1dHRvbi5pZD1cInNldHRpbmdzQ2xvc2VcIiksdGhpcy5fc2V0dGluZ3NDbG9zZUJ1dHRvbn1zaG93KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5lbC13cmFwLXZpc2libGVcIil8fHRoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBhbmVsLXdyYXAtdmlzaWJsZVwiKX10b2dnbGVWaXNpYmlsaXR5KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfWhpZGUoKXt0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInBhbmVsLXdyYXAtdmlzaWJsZVwiKSYmdGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfX1jbGFzcyBUe2dldCByb290RWxlbWVudCgpe2lmKCF0aGlzLl9yb290RWxlbWVudCl7dGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIiksdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzQ29udGFpbmVyXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmlkPVwibGF0ZW5jeVRlc3RIZWFkZXJcIix0LmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5ncy10ZXh0XCIpLHQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzSGVhZGVyXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmlubmVySFRNTD1cIkxhdGVuY3kgVGVzdFwiLHQuYXBwZW5kQ2hpbGQoZSksdC5hcHBlbmRDaGlsZCh0aGlzLmxhdGVuY3lUZXN0QnV0dG9uKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cy5pZD1cImxhdGVuY3lUZXN0Q29udGFpbmVyXCIscy5jbGFzc0xpc3QuYWRkKFwiZC1ub25lXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHMpLHMuYXBwZW5kQ2hpbGQodGhpcy5sYXRlbmN5VGVzdFJlc3VsdHNFbGVtZW50KX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IGxhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQoKXtyZXR1cm4gdGhpcy5fbGF0ZW5jeVRlc3RSZXN1bHRzRWxlbWVudHx8KHRoaXMuX2xhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9sYXRlbmN5VGVzdFJlc3VsdHNFbGVtZW50LmlkPVwibGF0ZW5jeVN0YXRzUmVzdWx0c1wiLHRoaXMuX2xhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcIlN0YXRzUmVzdWx0XCIpKSx0aGlzLl9sYXRlbmN5VGVzdFJlc3VsdHNFbGVtZW50fWdldCBsYXRlbmN5VGVzdEJ1dHRvbigpe3JldHVybiB0aGlzLl9sYXRlbmN5VGVzdEJ1dHRvbnx8KHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx0aGlzLl9sYXRlbmN5VGVzdEJ1dHRvbi50eXBlPVwiYnV0dG9uXCIsdGhpcy5fbGF0ZW5jeVRlc3RCdXR0b24udmFsdWU9XCJSdW4gVGVzdFwiLHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9uLmlkPVwiYnRuLXN0YXJ0LWxhdGVuY3ktdGVzdFwiLHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzdHJlYW1Ub29scy1idXR0b25cIiksdGhpcy5fbGF0ZW5jeVRlc3RCdXR0b24uY2xhc3NMaXN0LmFkZChcImJ0bi1mbGF0XCIpKSx0aGlzLl9sYXRlbmN5VGVzdEJ1dHRvbn1oYW5kbGVUZXN0UmVzdWx0KHQpe2wuTG9nZ2VyLkxvZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksdC50b1N0cmluZygpLDYpO2xldCBlPVwiXCI7ZSs9XCI8ZGl2Pk5ldCBsYXRlbmN5IFJUVCAobXMpOiBcIit0Lm5ldHdvcmtMYXRlbmN5K1wiPC9kaXY+XCIsZSs9XCI8ZGl2PlVFIEVuY29kZSAobXMpOiBcIit0LkVuY29kZU1zK1wiPC9kaXY+XCIsZSs9XCI8ZGl2PlVFIENhcHR1cmUgKG1zKTogXCIrdC5DYXB0dXJlVG9TZW5kTXMrXCI8L2Rpdj5cIixlKz1cIjxkaXY+QnJvd3NlciBzZW5kIGxhdGVuY3kgKG1zKTogXCIrdC5icm93c2VyU2VuZExhdGVuY3krXCI8L2Rpdj5cIixlKz10LmZyYW1lRGlzcGxheURlbHRhVGltZU1zJiZ0LmJyb3dzZXJSZWNlaXB0VGltZU1zP1wiPGRpdj5Ccm93c2VyIHJlY2VpdmUgbGF0ZW5jeSAobXMpOiBcIit0LmZyYW1lRGlzcGxheURlbHRhVGltZU1zK1wiPC9kaXY+XCI6XCJcIixlKz1cIjxkaXY+VG90YWwgbGF0ZW5jeSAoZXhjbHVkaW5nIGJyb3dzZXIpIChtcyk6IFwiK3QubGF0ZW5jeUV4Y2x1ZGluZ0RlY29kZStcIjwvZGl2PlwiLGUrPXQuZW5kVG9FbmRMYXRlbmN5P1wiPGRpdj5Ub3RhbCBsYXRlbmN5IChtcyk6IFwiK3QuZW5kVG9FbmRMYXRlbmN5K1wiPC9kaXY+XCI6XCJcIix0aGlzLmxhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQuaW5uZXJIVE1MPWV9fWNsYXNzIF97c3RhdGljIGZvcm1hdEJ5dGVzKHQsZSl7aWYoMD09PXQpcmV0dXJuXCIwXCI7Y29uc3Qgcz1lPDA/MDplLGk9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLmxvZygxMDI0KSk7cmV0dXJuIHBhcnNlRmxvYXQoKHQvTWF0aC5wb3coMTAyNCxpKSkudG9GaXhlZChzKSkrXCIgXCIrW1wiQnl0ZXNcIixcIktpQlwiLFwiTWlCXCIsXCJHaUJcIixcIlRpQlwiLFwiUGlCXCIsXCJFaUJcIixcIlppQlwiLFwiWWlCXCJdW2ldfX1jbGFzcyBMe31jbGFzcyBre2NvbnN0cnVjdG9yKCl7dGhpcy5zdGF0c01hcD1uZXcgTWFwLHRoaXMubGF0ZW5jeVRlc3Q9bmV3IFR9Z2V0IHJvb3RFbGVtZW50KCl7aWYoIXRoaXMuX3Jvb3RFbGVtZW50KXt0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwic3RhdHMtcGFuZWxcIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGFuZWwtd3JhcFwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc0xpc3QuYWRkKFwicGFuZWxcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJzdGF0c0hlYWRpbmdcIixlLnRleHRDb250ZW50PVwiSW5mb3JtYXRpb25cIix0LmFwcGVuZENoaWxkKGUpLHQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c0Nsb3NlQnV0dG9uKSx0LmFwcGVuZENoaWxkKHRoaXMuc3RhdHNDb250ZW50RWxlbWVudCl9cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fWdldCBzdGF0c0NvbnRlbnRFbGVtZW50KCl7aWYoIXRoaXMuX3N0YXRzQ29udGVudEVsZW1lbnQpe3RoaXMuX3N0YXRzQ29udGVudEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zdGF0c0NvbnRlbnRFbGVtZW50LmlkPVwic3RhdHNDb250ZW50XCI7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaWQ9XCJzdHJlYW1Ub29sc1N0YXRzXCIsdC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyXCIpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmlkPVwiQ29udHJvbFN0YXRzXCIsZS5jbGFzc0xpc3QuYWRkKFwicm93XCIpO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7cy5pZD1cInN0YXRpc3RpY3NcIixzLmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5nc0NvbnRhaW5lclwiKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5pZD1cInN0YXRpc3RpY3NIZWFkZXJcIixpLmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5ncy10ZXh0XCIpLGkuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzSGVhZGVyXCIpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmlubmVySFRNTD1cIlNlc3Npb24gU3RhdHNcIix0aGlzLl9zdGF0c0NvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHQpLHQuYXBwZW5kQ2hpbGQoZSksZS5hcHBlbmRDaGlsZChzKSxzLmFwcGVuZENoaWxkKGkpLGkuYXBwZW5kQ2hpbGQobikscy5hcHBlbmRDaGlsZCh0aGlzLnN0YXRpc3RpY3NDb250YWluZXIpLGUuYXBwZW5kQ2hpbGQodGhpcy5sYXRlbmN5VGVzdC5yb290RWxlbWVudCl9cmV0dXJuIHRoaXMuX3N0YXRzQ29udGVudEVsZW1lbnR9Z2V0IHN0YXRpc3RpY3NDb250YWluZXIoKXtyZXR1cm4gdGhpcy5fc3RhdGlzdGljc0NvbnRhaW5lcnx8KHRoaXMuX3N0YXRpc3RpY3NDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zdGF0aXN0aWNzQ29udGFpbmVyLmlkPVwic3RhdGlzdGljc0NvbnRhaW5lclwiLHRoaXMuX3N0YXRpc3RpY3NDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImQtbm9uZVwiKSx0aGlzLl9zdGF0aXN0aWNzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc3RhdHNSZXN1bHQpKSx0aGlzLl9zdGF0aXN0aWNzQ29udGFpbmVyfWdldCBzdGF0c1Jlc3VsdCgpe3JldHVybiB0aGlzLl9zdGF0c1Jlc3VsdHx8KHRoaXMuX3N0YXRzUmVzdWx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc3RhdHNSZXN1bHQuaWQ9XCJzdGF0aXN0aWNzUmVzdWx0XCIsdGhpcy5fc3RhdHNSZXN1bHQuY2xhc3NMaXN0LmFkZChcIlN0YXRzUmVzdWx0XCIpKSx0aGlzLl9zdGF0c1Jlc3VsdH1nZXQgc3RhdHNDbG9zZUJ1dHRvbigpe3JldHVybiB0aGlzLl9zdGF0c0Nsb3NlQnV0dG9ufHwodGhpcy5fc3RhdHNDbG9zZUJ1dHRvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3N0YXRzQ2xvc2VCdXR0b24uaWQ9XCJzdGF0c0Nsb3NlXCIpLHRoaXMuX3N0YXRzQ2xvc2VCdXR0b259c2hvdygpe3RoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfHx0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwYW5lbC13cmFwLXZpc2libGVcIil9dG9nZ2xlVmlzaWJpbGl0eSgpe3RoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcInBhbmVsLXdyYXAtdmlzaWJsZVwiKX1oaWRlKCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5lbC13cmFwLXZpc2libGVcIikmJnRoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBhbmVsLXdyYXAtdmlzaWJsZVwiKX1oYW5kbGVTdGF0cyh0KXt2YXIgZSxzLGksbixvO2NvbnN0IGE9bmV3IEludGwuTnVtYmVyRm9ybWF0KHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2Use21heGltdW1GcmFjdGlvbkRpZ2l0czowfSkscj1fLmZvcm1hdEJ5dGVzKHQuaW5ib3VuZFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZCwyKTt0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkluYm91bmREYXRhU3RhdFwiLFwiUmVjZWl2ZWRcIixyKTtjb25zdCBjPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LmluYm91bmRWaWRlb1N0YXRzLFwicGFja2V0c0xvc3RcIik/YS5mb3JtYXQodC5pbmJvdW5kVmlkZW9TdGF0cy5wYWNrZXRzTG9zdCk6XCJDaHJvbWUgb25seVwiO3RoaXMuYWRkT3JVcGRhdGVTdGF0KFwiUGFja2V0c0xvc3RTdGF0XCIsXCJQYWNrZXRzIExvc3RcIixjKSx0LmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUmJnRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiVmlkZW9CaXRyYXRlU3RhdFwiLFwiVmlkZW8gQml0cmF0ZSAoa2JwcylcIix0LmluYm91bmRWaWRlb1N0YXRzLmJpdHJhdGUudG9TdHJpbmcoKSksdC5pbmJvdW5kQXVkaW9TdGF0cy5iaXRyYXRlJiZ0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkF1ZGlvQml0cmF0ZVN0YXRcIixcIkF1ZGlvIEJpdHJhdGUgKGticHMpXCIsdC5pbmJvdW5kQXVkaW9TdGF0cy5iaXRyYXRlLnRvU3RyaW5nKCkpO2NvbnN0IGQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQuaW5ib3VuZFZpZGVvU3RhdHMsXCJmcmFtZVdpZHRoXCIpJiZ0LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGgmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LmluYm91bmRWaWRlb1N0YXRzLFwiZnJhbWVIZWlnaHRcIikmJnQuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVIZWlnaHQ/dC5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZVdpZHRoK1wieFwiK3QuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVIZWlnaHQ6XCJDaHJvbWUgb25seVwiO3RoaXMuYWRkT3JVcGRhdGVTdGF0KFwiVmlkZW9SZXNTdGF0XCIsXCJWaWRlbyByZXNvbHV0aW9uXCIsZCk7Y29uc3QgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodC5pbmJvdW5kVmlkZW9TdGF0cyxcImZyYW1lc0RlY29kZWRcIik/YS5mb3JtYXQodC5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEZWNvZGVkKTpcIkNocm9tZSBvbmx5XCI7dGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJGcmFtZXNEZWNvZGVkU3RhdFwiLFwiRnJhbWVzIERlY29kZWRcIixoKSx0LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc1BlclNlY29uZCYmdGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJGcmFtZXJhdGVTdGF0XCIsXCJGcmFtZXJhdGVcIix0LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc1BlclNlY29uZC50b1N0cmluZygpKSx0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkZyYW1lc0Ryb3BwZWRTdGF0XCIsXCJGcmFtZXMgZHJvcHBlZFwiLG51bGw9PT0oZT10LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0Ryb3BwZWQpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnRvU3RyaW5nKCkpLHQuaW5ib3VuZFZpZGVvU3RhdHMuY29kZWNJZCYmdGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJWaWRlb0NvZGVjU3RhdFwiLFwiVmlkZW8gY29kZWNcIixudWxsIT09KGk9bnVsbD09PShzPXQuY29kZWNzLmdldCh0LmluYm91bmRWaWRlb1N0YXRzLmNvZGVjSWQpKXx8dm9pZCAwPT09cz92b2lkIDA6cy5zcGxpdChcIiBcIilbMF0pJiZ2b2lkIDAhPT1pP2k6XCJcIiksdC5pbmJvdW5kQXVkaW9TdGF0cy5jb2RlY0lkJiZ0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkF1ZGlvQ29kZWNTdGF0XCIsXCJBdWRpbyBjb2RlY1wiLG51bGwhPT0obz1udWxsPT09KG49dC5jb2RlY3MuZ2V0KHQuaW5ib3VuZEF1ZGlvU3RhdHMuY29kZWNJZCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnNwbGl0KFwiIFwiKVswXSkmJnZvaWQgMCE9PW8/bzpcIlwiKTtjb25zdCBtPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LmNhbmRpZGF0ZVBhaXIsXCJjdXJyZW50Um91bmRUcmlwVGltZVwiKSYmdC5pc051bWJlcih0LmNhbmRpZGF0ZVBhaXIuY3VycmVudFJvdW5kVHJpcFRpbWUpP2EuZm9ybWF0KDFlMyp0LmNhbmRpZGF0ZVBhaXIuY3VycmVudFJvdW5kVHJpcFRpbWUpOlwiQ2FuJ3QgY2FsY3VsYXRlXCI7dGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJSVFRTdGF0XCIsXCJOZXQgUlRUIChtcylcIixtKSx0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkR1cmF0aW9uU3RhdFwiLFwiRHVyYXRpb25cIix0LnNlc3Npb25TdGF0cy5ydW5UaW1lKSx0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkNvbnRyb2xzSW5wdXRTdGF0XCIsXCJDb250cm9scyBzdHJlYW0gaW5wdXRcIix0LnNlc3Npb25TdGF0cy5jb250cm9sc1N0cmVhbUlucHV0KSx0aGlzLmFkZE9yVXBkYXRlU3RhdChcIlFQU3RhdFwiLFwiVmlkZW8gcXVhbnRpemF0aW9uIHBhcmFtZXRlclwiLHQuc2Vzc2lvblN0YXRzLnZpZGVvRW5jb2RlckF2Z1FQLnRvU3RyaW5nKCkpLGwuTG9nZ2VyLkxvZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksYC0tLS0tLS0tLSBTdGF0cyAtLS0tLS0tLS1cXG4gJHt0fVxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWAsNil9YWRkT3JVcGRhdGVTdGF0KHQsZSxzKXtjb25zdCBpPWAke2V9OiAke3N9YDtpZih0aGlzLnN0YXRzTWFwLmhhcyh0KSl7Y29uc3QgZT10aGlzLnN0YXRzTWFwLmdldCh0KTt2b2lkIDAhPT1lJiYoZS5lbGVtZW50LmlubmVySFRNTD1pKX1lbHNle2NvbnN0IG49bmV3IEw7bi5pZD10LG4uc3RhdD1zLG4udGl0bGU9ZSxuLmVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuLmVsZW1lbnQuaW5uZXJIVE1MPWksdGhpcy5zdGF0c1Jlc3VsdC5hcHBlbmRDaGlsZChuLmVsZW1lbnQpLHRoaXMuc3RhdHNNYXAuc2V0KHQsbil9fX1jbGFzcyBJe2NvbnN0cnVjdG9yKCl7dGhpcy52aWRlb0VuY29kZXJBdmdRUD0tMSx0aGlzLnN0YXRzVGV4dD1cIlwiLHRoaXMuY29sb3I9XCJcIix0aGlzLm9yYW5nZVFQPTI2LHRoaXMucmVkUVA9MzV9Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fHwodGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5pZD1cImNvbm5lY3Rpb25cIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiVWlUb29sXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucXVhbGl0eVN0YXR1cyksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5xdWFsaXR5VGV4dCksdGhpcy51cGRhdGVRcFRvb2x0aXAoLTEpKSx0aGlzLl9yb290RWxlbWVudH1nZXQgcXVhbGl0eVRleHQoKXtyZXR1cm4gdGhpcy5fcXVhbGl0eVRleHR8fCh0aGlzLl9xdWFsaXR5VGV4dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLl9xdWFsaXR5VGV4dC5pZD1cInF1YWxpdHlUZXh0XCIsdGhpcy5fcXVhbGl0eVRleHQuY2xhc3NMaXN0LmFkZChcInRvb2x0aXB0ZXh0XCIpKSx0aGlzLl9xdWFsaXR5VGV4dH1nZXQgcXVhbGl0eVN0YXR1cygpe3JldHVybiB0aGlzLl9xdWFsaXR5U3RhdHVzfHwodGhpcy5fcXVhbGl0eVN0YXR1cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwic3ZnXCIpLHRoaXMuX3F1YWxpdHlTdGF0dXMuc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJjb25uZWN0aW9uU3RyZW5ndGhcIiksdGhpcy5fcXVhbGl0eVN0YXR1cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieFwiLFwiMHB4XCIpLHRoaXMuX3F1YWxpdHlTdGF0dXMuc2V0QXR0cmlidXRlTlMobnVsbCxcInlcIixcIjBweFwiKSx0aGlzLl9xdWFsaXR5U3RhdHVzLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgNDk0LjQ1IDQ5NC40NVwiKSx0aGlzLnF1YWxpdHlTdGF0dXMuYXBwZW5kQ2hpbGQodGhpcy5kb3QpLHRoaXMucXVhbGl0eVN0YXR1cy5hcHBlbmRDaGlsZCh0aGlzLm1pZGRsZSksdGhpcy5xdWFsaXR5U3RhdHVzLmFwcGVuZENoaWxkKHRoaXMub3V0ZXIpLHRoaXMucXVhbGl0eVN0YXR1cy5hcHBlbmRDaGlsZCh0aGlzLmlubmVyKSksdGhpcy5fcXVhbGl0eVN0YXR1c31nZXQgZG90KCl7cmV0dXJuIHRoaXMuX2RvdHx8KHRoaXMuX2RvdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwiY2lyY2xlXCIpLHRoaXMuX2RvdC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcImRvdFwiKSx0aGlzLl9kb3Quc2V0QXR0cmlidXRlTlMobnVsbCxcImN4XCIsXCIyNDcuMTI1XCIpLHRoaXMuX2RvdC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3lcIixcIjM5OC45MjVcIiksdGhpcy5fZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJyXCIsXCIzNS4zXCIpKSx0aGlzLl9kb3R9Z2V0IG91dGVyKCl7cmV0dXJuIHRoaXMuX291dGVyfHwodGhpcy5fb3V0ZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIiksdGhpcy5fb3V0ZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJvdXRlclwiKSx0aGlzLl9vdXRlci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTQ2Ny45MjUsMjA0LjYyNWMtNi44LDAtMTMuNS0yLjYtMTguNy03LjhjLTExMS41LTExMS40LTI5Mi43LTExMS40LTQwNC4xLDBjLTEwLjMsMTAuMy0yNy4xLDEwLjMtMzcuNCwwcy0xMC4zLTI3LjEsMC0zNy40YzY0LTY0LDE0OS05OS4yLDIzOS41LTk5LjJzMTc1LjUsMzUuMiwyMzkuNSw5OS4yYzEwLjMsMTAuMywxMC4zLDI3LjEsMCwzNy40QzQ4MS40MjUsMjAyLjAyNSw0NzQuNjI1LDIwNC42MjUsNDY3LjkyNSwyMDQuNjI1elwiKSksdGhpcy5fb3V0ZXJ9Z2V0IG1pZGRsZSgpe3JldHVybiB0aGlzLl9taWRkbGV8fCh0aGlzLl9taWRkbGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIiksdGhpcy5fbWlkZGxlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwibWlkZGxlXCIpLHRoaXMuX21pZGRsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTM5NS4yMjUsMjc3LjMyNWMtNi44LDAtMTMuNS0yLjYtMTguNy03LjhjLTcxLjQtNzEuMy0xODcuNC03MS4zLTI1OC44LDBjLTEwLjMsMTAuMy0yNy4xLDEwLjMtMzcuNCwwcy0xMC4zLTI3LjEsMC0zNy40YzkyLTkyLDI0MS42LTkyLDMzMy42LDBjMTAuMywxMC4zLDEwLjMsMjcuMSwwLDM3LjRDNDA4LjcyNSwyNzQuNzI1LDQwMS45MjUsMjc3LjMyNSwzOTUuMjI1LDI3Ny4zMjV6XCIpKSx0aGlzLl9taWRkbGV9Z2V0IGlubmVyKCl7cmV0dXJuIHRoaXMuX2lubmVyfHwodGhpcy5faW5uZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIiksdGhpcy5faW5uZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJpbm5lclwiKSx0aGlzLl9pbm5lci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTMyMy42MjUsMzQ4LjgyNWMtNi44LDAtMTMuNS0yLjYtMTguNy03LjhjLTE1LjQtMTUuNC0zNi0yMy45LTU3LjgtMjMuOXMtNDIuNCw4LjUtNTcuOCwyMy45Yy0xMC4zLDEwLjMtMjcuMSwxMC4zLTM3LjQsMGMtMTAuMy0xMC4zLTEwLjMtMjcuMSwwLTM3LjRjMjUuNC0yNS40LDU5LjItMzkuNCw5NS4yLTM5LjRzNjkuOCwxNCw5NS4yLDM5LjVjMTAuMywxMC4zLDEwLjMsMjcuMSwwLDM3LjRDMzM3LjIyNSwzNDYuMjI1LDMzMC40MjUsMzQ4LjgyNSwzMjMuNjI1LDM0OC44MjV6XCIpKSx0aGlzLl9pbm5lcn1ibGlua1ZpZGVvUXVhbGl0eVN0YXR1cyh0KXtsZXQgZT10LHM9MTtjb25zdCBpPXNldEludGVydmFsKCgoKT0+e3MtPS4xLHRoaXMucXVhbGl0eVRleHQuc3R5bGUub3BhY2l0eT1TdHJpbmcoTWF0aC5hYnMoMioocy0uNSkpKSxzPD0uMSYmKDA9PS0tZT9jbGVhckludGVydmFsKGkpOnM9MSl9KSwxMDAvdCl9dXBkYXRlUXBUb29sdGlwKHQpe3RoaXMudmlkZW9FbmNvZGVyQXZnUVA9dCx0PnRoaXMucmVkUVA/KHRoaXMuY29sb3I9XCJyZWRcIix0aGlzLmJsaW5rVmlkZW9RdWFsaXR5U3RhdHVzKDIpLHRoaXMuc3RhdHNUZXh0PWA8ZGl2IHN0eWxlPVwiY29sb3I6ICR7dGhpcy5jb2xvcn1cIj5Qb29yIGVuY29kaW5nIHF1YWxpdHk8L2Rpdj5gLHRoaXMub3V0ZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiMzYzNiNDBcIiksdGhpcy5taWRkbGUuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiMzYzNiNDBcIiksdGhpcy5pbm5lci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpLHRoaXMuZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvcikpOnQ+dGhpcy5vcmFuZ2VRUD8odGhpcy5jb2xvcj1cIm9yYW5nZVwiLHRoaXMuYmxpbmtWaWRlb1F1YWxpdHlTdGF0dXMoMSksdGhpcy5zdGF0c1RleHQ9YDxkaXYgc3R5bGU9XCJjb2xvcjogJHt0aGlzLmNvbG9yfVwiPkJsb2NreSBlbmNvZGluZyBxdWFsaXR5PC9kaXY+YCx0aGlzLm91dGVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjM2MzYjQwXCIpLHRoaXMubWlkZGxlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvciksdGhpcy5pbm5lci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpLHRoaXMuZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvcikpOnQ8PTA/KHRoaXMuY29sb3I9XCIjYjBiMGIwXCIsdGhpcy5vdXRlci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwiIzNjM2I0MFwiKSx0aGlzLm1pZGRsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwiIzNjM2I0MFwiKSx0aGlzLmlubmVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjM2MzYjQwXCIpLHRoaXMuZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjM2MzYjQwXCIpLHRoaXMuc3RhdHNUZXh0PWA8ZGl2IHN0eWxlPVwiY29sb3I6ICR7dGhpcy5jb2xvcn1cIj5Ob3QgY29ubmVjdGVkPC9kaXY+YCk6KHRoaXMuY29sb3I9XCJsaW1lXCIsdGhpcy5xdWFsaXR5U3RhdHVzLnN0eWxlLm9wYWNpdHk9XCIxXCIsdGhpcy5zdGF0c1RleHQ9YDxkaXYgc3R5bGU9XCJjb2xvcjogJHt0aGlzLmNvbG9yfVwiPkNsZWFyIGVuY29kaW5nIHF1YWxpdHk8L2Rpdj5gLHRoaXMub3V0ZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIix0aGlzLmNvbG9yKSx0aGlzLm1pZGRsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpLHRoaXMuaW5uZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIix0aGlzLmNvbG9yKSx0aGlzLmRvdC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpKSx0aGlzLnF1YWxpdHlUZXh0LmlubmVySFRNTD10aGlzLnN0YXRzVGV4dH19Y2xhc3MgRntjb25zdHJ1Y3Rvcih0KXt0aGlzLl9zZXR0aW5nPXR9Z2V0IHNldHRpbmcoKXtyZXR1cm4gdGhpcy5fc2V0dGluZ31nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx0aGlzLl9yb290RWxlbWVudH19Y2xhc3MgQSBleHRlbmRzIEZ7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5sYWJlbD10LmxhYmVsLHRoaXMuZmxhZz10LmZsYWd9Z2V0IHNldHRpbmcoKXtyZXR1cm4gdGhpcy5fc2V0dGluZ31nZXQgc2V0dGluZ3NUZXh0RWxlbSgpe3JldHVybiB0aGlzLl9zZXR0aW5nc1RleHRFbGVtfHwodGhpcy5fc2V0dGluZ3NUZXh0RWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXRoaXMuc2V0dGluZy5fbGFiZWwsdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS50aXRsZT10aGlzLnNldHRpbmcuZGVzY3JpcHRpb24pLHRoaXMuX3NldHRpbmdzVGV4dEVsZW19Z2V0IGNoZWNrYm94KCl7cmV0dXJuIHRoaXMuX2NoZWNrYm94fHwodGhpcy5fY2hlY2tib3g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHRoaXMuX2NoZWNrYm94LnR5cGU9XCJjaGVja2JveFwiKSx0aGlzLl9jaGVja2JveH1nZXQgcm9vdEVsZW1lbnQoKXtpZighdGhpcy5fcm9vdEVsZW1lbnQpe3RoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9dGhpcy5zZXR0aW5nLmlkLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5nXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2V0dGluZ3NUZXh0RWxlbSk7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7dC5jbGFzc0xpc3QuYWRkKFwidGdsLXN3aXRjaFwiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0KSx0aGlzLmNoZWNrYm94LnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbix0aGlzLmNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJ0Z2xcIiksdGhpcy5jaGVja2JveC5jbGFzc0xpc3QuYWRkKFwidGdsLWZsYXRcIik7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcInRnbC1zbGlkZXJcIiksdC5hcHBlbmRDaGlsZCh0aGlzLmNoZWNrYm94KSx0LmFwcGVuZENoaWxkKGUpLHRoaXMuY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCgoKT0+e3RoaXMuc2V0dGluZy5mbGFnIT09dGhpcy5jaGVja2JveC5jaGVja2VkJiYodGhpcy5zZXR0aW5nLmZsYWc9dGhpcy5jaGVja2JveC5jaGVja2VkLHRoaXMuc2V0dGluZy51cGRhdGVVUkxQYXJhbXMoKSl9KSl9cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fXNldCBmbGFnKHQpe3RoaXMuY2hlY2tib3guY2hlY2tlZD10fWdldCBmbGFnKCl7cmV0dXJuIHRoaXMuY2hlY2tib3guY2hlY2tlZH1zZXQgbGFiZWwodCl7dGhpcy5zZXR0aW5nc1RleHRFbGVtLmlubmVyVGV4dD10fWdldCBsYWJlbCgpe3JldHVybiB0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0fX1jbGFzcyBQIGV4dGVuZHMgRntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmxhYmVsPXRoaXMuc2V0dGluZy5sYWJlbCx0aGlzLm51bWJlcj10aGlzLnNldHRpbmcubnVtYmVyfWdldCBzZXR0aW5nKCl7cmV0dXJuIHRoaXMuX3NldHRpbmd9Z2V0IHNldHRpbmdzVGV4dEVsZW0oKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3NUZXh0RWxlbXx8KHRoaXMuX3NldHRpbmdzVGV4dEVsZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXRoaXMuc2V0dGluZy5sYWJlbCx0aGlzLl9zZXR0aW5nc1RleHRFbGVtLnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbX1nZXQgc3Bpbm5lcigpe3JldHVybiB0aGlzLl9zcGlubmVyfHwodGhpcy5fc3Bpbm5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdGhpcy5fc3Bpbm5lci50eXBlPVwibnVtYmVyXCIsdGhpcy5fc3Bpbm5lci5taW49dGhpcy5zZXR0aW5nLm1pbi50b1N0cmluZygpLHRoaXMuX3NwaW5uZXIubWF4PXRoaXMuc2V0dGluZy5tYXgudG9TdHJpbmcoKSx0aGlzLl9zcGlubmVyLnZhbHVlPXRoaXMuc2V0dGluZy5udW1iZXIudG9TdHJpbmcoKSx0aGlzLl9zcGlubmVyLnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbix0aGlzLl9zcGlubmVyLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWNvbnRyb2xcIikpLHRoaXMuX3NwaW5uZXJ9Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fHwodGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ1wiKSx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybS1ncm91cFwiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzVGV4dEVsZW0pLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3Bpbm5lciksdGhpcy5zcGlubmVyLm9uY2hhbmdlPXQ9Pntjb25zdCBlPXQudGFyZ2V0LHM9TnVtYmVyLnBhcnNlSW50KGUudmFsdWUpO051bWJlci5pc05hTihzKT8obC5Mb2dnZXIuV2FybmluZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksYENvdWxkIG5vdCBwYXJzZSB2YWx1ZSBjaGFuZ2UgaW50byBhIHZhbGlkIG51bWJlciAtIHZhbHVlIHdhcyAke2UudmFsdWV9LCByZXNldHRpbmcgdmFsdWUgdG8gJHt0aGlzLnNldHRpbmcubWlufWApLHRoaXMuc2V0dGluZy5udW1iZXIhPT10aGlzLnNldHRpbmcubWluJiYodGhpcy5zZXR0aW5nLm51bWJlcj10aGlzLnNldHRpbmcubWluKSk6dGhpcy5zZXR0aW5nLm51bWJlciE9PXMmJih0aGlzLnNldHRpbmcubnVtYmVyPXMsdGhpcy5zZXR0aW5nLnVwZGF0ZVVSTFBhcmFtcygpKX0pLHRoaXMuX3Jvb3RFbGVtZW50fXNldCBudW1iZXIodCl7dGhpcy5zcGlubmVyLnZhbHVlPXRoaXMuc2V0dGluZy5jbGFtcCh0KS50b1N0cmluZygpfWdldCBudW1iZXIoKXtyZXR1cm4rdGhpcy5zcGlubmVyLnZhbHVlfXNldCBsYWJlbCh0KXt0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXR9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHR9fWNsYXNzIE8gZXh0ZW5kcyBGe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMubGFiZWw9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMudGV4dD10aGlzLnNldHRpbmcudGV4dH1nZXQgc2V0dGluZygpe3JldHVybiB0aGlzLl9zZXR0aW5nfWdldCBzZXR0aW5nc1RleHRFbGVtKCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzVGV4dEVsZW18fCh0aGlzLl9zZXR0aW5nc1RleHRFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0udGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uKSx0aGlzLl9zZXR0aW5nc1RleHRFbGVtfWdldCB0ZXh0Ym94KCl7cmV0dXJuIHRoaXMuX3RleHRib3h8fCh0aGlzLl90ZXh0Ym94PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx0aGlzLl90ZXh0Ym94LmNsYXNzTGlzdC5hZGQoXCJmb3JtLWNvbnRyb2xcIiksdGhpcy5fdGV4dGJveC50eXBlPVwidGV4dGJveFwiKSx0aGlzLl90ZXh0Ym94fWdldCByb290RWxlbWVudCgpe2lmKCF0aGlzLl9yb290RWxlbWVudCl7dGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5pZD10aGlzLnNldHRpbmcuaWQsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc1RleHRFbGVtKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTt0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0KSx0aGlzLnRleHRib3gudGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uLHQuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Ym94KSx0aGlzLnRleHRib3guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsKCgpPT57dGhpcy5zZXR0aW5nLnRleHQhPT10aGlzLnRleHRib3gudmFsdWUmJih0aGlzLnNldHRpbmcudGV4dD10aGlzLnRleHRib3gudmFsdWUsdGhpcy5zZXR0aW5nLnVwZGF0ZVVSTFBhcmFtcygpKX0pKX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9c2V0IHRleHQodCl7dGhpcy50ZXh0Ym94LnZhbHVlPXR9Z2V0IHRleHQoKXtyZXR1cm4gdGhpcy50ZXh0Ym94LnZhbHVlfXNldCBsYWJlbCh0KXt0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXR9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHR9fWNsYXNzIE0gZXh0ZW5kcyBGe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMubGFiZWw9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMub3B0aW9ucz10aGlzLnNldHRpbmcub3B0aW9ucyx0aGlzLnNlbGVjdGVkPXRoaXMuc2V0dGluZy5zZWxlY3RlZH1nZXQgc2V0dGluZygpe3JldHVybiB0aGlzLl9zZXR0aW5nfWdldCBzZWxlY3Rvcigpe3JldHVybiB0aGlzLl9zZWxlY3Rvcnx8KHRoaXMuX3NlbGVjdG9yPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksdGhpcy5fc2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcImZvcm0tY29udHJvbFwiKSx0aGlzLl9zZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3Mtb3B0aW9uXCIpKSx0aGlzLl9zZWxlY3Rvcn1nZXQgc2V0dGluZ3NUZXh0RWxlbSgpe3JldHVybiB0aGlzLl9zZXR0aW5nc1RleHRFbGVtfHwodGhpcy5fc2V0dGluZ3NUZXh0RWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXRoaXMuc2V0dGluZy5sYWJlbCx0aGlzLl9zZXR0aW5nc1RleHRFbGVtLnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbX1zZXQgbGFiZWwodCl7dGhpcy5zZXR0aW5nc1RleHRFbGVtLmlubmVyVGV4dD10fWdldCBsYWJlbCgpe3JldHVybiB0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0fWdldCByb290RWxlbWVudCgpe2lmKCF0aGlzLl9yb290RWxlbWVudCl7dGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5pZD10aGlzLnNldHRpbmcuaWQsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdcIiksdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm0tZ3JvdXBcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc1RleHRFbGVtKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTt0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0KSx0aGlzLnNlbGVjdG9yLnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbix0LmFwcGVuZENoaWxkKHRoaXMuc2VsZWN0b3IpLHRoaXMuc2VsZWN0b3Iub25jaGFuZ2U9KCk9Pnt0aGlzLnNldHRpbmcuc2VsZWN0ZWQhPT10aGlzLnNlbGVjdG9yLnZhbHVlJiYodGhpcy5zZXR0aW5nLnNlbGVjdGVkPXRoaXMuc2VsZWN0b3IudmFsdWUsdGhpcy5zZXR0aW5nLnVwZGF0ZVVSTFBhcmFtcygpKX19cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fXNldCBvcHRpb25zKHQpe2ZvcihsZXQgdD10aGlzLnNlbGVjdG9yLm9wdGlvbnMubGVuZ3RoLTE7dD49MDt0LS0pdGhpcy5zZWxlY3Rvci5yZW1vdmUodCk7dC5mb3JFYWNoKCh0PT57Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO2UudmFsdWU9dCxlLmlubmVySFRNTD10LHRoaXMuc2VsZWN0b3IuYXBwZW5kQ2hpbGQoZSl9KSl9Z2V0IG9wdGlvbnMoKXtyZXR1cm5bLi4udGhpcy5zZWxlY3Rvci5vcHRpb25zXS5tYXAoKHQ9PnQudmFsdWUpKX1zZXQgc2VsZWN0ZWQodCl7Y29uc3QgZT10aGlzLm9wdGlvbnMuZmlsdGVyKChlPT4tMSE9PWUuaW5kZXhPZih0KSkpO2UubGVuZ3RoJiYodGhpcy5zZWxlY3Rvci52YWx1ZT1lWzBdKX1nZXQgc2VsZWN0ZWQoKXtyZXR1cm4gdGhpcy5zZWxlY3Rvci52YWx1ZX1kaXNhYmxlKCl7dGhpcy5zZWxlY3Rvci5kaXNhYmxlZD0hMH1lbmFibGUoKXt0aGlzLnNlbGVjdG9yLmRpc2FibGVkPSExfX1jb25zdCBOPVwiTGlnaHRNb2RlXCI7Y2xhc3MgUntjb25zdHJ1Y3Rvcih0KXt0aGlzLmN1c3RvbUZsYWdzPW5ldyBNYXAsdGhpcy5mbGFnc1VpPW5ldyBNYXAsdGhpcy5udW1lcmljUGFyYW1ldGVyc1VpPW5ldyBNYXAsdGhpcy50ZXh0UGFyYW1ldGVyc1VpPW5ldyBNYXAsdGhpcy5vcHRpb25QYXJhbWV0ZXJzVWk9bmV3IE1hcCx0aGlzLmNyZWF0ZUN1c3RvbVVJU2V0dGluZ3ModC51c2VVcmxQYXJhbXMpLHRoaXMucmVnaXN0ZXJTZXR0aW5nc1VJQ29tcG9uZW50cyh0KX1jcmVhdGVDdXN0b21VSVNldHRpbmdzKHQpe3RoaXMuY3VzdG9tRmxhZ3Muc2V0KE4sbmV3IGwuU2V0dGluZ0ZsYWcoTixcIkNvbG9yIFNjaGVtZTogRGFyayBNb2RlXCIsXCJQYWdlIHN0eWxpbmcgd2lsbCBiZSBlaXRoZXIgbGlnaHQgb3IgZGFya1wiLCExLHQsKCh0LGUpPT57ZS5sYWJlbD1gQ29sb3IgU2NoZW1lOiAke3Q/XCJMaWdodFwiOlwiRGFya1wifSBNb2RlYH0pKSl9cmVnaXN0ZXJTZXR0aW5nc1VJQ29tcG9uZW50cyh0KXtmb3IoY29uc3QgZSBvZiB0LmdldEZsYWdzKCkpdGhpcy5mbGFnc1VpLnNldChlLmlkLG5ldyBBKGUpKTtmb3IoY29uc3QgdCBvZiBBcnJheS5mcm9tKHRoaXMuY3VzdG9tRmxhZ3MudmFsdWVzKCkpKXRoaXMuZmxhZ3NVaS5zZXQodC5pZCxuZXcgQSh0KSk7Zm9yKGNvbnN0IGUgb2YgdC5nZXRUZXh0U2V0dGluZ3MoKSl0aGlzLnRleHRQYXJhbWV0ZXJzVWkuc2V0KGUuaWQsbmV3IE8oZSkpO2Zvcihjb25zdCBlIG9mIHQuZ2V0TnVtZXJpY1NldHRpbmdzKCkpdGhpcy5udW1lcmljUGFyYW1ldGVyc1VpLnNldChlLmlkLG5ldyBQKGUpKTtmb3IoY29uc3QgZSBvZiB0LmdldE9wdGlvblNldHRpbmdzKCkpdGhpcy5vcHRpb25QYXJhbWV0ZXJzVWkuc2V0KGUuaWQsbmV3IE0oZSkpfWJ1aWxkU2VjdGlvbldpdGhIZWFkaW5nKHQsZSl7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtzLmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5nc0NvbnRhaW5lclwiKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGkuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzSGVhZGVyXCIpLGkuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzLXRleHRcIiksaS50ZXh0Q29udGVudD1lLHMuYXBwZW5kQ2hpbGQoaSksdC5hcHBlbmRDaGlsZChzKSxzfXBvcHVsYXRlU2V0dGluZ3NFbGVtZW50KHQpe2NvbnN0IGU9dGhpcy5idWlsZFNlY3Rpb25XaXRoSGVhZGluZyh0LFwiUGl4ZWwgU3RyZWFtaW5nXCIpO3RoaXMuYWRkU2V0dGluZ1RleHQoZSx0aGlzLnRleHRQYXJhbWV0ZXJzVWkuZ2V0KGwuVGV4dFBhcmFtZXRlcnMuU2lnbmFsbGluZ1NlcnZlclVybCkpLHRoaXMuYWRkU2V0dGluZ09wdGlvbihlLHRoaXMub3B0aW9uUGFyYW1ldGVyc1VpLmdldChsLk9wdGlvblBhcmFtZXRlcnMuU3RyZWFtZXJJZCkpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuQXV0b0Nvbm5lY3QpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkF1dG9QbGF5VmlkZW8pKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkJyb3dzZXJTZW5kT2ZmZXIpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLlVzZU1pYykpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuU3RhcnRWaWRlb011dGVkKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhlLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5QcmVmZXJTRlUpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLklzUXVhbGl0eUNvbnRyb2xsZXIpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkZvcmNlTW9ub0F1ZGlvKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhlLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5Gb3JjZVRVUk4pKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLlN1cHByZXNzQnJvd3NlcktleXMpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkFGS0RldGVjdGlvbikpLHRoaXMuYWRkU2V0dGluZ051bWVyaWMoZSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuQUZLVGltZW91dFNlY3MpKTtjb25zdCBzPXRoaXMuYnVpbGRTZWN0aW9uV2l0aEhlYWRpbmcodCxcIlVJXCIpO3RoaXMuYWRkU2V0dGluZ0ZsYWcocyx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuTWF0Y2hWaWV3cG9ydFJlc29sdXRpb24pKSx0aGlzLmFkZFNldHRpbmdGbGFnKHMsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkhvdmVyaW5nTW91c2VNb2RlKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhzLHRoaXMuZmxhZ3NVaS5nZXQoTikpO2NvbnN0IGk9dGhpcy5idWlsZFNlY3Rpb25XaXRoSGVhZGluZyh0LFwiSW5wdXRcIik7dGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5LZXlib2FyZElucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5Nb3VzZUlucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5Ub3VjaElucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5HYW1lcGFkSW5wdXQpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGksdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLlhSQ29udHJvbGxlcklucHV0KSk7Y29uc3Qgbj10aGlzLmJ1aWxkU2VjdGlvbldpdGhIZWFkaW5nKHQsXCJFbmNvZGVyXCIpO3RoaXMuYWRkU2V0dGluZ051bWVyaWMobix0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuTWluUVApKSx0aGlzLmFkZFNldHRpbmdOdW1lcmljKG4sdGhpcy5udW1lcmljUGFyYW1ldGVyc1VpLmdldChsLk51bWVyaWNQYXJhbWV0ZXJzLk1heFFQKSk7Y29uc3Qgbz10aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQobC5PcHRpb25QYXJhbWV0ZXJzLlByZWZlcnJlZENvZGVjKTt0aGlzLmFkZFNldHRpbmdPcHRpb24obix0aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQobC5PcHRpb25QYXJhbWV0ZXJzLlByZWZlcnJlZENvZGVjKSksbyYmWy4uLm8uc2VsZWN0b3Iub3B0aW9uc10ubWFwKCh0PT50LnZhbHVlKSkuaW5jbHVkZXMoXCJPbmx5IGF2YWlsYWJsZSBvbiBDaHJvbWVcIikmJm8uZGlzYWJsZSgpO2NvbnN0IGE9dGhpcy5idWlsZFNlY3Rpb25XaXRoSGVhZGluZyh0LFwiV2ViUlRDXCIpO3RoaXMuYWRkU2V0dGluZ051bWVyaWMoYSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuV2ViUlRDRlBTKSksdGhpcy5hZGRTZXR0aW5nTnVtZXJpYyhhLHRoaXMubnVtZXJpY1BhcmFtZXRlcnNVaS5nZXQobC5OdW1lcmljUGFyYW1ldGVycy5XZWJSVENNaW5CaXRyYXRlKSksdGhpcy5hZGRTZXR0aW5nTnVtZXJpYyhhLHRoaXMubnVtZXJpY1BhcmFtZXRlcnNVaS5nZXQobC5OdW1lcmljUGFyYW1ldGVycy5XZWJSVENNYXhCaXRyYXRlKSl9YWRkU2V0dGluZ1RleHQodCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLnRleHRQYXJhbWV0ZXJzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ0ZsYWcodCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLmZsYWdzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ051bWVyaWModCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ09wdGlvbih0LGUpe2UmJih0LmFwcGVuZENoaWxkKGUucm9vdEVsZW1lbnQpLHRoaXMub3B0aW9uUGFyYW1ldGVyc1VpLnNldChlLnNldHRpbmcuaWQsZSkpfW9uU2V0dGluZ3NDaGFuZ2VkKHtkYXRhOntpZDp0LHRhcmdldDplLHR5cGU6c319KXtpZihcImZsYWdcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLmZsYWdzVWkuZ2V0KHMpO24mJihuLmZsYWchPT1pLmZsYWcmJihuLmZsYWc9aS5mbGFnKSxuLmxhYmVsIT09aS5sYWJlbCYmKG4ubGFiZWw9aS5sYWJlbCkpfWVsc2UgaWYoXCJudW1iZXJcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KHMpO24mJihuLm51bWJlciE9PWkubnVtYmVyJiYobi5udW1iZXI9aS5udW1iZXIpLG4ubGFiZWwhPT1pLmxhYmVsJiYobi5sYWJlbD1pLmxhYmVsKSl9ZWxzZSBpZihcInRleHRcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLnRleHRQYXJhbWV0ZXJzVWkuZ2V0KHMpO24mJihuLnRleHQhPT1pLnRleHQmJihuLnRleHQ9aS50ZXh0KSxuLmxhYmVsIT09aS5sYWJlbCYmKG4ubGFiZWw9aS5sYWJlbCkpfWVsc2UgaWYoXCJvcHRpb25cIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQocyk7aWYobil7Y29uc3QgdD1uLm9wdGlvbnMsZT1pLm9wdGlvbnM7dC5sZW5ndGg9PT1lLmxlbmd0aCYmdC5ldmVyeSgodD0+ZS5pbmNsdWRlcyh0KSkpfHwobi5vcHRpb25zPWkub3B0aW9ucyksbi5zZWxlY3RlZCE9PWkuc2VsZWN0ZWQmJihuLnNlbGVjdGVkPWkuc2VsZWN0ZWQpLG4ubGFiZWwhPT1pLmxhYmVsJiYobi5sYWJlbD1pLmxhYmVsKX19fWFkZEN1c3RvbUZsYWdPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIodCxlKXt0aGlzLmN1c3RvbUZsYWdzLmhhcyh0KSYmKHRoaXMuY3VzdG9tRmxhZ3MuZ2V0KHQpLm9uQ2hhbmdlPWUpfXNldEN1c3RvbUZsYWdMYWJlbCh0LGUpe3RoaXMuY3VzdG9tRmxhZ3MuaGFzKHQpPyh0aGlzLmN1c3RvbUZsYWdzLmdldCh0KS5sYWJlbD1lLHRoaXMuZmxhZ3NVaS5nZXQodCkubGFiZWw9ZSk6bC5Mb2dnZXIuV2FybmluZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksYENhbm5vdCBzZXQgbGFiZWwgZm9yIGZsYWcgY2FsbGVkICR7dH0gLSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgQ29uZmlnLmZsYWdzIG1hcC5gKX1pc0N1c3RvbUZsYWdFbmFibGVkKHQpe3JldHVybiB0aGlzLmN1c3RvbUZsYWdzLmdldCh0KS5mbGFnfX1jbGFzcyB6e2NvbnN0cnVjdG9yKHQpe3RoaXMuc3RyZWFtPXQuc3RyZWFtLHRoaXMub25Db2xvck1vZGVDaGFuZ2VkPXQub25Db2xvck1vZGVDaGFuZ2VkLHRoaXMuY29uZmlnVUk9bmV3IFIodGhpcy5zdHJlYW0uY29uZmlnKSx0aGlzLmNyZWF0ZU92ZXJsYXlzKCksdGhpcy5zdGF0c1BhbmVsPW5ldyBrLHRoaXMudWlGZWF0dXJlc0VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c1BhbmVsLnJvb3RFbGVtZW50KSx0aGlzLnNldHRpbmdzUGFuZWw9bmV3IHcsdGhpcy51aUZlYXR1cmVzRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzUGFuZWwucm9vdEVsZW1lbnQpLHRoaXMudmlkZW9RcEluZGljYXRvcj1uZXcgSSx0aGlzLnVpRmVhdHVyZXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudmlkZW9RcEluZGljYXRvci5yb290RWxlbWVudCksdGhpcy5jb25maWd1cmVTZXR0aW5ncygpLHRoaXMuY3JlYXRlQnV0dG9ucygpLHRoaXMucmVnaXN0ZXJDYWxsYmFja3MoKSx0aGlzLnNob3dDb25uZWN0T3JBdXRvQ29ubmVjdE92ZXJsYXlzKCksdGhpcy5zZXRDb2xvck1vZGUodGhpcy5jb25maWdVSS5pc0N1c3RvbUZsYWdFbmFibGVkKE4pKX1jcmVhdGVPdmVybGF5cygpe3RoaXMuZGlzY29ubmVjdE92ZXJsYXk9bmV3IG0odGhpcy5zdHJlYW0udmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLmNvbm5lY3RPdmVybGF5PW5ldyBoKHRoaXMuc3RyZWFtLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5wbGF5T3ZlcmxheT1uZXcgdSh0aGlzLnN0cmVhbS52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMuaW5mb092ZXJsYXk9bmV3IHAodGhpcy5zdHJlYW0udmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLmVycm9yT3ZlcmxheT1uZXcgRSh0aGlzLnN0cmVhbS52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMuYWZrT3ZlcmxheT1uZXcgdih0aGlzLnN0cmVhbS52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMuZGlzY29ubmVjdE92ZXJsYXkub25BY3Rpb24oKCgpPT50aGlzLnN0cmVhbS5yZWNvbm5lY3QoKSkpLHRoaXMuY29ubmVjdE92ZXJsYXkub25BY3Rpb24oKCgpPT50aGlzLnN0cmVhbS5jb25uZWN0KCkpKSx0aGlzLnBsYXlPdmVybGF5Lm9uQWN0aW9uKCgoKT0+dGhpcy5zdHJlYW0ucGxheSgpKSl9Y3JlYXRlQnV0dG9ucygpe2NvbnN0IHQ9bmV3IGY7dC5mdWxsc2NyZWVuSWNvbi5mdWxsc2NyZWVuRWxlbWVudD10aGlzLnJvb3RFbGVtZW50LHRoaXMudWlGZWF0dXJlc0VsZW1lbnQuYXBwZW5kQ2hpbGQodC5yb290RWxlbWVudCksdC5zZXR0aW5nc0ljb24ucm9vdEVsZW1lbnQub25jbGljaz0oKT0+dGhpcy5zZXR0aW5nc0NsaWNrZWQoKSx0aGlzLnNldHRpbmdzUGFuZWwuc2V0dGluZ3NDbG9zZUJ1dHRvbi5vbmNsaWNrPSgpPT50aGlzLnNldHRpbmdzQ2xpY2tlZCgpLHQueHJJY29uLnJvb3RFbGVtZW50Lm9uY2xpY2s9KCk9PnRoaXMuc3RyZWFtLnRvZ2dsZVhSKCksdC5zdGF0c0ljb24ucm9vdEVsZW1lbnQub25jbGljaz0oKT0+dGhpcy5zdGF0c0NsaWNrZWQoKSx0aGlzLnN0YXRzUGFuZWwuc3RhdHNDbG9zZUJ1dHRvbi5vbmNsaWNrPSgpPT50aGlzLnN0YXRzQ2xpY2tlZCgpO2NvbnN0IGU9bmV3IEMoXCJTaG93IEZQU1wiLFwiVG9nZ2xlXCIpO2UuYWRkT25DbGlja0xpc3RlbmVyKCgoKT0+e3RoaXMuc3RyZWFtLnJlcXVlc3RTaG93RnBzKCl9KSk7Y29uc3Qgcz1uZXcgQyhcIlJlc3RhcnQgU3RyZWFtXCIsXCJSZXN0YXJ0XCIpO3MuYWRkT25DbGlja0xpc3RlbmVyKCgoKT0+e3RoaXMuc3RyZWFtLnJlY29ubmVjdCgpfSkpO2NvbnN0IGk9bmV3IEMoXCJSZXF1ZXN0IGtleWZyYW1lXCIsXCJSZXF1ZXN0XCIpO2kuYWRkT25DbGlja0xpc3RlbmVyKCgoKT0+e3RoaXMuc3RyZWFtLnJlcXVlc3RJZnJhbWUoKX0pKTtjb25zdCBuPXRoaXMuY29uZmlnVUkuYnVpbGRTZWN0aW9uV2l0aEhlYWRpbmcodGhpcy5zZXR0aW5nc1BhbmVsLnNldHRpbmdzQ29udGVudEVsZW1lbnQsXCJDb21tYW5kc1wiKTtuLmFwcGVuZENoaWxkKGUucm9vdEVsZW1lbnQpLG4uYXBwZW5kQ2hpbGQoaS5yb290RWxlbWVudCksbi5hcHBlbmRDaGlsZChzLnJvb3RFbGVtZW50KX1jb25maWd1cmVTZXR0aW5ncygpe3RoaXMuY29uZmlnVUkucG9wdWxhdGVTZXR0aW5nc0VsZW1lbnQodGhpcy5zZXR0aW5nc1BhbmVsLnNldHRpbmdzQ29udGVudEVsZW1lbnQpLHRoaXMuY29uZmlnVUkuYWRkQ3VzdG9tRmxhZ09uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihOLCh0PT57dGhpcy5jb25maWdVSS5zZXRDdXN0b21GbGFnTGFiZWwoTixgQ29sb3IgU2NoZW1lOiAke3Q/XCJMaWdodFwiOlwiRGFya1wifSBNb2RlYCksdGhpcy5zZXRDb2xvck1vZGUodCl9KSl9cmVnaXN0ZXJDYWxsYmFja3MoKXt0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWZrV2FybmluZ0FjdGl2YXRlXCIsKCh7ZGF0YTp7Y291bnREb3duOnQsZGlzbWlzc0FmazplfX0pPT50aGlzLnNob3dBZmtPdmVybGF5KHQsZSkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWZrV2FybmluZ1VwZGF0ZVwiLCgoe2RhdGE6e2NvdW50RG93bjp0fX0pPT50aGlzLmFma092ZXJsYXkudXBkYXRlQ291bnRkb3duKHQpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImFma1dhcm5pbmdEZWFjdGl2YXRlXCIsKCgpPT50aGlzLmFma092ZXJsYXkuaGlkZSgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImFma1RpbWVkT3V0XCIsKCgpPT50aGlzLmFma092ZXJsYXkuaGlkZSgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInZpZGVvRW5jb2RlckF2Z1FQXCIsKCh7ZGF0YTp7YXZnUVA6dH19KT0+dGhpcy5vblZpZGVvRW5jb2RlckF2Z1FQKHQpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y1NkcFwiLCgoKT0+dGhpcy5vbldlYlJ0Y1NkcCgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y0F1dG9Db25uZWN0XCIsKCgpPT50aGlzLm9uV2ViUnRjQXV0b0Nvbm5lY3QoKSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJSdGNDb25uZWN0aW5nXCIsKCgpPT50aGlzLm9uV2ViUnRjQ29ubmVjdGluZygpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y0Nvbm5lY3RlZFwiLCgoKT0+dGhpcy5vbldlYlJ0Y0Nvbm5lY3RlZCgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y0ZhaWxlZFwiLCgoKT0+dGhpcy5vbldlYlJ0Y0ZhaWxlZCgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y0Rpc2Nvbm5lY3RlZFwiLCgoe2RhdGE6e2V2ZW50U3RyaW5nOnQsc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3Q6ZX19KT0+dGhpcy5vbkRpc2Nvbm5lY3QodCxlKSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aWRlb0luaXRpYWxpemVkXCIsKCgpPT50aGlzLm9uVmlkZW9Jbml0aWFsaXplZCgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInN0cmVhbUxvYWRpbmdcIiwoKCk9PnRoaXMub25TdHJlYW1Mb2FkaW5nKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwicGxheVN0cmVhbUVycm9yXCIsKCh7ZGF0YTp7bWVzc2FnZTp0fX0pPT50aGlzLm9uUGxheVN0cmVhbUVycm9yKHQpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlTdHJlYW1cIiwoKCk9PnRoaXMub25QbGF5U3RyZWFtKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwicGxheVN0cmVhbVJlamVjdGVkXCIsKCh7ZGF0YTp7cmVhc29uOnR9fSk9PnRoaXMub25QbGF5U3RyZWFtUmVqZWN0ZWQodCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwibG9hZEZyZWV6ZUZyYW1lXCIsKCh7ZGF0YTp7c2hvdWxkU2hvd1BsYXlPdmVybGF5OnR9fSk9PnRoaXMub25Mb2FkRnJlZXplRnJhbWUodCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwic3RhdHNSZWNlaXZlZFwiLCgoe2RhdGE6e2FnZ3JlZ2F0ZWRTdGF0czp0fX0pPT50aGlzLm9uU3RhdHNSZWNlaXZlZCh0KSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJsYXRlbmN5VGVzdFJlc3VsdFwiLCgoe2RhdGE6e2xhdGVuY3lUaW1pbmdzOnR9fSk9PnRoaXMub25MYXRlbmN5VGVzdFJlc3VsdHModCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwic3RyZWFtZXJMaXN0TWVzc2FnZVwiLCgoe2RhdGE6e21lc3NhZ2VTdHJlYW1lckxpc3Q6dCxhdXRvU2VsZWN0ZWRTdHJlYW1lcklkOmV9fSk9PnRoaXMuaGFuZGxlU3RyZWFtZXJMaXN0TWVzc2FnZSh0LGUpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInNldHRpbmdzQ2hhbmdlZFwiLCh0PT50aGlzLmNvbmZpZ1VJLm9uU2V0dGluZ3NDaGFuZ2VkKHQpKSl9Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fHwodGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5pZD1cInBsYXllclVJXCIsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vc2VsZWN0XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3RyZWFtLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy51aUZlYXR1cmVzRWxlbWVudCkpLHRoaXMuX3Jvb3RFbGVtZW50fWdldCB1aUZlYXR1cmVzRWxlbWVudCgpe3JldHVybiB0aGlzLl91aUZlYXR1cmVFbGVtZW50fHwodGhpcy5fdWlGZWF0dXJlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3VpRmVhdHVyZUVsZW1lbnQuaWQ9XCJ1aUZlYXR1cmVzXCIpLHRoaXMuX3VpRmVhdHVyZUVsZW1lbnR9c2hvd0Rpc2Nvbm5lY3RPdmVybGF5KHQpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy51cGRhdGVEaXNjb25uZWN0T3ZlcmxheSh0KSx0aGlzLmRpc2Nvbm5lY3RPdmVybGF5LnNob3coKSx0aGlzLmN1cnJlbnRPdmVybGF5PXRoaXMuZGlzY29ubmVjdE92ZXJsYXl9dXBkYXRlRGlzY29ubmVjdE92ZXJsYXkodCl7dGhpcy5kaXNjb25uZWN0T3ZlcmxheS51cGRhdGUodCl9b25EaXNjb25uZWN0aW9uQWN0aW9uKCl7dGhpcy5kaXNjb25uZWN0T3ZlcmxheS5hY3RpdmF0ZSgpfWhpZGVDdXJyZW50T3ZlcmxheSgpe251bGwhPXRoaXMuY3VycmVudE92ZXJsYXkmJih0aGlzLmN1cnJlbnRPdmVybGF5LmhpZGUoKSx0aGlzLmN1cnJlbnRPdmVybGF5PW51bGwpfXNob3dDb25uZWN0T3ZlcmxheSgpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy5jb25uZWN0T3ZlcmxheS5zaG93KCksdGhpcy5jdXJyZW50T3ZlcmxheT10aGlzLmNvbm5lY3RPdmVybGF5fXNob3dQbGF5T3ZlcmxheSgpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy5wbGF5T3ZlcmxheS5zaG93KCksdGhpcy5jdXJyZW50T3ZlcmxheT10aGlzLnBsYXlPdmVybGF5fXNob3dUZXh0T3ZlcmxheSh0KXt0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpLHRoaXMuaW5mb092ZXJsYXkudXBkYXRlKHQpLHRoaXMuaW5mb092ZXJsYXkuc2hvdygpLHRoaXMuY3VycmVudE92ZXJsYXk9dGhpcy5pbmZvT3ZlcmxheX1zaG93RXJyb3JPdmVybGF5KHQpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy5lcnJvck92ZXJsYXkudXBkYXRlKHQpLHRoaXMuZXJyb3JPdmVybGF5LnNob3coKSx0aGlzLmN1cnJlbnRPdmVybGF5PXRoaXMuZXJyb3JPdmVybGF5fXNldHRpbmdzQ2xpY2tlZCgpe3RoaXMuc3RhdHNQYW5lbC5oaWRlKCksdGhpcy5zZXR0aW5nc1BhbmVsLnRvZ2dsZVZpc2liaWxpdHkoKX1zdGF0c0NsaWNrZWQoKXt0aGlzLnNldHRpbmdzUGFuZWwuaGlkZSgpLHRoaXMuc3RhdHNQYW5lbC50b2dnbGVWaXNpYmlsaXR5KCl9b25Db25uZWN0QWN0aW9uKCl7dGhpcy5jb25uZWN0T3ZlcmxheS5hY3RpdmF0ZSgpfW9uUGxheUFjdGlvbigpe3RoaXMucGxheU92ZXJsYXkuYWN0aXZhdGUoKX1zaG93QWZrT3ZlcmxheSh0LGUpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy5hZmtPdmVybGF5LnVwZGF0ZUNvdW50ZG93bih0KSx0aGlzLmFma092ZXJsYXkub25BY3Rpb24oKCgpPT5lKCkpKSx0aGlzLmFma092ZXJsYXkuc2hvdygpLHRoaXMuY3VycmVudE92ZXJsYXk9dGhpcy5hZmtPdmVybGF5fXNob3dDb25uZWN0T3JBdXRvQ29ubmVjdE92ZXJsYXlzKCl7dGhpcy5zdHJlYW0uY29uZmlnLmlzRmxhZ0VuYWJsZWQobC5GbGFncy5BdXRvQ29ubmVjdCl8fHRoaXMuc2hvd0Nvbm5lY3RPdmVybGF5KCl9b25XZWJSdGNBdXRvQ29ubmVjdCgpe3RoaXMuc2hvd1RleHRPdmVybGF5KFwiQXV0byBDb25uZWN0aW5nIE5vd1wiKX1vbldlYlJ0Y1NkcCgpe3RoaXMuc2hvd1RleHRPdmVybGF5KFwiV2ViUlRDIENvbm5lY3Rpb24gTmVnb3RpYXRlZFwiKX1vblN0cmVhbUxvYWRpbmcoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO3QuY2xhc3NOYW1lPVwidmlzdWFsbHktaGlkZGVuXCIsdC5pbm5lckhUTUw9XCJMb2FkaW5nLi4uXCI7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJsb2FkaW5nLXNwaW5uZXJcIixlLmNsYXNzTmFtZT1cInNwaW5uZXItYm9yZGVyIG1zLTJcIixlLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInN0YXR1c1wiKSxlLmFwcGVuZENoaWxkKHQpLHRoaXMuc2hvd1RleHRPdmVybGF5KFwiTG9hZGluZyBTdHJlYW0gXCIrZS5vdXRlckhUTUwpfW9uRGlzY29ubmVjdCh0LGUpezA9PWU/dGhpcy5zaG93RXJyb3JPdmVybGF5KGBEaXNjb25uZWN0ZWQ6ICR7dH1gKTp0aGlzLnNob3dEaXNjb25uZWN0T3ZlcmxheShgRGlzY29ubmVjdGVkOiAke3R9ICA8ZGl2IGNsYXNzPVwiY2xpY2thYmxlU3RhdGVcIj5DbGljayBUbyBSZXN0YXJ0PC9kaXY+YCksdGhpcy5zdGF0c1BhbmVsLmxhdGVuY3lUZXN0LmxhdGVuY3lUZXN0QnV0dG9uLm9uY2xpY2s9KCk9Pnt9fW9uV2ViUnRjQ29ubmVjdGluZygpe3RoaXMuc2hvd1RleHRPdmVybGF5KFwiU3RhcnRpbmcgY29ubmVjdGlvbiB0byBzZXJ2ZXIsIHBsZWFzZSB3YWl0XCIpfW9uV2ViUnRjQ29ubmVjdGVkKCl7dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJXZWJSVEMgY29ubmVjdGVkLCB3YWl0aW5nIGZvciB2aWRlb1wiKX1vbldlYlJ0Y0ZhaWxlZCgpe3RoaXMuc2hvd0Vycm9yT3ZlcmxheShcIlVuYWJsZSB0byBzZXR1cCB2aWRlb1wiKX1vbkxvYWRGcmVlemVGcmFtZSh0KXshMD09PXQmJihsLkxvZ2dlci5Mb2cobC5Mb2dnZXIuR2V0U3RhY2tUcmFjZSgpLFwic2hvd2luZyBwbGF5IG92ZXJsYXlcIiksdGhpcy5zaG93UGxheU92ZXJsYXkoKSl9b25QbGF5U3RyZWFtKCl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKX1vblBsYXlTdHJlYW1FcnJvcih0KXt0aGlzLnNob3dFcnJvck92ZXJsYXkodCl9b25QbGF5U3RyZWFtUmVqZWN0ZWQodCl7dGhpcy5zaG93UGxheU92ZXJsYXkoKX1vblZpZGVvSW5pdGlhbGl6ZWQoKXt0aGlzLnN0cmVhbS5jb25maWcuaXNGbGFnRW5hYmxlZChsLkZsYWdzLkF1dG9QbGF5VmlkZW8pfHx0aGlzLnNob3dQbGF5T3ZlcmxheSgpLHRoaXMuc3RhdHNQYW5lbC5sYXRlbmN5VGVzdC5sYXRlbmN5VGVzdEJ1dHRvbi5vbmNsaWNrPSgpPT57dGhpcy5zdHJlYW0ucmVxdWVzdExhdGVuY3lUZXN0KCl9fW9uVmlkZW9FbmNvZGVyQXZnUVAodCl7dGhpcy52aWRlb1FwSW5kaWNhdG9yLnVwZGF0ZVFwVG9vbHRpcCh0KX1vbkluaXRpYWxTZXR0aW5ncyh0KXt0LlBpeGVsU3RyZWFtaW5nU2V0dGluZ3MmJnQuUGl4ZWxTdHJlYW1pbmdTZXR0aW5ncy5EaXNhYmxlTGF0ZW5jeVRlc3QmJih0aGlzLnN0YXRzUGFuZWwubGF0ZW5jeVRlc3QubGF0ZW5jeVRlc3RCdXR0b24uZGlzYWJsZWQ9ITAsdGhpcy5zdGF0c1BhbmVsLmxhdGVuY3lUZXN0LmxhdGVuY3lUZXN0QnV0dG9uLnRpdGxlPVwiRGlzYWJsZWQgYnkgLVBpeGVsU3RyZWFtaW5nRGlzYWJsZUxhdGVuY3lUZXN0ZXI9dHJ1ZVwiLGwuTG9nZ2VyLkluZm8obC5Mb2dnZXIuR2V0U3RhY2tUcmFjZSgpLFwiLVBpeGVsU3RyZWFtaW5nRGlzYWJsZUxhdGVuY3lUZXN0ZXI9dHJ1ZSwgcmVxdWVzdGluZyBsYXRlbmN5IHJlcG9ydCBmcm9tIHRoZSB0aGUgYnJvd3NlciB0byBVRSBpcyBkaXNhYmxlZC5cIikpfW9uU3RhdHNSZWNlaXZlZCh0KXt0aGlzLnN0YXRzUGFuZWwuaGFuZGxlU3RhdHModCl9b25MYXRlbmN5VGVzdFJlc3VsdHModCl7dGhpcy5zdGF0c1BhbmVsLmxhdGVuY3lUZXN0LmhhbmRsZVRlc3RSZXN1bHQodCl9aGFuZGxlU3RyZWFtZXJMaXN0TWVzc2FnZSh0LGUpe251bGw9PT1lJiYoMD09PXQuaWRzLmxlbmd0aD90aGlzLnNob3dEaXNjb25uZWN0T3ZlcmxheSgnTm8gc3RyZWFtZXJzIGNvbm5lY3RlZC4gPGRpdiBjbGFzcz1cImNsaWNrYWJsZVN0YXRlXCI+Q2xpY2sgVG8gUmVzdGFydDwvZGl2PicpOnRoaXMuc2hvd1RleHRPdmVybGF5KFwiTXVsdGlwbGUgc3RyZWFtZXJzIGRldGVjdGVkLiBVc2UgdGhlIGRyb3Bkb3duIGluIHRoZSBzZXR0aW5ncyBtZW51IHRvIHNlbGVjdCB0aGUgc3RyZWFtZXJcIikpfXNldENvbG9yTW9kZSh0KXt0aGlzLm9uQ29sb3JNb2RlQ2hhbmdlZCYmdGhpcy5vbkNvbG9yTW9kZUNoYW5nZWQodCl9fWNvbnN0IEI9KHQ9Pnt2YXIgZT17fTtyZXR1cm4gbi5kKGUsdCksZX0pKHtkZWZhdWx0OigpPT5lLmRlZmF1bHR9KSxVPSh0PT57dmFyIGU9e307cmV0dXJuIG4uZChlLHQpLGV9KSh7ZGVmYXVsdDooKT0+cy5kZWZhdWx0fSksRD0odD0+e3ZhciBlPXt9O3JldHVybiBuLmQoZSx0KSxlfSkoe2RlZmF1bHQ6KCk9PmkuZGVmYXVsdH0pO2NsYXNzIEh7Y29uc3RydWN0b3IodCl7dGhpcy5kZWZhdWx0TGlnaHRNb2RlUGFsZXR0ZT17XCItLWNvbG9yMFwiOlwiI2UyZTBkZDgwXCIsXCItLWNvbG9yMVwiOlwiI0ZGRkZGRlwiLFwiLS1jb2xvcjJcIjpcIiMwMDAwMDBcIixcIi0tY29sb3IzXCI6XCIjMDU4NWZlXCIsXCItLWNvbG9yNFwiOlwiIzM1YjM1MFwiLFwiLS1jb2xvcjVcIjpcIiNmZmFiMDBcIixcIi0tY29sb3I2XCI6XCIjZTFlMmRkXCIsXCItLWNvbG9yN1wiOlwiI2MzYzRiZlwifSx0aGlzLmRlZmF1bHREYXJrTW9kZVBhbGV0dGU9e1wiLS1jb2xvcjBcIjpcIiMxRDFGMjI4MFwiLFwiLS1jb2xvcjFcIjpcIiMwMDAwMDBcIixcIi0tY29sb3IyXCI6XCIjRkZGRkZGXCIsXCItLWNvbG9yM1wiOlwiIzA1ODVmZVwiLFwiLS1jb2xvcjRcIjpcIiMzNWIzNTBcIixcIi0tY29sb3I1XCI6XCIjZmZhYjAwXCIsXCItLWNvbG9yNlwiOlwiIzFlMWQyMlwiLFwiLS1jb2xvcjdcIjpcIiMzYzNiNDBcIn0sdGhpcy5kZWZhdWx0U3R5bGVzPXtcIjpyb290XCI6e1wiLS1jb2xvcjBcIjpcIiMxRDFGMjI4MFwiLFwiLS1jb2xvcjFcIjpcIiMwMDAwMDBcIixcIi0tY29sb3IyXCI6XCIjRkZGRkZGXCIsXCItLWNvbG9yM1wiOlwiIzA1ODVmZVwiLFwiLS1jb2xvcjRcIjpcIiMzNWIzNTBcIixcIi0tY29sb3I1XCI6XCIjZmZhYjAwXCIsXCItLWNvbG9yNlwiOlwiIzFlMWQyMlwiLFwiLS1jb2xvcjdcIjpcIiMzYzNiNDBcIixcIi0tY29sb3I4XCI6XCIjNDEwMDhjXCIsXCItLWNvbG9yOVwiOlwiIzNlMDA3MFwiLFwiLS1jb2xvcjEwXCI6XCIjMmUwMDUyXCIsXCItLWNvbG9yMTFcIjpcInJnYmEoNjUsMCwxMzksMSlcIn0sXCIubm9zZWxlY3RcIjp7dXNlclNlbGVjdDpcIm5vbmVcIn0sXCIjcGxheWVyVUlcIjp7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIn0sXCIjdmlkZW9FbGVtZW50UGFyZW50XCI6e3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixwb3NpdGlvbjpcImFic29sdXRlXCIsYmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3IxKVwifSxcIiN1aUZlYXR1cmVzXCI6e3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIix6SW5kZXg6XCIzMFwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIixjb2xvcjpcInZhcigtLWNvbG9yMilcIixwb2ludGVyRXZlbnRzOlwibm9uZVwiLG92ZXJmbG93OlwiaGlkZGVuXCJ9LFwiLlVpVG9vbCAudG9vbHRpcHRleHRcIjp7dmlzaWJpbGl0eTpcImhpZGRlblwiLHdpZHRoOlwiYXV0b1wiLGNvbG9yOlwidmFyKC0tY29sb3IyKVwiLHRleHRBbGlnbjpcImNlbnRlclwiLGJvcmRlclJhZGl1czpcIjE1cHhcIixwYWRkaW5nOlwiMHB4IDEwcHhcIixmb250RmFtaWx5OlwiJ01vbnRzZXJyYXQnLCBzYW5zLXNlcmlmXCIsZm9udFNpemU6XCIwLjc1cmVtXCIsbGV0dGVyU3BhY2luZzpcIjAuNzVweFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCIwXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlWSgyNSUpXCIsbGVmdDpcIjEyNSVcIix6SW5kZXg6XCIyMFwifSxcIi5VaVRvb2w6aG92ZXIgLnRvb2x0aXB0ZXh0XCI6e3Zpc2liaWxpdHk6XCJ2aXNpYmxlXCIsYmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3I3KVwifSxcIiNjb25uZWN0aW9uIC50b29sdGlwdGV4dFwiOnt0b3A6XCIxMjUlXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlWCgtMjUlKVwiLGxlZnQ6XCIwXCIsekluZGV4OlwiMjBcIixwYWRkaW5nOlwiNXB4IDEwcHhcIn0sXCIjY29ubmVjdGlvblwiOntwb3NpdGlvbjpcImFic29sdXRlXCIsYm90dG9tOlwiOCVcIixsZWZ0OlwiNSVcIixmb250RmFtaWx5OlwiJ01pY2hyb21hJywgc2Fucy1zZXJpZlwiLGhlaWdodDpcIjNyZW1cIix3aWR0aDpcIjNyZW1cIixwb2ludGVyRXZlbnRzOlwiYWxsXCJ9LFwiI3NldHRpbmdzLXBhbmVsIC50b29sdGlwdGV4dFwiOntkaXNwbGF5OlwiYmxvY2tcIix0b3A6XCIxMjUlXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlWCgtNTAlKVwiLGxlZnQ6XCIwXCIsekluZGV4OlwiMjBcIixwYWRkaW5nOlwiNXB4IDEwcHhcIixib3JkZXI6XCIzcHggc29saWQgdmFyKC0tY29sb3IzKVwiLHdpZHRoOlwibWF4LWNvbnRlbnRcIixmYWxsYmFja3M6W3t3aWR0aDpcIm1heC1jb250ZW50XCJ9LHtib3JkZXI6XCIzcHggc29saWQgdmFyKC0tY29sb3IzKVwifSx7cGFkZGluZzpcIjVweCAxMHB4XCJ9LHt6SW5kZXg6XCIyMFwifSx7bGVmdDpcIjBcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZVgoLTUwJSlcIn0se3RvcDpcIjEyNSVcIn0se2Rpc3BsYXk6XCJibG9ja1wifV19LFwiI2NvbnRyb2xzXCI6e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCIzJVwiLGxlZnQ6XCIyJVwiLGZvbnRGYW1pbHk6XCInTWljaHJvbWEnLCBzYW5zLXNlcmlmXCIscG9pbnRlckV2ZW50czpcImFsbFwiLGRpc3BsYXk6XCJibG9ja1wifSxcIiNjb250cm9scz4qXCI6e21hcmdpbkJvdHRvbTpcIjAuNXJlbVwiLGJvcmRlclJhZGl1czpcIjUwJVwiLGRpc3BsYXk6XCJibG9ja1wiLGhlaWdodDpcIjJyZW1cIixsaW5lSGVpZ2h0OlwiMS43NXJlbVwiLHBhZGRpbmc6XCIwLjVyZW1cIn0sXCIjY29udHJvbHMgI2FkZGl0aW9uYWxpbmZvXCI6e3RleHRBbGlnbjpcImNlbnRlclwiLGZvbnRGYW1pbHk6XCInTW9udHNlcnJhdCcsIHNhbnMtc2VyaWZcIn0sXCIjZnVsbHNjcmVlbi1idG5cIjp7cGFkZGluZzpcIjAuNnJlbSAhaW1wb3J0YW50XCJ9LFwiI21pbmltaXplSWNvblwiOntkaXNwbGF5Olwibm9uZVwifSxcIiNzZXR0aW5nc0J0biwgI3N0YXRzQnRuXCI6e2N1cnNvcjpcInBvaW50ZXJcIn0sXCIjdWlGZWF0dXJlcyBidXR0b25cIjp7YmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3I3KVwiLGJvcmRlcjpcIjFweCBzb2xpZCB2YXIoLS1jb2xvcjcpXCIsY29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIscG9zaXRpb246XCJyZWxhdGl2ZVwiLHdpZHRoOlwiM3JlbVwiLGhlaWdodDpcIjNyZW1cIixwYWRkaW5nOlwiMC41cmVtXCIsdGV4dEFsaWduOlwiY2VudGVyXCJ9LFwiI3VpRmVhdHVyZXMgYnV0dG9uOmhvdmVyXCI6e2JhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yMylcIixib3JkZXI6XCIzcHggc29saWQgdmFyKC0tY29sb3IzKVwiLHRyYW5zaXRpb246XCIwLjI1cyBlYXNlXCIscGFkZGluZ0xlZnQ6XCIwLjU1cmVtXCIscGFkZGluZ1RvcDpcIjAuNTVyZW1cIn0sXCIjdWlGZWF0dXJlcyBidXR0b246YWN0aXZlXCI6e2JvcmRlcjpcIjNweCBzb2xpZCB2YXIoLS1jb2xvcjMpXCIsYmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3I3KVwiLHBhZGRpbmdMZWZ0OlwiMC41NXJlbVwiLHBhZGRpbmdUb3A6XCIwLjU1cmVtXCJ9LFwiLmJ0bi1mbGF0XCI6e2JhY2tncm91bmRDb2xvcjpcInRyYW5zcGFyZW50XCIsY29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIsZm9udEZhbWlseTpcIidNb250c2VycmF0J1wiLGZvbnRXZWlnaHQ6XCJib2xkXCIsYm9yZGVyOlwiM3B4IHNvbGlkIHZhcigtLWNvbG9yMylcIixib3JkZXJSYWRpdXM6XCIxcmVtXCIsZm9udFNpemU6XCIwLjc1cmVtXCIscGFkZGluZ0xlZnQ6XCIwLjVyZW1cIixwYWRkaW5nUmlnaHQ6XCIwLjVyZW1cIixjdXJzb3I6XCJwb2ludGVyXCIsdGV4dEFsaWduOlwiY2VudGVyXCJ9LFwiLmJ0bi1mbGF0OmhvdmVyXCI6e2JhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yMylcIix0cmFuc2l0aW9uOlwiZWFzZSAwLjNzXCJ9LFwiLmJ0bi1mbGF0OmRpc2FibGVkXCI6e2JhY2tncm91bmQ6XCJ2YXIoLS1jb2xvcjcpXCIsYm9yZGVyQ29sb3I6XCJ2YXIoLS1jb2xvcjMpXCIsY29sb3I6XCJ2YXIoLS1jb2xvcjMpXCIsY3Vyc29yOlwiZGVmYXVsdFwifSxcIi5idG4tZmxhdDphY3RpdmVcIjp7YmFja2dyb3VuZENvbG9yOlwidHJhbnNwYXJlbnRcIn0sXCIuYnRuLWZsYXQ6Zm9jdXNcIjp7b3V0bGluZTpcIm5vbmVcIn0sXCIjdWlGZWF0dXJlcyBpbWdcIjp7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSxcIi5wYW5lbC13cmFwXCI6e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCIwXCIsYm90dG9tOlwiMFwiLHJpZ2h0OlwiMFwiLGhlaWdodDpcIjEwMCVcIixtaW5XaWR0aDpcIjIwdndcIixtYXhXaWR0aDpcIjEwMHZ3XCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlWCgxMDAlKVwiLHRyYW5zaXRpb246XCIuM3MgZWFzZS1vdXRcIixwb2ludGVyRXZlbnRzOlwiYWxsXCIsYmFja2Ryb3BGaWx0ZXI6XCJibHVyKDEwcHgpXCIsd2Via2l0QmFja2Ryb3BGaWx0ZXI6XCJibHVyKDEwcHgpXCIsb3ZlcmZsb3dZOlwiYXV0b1wiLG92ZXJmbG93WDpcImhpZGRlblwiLGJhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yMClcIn0sXCIucGFuZWwtd3JhcC12aXNpYmxlXCI6e3RyYW5zZm9ybTpcInRyYW5zbGF0ZVgoMCUpXCJ9LFwiLnBhbmVsXCI6e292ZXJmbG93WTpcImF1dG9cIixwYWRkaW5nOlwiMWVtXCJ9LFwiI3NldHRpbmdzSGVhZGluZywgI3N0YXRzSGVhZGluZ1wiOntkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsZm9udFNpemU6XCIyZW1cIixtYXJnaW5CbG9ja1N0YXJ0OlwiMC42N2VtXCIsbWFyZ2luQmxvY2tFbmQ6XCIwLjY3ZW1cIixtYXJnaW5JbmxpbmVTdGFydDpcIjBweFwiLG1hcmdpbklubGluZUVuZDpcIjBweFwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIixwYWRkaW5nOlwiMCAwIDAgMnJlbVwifSxcIiNzZXR0aW5nc0Nsb3NlLCAjc3RhdHNDbG9zZVwiOnttYXJnaW46XCIwLjVyZW1cIixwYWRkaW5nVG9wOlwiMC41cmVtXCIscGFkZGluZ0JvdHRvbTpcIjAuNXJlbVwiLHBhZGRpbmdSaWdodDpcIjAuNXJlbVwiLGZvbnRTaXplOlwiMmVtXCIsZmxvYXQ6XCJyaWdodFwifSxcIiNzZXR0aW5nc0Nsb3NlOmFmdGVyLCAjc3RhdHNDbG9zZTphZnRlclwiOntwYWRkaW5nTGVmdDpcIjAuNXJlbVwiLGRpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixjb250ZW50OidcIlxcXFwwMGQ3XCInfSxcIiNzZXR0aW5nc0Nsb3NlOmhvdmVyLCAjc3RhdHNDbG9zZTpob3ZlclwiOntjb2xvcjpcInZhcigtLWNvbG9yMylcIix0cmFuc2l0aW9uOlwiZWFzZSAwLjNzXCJ9LFwiI3NldHRpbmdzQ29udGVudCwgI3N0YXRzQ29udGVudFwiOnttYXJnaW5MZWZ0OlwiMnJlbVwiLG1hcmdpblJpZ2h0OlwiMnJlbVwifSxcIi5zZXR0aW5nXCI6e2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcInJvd1wiLGp1c3RpZnlDb250ZW50Olwic3BhY2UtYmV0d2VlblwiLHBhZGRpbmc6XCIwLjE1cmVtIDEwcHggMC4xNXJlbSAxMHB4XCJ9LFwiLnNldHRpbmdzLXRleHRcIjp7Y29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIsdmVydGljYWxBbGlnbjpcIm1pZGRsZVwiLGZvbnRXZWlnaHQ6XCJub3JtYWxcIn0sXCIuc2V0dGluZ3Mtb3B0aW9uXCI6e3dpZHRoOlwiMTAwJVwiLHRleHRPdmVyZmxvdzpcImVsbGlwc2lzXCIsd2hpdGVTcGFjZTpcIm5vd3JhcFwifSxcIiNjb25uZWN0T3ZlcmxheSwgI3BsYXlPdmVybGF5LCAjaW5mb092ZXJsYXksICNlcnJvck92ZXJsYXksICNhZmtPdmVybGF5LCAjZGlzY29ubmVjdE92ZXJsYXlcIjp7ekluZGV4OlwiMzBcIixwb3NpdGlvbjpcImFic29sdXRlXCIsY29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIsZm9udFNpemU6XCIxLjhlbVwiLHdpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjEpXCIsYWxpZ25JdGVtczpcImNlbnRlclwiLGp1c3RpZnlDb250ZW50OlwiY2VudGVyXCIsdGV4dFRyYW5zZm9ybTpcInVwcGVyY2FzZVwifSxcIi5jbGlja2FibGVTdGF0ZVwiOnthbGlnbkl0ZW1zOlwiY2VudGVyXCIsanVzdGlmeUNvbnRlbnQ6XCJjZW50ZXJcIixkaXNwbGF5OlwiZmxleFwiLGN1cnNvcjpcInBvaW50ZXJcIn0sXCIudGV4dERpc3BsYXlTdGF0ZVwiOntkaXNwbGF5OlwiZmxleFwifSxcIi5oaWRkZW5TdGF0ZVwiOntkaXNwbGF5Olwibm9uZVwifSxcIiNwbGF5QnV0dG9uLCAjY29ubmVjdEJ1dHRvblwiOntkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsaGVpZ2h0OlwiYXV0b1wiLHpJbmRleDpcIjMwXCJ9LFwiaW1nI3BsYXlCdXR0b25cIjp7bWF4V2lkdGg6XCIyNDFweFwiLHdpZHRoOlwiMTAlXCJ9LFwiI3VpSW50ZXJhY3Rpb25cIjp7cG9zaXRpb246XCJmaXhlZFwifSxcIiNVSUludGVyYWN0aW9uQnV0dG9uQm91bmRhcnlcIjp7cGFkZGluZzpcIjJweFwifSxcIiNVSUludGVyYWN0aW9uQnV0dG9uXCI6e2N1cnNvcjpcInBvaW50ZXJcIn0sXCIjaGlkZGVuSW5wdXRcIjp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGxlZnQ6XCItMTAlXCIsd2lkdGg6XCIwcHhcIixvcGFjaXR5OlwiMFwifSxcIiNlZGl0VGV4dEJ1dHRvblwiOntwb3NpdGlvbjpcImFic29sdXRlXCIsaGVpZ2h0OlwiNDBweFwiLHdpZHRoOlwiNDBweFwifSxcIi5idG4tb3ZlcmxheVwiOnt2ZXJ0aWNhbEFsaWduOlwibWlkZGxlXCIsZGlzcGxheTpcImlubGluZS1ibG9ja1wifSxcIi50Z2wtc3dpdGNoXCI6e3ZlcnRpY2FsQWxpZ246XCJtaWRkbGVcIixkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LFwiLnRnbC1zd2l0Y2ggLnRnbFwiOntkaXNwbGF5Olwibm9uZVwifSxcIi50Z2wsIC50Z2w6YWZ0ZXIsIC50Z2w6YmVmb3JlLCAudGdsICosIC50Z2wgKjphZnRlciwgLnRnbCAqOmJlZm9yZSwgLnRnbCsudGdsLXNsaWRlclwiOnt3ZWJraXRCb3hTaXppbmc6XCJib3JkZXItYm94XCIsYm94U2l6aW5nOlwiYm9yZGVyLWJveFwifSxcIi50Z2w6Oi1tb3otc2VsZWN0aW9uLCAudGdsOmFmdGVyOjotbW96LXNlbGVjdGlvbiwgLnRnbDpiZWZvcmU6Oi1tb3otc2VsZWN0aW9uLCAudGdsICo6Oi1tb3otc2VsZWN0aW9uLCAudGdsICo6YWZ0ZXI6Oi1tb3otc2VsZWN0aW9uLCAudGdsICo6YmVmb3JlOjotbW96LXNlbGVjdGlvbiwgLnRnbCsudGdsLXNsaWRlcjo6LW1vei1zZWxlY3Rpb25cIjp7YmFja2dyb3VuZDpcIm5vbmVcIn0sXCIudGdsOjpzZWxlY3Rpb24sIC50Z2w6YWZ0ZXI6OnNlbGVjdGlvbiwgLnRnbDpiZWZvcmU6OnNlbGVjdGlvbiwgLnRnbCAqOjpzZWxlY3Rpb24sIC50Z2wgKjphZnRlcjo6c2VsZWN0aW9uLCAudGdsICo6YmVmb3JlOjpzZWxlY3Rpb24sIC50Z2wrLnRnbC1zbGlkZXI6OnNlbGVjdGlvblwiOntiYWNrZ3JvdW5kOlwibm9uZVwifSxcIi50Z2wtc2xpZGVyXCI6e30sXCIudGdsKy50Z2wtc2xpZGVyXCI6e291dGxpbmU6XCIwXCIsZGlzcGxheTpcImJsb2NrXCIsd2lkdGg6XCI0MHB4XCIsaGVpZ2h0OlwiMThweFwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIixjdXJzb3I6XCJwb2ludGVyXCIsdXNlclNlbGVjdDpcIm5vbmVcIn0sXCIudGdsKy50Z2wtc2xpZGVyOmFmdGVyLCAudGdsKy50Z2wtc2xpZGVyOmJlZm9yZVwiOntwb3NpdGlvbjpcInJlbGF0aXZlXCIsZGlzcGxheTpcImJsb2NrXCIsY29udGVudDonXCJcIicsd2lkdGg6XCI1MCVcIixoZWlnaHQ6XCIxMDAlXCJ9LFwiLnRnbCsudGdsLXNsaWRlcjphZnRlclwiOntsZWZ0OlwiMFwifSxcIi50Z2wrLnRnbC1zbGlkZXI6YmVmb3JlXCI6e2Rpc3BsYXk6XCJub25lXCJ9LFwiLnRnbC1mbGF0Ky50Z2wtc2xpZGVyXCI6e3BhZGRpbmc6XCIycHhcIix3ZWJraXRUcmFuc2l0aW9uOlwiYWxsIC4ycyBlYXNlXCIsdHJhbnNpdGlvbjpcImFsbCAuMnMgZWFzZVwiLGJhY2tncm91bmQ6XCJ2YXIoLS1jb2xvcjYpXCIsYm9yZGVyOlwiM3B4IHNvbGlkIHZhcigtLWNvbG9yNylcIixib3JkZXJSYWRpdXM6XCIyZW1cIn0sXCIudGdsLWZsYXQrLnRnbC1zbGlkZXI6YWZ0ZXJcIjp7d2Via2l0VHJhbnNpdGlvbjpcImFsbCAuMnMgZWFzZVwiLHRyYW5zaXRpb246XCJhbGwgLjJzIGVhc2VcIixiYWNrZ3JvdW5kOlwidmFyKC0tY29sb3I3KVwiLGNvbnRlbnQ6J1wiXCInLGJvcmRlclJhZGl1czpcIjFlbVwifSxcIi50Z2wtZmxhdDpjaGVja2VkKy50Z2wtc2xpZGVyXCI6e2JvcmRlcjpcIjNweCBzb2xpZCB2YXIoLS1jb2xvcjMpXCJ9LFwiLnRnbC1mbGF0OmNoZWNrZWQrLnRnbC1zbGlkZXI6YWZ0ZXJcIjp7bGVmdDpcIjUwJVwiLGJhY2tncm91bmQ6XCJ2YXIoLS1jb2xvcjMpXCJ9LFwiLmJ0bi1hcHBseVwiOntkaXNwbGF5OlwiYmxvY2sgIWltcG9ydGFudFwiLG1hcmdpbkxlZnQ6XCJhdXRvXCIsbWFyZ2luUmlnaHQ6XCJhdXRvXCIsd2lkdGg6XCI0MCVcIn0sXCIuZm9ybS1jb250cm9sXCI6e2JhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yNylcIixib3JkZXI6XCIycHggc29saWQgdmFyKC0tY29sb3I3KVwiLGJvcmRlclJhZGl1czpcIjRweFwiLGNvbG9yOlwidmFyKC0tY29sb3IyKVwiLHRleHRBbGlnbjpcInJpZ2h0XCIsZm9udEZhbWlseTpcImluaGVyaXRcIn0sXCIuZm9ybS1jb250cm9sOmhvdmVyXCI6e2JvcmRlckNvbG9yOlwidmFyKC0tY29sb3I3KVwifSxcIi5mb3JtLWdyb3VwXCI6e3BhZGRpbmdUb3A6XCI0cHhcIixkaXNwbGF5OlwiZ3JpZFwiLGdyaWRUZW1wbGF0ZUNvbHVtbnM6XCI4MCUgMjAlXCIscm93R2FwOlwiNHB4XCIscGFkZGluZ1JpZ2h0OlwiMTBweFwiLHBhZGRpbmdMZWZ0OlwiMTBweFwifSxcIi5mb3JtLWdyb3VwIGxhYmVsXCI6e3ZlcnRpY2FsQWxpZ246XCJtaWRkbGVcIixmb250V2VpZ2h0Olwibm9ybWFsXCJ9LFwiLnNldHRpbmdzQ29udGFpbmVyXCI6e2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcImNvbHVtblwiLGJvcmRlckJvdHRvbTpcIjFweCBzb2xpZCB2YXIoLS1jb2xvcjcpXCIscGFkZGluZ1RvcDpcIjEwcHhcIixwYWRkaW5nQm90dG9tOlwiMTBweFwifSxcIi5zZXR0aW5nc0NvbnRhaW5lcj4gOmZpcnN0LWNoaWxkXCI6e21hcmdpblRvcDpcIjRweFwiLG1hcmdpbkJvdHRvbTpcIjRweFwiLGZvbnRXZWlnaHQ6XCJib2xkXCIsanVzdGlmeUNvbnRlbnQ6XCJzcGFjZS1iZXR3ZWVuXCIsZGlzcGxheTpcImZsZXhcIixmbGV4RGlyZWN0aW9uOlwicm93XCIsYWxpZ25JdGVtczpcImJhc2VsaW5lXCJ9LFwiLmNvbGxhcHNlXCI6e3BhZGRpbmdMZWZ0OlwiNSVcIn0sXCIjc3RyZWFtVG9vbHNcIjp7Ym9yZGVyQm90dG9tUmlnaHRSYWRpdXM6XCI1cHhcIixib3JkZXJCb3R0b21MZWZ0UmFkaXVzOlwiNXB4XCIsdXNlclNlbGVjdDpcIm5vbmVcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMFwiLHJpZ2h0OlwiMiVcIix6SW5kZXg6XCIxMDBcIixib3JkZXI6XCI0cHggc29saWQgdmFyKC0tY29sb3VyOClcIixib3JkZXJUb3BXaWR0aDpcIjBweFwifSxcIi5zZXR0aW5nc0hlYWRlclwiOntmb250U3R5bGU6XCJpdGFsaWNcIn0sXCIjc3RyZWFtVG9vbHNIZWFkZXJcIjp7ZGlzcGxheTpcImZsZXhcIixmbGV4RGlyZWN0aW9uOlwicm93XCIsanVzdGlmeUNvbnRlbnQ6XCJzcGFjZS1iZXR3ZWVuXCIsYm9yZGVyQm90dG9tOlwiMXB4IHNvbGlkIHZhcigtLWNvbG91cjgpXCIsYmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3I3KVwifSxcIi5zdHJlYW1Ub29sc1wiOntiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIsZm9udEZhbWlseTpcInZhcigtLWJ1dHRvbkZvbnQpXCIsZm9udFdlaWdodDpcImxpZ2h0ZXJcIixjb2xvcjpcInZhcigtLWNvbG9yNylcIn0sXCIuc3RyZWFtVG9vbHMtc2hvd24+I3N0cmVhbVRvb2xzU2V0dGluZ3MsIC5zdHJlYW1Ub29scy1zaG93bj4jc3RyZWFtVG9vbHNTdGF0c1wiOntkaXNwbGF5OlwiYmxvY2tcIn0sXCIjc3RyZWFtVG9vbHNUb2dnbGVcIjp7d2lkdGg6XCIxMDAlXCJ9LFwiI3F1YWxpdHlTdGF0dXNcIjp7Zm9udFNpemU6XCIzN3B4XCIscGFkZGluZ1JpZ2h0OlwiNHB4XCJ9LFwiLnN2Z0ljb25cIjp7ZmlsbDpcInZhcigtLWNvbG9yMilcIn19O2NvbnN0e2N1c3RvbVN0eWxlczplLGxpZ2h0TW9kZVBhbGV0dGU6cyxkYXJrTW9kZVBhbGV0dGU6aX09bnVsbCE9dD90Ont9LG49e3BsdWdpbnM6WygwLFUuZGVmYXVsdCkoKSwoMCxELmRlZmF1bHQpKCldfTtCLmRlZmF1bHQuc2V0dXAobiksdGhpcy5jdXN0b21TdHlsZXM9ZSx0aGlzLmxpZ2h0TW9kZVBhbGV0dGU9bnVsbCE9cz9zOnRoaXMuZGVmYXVsdExpZ2h0TW9kZVBhbGV0dGUsdGhpcy5kYXJrTW9kZVBhbGV0dGU9bnVsbCE9aT9pOnRoaXMuZGVmYXVsdERhcmtNb2RlUGFsZXR0ZX1hcHBseVN0eWxlU2hlZXQoKXtCLmRlZmF1bHQuY3JlYXRlU3R5bGVTaGVldCh7XCJAZ2xvYmFsXCI6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuZGVmYXVsdFN0eWxlcyksdGhpcy5jdXN0b21TdHlsZXMpfSkuYXR0YWNoKCl9YXBwbHlQYWxldHRlKHQpe2NvbnN0IGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIjpyb290XCIpO2Uuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yMFwiLHRbXCItLWNvbG9yMFwiXSksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tY29sb3IxXCIsdFtcIi0tY29sb3IxXCJdKSxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvcjJcIix0W1wiLS1jb2xvcjJcIl0pLGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yM1wiLHRbXCItLWNvbG9yM1wiXSksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tY29sb3I0XCIsdFtcIi0tY29sb3I0XCJdKSxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvcjVcIix0W1wiLS1jb2xvcjVcIl0pLGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yNlwiLHRbXCItLWNvbG9yNlwiXSksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tY29sb3I3XCIsdFtcIi0tY29sb3I3XCJdKX1zZXRDb2xvck1vZGUodCl7dD90aGlzLmFwcGx5UGFsZXR0ZSh0aGlzLmxpZ2h0TW9kZVBhbGV0dGUpOnRoaXMuYXBwbHlQYWxldHRlKHRoaXMuZGFya01vZGVQYWxldHRlKX19dmFyIFE9by55bSxXPW8uRVcsWj1vLk14LFg9by5MMyxqPW8ucmwscT1vLk5SLFY9by5mMSxHPW8uSVksSj1vLlJaLFk9by5YWSxLPW8uRmssJD1vLlpoLHR0PW8uZWssZXQ9by5NRyxzdD1vLmdFLGl0PW8udFcsbnQ9by53cjtleHBvcnR7USBhcyBBRktPdmVybGF5LFcgYXMgQWN0aW9uT3ZlcmxheSxaIGFzIEFwcGxpY2F0aW9uLFggYXMgQ29uZmlnVUksaiBhcyBDb25uZWN0T3ZlcmxheSxxIGFzIERpc2Nvbm5lY3RPdmVybGF5LFYgYXMgRXJyb3JPdmVybGF5LEcgYXMgSW5mb092ZXJsYXksSiBhcyBPdmVybGF5QmFzZSxZIGFzIFBpeGVsU3RyZWFtaW5nQXBwbGljYXRpb25TdHlsZSxLIGFzIFBsYXlPdmVybGF5LCQgYXMgU2V0dGluZ1VJQmFzZSx0dCBhcyBTZXR0aW5nVUlGbGFnLGV0IGFzIFNldHRpbmdVSU51bWJlcixzdCBhcyBTZXR0aW5nVUlPcHRpb24saXQgYXMgU2V0dGluZ1VJVGV4dCxudCBhcyBUZXh0T3ZlcmxheX07IiwiLyogZXNsaW50LWRpc2FibGUgbm8tdmFyLCBwcmVmZXItdGVtcGxhdGUgKi9cbnZhciB1cHBlcmNhc2VQYXR0ZXJuID0gL1tBLVpdL2dcbnZhciBtc1BhdHRlcm4gPSAvXm1zLS9cbnZhciBjYWNoZSA9IHt9XG5cbmZ1bmN0aW9uIHRvSHlwaGVuTG93ZXIobWF0Y2gpIHtcbiAgcmV0dXJuICctJyArIG1hdGNoLnRvTG93ZXJDYXNlKClcbn1cblxuZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKG5hbWUpIHtcbiAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgcmV0dXJuIGNhY2hlW25hbWVdXG4gIH1cblxuICB2YXIgaE5hbWUgPSBuYW1lLnJlcGxhY2UodXBwZXJjYXNlUGF0dGVybiwgdG9IeXBoZW5Mb3dlcilcbiAgcmV0dXJuIChjYWNoZVtuYW1lXSA9IG1zUGF0dGVybi50ZXN0KGhOYW1lKSA/ICctJyArIGhOYW1lIDogaE5hbWUpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGh5cGhlbmF0ZVN0eWxlTmFtZVxuIiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5leHBvcnQgdmFyIGlzQnJvd3NlciA9ICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yod2luZG93KSkgPT09IFwib2JqZWN0XCIgJiYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGRvY3VtZW50KSkgPT09ICdvYmplY3QnICYmIGRvY3VtZW50Lm5vZGVUeXBlID09PSA5O1xuXG5leHBvcnQgZGVmYXVsdCBpc0Jyb3dzZXI7XG4iLCJpbXBvcnQgaHlwaGVuYXRlIGZyb20gJ2h5cGhlbmF0ZS1zdHlsZS1uYW1lJztcblxuLyoqXG4gKiBDb252ZXJ0IGNhbWVsIGNhc2VkIHByb3BlcnR5IG5hbWVzIHRvIGRhc2ggc2VwYXJhdGVkLlxuICovXG5cbmZ1bmN0aW9uIGNvbnZlcnRDYXNlKHN0eWxlKSB7XG4gIHZhciBjb252ZXJ0ZWQgPSB7fTtcblxuICBmb3IgKHZhciBwcm9wIGluIHN0eWxlKSB7XG4gICAgdmFyIGtleSA9IHByb3AuaW5kZXhPZignLS0nKSA9PT0gMCA/IHByb3AgOiBoeXBoZW5hdGUocHJvcCk7XG4gICAgY29udmVydGVkW2tleV0gPSBzdHlsZVtwcm9wXTtcbiAgfVxuXG4gIGlmIChzdHlsZS5mYWxsYmFja3MpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZS5mYWxsYmFja3MpKSBjb252ZXJ0ZWQuZmFsbGJhY2tzID0gc3R5bGUuZmFsbGJhY2tzLm1hcChjb252ZXJ0Q2FzZSk7ZWxzZSBjb252ZXJ0ZWQuZmFsbGJhY2tzID0gY29udmVydENhc2Uoc3R5bGUuZmFsbGJhY2tzKTtcbiAgfVxuXG4gIHJldHVybiBjb252ZXJ0ZWQ7XG59XG4vKipcbiAqIEFsbG93IGNhbWVsIGNhc2VkIHByb3BlcnR5IG5hbWVzIGJ5IGNvbnZlcnRpbmcgdGhlbSBiYWNrIHRvIGRhc2hlcml6ZWQuXG4gKi9cblxuXG5mdW5jdGlvbiBjYW1lbENhc2UoKSB7XG4gIGZ1bmN0aW9uIG9uUHJvY2Vzc1N0eWxlKHN0eWxlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAvLyBIYW5kbGUgcnVsZXMgbGlrZSBAZm9udC1mYWNlLCB3aGljaCBjYW4gaGF2ZSBtdWx0aXBsZSBzdHlsZXMgaW4gYW4gYXJyYXlcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdHlsZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgc3R5bGVbaW5kZXhdID0gY29udmVydENhc2Uoc3R5bGVbaW5kZXhdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cblxuICAgIHJldHVybiBjb252ZXJ0Q2FzZShzdHlsZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkNoYW5nZVZhbHVlKHZhbHVlLCBwcm9wLCBydWxlKSB7XG4gICAgaWYgKHByb3AuaW5kZXhPZignLS0nKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHZhciBoeXBoZW5hdGVkUHJvcCA9IGh5cGhlbmF0ZShwcm9wKTsgLy8gVGhlcmUgd2FzIG5vIGNhbWVsIGNhc2UgaW4gcGxhY2VcblxuICAgIGlmIChwcm9wID09PSBoeXBoZW5hdGVkUHJvcCkgcmV0dXJuIHZhbHVlO1xuICAgIHJ1bGUucHJvcChoeXBoZW5hdGVkUHJvcCwgdmFsdWUpOyAvLyBDb3JlIHdpbGwgaWdub3JlIHRoYXQgcHJvcGVydHkgdmFsdWUgd2Ugc2V0IHRoZSBwcm9wZXIgb25lIGFib3ZlLlxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9uUHJvY2Vzc1N0eWxlOiBvblByb2Nlc3NTdHlsZSxcbiAgICBvbkNoYW5nZVZhbHVlOiBvbkNoYW5nZVZhbHVlXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNhbWVsQ2FzZTtcbiIsImltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzJztcbmltcG9ydCB7IFJ1bGVMaXN0IH0gZnJvbSAnanNzJztcblxudmFyIGF0ID0gJ0BnbG9iYWwnO1xudmFyIGF0UHJlZml4ID0gJ0BnbG9iYWwgJztcblxudmFyIEdsb2JhbENvbnRhaW5lclJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBHbG9iYWxDb250YWluZXJSdWxlKGtleSwgc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ2dsb2JhbCc7XG4gICAgdGhpcy5hdCA9IGF0O1xuICAgIHRoaXMuaXNQcm9jZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucnVsZXMgPSBuZXcgUnVsZUxpc3QoX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIHBhcmVudDogdGhpc1xuICAgIH0pKTtcblxuICAgIGZvciAodmFyIHNlbGVjdG9yIGluIHN0eWxlcykge1xuICAgICAgdGhpcy5ydWxlcy5hZGQoc2VsZWN0b3IsIHN0eWxlc1tzZWxlY3Rvcl0pO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMucHJvY2VzcygpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBydWxlLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBHbG9iYWxDb250YWluZXJSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0UnVsZSA9IGZ1bmN0aW9uIGdldFJ1bGUobmFtZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmdldChuYW1lKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuZCByZWdpc3RlciBydWxlLCBydW4gcGx1Z2lucy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUnVsZSA9IGZ1bmN0aW9uIGFkZFJ1bGUobmFtZSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgcnVsZSA9IHRoaXMucnVsZXMuYWRkKG5hbWUsIHN0eWxlLCBvcHRpb25zKTtcbiAgICBpZiAocnVsZSkgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUocnVsZSk7XG4gICAgcmV0dXJuIHJ1bGU7XG4gIH1cbiAgLyoqXG4gICAqIFJlcGxhY2UgcnVsZSwgcnVuIHBsdWdpbnMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlcGxhY2VSdWxlID0gZnVuY3Rpb24gcmVwbGFjZVJ1bGUobmFtZSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbmV3UnVsZSA9IHRoaXMucnVsZXMucmVwbGFjZShuYW1lLCBzdHlsZSwgb3B0aW9ucyk7XG4gICAgaWYgKG5ld1J1bGUpIHRoaXMub3B0aW9ucy5qc3MucGx1Z2lucy5vblByb2Nlc3NSdWxlKG5ld1J1bGUpO1xuICAgIHJldHVybiBuZXdSdWxlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaW5kZXggb2YgYSBydWxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZihydWxlKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXMuaW5kZXhPZihydWxlKTtcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgQ1NTIHN0cmluZy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXMudG9TdHJpbmcob3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIEdsb2JhbENvbnRhaW5lclJ1bGU7XG59KCk7XG5cbnZhciBHbG9iYWxQcmVmaXhlZFJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBHbG9iYWxQcmVmaXhlZFJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICdnbG9iYWwnO1xuICAgIHRoaXMuYXQgPSBhdDtcbiAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB2YXIgc2VsZWN0b3IgPSBrZXkuc3Vic3RyKGF0UHJlZml4Lmxlbmd0aCk7XG4gICAgdGhpcy5ydWxlID0gb3B0aW9ucy5qc3MuY3JlYXRlUnVsZShzZWxlY3Rvciwgc3R5bGUsIF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBwYXJlbnQ6IHRoaXNcbiAgICB9KSk7XG4gIH1cblxuICB2YXIgX3Byb3RvMiA9IEdsb2JhbFByZWZpeGVkUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlID8gdGhpcy5ydWxlLnRvU3RyaW5nKG9wdGlvbnMpIDogJyc7XG4gIH07XG5cbiAgcmV0dXJuIEdsb2JhbFByZWZpeGVkUnVsZTtcbn0oKTtcblxudmFyIHNlcGFyYXRvclJlZ0V4cCA9IC9cXHMqLFxccyovZztcblxuZnVuY3Rpb24gYWRkU2NvcGUoc2VsZWN0b3IsIHNjb3BlKSB7XG4gIHZhciBwYXJ0cyA9IHNlbGVjdG9yLnNwbGl0KHNlcGFyYXRvclJlZ0V4cCk7XG4gIHZhciBzY29wZWQgPSAnJztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgc2NvcGVkICs9IHNjb3BlICsgXCIgXCIgKyBwYXJ0c1tpXS50cmltKCk7XG4gICAgaWYgKHBhcnRzW2kgKyAxXSkgc2NvcGVkICs9ICcsICc7XG4gIH1cblxuICByZXR1cm4gc2NvcGVkO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOZXN0ZWRHbG9iYWxDb250YWluZXJSdWxlKHJ1bGUsIHNoZWV0KSB7XG4gIHZhciBvcHRpb25zID0gcnVsZS5vcHRpb25zLFxuICAgICAgc3R5bGUgPSBydWxlLnN0eWxlO1xuICB2YXIgcnVsZXMgPSBzdHlsZSA/IHN0eWxlW2F0XSA6IG51bGw7XG4gIGlmICghcnVsZXMpIHJldHVybjtcblxuICBmb3IgKHZhciBuYW1lIGluIHJ1bGVzKSB7XG4gICAgc2hlZXQuYWRkUnVsZShuYW1lLCBydWxlc1tuYW1lXSwgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIHNlbGVjdG9yOiBhZGRTY29wZShuYW1lLCBydWxlLnNlbGVjdG9yKVxuICAgIH0pKTtcbiAgfVxuXG4gIGRlbGV0ZSBzdHlsZVthdF07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByZWZpeGVkR2xvYmFsUnVsZShydWxlLCBzaGVldCkge1xuICB2YXIgb3B0aW9ucyA9IHJ1bGUub3B0aW9ucyxcbiAgICAgIHN0eWxlID0gcnVsZS5zdHlsZTtcblxuICBmb3IgKHZhciBwcm9wIGluIHN0eWxlKSB7XG4gICAgaWYgKHByb3BbMF0gIT09ICdAJyB8fCBwcm9wLnN1YnN0cigwLCBhdC5sZW5ndGgpICE9PSBhdCkgY29udGludWU7XG4gICAgdmFyIHNlbGVjdG9yID0gYWRkU2NvcGUocHJvcC5zdWJzdHIoYXQubGVuZ3RoKSwgcnVsZS5zZWxlY3Rvcik7XG4gICAgc2hlZXQuYWRkUnVsZShzZWxlY3Rvciwgc3R5bGVbcHJvcF0sIF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBzZWxlY3Rvcjogc2VsZWN0b3JcbiAgICB9KSk7XG4gICAgZGVsZXRlIHN0eWxlW3Byb3BdO1xuICB9XG59XG4vKipcbiAqIENvbnZlcnQgbmVzdGVkIHJ1bGVzIHRvIHNlcGFyYXRlLCByZW1vdmUgdGhlbSBmcm9tIG9yaWdpbmFsIHN0eWxlcy5cbiAqL1xuXG5cbmZ1bmN0aW9uIGpzc0dsb2JhbCgpIHtcbiAgZnVuY3Rpb24gb25DcmVhdGVSdWxlKG5hbWUsIHN0eWxlcywgb3B0aW9ucykge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAobmFtZSA9PT0gYXQpIHtcbiAgICAgIHJldHVybiBuZXcgR2xvYmFsQ29udGFpbmVyUnVsZShuYW1lLCBzdHlsZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGlmIChuYW1lWzBdID09PSAnQCcgJiYgbmFtZS5zdWJzdHIoMCwgYXRQcmVmaXgubGVuZ3RoKSA9PT0gYXRQcmVmaXgpIHtcbiAgICAgIHJldHVybiBuZXcgR2xvYmFsUHJlZml4ZWRSdWxlKG5hbWUsIHN0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC50eXBlID09PSAnZ2xvYmFsJyB8fCBwYXJlbnQub3B0aW9ucy5wYXJlbnQgJiYgcGFyZW50Lm9wdGlvbnMucGFyZW50LnR5cGUgPT09ICdnbG9iYWwnKSB7XG4gICAgICAgIG9wdGlvbnMuc2NvcGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLnNlbGVjdG9yICYmIG9wdGlvbnMuc2NvcGVkID09PSBmYWxzZSkge1xuICAgICAgb3B0aW9ucy5zZWxlY3RvciA9IG5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBvblByb2Nlc3NSdWxlKHJ1bGUsIHNoZWV0KSB7XG4gICAgaWYgKHJ1bGUudHlwZSAhPT0gJ3N0eWxlJyB8fCAhc2hlZXQpIHJldHVybjtcbiAgICBoYW5kbGVOZXN0ZWRHbG9iYWxDb250YWluZXJSdWxlKHJ1bGUsIHNoZWV0KTtcbiAgICBoYW5kbGVQcmVmaXhlZEdsb2JhbFJ1bGUocnVsZSwgc2hlZXQpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvbkNyZWF0ZVJ1bGU6IG9uQ3JlYXRlUnVsZSxcbiAgICBvblByb2Nlc3NSdWxlOiBvblByb2Nlc3NSdWxlXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGpzc0dsb2JhbDtcbiIsImltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzJztcbmltcG9ydCBpc0luQnJvd3NlciBmcm9tICdpcy1pbi1icm93c2VyJztcbmltcG9ydCB3YXJuaW5nIGZyb20gJ3Rpbnktd2FybmluZyc7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzJztcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlJztcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZCc7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSc7XG5cbnZhciBwbGFpbk9iamVjdENvbnN0cnVyY3RvciA9IHt9LmNvbnN0cnVjdG9yO1xuZnVuY3Rpb24gY2xvbmVTdHlsZShzdHlsZSkge1xuICBpZiAoc3R5bGUgPT0gbnVsbCB8fCB0eXBlb2Ygc3R5bGUgIT09ICdvYmplY3QnKSByZXR1cm4gc3R5bGU7XG4gIGlmIChBcnJheS5pc0FycmF5KHN0eWxlKSkgcmV0dXJuIHN0eWxlLm1hcChjbG9uZVN0eWxlKTtcbiAgaWYgKHN0eWxlLmNvbnN0cnVjdG9yICE9PSBwbGFpbk9iamVjdENvbnN0cnVyY3RvcikgcmV0dXJuIHN0eWxlO1xuICB2YXIgbmV3U3R5bGUgPSB7fTtcblxuICBmb3IgKHZhciBuYW1lIGluIHN0eWxlKSB7XG4gICAgbmV3U3R5bGVbbmFtZV0gPSBjbG9uZVN0eWxlKHN0eWxlW25hbWVdKTtcbiAgfVxuXG4gIHJldHVybiBuZXdTdHlsZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBydWxlIGluc3RhbmNlLlxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZVJ1bGUobmFtZSwgZGVjbCwgb3B0aW9ucykge1xuICBpZiAobmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgbmFtZSA9ICd1bm5hbWVkJztcbiAgfVxuXG4gIHZhciBqc3MgPSBvcHRpb25zLmpzcztcbiAgdmFyIGRlY2xDb3B5ID0gY2xvbmVTdHlsZShkZWNsKTtcbiAgdmFyIHJ1bGUgPSBqc3MucGx1Z2lucy5vbkNyZWF0ZVJ1bGUobmFtZSwgZGVjbENvcHksIG9wdGlvbnMpO1xuICBpZiAocnVsZSkgcmV0dXJuIHJ1bGU7IC8vIEl0IGlzIGFuIGF0LXJ1bGUgYW5kIGl0IGhhcyBubyBpbnN0YW5jZS5cblxuICBpZiAobmFtZVswXSA9PT0gJ0AnKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBVbmtub3duIHJ1bGUgXCIgKyBuYW1lKSA6IHZvaWQgMDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG52YXIgam9pbiA9IGZ1bmN0aW9uIGpvaW4odmFsdWUsIGJ5KSB7XG4gIHZhciByZXN1bHQgPSAnJztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gUmVtb3ZlICFpbXBvcnRhbnQgZnJvbSB0aGUgdmFsdWUsIGl0IHdpbGwgYmUgcmVhZGRlZCBsYXRlci5cbiAgICBpZiAodmFsdWVbaV0gPT09ICchaW1wb3J0YW50JykgYnJlYWs7XG4gICAgaWYgKHJlc3VsdCkgcmVzdWx0ICs9IGJ5O1xuICAgIHJlc3VsdCArPSB2YWx1ZVtpXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBKU1MgYXJyYXkgdmFsdWUgdG8gYSBDU1Mgc3RyaW5nLlxuICpcbiAqIGBtYXJnaW46IFtbJzVweCcsICcxMHB4J11dYCA+IGBtYXJnaW46IDVweCAxMHB4O2BcbiAqIGBib3JkZXI6IFsnMXB4JywgJzJweCddYCA+IGBib3JkZXI6IDFweCwgMnB4O2BcbiAqIGBtYXJnaW46IFtbJzVweCcsICcxMHB4J10sICchaW1wb3J0YW50J11gID4gYG1hcmdpbjogNXB4IDEwcHggIWltcG9ydGFudDtgXG4gKiBgY29sb3I6IFsncmVkJywgIWltcG9ydGFudF1gID4gYGNvbG9yOiByZWQgIWltcG9ydGFudDtgXG4gKi9cblxuXG52YXIgdG9Dc3NWYWx1ZSA9IGZ1bmN0aW9uIHRvQ3NzVmFsdWUodmFsdWUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICB2YXIgY3NzVmFsdWUgPSAnJzsgLy8gU3VwcG9ydCBzcGFjZSBzZXBhcmF0ZWQgdmFsdWVzIHZpYSBgW1snNXB4JywgJzEwcHgnXV1gLlxuXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlWzBdKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZVtpXSA9PT0gJyFpbXBvcnRhbnQnKSBicmVhaztcbiAgICAgIGlmIChjc3NWYWx1ZSkgY3NzVmFsdWUgKz0gJywgJztcbiAgICAgIGNzc1ZhbHVlICs9IGpvaW4odmFsdWVbaV0sICcgJyk7XG4gICAgfVxuICB9IGVsc2UgY3NzVmFsdWUgPSBqb2luKHZhbHVlLCAnLCAnKTsgLy8gQWRkICFpbXBvcnRhbnQsIGJlY2F1c2UgaXQgd2FzIGlnbm9yZWQuXG5cblxuICBpZiAodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT09ICchaW1wb3J0YW50Jykge1xuICAgIGNzc1ZhbHVlICs9ICcgIWltcG9ydGFudCc7XG4gIH1cblxuICByZXR1cm4gY3NzVmFsdWU7XG59O1xuXG5mdW5jdGlvbiBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZm9ybWF0ID09PSBmYWxzZSkge1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lYnJlYWs6ICcnLFxuICAgICAgc3BhY2U6ICcnXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGluZWJyZWFrOiAnXFxuJyxcbiAgICBzcGFjZTogJyAnXG4gIH07XG59XG5cbi8qKlxuICogSW5kZW50IGEgc3RyaW5nLlxuICogaHR0cDovL2pzcGVyZi5jb20vYXJyYXktam9pbi12cy1mb3JcbiAqL1xuXG5mdW5jdGlvbiBpbmRlbnRTdHIoc3RyLCBpbmRlbnQpIHtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBpbmRlbnQ7IGluZGV4KyspIHtcbiAgICByZXN1bHQgKz0gJyAgJztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQgKyBzdHI7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgUnVsZSB0byBDU1Mgc3RyaW5nLlxuICovXG5cblxuZnVuY3Rpb24gdG9Dc3Moc2VsZWN0b3IsIHN0eWxlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gJyc7XG4gIGlmICghc3R5bGUpIHJldHVybiByZXN1bHQ7XG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRpbmRlbnQgPSBfb3B0aW9ucy5pbmRlbnQsXG4gICAgICBpbmRlbnQgPSBfb3B0aW9ucyRpbmRlbnQgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9ucyRpbmRlbnQ7XG4gIHZhciBmYWxsYmFja3MgPSBzdHlsZS5mYWxsYmFja3M7XG5cbiAgaWYgKG9wdGlvbnMuZm9ybWF0ID09PSBmYWxzZSkge1xuICAgIGluZGVudCA9IC1JbmZpbml0eTtcbiAgfVxuXG4gIHZhciBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMgPSBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSxcbiAgICAgIGxpbmVicmVhayA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5saW5lYnJlYWssXG4gICAgICBzcGFjZSA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5zcGFjZTtcblxuICBpZiAoc2VsZWN0b3IpIGluZGVudCsrOyAvLyBBcHBseSBmYWxsYmFja3MgZmlyc3QuXG5cbiAgaWYgKGZhbGxiYWNrcykge1xuICAgIC8vIEFycmF5IHN5bnRheCB7ZmFsbGJhY2tzOiBbe3Byb3A6IHZhbHVlfV19XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmFsbGJhY2tzKSkge1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGZhbGxiYWNrcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIGZhbGxiYWNrID0gZmFsbGJhY2tzW2luZGV4XTtcblxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGZhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZmFsbGJhY2tbcHJvcF07XG5cbiAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkgcmVzdWx0ICs9IGxpbmVicmVhaztcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbmRlbnRTdHIocHJvcCArIFwiOlwiICsgc3BhY2UgKyB0b0Nzc1ZhbHVlKHZhbHVlKSArIFwiO1wiLCBpbmRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPYmplY3Qgc3ludGF4IHtmYWxsYmFja3M6IHtwcm9wOiB2YWx1ZX19XG4gICAgICBmb3IgKHZhciBfcHJvcCBpbiBmYWxsYmFja3MpIHtcbiAgICAgICAgdmFyIF92YWx1ZSA9IGZhbGxiYWNrc1tfcHJvcF07XG5cbiAgICAgICAgaWYgKF92YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCkgcmVzdWx0ICs9IGxpbmVicmVhaztcbiAgICAgICAgICByZXN1bHQgKz0gaW5kZW50U3RyKF9wcm9wICsgXCI6XCIgKyBzcGFjZSArIHRvQ3NzVmFsdWUoX3ZhbHVlKSArIFwiO1wiLCBpbmRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgX3Byb3AyIGluIHN0eWxlKSB7XG4gICAgdmFyIF92YWx1ZTIgPSBzdHlsZVtfcHJvcDJdO1xuXG4gICAgaWYgKF92YWx1ZTIgIT0gbnVsbCAmJiBfcHJvcDIgIT09ICdmYWxsYmFja3MnKSB7XG4gICAgICBpZiAocmVzdWx0KSByZXN1bHQgKz0gbGluZWJyZWFrO1xuICAgICAgcmVzdWx0ICs9IGluZGVudFN0cihfcHJvcDIgKyBcIjpcIiArIHNwYWNlICsgdG9Dc3NWYWx1ZShfdmFsdWUyKSArIFwiO1wiLCBpbmRlbnQpO1xuICAgIH1cbiAgfSAvLyBBbGxvdyBlbXB0eSBzdHlsZSBpbiB0aGlzIGNhc2UsIGJlY2F1c2UgcHJvcGVydGllcyB3aWxsIGJlIGFkZGVkIGR5bmFtaWNhbGx5LlxuXG5cbiAgaWYgKCFyZXN1bHQgJiYgIW9wdGlvbnMuYWxsb3dFbXB0eSkgcmV0dXJuIHJlc3VsdDsgLy8gV2hlbiBydWxlIGlzIGJlaW5nIHN0cmluZ2lmaWVkIGJlZm9yZSBzZWxlY3RvciB3YXMgZGVmaW5lZC5cblxuICBpZiAoIXNlbGVjdG9yKSByZXR1cm4gcmVzdWx0O1xuICBpbmRlbnQtLTtcbiAgaWYgKHJlc3VsdCkgcmVzdWx0ID0gXCJcIiArIGxpbmVicmVhayArIHJlc3VsdCArIGxpbmVicmVhaztcbiAgcmV0dXJuIGluZGVudFN0cihcIlwiICsgc2VsZWN0b3IgKyBzcGFjZSArIFwie1wiICsgcmVzdWx0LCBpbmRlbnQpICsgaW5kZW50U3RyKCd9JywgaW5kZW50KTtcbn1cblxudmFyIGVzY2FwZVJlZ2V4ID0gLyhbW1xcXS4jKiQ+PCt+PXxeOigpLFwiJ2BcXHNdKS9nO1xudmFyIG5hdGl2ZUVzY2FwZSA9IHR5cGVvZiBDU1MgIT09ICd1bmRlZmluZWQnICYmIENTUy5lc2NhcGU7XG52YXIgZXNjYXBlID0gKGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIG5hdGl2ZUVzY2FwZSA/IG5hdGl2ZUVzY2FwZShzdHIpIDogc3RyLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcbn0pO1xuXG52YXIgQmFzZVN0eWxlUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJhc2VTdHlsZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICdzdHlsZSc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHZhciBzaGVldCA9IG9wdGlvbnMuc2hlZXQsXG4gICAgICAgIFJlbmRlcmVyID0gb3B0aW9ucy5SZW5kZXJlcjtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICBpZiAoc2hlZXQpIHRoaXMucmVuZGVyZXIgPSBzaGVldC5yZW5kZXJlcjtlbHNlIGlmIChSZW5kZXJlcikgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcigpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb3Igc2V0IGEgc3R5bGUgcHJvcGVydHkuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEJhc2VTdHlsZVJ1bGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5wcm9wID0gZnVuY3Rpb24gcHJvcChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIC8vIEl0J3MgYSBnZXR0ZXIuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLnN0eWxlW25hbWVdOyAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGUgdmFsdWUgaGFzIG5vdCBjaGFuZ2VkLlxuXG4gICAgdmFyIGZvcmNlID0gb3B0aW9ucyA/IG9wdGlvbnMuZm9yY2UgOiBmYWxzZTtcbiAgICBpZiAoIWZvcmNlICYmIHRoaXMuc3R5bGVbbmFtZV0gPT09IHZhbHVlKSByZXR1cm4gdGhpcztcbiAgICB2YXIgbmV3VmFsdWUgPSB2YWx1ZTtcblxuICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zLnByb2Nlc3MgIT09IGZhbHNlKSB7XG4gICAgICBuZXdWYWx1ZSA9IHRoaXMub3B0aW9ucy5qc3MucGx1Z2lucy5vbkNoYW5nZVZhbHVlKHZhbHVlLCBuYW1lLCB0aGlzKTtcbiAgICB9XG5cbiAgICB2YXIgaXNFbXB0eSA9IG5ld1ZhbHVlID09IG51bGwgfHwgbmV3VmFsdWUgPT09IGZhbHNlO1xuICAgIHZhciBpc0RlZmluZWQgPSBuYW1lIGluIHRoaXMuc3R5bGU7IC8vIFZhbHVlIGlzIGVtcHR5IGFuZCB3YXNuJ3QgZGVmaW5lZCBiZWZvcmUuXG5cbiAgICBpZiAoaXNFbXB0eSAmJiAhaXNEZWZpbmVkICYmICFmb3JjZSkgcmV0dXJuIHRoaXM7IC8vIFdlIGFyZSBnb2luZyB0byByZW1vdmUgdGhpcyB2YWx1ZS5cblxuICAgIHZhciByZW1vdmUgPSBpc0VtcHR5ICYmIGlzRGVmaW5lZDtcbiAgICBpZiAocmVtb3ZlKSBkZWxldGUgdGhpcy5zdHlsZVtuYW1lXTtlbHNlIHRoaXMuc3R5bGVbbmFtZV0gPSBuZXdWYWx1ZTsgLy8gUmVuZGVyYWJsZSBpcyBkZWZpbmVkIGlmIFN0eWxlU2hlZXQgb3B0aW9uIGBsaW5rYCBpcyB0cnVlLlxuXG4gICAgaWYgKHRoaXMucmVuZGVyYWJsZSAmJiB0aGlzLnJlbmRlcmVyKSB7XG4gICAgICBpZiAocmVtb3ZlKSB0aGlzLnJlbmRlcmVyLnJlbW92ZVByb3BlcnR5KHRoaXMucmVuZGVyYWJsZSwgbmFtZSk7ZWxzZSB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMucmVuZGVyYWJsZSwgbmFtZSwgbmV3VmFsdWUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIHNoZWV0ID0gdGhpcy5vcHRpb25zLnNoZWV0O1xuXG4gICAgaWYgKHNoZWV0ICYmIHNoZWV0LmF0dGFjaGVkKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCAnW0pTU10gUnVsZSBpcyBub3QgbGlua2VkLiBNaXNzaW5nIHNoZWV0IG9wdGlvbiBcImxpbms6IHRydWVcIi4nKSA6IHZvaWQgMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gQmFzZVN0eWxlUnVsZTtcbn0oKTtcbnZhciBTdHlsZVJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9CYXNlU3R5bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKFN0eWxlUnVsZSwgX0Jhc2VTdHlsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIFN0eWxlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQmFzZVN0eWxlUnVsZS5jYWxsKHRoaXMsIGtleSwgc3R5bGUsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgdmFyIHNlbGVjdG9yID0gb3B0aW9ucy5zZWxlY3RvcixcbiAgICAgICAgc2NvcGVkID0gb3B0aW9ucy5zY29wZWQsXG4gICAgICAgIHNoZWV0ID0gb3B0aW9ucy5zaGVldCxcbiAgICAgICAgZ2VuZXJhdGVJZCA9IG9wdGlvbnMuZ2VuZXJhdGVJZDtcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgX3RoaXMuc2VsZWN0b3JUZXh0ID0gc2VsZWN0b3I7XG4gICAgfSBlbHNlIGlmIChzY29wZWQgIT09IGZhbHNlKSB7XG4gICAgICBfdGhpcy5pZCA9IGdlbmVyYXRlSWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIHNoZWV0KTtcbiAgICAgIF90aGlzLnNlbGVjdG9yVGV4dCA9IFwiLlwiICsgZXNjYXBlKF90aGlzLmlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBzZWxlY3RvciBzdHJpbmcuXG4gICAqIEF0dGVudGlvbjogdXNlIHRoaXMgd2l0aCBjYXV0aW9uLiBNb3N0IGJyb3dzZXJzIGRpZG4ndCBpbXBsZW1lbnRcbiAgICogc2VsZWN0b3JUZXh0IHNldHRlciwgc28gdGhpcyBtYXkgcmVzdWx0IGluIHJlcmVuZGVyaW5nIG9mIGVudGlyZSBTdHlsZSBTaGVldC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvMiA9IFN0eWxlUnVsZS5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIEFwcGx5IHJ1bGUgdG8gYW4gZWxlbWVudCBpbmxpbmUuXG4gICAqL1xuICBfcHJvdG8yLmFwcGx5VG8gPSBmdW5jdGlvbiBhcHBseVRvKHJlbmRlcmFibGUpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuXG4gICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICB2YXIganNvbiA9IHRoaXMudG9KU09OKCk7XG5cbiAgICAgIGZvciAodmFyIHByb3AgaW4ganNvbikge1xuICAgICAgICByZW5kZXJlci5zZXRQcm9wZXJ0eShyZW5kZXJhYmxlLCBwcm9wLCBqc29uW3Byb3BdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydWxlLlxuICAgKiBGYWxsYmFja3MgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAqIFVzZWZ1bCBmb3IgaW5saW5lIHN0eWxlcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8yLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICB2YXIganNvbiA9IHt9O1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiB0aGlzLnN0eWxlKSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLnN0eWxlW3Byb3BdO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIGpzb25bcHJvcF0gPSB2YWx1ZTtlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkganNvbltwcm9wXSA9IHRvQ3NzVmFsdWUodmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBqc29uO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90bzIudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgdmFyIHNoZWV0ID0gdGhpcy5vcHRpb25zLnNoZWV0O1xuICAgIHZhciBsaW5rID0gc2hlZXQgPyBzaGVldC5vcHRpb25zLmxpbmsgOiBmYWxzZTtcbiAgICB2YXIgb3B0cyA9IGxpbmsgPyBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgYWxsb3dFbXB0eTogdHJ1ZVxuICAgIH0pIDogb3B0aW9ucztcbiAgICByZXR1cm4gdG9Dc3ModGhpcy5zZWxlY3RvclRleHQsIHRoaXMuc3R5bGUsIG9wdHMpO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhTdHlsZVJ1bGUsIFt7XG4gICAga2V5OiBcInNlbGVjdG9yXCIsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQoc2VsZWN0b3IpIHtcbiAgICAgIGlmIChzZWxlY3RvciA9PT0gdGhpcy5zZWxlY3RvclRleHQpIHJldHVybjtcbiAgICAgIHRoaXMuc2VsZWN0b3JUZXh0ID0gc2VsZWN0b3I7XG4gICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyLFxuICAgICAgICAgIHJlbmRlcmFibGUgPSB0aGlzLnJlbmRlcmFibGU7XG4gICAgICBpZiAoIXJlbmRlcmFibGUgfHwgIXJlbmRlcmVyKSByZXR1cm47XG4gICAgICB2YXIgaGFzQ2hhbmdlZCA9IHJlbmRlcmVyLnNldFNlbGVjdG9yKHJlbmRlcmFibGUsIHNlbGVjdG9yKTsgLy8gSWYgc2VsZWN0b3Igc2V0dGVyIGlzIG5vdCBpbXBsZW1lbnRlZCwgcmVyZW5kZXIgdGhlIHJ1bGUuXG5cbiAgICAgIGlmICghaGFzQ2hhbmdlZCkge1xuICAgICAgICByZW5kZXJlci5yZXBsYWNlUnVsZShyZW5kZXJhYmxlLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHNlbGVjdG9yIHN0cmluZy5cbiAgICAgKi9cbiAgICAsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RvclRleHQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN0eWxlUnVsZTtcbn0oQmFzZVN0eWxlUnVsZSk7XG52YXIgcGx1Z2luU3R5bGVSdWxlID0ge1xuICBvbkNyZWF0ZVJ1bGU6IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKGtleVswXSA9PT0gJ0AnIHx8IG9wdGlvbnMucGFyZW50ICYmIG9wdGlvbnMucGFyZW50LnR5cGUgPT09ICdrZXlmcmFtZXMnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN0eWxlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKTtcbiAgfVxufTtcblxudmFyIGRlZmF1bHRUb1N0cmluZ09wdGlvbnMgPSB7XG4gIGluZGVudDogMSxcbiAgY2hpbGRyZW46IHRydWVcbn07XG52YXIgYXRSZWdFeHAgPSAvQChbXFx3LV0rKS87XG4vKipcbiAqIENvbmRpdGlvbmFsIHJ1bGUgZm9yIEBtZWRpYSwgQHN1cHBvcnRzXG4gKi9cblxudmFyIENvbmRpdGlvbmFsUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENvbmRpdGlvbmFsUnVsZShrZXksIHN0eWxlcywgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICdjb25kaXRpb25hbCc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHZhciBhdE1hdGNoID0ga2V5Lm1hdGNoKGF0UmVnRXhwKTtcbiAgICB0aGlzLmF0ID0gYXRNYXRjaCA/IGF0TWF0Y2hbMV0gOiAndW5rbm93bic7IC8vIEtleSBtaWdodCBjb250YWluIGEgdW5pcXVlIHN1ZmZpeCBpbiBjYXNlIHRoZSBgbmFtZWAgcGFzc2VkIGJ5IHVzZXIgd2FzIGR1cGxpY2F0ZS5cblxuICAgIHRoaXMucXVlcnkgPSBvcHRpb25zLm5hbWUgfHwgXCJAXCIgKyB0aGlzLmF0O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5ydWxlcyA9IG5ldyBSdWxlTGlzdChfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgcGFyZW50OiB0aGlzXG4gICAgfSkpO1xuXG4gICAgZm9yICh2YXIgbmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIHRoaXMucnVsZXMuYWRkKG5hbWUsIHN0eWxlc1tuYW1lXSk7XG4gICAgfVxuXG4gICAgdGhpcy5ydWxlcy5wcm9jZXNzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHJ1bGUuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IENvbmRpdGlvbmFsUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmdldFJ1bGUgPSBmdW5jdGlvbiBnZXRSdWxlKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy5nZXQobmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBpbmRleCBvZiBhIHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKHJ1bGUpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy5pbmRleE9mKHJ1bGUpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHJlZ2lzdGVyIHJ1bGUsIHJ1biBwbHVnaW5zLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRSdWxlID0gZnVuY3Rpb24gYWRkUnVsZShuYW1lLCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHZhciBydWxlID0gdGhpcy5ydWxlcy5hZGQobmFtZSwgc3R5bGUsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkgcmV0dXJuIG51bGw7XG4gICAgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUocnVsZSk7XG4gICAgcmV0dXJuIHJ1bGU7XG4gIH1cbiAgLyoqXG4gICAqIFJlcGxhY2UgcnVsZSwgcnVuIHBsdWdpbnMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlcGxhY2VSdWxlID0gZnVuY3Rpb24gcmVwbGFjZVJ1bGUobmFtZSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbmV3UnVsZSA9IHRoaXMucnVsZXMucmVwbGFjZShuYW1lLCBzdHlsZSwgb3B0aW9ucyk7XG4gICAgaWYgKG5ld1J1bGUpIHRoaXMub3B0aW9ucy5qc3MucGx1Z2lucy5vblByb2Nlc3NSdWxlKG5ld1J1bGUpO1xuICAgIHJldHVybiBuZXdSdWxlO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdFRvU3RyaW5nT3B0aW9ucztcbiAgICB9XG5cbiAgICB2YXIgX2dldFdoaXRlc3BhY2VTeW1ib2xzID0gZ2V0V2hpdGVzcGFjZVN5bWJvbHMob3B0aW9ucyksXG4gICAgICAgIGxpbmVicmVhayA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5saW5lYnJlYWs7XG5cbiAgICBpZiAob3B0aW9ucy5pbmRlbnQgPT0gbnVsbCkgb3B0aW9ucy5pbmRlbnQgPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zLmluZGVudDtcbiAgICBpZiAob3B0aW9ucy5jaGlsZHJlbiA9PSBudWxsKSBvcHRpb25zLmNoaWxkcmVuID0gZGVmYXVsdFRvU3RyaW5nT3B0aW9ucy5jaGlsZHJlbjtcblxuICAgIGlmIChvcHRpb25zLmNoaWxkcmVuID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRoaXMucXVlcnkgKyBcIiB7fVwiO1xuICAgIH1cblxuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucnVsZXMudG9TdHJpbmcob3B0aW9ucyk7XG4gICAgcmV0dXJuIGNoaWxkcmVuID8gdGhpcy5xdWVyeSArIFwiIHtcIiArIGxpbmVicmVhayArIGNoaWxkcmVuICsgbGluZWJyZWFrICsgXCJ9XCIgOiAnJztcbiAgfTtcblxuICByZXR1cm4gQ29uZGl0aW9uYWxSdWxlO1xufSgpO1xudmFyIGtleVJlZ0V4cCA9IC9AY29udGFpbmVyfEBtZWRpYXxAc3VwcG9ydHNcXHMrLztcbnZhciBwbHVnaW5Db25kaXRpb25hbFJ1bGUgPSB7XG4gIG9uQ3JlYXRlUnVsZTogZnVuY3Rpb24gb25DcmVhdGVSdWxlKGtleSwgc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGtleVJlZ0V4cC50ZXN0KGtleSkgPyBuZXcgQ29uZGl0aW9uYWxSdWxlKGtleSwgc3R5bGVzLCBvcHRpb25zKSA6IG51bGw7XG4gIH1cbn07XG5cbnZhciBkZWZhdWx0VG9TdHJpbmdPcHRpb25zJDEgPSB7XG4gIGluZGVudDogMSxcbiAgY2hpbGRyZW46IHRydWVcbn07XG52YXIgbmFtZVJlZ0V4cCA9IC9Aa2V5ZnJhbWVzXFxzKyhbXFx3LV0rKS87XG4vKipcbiAqIFJ1bGUgZm9yIEBrZXlmcmFtZXNcbiAqL1xuXG52YXIgS2V5ZnJhbWVzUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEtleWZyYW1lc1J1bGUoa2V5LCBmcmFtZXMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnR5cGUgPSAna2V5ZnJhbWVzJztcbiAgICB0aGlzLmF0ID0gJ0BrZXlmcmFtZXMnO1xuICAgIHRoaXMuaXNQcm9jZXNzZWQgPSBmYWxzZTtcbiAgICB2YXIgbmFtZU1hdGNoID0ga2V5Lm1hdGNoKG5hbWVSZWdFeHApO1xuXG4gICAgaWYgKG5hbWVNYXRjaCAmJiBuYW1lTWF0Y2hbMV0pIHtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWVNYXRjaFsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5uYW1lID0gJ25vbmFtZSc7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIEJhZCBrZXlmcmFtZXMgbmFtZSBcIiArIGtleSkgOiB2b2lkIDA7XG4gICAgfVxuXG4gICAgdGhpcy5rZXkgPSB0aGlzLnR5cGUgKyBcIi1cIiArIHRoaXMubmFtZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHZhciBzY29wZWQgPSBvcHRpb25zLnNjb3BlZCxcbiAgICAgICAgc2hlZXQgPSBvcHRpb25zLnNoZWV0LFxuICAgICAgICBnZW5lcmF0ZUlkID0gb3B0aW9ucy5nZW5lcmF0ZUlkO1xuICAgIHRoaXMuaWQgPSBzY29wZWQgPT09IGZhbHNlID8gdGhpcy5uYW1lIDogZXNjYXBlKGdlbmVyYXRlSWQodGhpcywgc2hlZXQpKTtcbiAgICB0aGlzLnJ1bGVzID0gbmV3IFJ1bGVMaXN0KF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBwYXJlbnQ6IHRoaXNcbiAgICB9KSk7XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIGZyYW1lcykge1xuICAgICAgdGhpcy5ydWxlcy5hZGQobmFtZSwgZnJhbWVzW25hbWVdLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgICBwYXJlbnQ6IHRoaXNcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICB0aGlzLnJ1bGVzLnByb2Nlc3MoKTtcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgQ1NTIHN0cmluZy5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gS2V5ZnJhbWVzUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zJDE7XG4gICAgfVxuXG4gICAgdmFyIF9nZXRXaGl0ZXNwYWNlU3ltYm9scyA9IGdldFdoaXRlc3BhY2VTeW1ib2xzKG9wdGlvbnMpLFxuICAgICAgICBsaW5lYnJlYWsgPSBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMubGluZWJyZWFrO1xuXG4gICAgaWYgKG9wdGlvbnMuaW5kZW50ID09IG51bGwpIG9wdGlvbnMuaW5kZW50ID0gZGVmYXVsdFRvU3RyaW5nT3B0aW9ucyQxLmluZGVudDtcbiAgICBpZiAob3B0aW9ucy5jaGlsZHJlbiA9PSBudWxsKSBvcHRpb25zLmNoaWxkcmVuID0gZGVmYXVsdFRvU3RyaW5nT3B0aW9ucyQxLmNoaWxkcmVuO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hpbGRyZW4gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdCArIFwiIFwiICsgdGhpcy5pZCArIFwiIHt9XCI7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5ydWxlcy50b1N0cmluZyhvcHRpb25zKTtcbiAgICBpZiAoY2hpbGRyZW4pIGNoaWxkcmVuID0gXCJcIiArIGxpbmVicmVhayArIGNoaWxkcmVuICsgbGluZWJyZWFrO1xuICAgIHJldHVybiB0aGlzLmF0ICsgXCIgXCIgKyB0aGlzLmlkICsgXCIge1wiICsgY2hpbGRyZW4gKyBcIn1cIjtcbiAgfTtcblxuICByZXR1cm4gS2V5ZnJhbWVzUnVsZTtcbn0oKTtcbnZhciBrZXlSZWdFeHAkMSA9IC9Aa2V5ZnJhbWVzXFxzKy87XG52YXIgcmVmUmVnRXhwID0gL1xcJChbXFx3LV0rKS9nO1xuXG52YXIgZmluZFJlZmVyZW5jZWRLZXlmcmFtZSA9IGZ1bmN0aW9uIGZpbmRSZWZlcmVuY2VkS2V5ZnJhbWUodmFsLCBrZXlmcmFtZXMpIHtcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbC5yZXBsYWNlKHJlZlJlZ0V4cCwgZnVuY3Rpb24gKG1hdGNoLCBuYW1lKSB7XG4gICAgICBpZiAobmFtZSBpbiBrZXlmcmFtZXMpIHtcbiAgICAgICAgcmV0dXJuIGtleWZyYW1lc1tuYW1lXTtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBSZWZlcmVuY2VkIGtleWZyYW1lcyBydWxlIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIgaXMgbm90IGRlZmluZWQuXCIpIDogdm9pZCAwO1xuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn07XG4vKipcbiAqIFJlcGxhY2UgdGhlIHJlZmVyZW5jZSBmb3IgYSBhbmltYXRpb24gbmFtZS5cbiAqL1xuXG5cbnZhciByZXBsYWNlUmVmID0gZnVuY3Rpb24gcmVwbGFjZVJlZihzdHlsZSwgcHJvcCwga2V5ZnJhbWVzKSB7XG4gIHZhciB2YWx1ZSA9IHN0eWxlW3Byb3BdO1xuICB2YXIgcmVmS2V5ZnJhbWUgPSBmaW5kUmVmZXJlbmNlZEtleWZyYW1lKHZhbHVlLCBrZXlmcmFtZXMpO1xuXG4gIGlmIChyZWZLZXlmcmFtZSAhPT0gdmFsdWUpIHtcbiAgICBzdHlsZVtwcm9wXSA9IHJlZktleWZyYW1lO1xuICB9XG59O1xuXG52YXIgcGx1Z2luS2V5ZnJhbWVzUnVsZSA9IHtcbiAgb25DcmVhdGVSdWxlOiBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUoa2V5LCBmcmFtZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5UmVnRXhwJDEudGVzdChrZXkpID8gbmV3IEtleWZyYW1lc1J1bGUoa2V5LCBmcmFtZXMsIG9wdGlvbnMpIDogbnVsbDtcbiAgfSxcbiAgLy8gQW5pbWF0aW9uIG5hbWUgcmVmIHJlcGxhY2VyLlxuICBvblByb2Nlc3NTdHlsZTogZnVuY3Rpb24gb25Qcm9jZXNzU3R5bGUoc3R5bGUsIHJ1bGUsIHNoZWV0KSB7XG4gICAgaWYgKHJ1bGUudHlwZSAhPT0gJ3N0eWxlJyB8fCAhc2hlZXQpIHJldHVybiBzdHlsZTtcbiAgICBpZiAoJ2FuaW1hdGlvbi1uYW1lJyBpbiBzdHlsZSkgcmVwbGFjZVJlZihzdHlsZSwgJ2FuaW1hdGlvbi1uYW1lJywgc2hlZXQua2V5ZnJhbWVzKTtcbiAgICBpZiAoJ2FuaW1hdGlvbicgaW4gc3R5bGUpIHJlcGxhY2VSZWYoc3R5bGUsICdhbmltYXRpb24nLCBzaGVldC5rZXlmcmFtZXMpO1xuICAgIHJldHVybiBzdHlsZTtcbiAgfSxcbiAgb25DaGFuZ2VWYWx1ZTogZnVuY3Rpb24gb25DaGFuZ2VWYWx1ZSh2YWwsIHByb3AsIHJ1bGUpIHtcbiAgICB2YXIgc2hlZXQgPSBydWxlLm9wdGlvbnMuc2hlZXQ7XG5cbiAgICBpZiAoIXNoZWV0KSB7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgY2FzZSAnYW5pbWF0aW9uJzpcbiAgICAgICAgcmV0dXJuIGZpbmRSZWZlcmVuY2VkS2V5ZnJhbWUodmFsLCBzaGVldC5rZXlmcmFtZXMpO1xuXG4gICAgICBjYXNlICdhbmltYXRpb24tbmFtZSc6XG4gICAgICAgIHJldHVybiBmaW5kUmVmZXJlbmNlZEtleWZyYW1lKHZhbCwgc2hlZXQua2V5ZnJhbWVzKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBLZXlmcmFtZVJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9CYXNlU3R5bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKEtleWZyYW1lUnVsZSwgX0Jhc2VTdHlsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIEtleWZyYW1lUnVsZSgpIHtcbiAgICByZXR1cm4gX0Jhc2VTdHlsZVJ1bGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEtleWZyYW1lUnVsZS5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIENTUyBzdHJpbmcuXG4gICAqL1xuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgdmFyIHNoZWV0ID0gdGhpcy5vcHRpb25zLnNoZWV0O1xuICAgIHZhciBsaW5rID0gc2hlZXQgPyBzaGVldC5vcHRpb25zLmxpbmsgOiBmYWxzZTtcbiAgICB2YXIgb3B0cyA9IGxpbmsgPyBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgYWxsb3dFbXB0eTogdHJ1ZVxuICAgIH0pIDogb3B0aW9ucztcbiAgICByZXR1cm4gdG9Dc3ModGhpcy5rZXksIHRoaXMuc3R5bGUsIG9wdHMpO1xuICB9O1xuXG4gIHJldHVybiBLZXlmcmFtZVJ1bGU7XG59KEJhc2VTdHlsZVJ1bGUpO1xudmFyIHBsdWdpbktleWZyYW1lUnVsZSA9IHtcbiAgb25DcmVhdGVSdWxlOiBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnBhcmVudCAmJiBvcHRpb25zLnBhcmVudC50eXBlID09PSAna2V5ZnJhbWVzJykge1xuICAgICAgcmV0dXJuIG5ldyBLZXlmcmFtZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbnZhciBGb250RmFjZVJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGb250RmFjZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICdmb250LWZhY2UnO1xuICAgIHRoaXMuYXQgPSAnQGZvbnQtZmFjZSc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBGb250RmFjZVJ1bGUucHJvdG90eXBlO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICB2YXIgX2dldFdoaXRlc3BhY2VTeW1ib2xzID0gZ2V0V2hpdGVzcGFjZVN5bWJvbHMob3B0aW9ucyksXG4gICAgICAgIGxpbmVicmVhayA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5saW5lYnJlYWs7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnN0eWxlKSkge1xuICAgICAgdmFyIHN0ciA9ICcnO1xuXG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zdHlsZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgc3RyICs9IHRvQ3NzKHRoaXMuYXQsIHRoaXMuc3R5bGVbaW5kZXhdKTtcbiAgICAgICAgaWYgKHRoaXMuc3R5bGVbaW5kZXggKyAxXSkgc3RyICs9IGxpbmVicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9Dc3ModGhpcy5hdCwgdGhpcy5zdHlsZSwgb3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIEZvbnRGYWNlUnVsZTtcbn0oKTtcbnZhciBrZXlSZWdFeHAkMiA9IC9AZm9udC1mYWNlLztcbnZhciBwbHVnaW5Gb250RmFjZVJ1bGUgPSB7XG4gIG9uQ3JlYXRlUnVsZTogZnVuY3Rpb24gb25DcmVhdGVSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ga2V5UmVnRXhwJDIudGVzdChrZXkpID8gbmV3IEZvbnRGYWNlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSA6IG51bGw7XG4gIH1cbn07XG5cbnZhciBWaWV3cG9ydFJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBWaWV3cG9ydFJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICd2aWV3cG9ydCc7XG4gICAgdGhpcy5hdCA9ICdAdmlld3BvcnQnO1xuICAgIHRoaXMuaXNQcm9jZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgQ1NTIHN0cmluZy5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gVmlld3BvcnRSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRvQ3NzKHRoaXMua2V5LCB0aGlzLnN0eWxlLCBvcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gVmlld3BvcnRSdWxlO1xufSgpO1xudmFyIHBsdWdpblZpZXdwb3J0UnVsZSA9IHtcbiAgb25DcmVhdGVSdWxlOiBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBrZXkgPT09ICdAdmlld3BvcnQnIHx8IGtleSA9PT0gJ0AtbXMtdmlld3BvcnQnID8gbmV3IFZpZXdwb3J0UnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSA6IG51bGw7XG4gIH1cbn07XG5cbnZhciBTaW1wbGVSdWxlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2ltcGxlUnVsZShrZXksIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ3NpbXBsZSc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5cblxuICB2YXIgX3Byb3RvID0gU2ltcGxlUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICB2YXIgc3RyID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnZhbHVlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzdHIgKz0gdGhpcy5rZXkgKyBcIiBcIiArIHRoaXMudmFsdWVbaW5kZXhdICsgXCI7XCI7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlW2luZGV4ICsgMV0pIHN0ciArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5rZXkgKyBcIiBcIiArIHRoaXMudmFsdWUgKyBcIjtcIjtcbiAgfTtcblxuICByZXR1cm4gU2ltcGxlUnVsZTtcbn0oKTtcbnZhciBrZXlzTWFwID0ge1xuICAnQGNoYXJzZXQnOiB0cnVlLFxuICAnQGltcG9ydCc6IHRydWUsXG4gICdAbmFtZXNwYWNlJzogdHJ1ZVxufTtcbnZhciBwbHVnaW5TaW1wbGVSdWxlID0ge1xuICBvbkNyZWF0ZVJ1bGU6IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShrZXksIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGtleSBpbiBrZXlzTWFwID8gbmV3IFNpbXBsZVJ1bGUoa2V5LCB2YWx1ZSwgb3B0aW9ucykgOiBudWxsO1xuICB9XG59O1xuXG52YXIgcGx1Z2lucyA9IFtwbHVnaW5TdHlsZVJ1bGUsIHBsdWdpbkNvbmRpdGlvbmFsUnVsZSwgcGx1Z2luS2V5ZnJhbWVzUnVsZSwgcGx1Z2luS2V5ZnJhbWVSdWxlLCBwbHVnaW5Gb250RmFjZVJ1bGUsIHBsdWdpblZpZXdwb3J0UnVsZSwgcGx1Z2luU2ltcGxlUnVsZV07XG5cbnZhciBkZWZhdWx0VXBkYXRlT3B0aW9ucyA9IHtcbiAgcHJvY2VzczogdHJ1ZVxufTtcbnZhciBmb3JjZVVwZGF0ZU9wdGlvbnMgPSB7XG4gIGZvcmNlOiB0cnVlLFxuICBwcm9jZXNzOiB0cnVlXG4gIC8qKlxuICAgKiBDb250YWlucyBydWxlcyBvYmplY3RzIGFuZCBhbGxvd3MgYWRkaW5nL3JlbW92aW5nIGV0Yy5cbiAgICogSXMgdXNlZCBmb3IgZS5nLiBieSBgU3R5bGVTaGVldGAgb3IgYENvbmRpdGlvbmFsUnVsZWAuXG4gICAqL1xuXG59O1xuXG52YXIgUnVsZUxpc3QgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICAvLyBSdWxlcyByZWdpc3RyeSBmb3IgYWNjZXNzIGJ5IC5nZXQoKSBtZXRob2QuXG4gIC8vIEl0IGNvbnRhaW5zIHRoZSBzYW1lIHJ1bGUgcmVnaXN0ZXJlZCBieSBuYW1lIGFuZCBieSBzZWxlY3Rvci5cbiAgLy8gT3JpZ2luYWwgc3R5bGVzIG9iamVjdC5cbiAgLy8gVXNlZCB0byBlbnN1cmUgY29ycmVjdCBydWxlcyBvcmRlci5cbiAgZnVuY3Rpb24gUnVsZUxpc3Qob3B0aW9ucykge1xuICAgIHRoaXMubWFwID0ge307XG4gICAgdGhpcy5yYXcgPSB7fTtcbiAgICB0aGlzLmluZGV4ID0gW107XG4gICAgdGhpcy5jb3VudGVyID0gMDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuY2xhc3NlcyA9IG9wdGlvbnMuY2xhc3NlcztcbiAgICB0aGlzLmtleWZyYW1lcyA9IG9wdGlvbnMua2V5ZnJhbWVzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHJlZ2lzdGVyIHJ1bGUuXG4gICAqXG4gICAqIFdpbGwgbm90IHJlbmRlciBhZnRlciBTdHlsZSBTaGVldCB3YXMgcmVuZGVyZWQgdGhlIGZpcnN0IHRpbWUuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFJ1bGVMaXN0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uYWRkID0gZnVuY3Rpb24gYWRkKG5hbWUsIGRlY2wsIHJ1bGVPcHRpb25zKSB7XG4gICAgdmFyIF90aGlzJG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHBhcmVudCA9IF90aGlzJG9wdGlvbnMucGFyZW50LFxuICAgICAgICBzaGVldCA9IF90aGlzJG9wdGlvbnMuc2hlZXQsXG4gICAgICAgIGpzcyA9IF90aGlzJG9wdGlvbnMuanNzLFxuICAgICAgICBSZW5kZXJlciA9IF90aGlzJG9wdGlvbnMuUmVuZGVyZXIsXG4gICAgICAgIGdlbmVyYXRlSWQgPSBfdGhpcyRvcHRpb25zLmdlbmVyYXRlSWQsXG4gICAgICAgIHNjb3BlZCA9IF90aGlzJG9wdGlvbnMuc2NvcGVkO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7XG4gICAgICBjbGFzc2VzOiB0aGlzLmNsYXNzZXMsXG4gICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgIHNoZWV0OiBzaGVldCxcbiAgICAgIGpzczoganNzLFxuICAgICAgUmVuZGVyZXI6IFJlbmRlcmVyLFxuICAgICAgZ2VuZXJhdGVJZDogZ2VuZXJhdGVJZCxcbiAgICAgIHNjb3BlZDogc2NvcGVkLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGtleWZyYW1lczogdGhpcy5rZXlmcmFtZXMsXG4gICAgICBzZWxlY3RvcjogdW5kZWZpbmVkXG4gICAgfSwgcnVsZU9wdGlvbnMpOyAvLyBXaGVuIHVzZXIgdXNlcyAuY3JlYXRlU3R5bGVTaGVldCgpLCBkdXBsaWNhdGUgbmFtZXMgYXJlIG5vdCBwb3NzaWJsZSwgYnV0XG4gICAgLy8gYHNoZWV0LmFkZFJ1bGUoKWAgb3BlbnMgdGhlIGRvb3IgZm9yIGFueSBkdXBsaWNhdGUgcnVsZSBuYW1lLiBXaGVuIHRoaXMgaGFwcGVuc1xuICAgIC8vIHdlIG5lZWQgdG8gbWFrZSB0aGUga2V5IHVuaXF1ZSB3aXRoaW4gdGhpcyBSdWxlTGlzdCBpbnN0YW5jZSBzY29wZS5cblxuXG4gICAgdmFyIGtleSA9IG5hbWU7XG5cbiAgICBpZiAobmFtZSBpbiB0aGlzLnJhdykge1xuICAgICAga2V5ID0gbmFtZSArIFwiLWRcIiArIHRoaXMuY291bnRlcisrO1xuICAgIH0gLy8gV2UgbmVlZCB0byBzYXZlIHRoZSBvcmlnaW5hbCBkZWNsIGJlZm9yZSBjcmVhdGluZyB0aGUgcnVsZVxuICAgIC8vIGJlY2F1c2UgY2FjaGUgcGx1Z2luIG5lZWRzIHRvIHVzZSBpdCBhcyBhIGtleSB0byByZXR1cm4gYSBjYWNoZWQgcnVsZS5cblxuXG4gICAgdGhpcy5yYXdba2V5XSA9IGRlY2w7XG5cbiAgICBpZiAoa2V5IGluIHRoaXMuY2xhc3Nlcykge1xuICAgICAgLy8gRS5nLiBydWxlcyBpbnNpZGUgb2YgQG1lZGlhIGNvbnRhaW5lclxuICAgICAgb3B0aW9ucy5zZWxlY3RvciA9IFwiLlwiICsgZXNjYXBlKHRoaXMuY2xhc3Nlc1trZXldKTtcbiAgICB9XG5cbiAgICB2YXIgcnVsZSA9IGNyZWF0ZVJ1bGUoa2V5LCBkZWNsLCBvcHRpb25zKTtcbiAgICBpZiAoIXJ1bGUpIHJldHVybiBudWxsO1xuICAgIHRoaXMucmVnaXN0ZXIocnVsZSk7XG4gICAgdmFyIGluZGV4ID0gb3B0aW9ucy5pbmRleCA9PT0gdW5kZWZpbmVkID8gdGhpcy5pbmRleC5sZW5ndGggOiBvcHRpb25zLmluZGV4O1xuICAgIHRoaXMuaW5kZXguc3BsaWNlKGluZGV4LCAwLCBydWxlKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuICAvKipcbiAgICogUmVwbGFjZSBydWxlLlxuICAgKiBDcmVhdGUgYSBuZXcgcnVsZSBhbmQgcmVtb3ZlIG9sZCBvbmUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZ1xuICAgKiBiZWNhdXNlIHdlIHdhbnQgdG8gaW52b2tlIG9uQ3JlYXRlUnVsZSBob29rIHRvIG1ha2UgcGx1Z2lucyB3b3JrLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShuYW1lLCBkZWNsLCBydWxlT3B0aW9ucykge1xuICAgIHZhciBvbGRSdWxlID0gdGhpcy5nZXQobmFtZSk7XG4gICAgdmFyIG9sZEluZGV4ID0gdGhpcy5pbmRleC5pbmRleE9mKG9sZFJ1bGUpO1xuXG4gICAgaWYgKG9sZFJ1bGUpIHtcbiAgICAgIHRoaXMucmVtb3ZlKG9sZFJ1bGUpO1xuICAgIH1cblxuICAgIHZhciBvcHRpb25zID0gcnVsZU9wdGlvbnM7XG4gICAgaWYgKG9sZEluZGV4ICE9PSAtMSkgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCBydWxlT3B0aW9ucywge1xuICAgICAgaW5kZXg6IG9sZEluZGV4XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuYWRkKG5hbWUsIGRlY2wsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBydWxlIGJ5IG5hbWUgb3Igc2VsZWN0b3IuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldCA9IGZ1bmN0aW9uIGdldChuYW1lT3JTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLm1hcFtuYW1lT3JTZWxlY3Rvcl07XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShydWxlKSB7XG4gICAgdGhpcy51bnJlZ2lzdGVyKHJ1bGUpO1xuICAgIGRlbGV0ZSB0aGlzLnJhd1tydWxlLmtleV07XG4gICAgdGhpcy5pbmRleC5zcGxpY2UodGhpcy5pbmRleC5pbmRleE9mKHJ1bGUpLCAxKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGluZGV4IG9mIGEgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YocnVsZSkge1xuICAgIHJldHVybiB0aGlzLmluZGV4LmluZGV4T2YocnVsZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBgb25Qcm9jZXNzUnVsZSgpYCBwbHVnaW5zIG9uIGV2ZXJ5IHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnByb2Nlc3MgPSBmdW5jdGlvbiBwcm9jZXNzKCkge1xuICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zOyAvLyBXZSBuZWVkIHRvIGNsb25lIGFycmF5IGJlY2F1c2UgaWYgd2UgbW9kaWZ5IHRoZSBpbmRleCBzb21ld2hlcmUgZWxzZSBkdXJpbmcgYSBsb29wXG4gICAgLy8gd2UgZW5kIHVwIHdpdGggdmVyeSBoYXJkLXRvLXRyYWNrLWRvd24gc2lkZSBlZmZlY3RzLlxuXG4gICAgdGhpcy5pbmRleC5zbGljZSgwKS5mb3JFYWNoKHBsdWdpbnMub25Qcm9jZXNzUnVsZSwgcGx1Z2lucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgcnVsZSBpbiBgLm1hcGAsIGAuY2xhc3Nlc2AgYW5kIGAua2V5ZnJhbWVzYCBtYXBzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyKHJ1bGUpIHtcbiAgICB0aGlzLm1hcFtydWxlLmtleV0gPSBydWxlO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBTdHlsZVJ1bGUpIHtcbiAgICAgIHRoaXMubWFwW3J1bGUuc2VsZWN0b3JdID0gcnVsZTtcbiAgICAgIGlmIChydWxlLmlkKSB0aGlzLmNsYXNzZXNbcnVsZS5rZXldID0gcnVsZS5pZDtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBLZXlmcmFtZXNSdWxlICYmIHRoaXMua2V5ZnJhbWVzKSB7XG4gICAgICB0aGlzLmtleWZyYW1lc1tydWxlLm5hbWVdID0gcnVsZS5pZDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYSBydWxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51bnJlZ2lzdGVyID0gZnVuY3Rpb24gdW5yZWdpc3RlcihydWxlKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW3J1bGUua2V5XTtcblxuICAgIGlmIChydWxlIGluc3RhbmNlb2YgU3R5bGVSdWxlKSB7XG4gICAgICBkZWxldGUgdGhpcy5tYXBbcnVsZS5zZWxlY3Rvcl07XG4gICAgICBkZWxldGUgdGhpcy5jbGFzc2VzW3J1bGUua2V5XTtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBLZXlmcmFtZXNSdWxlKSB7XG4gICAgICBkZWxldGUgdGhpcy5rZXlmcmFtZXNbcnVsZS5uYW1lXTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZnVuY3Rpb24gdmFsdWVzIHdpdGggYSBuZXcgZGF0YS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHZhciBuYW1lO1xuICAgIHZhciBkYXRhO1xuICAgIHZhciBvcHRpb25zO1xuXG4gICAgaWYgKHR5cGVvZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMF07XG4gICAgICBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzFdO1xuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1swXTtcbiAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMV07XG4gICAgICBuYW1lID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgdGhpcy51cGRhdGVPbmUodGhpcy5nZXQobmFtZSksIGRhdGEsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pbmRleC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy51cGRhdGVPbmUodGhpcy5pbmRleFtpbmRleF0sIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZSBwbHVnaW5zLCB1cGRhdGUgcnVsZSBwcm9wcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlT25lID0gZnVuY3Rpb24gdXBkYXRlT25lKHJ1bGUsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdFVwZGF0ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgdmFyIF90aGlzJG9wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBwbHVnaW5zID0gX3RoaXMkb3B0aW9uczIuanNzLnBsdWdpbnMsXG4gICAgICAgIHNoZWV0ID0gX3RoaXMkb3B0aW9uczIuc2hlZXQ7IC8vIEl0IGlzIGEgcnVsZXMgY29udGFpbmVyIGxpa2UgZm9yIGUuZy4gQ29uZGl0aW9uYWxSdWxlLlxuXG4gICAgaWYgKHJ1bGUucnVsZXMgaW5zdGFuY2VvZiBSdWxlTGlzdCkge1xuICAgICAgcnVsZS5ydWxlcy51cGRhdGUoZGF0YSwgb3B0aW9ucyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHN0eWxlID0gcnVsZS5zdHlsZTtcbiAgICBwbHVnaW5zLm9uVXBkYXRlKGRhdGEsIHJ1bGUsIHNoZWV0LCBvcHRpb25zKTsgLy8gV2UgcmVseSBvbiBhIG5ldyBgc3R5bGVgIHJlZiBpbiBjYXNlIGl0IHdhcyBtdXRhdGVkIGR1cmluZyBvblVwZGF0ZSBob29rLlxuXG4gICAgaWYgKG9wdGlvbnMucHJvY2VzcyAmJiBzdHlsZSAmJiBzdHlsZSAhPT0gcnVsZS5zdHlsZSkge1xuICAgICAgLy8gV2UgbmVlZCB0byBydW4gdGhlIHBsdWdpbnMgaW4gY2FzZSBuZXcgYHN0eWxlYCByZWxpZXMgb24gc3ludGF4IHBsdWdpbnMuXG4gICAgICBwbHVnaW5zLm9uUHJvY2Vzc1N0eWxlKHJ1bGUuc3R5bGUsIHJ1bGUsIHNoZWV0KTsgLy8gVXBkYXRlIGFuZCBhZGQgcHJvcHMuXG5cbiAgICAgIGZvciAodmFyIHByb3AgaW4gcnVsZS5zdHlsZSkge1xuICAgICAgICB2YXIgbmV4dFZhbHVlID0gcnVsZS5zdHlsZVtwcm9wXTtcbiAgICAgICAgdmFyIHByZXZWYWx1ZSA9IHN0eWxlW3Byb3BdOyAvLyBXZSBuZWVkIHRvIHVzZSBgZm9yY2U6IHRydWVgIGJlY2F1c2UgYHJ1bGUuc3R5bGVgIGhhcyBiZWVuIHVwZGF0ZWQgZHVyaW5nIG9uVXBkYXRlIGhvb2ssIHNvIGBydWxlLnByb3AoKWAgd2lsbCBub3QgdXBkYXRlIHRoZSBDU1NPTSBydWxlLlxuICAgICAgICAvLyBXZSBkbyB0aGlzIGNvbXBhcmlzb24gdG8gYXZvaWQgdW5uZWVkZWQgYHJ1bGUucHJvcCgpYCBjYWxscywgc2luY2Ugd2UgaGF2ZSB0aGUgb2xkIGBzdHlsZWAgb2JqZWN0IGhlcmUuXG5cbiAgICAgICAgaWYgKG5leHRWYWx1ZSAhPT0gcHJldlZhbHVlKSB7XG4gICAgICAgICAgcnVsZS5wcm9wKHByb3AsIG5leHRWYWx1ZSwgZm9yY2VVcGRhdGVPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBSZW1vdmUgcHJvcHMuXG5cblxuICAgICAgZm9yICh2YXIgX3Byb3AgaW4gc3R5bGUpIHtcbiAgICAgICAgdmFyIF9uZXh0VmFsdWUgPSBydWxlLnN0eWxlW19wcm9wXTtcbiAgICAgICAgdmFyIF9wcmV2VmFsdWUgPSBzdHlsZVtfcHJvcF07IC8vIFdlIG5lZWQgdG8gdXNlIGBmb3JjZTogdHJ1ZWAgYmVjYXVzZSBgcnVsZS5zdHlsZWAgaGFzIGJlZW4gdXBkYXRlZCBkdXJpbmcgb25VcGRhdGUgaG9vaywgc28gYHJ1bGUucHJvcCgpYCB3aWxsIG5vdCB1cGRhdGUgdGhlIENTU09NIHJ1bGUuXG4gICAgICAgIC8vIFdlIGRvIHRoaXMgY29tcGFyaXNvbiB0byBhdm9pZCB1bm5lZWRlZCBgcnVsZS5wcm9wKClgIGNhbGxzLCBzaW5jZSB3ZSBoYXZlIHRoZSBvbGQgYHN0eWxlYCBvYmplY3QgaGVyZS5cblxuICAgICAgICBpZiAoX25leHRWYWx1ZSA9PSBudWxsICYmIF9uZXh0VmFsdWUgIT09IF9wcmV2VmFsdWUpIHtcbiAgICAgICAgICBydWxlLnByb3AoX3Byb3AsIG51bGwsIGZvcmNlVXBkYXRlT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgcnVsZXMgdG8gYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICB2YXIgc3RyID0gJyc7XG4gICAgdmFyIHNoZWV0ID0gdGhpcy5vcHRpb25zLnNoZWV0O1xuICAgIHZhciBsaW5rID0gc2hlZXQgPyBzaGVldC5vcHRpb25zLmxpbmsgOiBmYWxzZTtcblxuICAgIHZhciBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMgPSBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSxcbiAgICAgICAgbGluZWJyZWFrID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLmxpbmVicmVhaztcblxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmluZGV4Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIHJ1bGUgPSB0aGlzLmluZGV4W2luZGV4XTtcbiAgICAgIHZhciBjc3MgPSBydWxlLnRvU3RyaW5nKG9wdGlvbnMpOyAvLyBObyBuZWVkIHRvIHJlbmRlciBhbiBlbXB0eSBydWxlLlxuXG4gICAgICBpZiAoIWNzcyAmJiAhbGluaykgY29udGludWU7XG4gICAgICBpZiAoc3RyKSBzdHIgKz0gbGluZWJyZWFrO1xuICAgICAgc3RyICs9IGNzcztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIHJldHVybiBSdWxlTGlzdDtcbn0oKTtcblxudmFyIFN0eWxlU2hlZXQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdHlsZVNoZWV0KHN0eWxlcywgb3B0aW9ucykge1xuICAgIHRoaXMuYXR0YWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlcGxveWVkID0gZmFsc2U7XG4gICAgdGhpcy5jbGFzc2VzID0ge307XG4gICAgdGhpcy5rZXlmcmFtZXMgPSB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgc2hlZXQ6IHRoaXMsXG4gICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICBjbGFzc2VzOiB0aGlzLmNsYXNzZXMsXG4gICAgICBrZXlmcmFtZXM6IHRoaXMua2V5ZnJhbWVzXG4gICAgfSk7XG5cbiAgICBpZiAob3B0aW9ucy5SZW5kZXJlcikge1xuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBvcHRpb25zLlJlbmRlcmVyKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMgPSBuZXcgUnVsZUxpc3QodGhpcy5vcHRpb25zKTtcblxuICAgIGZvciAodmFyIG5hbWUgaW4gc3R5bGVzKSB7XG4gICAgICB0aGlzLnJ1bGVzLmFkZChuYW1lLCBzdHlsZXNbbmFtZV0pO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMucHJvY2VzcygpO1xuICB9XG4gIC8qKlxuICAgKiBBdHRhY2ggcmVuZGVyYWJsZSB0byB0aGUgcmVuZGVyIHRyZWUuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFN0eWxlU2hlZXQucHJvdG90eXBlO1xuXG4gIF9wcm90by5hdHRhY2ggPSBmdW5jdGlvbiBhdHRhY2goKSB7XG4gICAgaWYgKHRoaXMuYXR0YWNoZWQpIHJldHVybiB0aGlzO1xuICAgIGlmICh0aGlzLnJlbmRlcmVyKSB0aGlzLnJlbmRlcmVyLmF0dGFjaCgpO1xuICAgIHRoaXMuYXR0YWNoZWQgPSB0cnVlOyAvLyBPcmRlciBpcyBpbXBvcnRhbnQsIGJlY2F1c2Ugd2UgY2FuJ3QgdXNlIGluc2VydFJ1bGUgQVBJIGlmIHN0eWxlIGVsZW1lbnQgaXMgbm90IGF0dGFjaGVkLlxuXG4gICAgaWYgKCF0aGlzLmRlcGxveWVkKSB0aGlzLmRlcGxveSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgcmVuZGVyYWJsZSBmcm9tIHJlbmRlciB0cmVlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZXRhY2ggPSBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgaWYgKCF0aGlzLmF0dGFjaGVkKSByZXR1cm4gdGhpcztcbiAgICBpZiAodGhpcy5yZW5kZXJlcikgdGhpcy5yZW5kZXJlci5kZXRhY2goKTtcbiAgICB0aGlzLmF0dGFjaGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHJ1bGUgdG8gdGhlIGN1cnJlbnQgc3R5bGVzaGVldC5cbiAgICogV2lsbCBpbnNlcnQgYSBydWxlIGFsc28gYWZ0ZXIgdGhlIHN0eWxlc2hlZXQgaGFzIGJlZW4gcmVuZGVyZWQgZmlyc3QgdGltZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUnVsZSA9IGZ1bmN0aW9uIGFkZFJ1bGUobmFtZSwgZGVjbCwgb3B0aW9ucykge1xuICAgIHZhciBxdWV1ZSA9IHRoaXMucXVldWU7IC8vIFBsdWdpbnMgY2FuIGNyZWF0ZSBydWxlcy5cbiAgICAvLyBJbiBvcmRlciB0byBwcmVzZXJ2ZSB0aGUgcmlnaHQgb3JkZXIsIHdlIG5lZWQgdG8gcXVldWUgYWxsIGAuYWRkUnVsZWAgY2FsbHMsXG4gICAgLy8gd2hpY2ggaGFwcGVuIGFmdGVyIHRoZSBmaXJzdCBgcnVsZXMuYWRkKClgIGNhbGwuXG5cbiAgICBpZiAodGhpcy5hdHRhY2hlZCAmJiAhcXVldWUpIHRoaXMucXVldWUgPSBbXTtcbiAgICB2YXIgcnVsZSA9IHRoaXMucnVsZXMuYWRkKG5hbWUsIGRlY2wsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkgcmV0dXJuIG51bGw7XG4gICAgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUocnVsZSk7XG5cbiAgICBpZiAodGhpcy5hdHRhY2hlZCkge1xuICAgICAgaWYgKCF0aGlzLmRlcGxveWVkKSByZXR1cm4gcnVsZTsgLy8gRG9uJ3QgaW5zZXJ0IHJ1bGUgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gc3RyaW5naWZpZWQgdmVyc2lvbiB5ZXQuXG4gICAgICAvLyBJdCB3aWxsIGJlIGluc2VydGVkIGFsbCB0b2dldGhlciB3aGVuIC5hdHRhY2ggaXMgY2FsbGVkLlxuXG4gICAgICBpZiAocXVldWUpIHF1ZXVlLnB1c2gocnVsZSk7ZWxzZSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0UnVsZShydWxlKTtcblxuICAgICAgICBpZiAodGhpcy5xdWV1ZSkge1xuICAgICAgICAgIHRoaXMucXVldWUuZm9yRWFjaCh0aGlzLmluc2VydFJ1bGUsIHRoaXMpO1xuICAgICAgICAgIHRoaXMucXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBydWxlO1xuICAgIH0gLy8gV2UgY2FuJ3QgYWRkIHJ1bGVzIHRvIGEgZGV0YWNoZWQgc3R5bGUgbm9kZS5cbiAgICAvLyBXZSB3aWxsIHJlZGVwbG95IHRoZSBzaGVldCBvbmNlIHVzZXIgd2lsbCBhdHRhY2ggaXQuXG5cblxuICAgIHRoaXMuZGVwbG95ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuICAvKipcbiAgICogUmVwbGFjZSBhIHJ1bGUgaW4gdGhlIGN1cnJlbnQgc3R5bGVzaGVldC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVwbGFjZVJ1bGUgPSBmdW5jdGlvbiByZXBsYWNlUnVsZShuYW1lT3JTZWxlY3RvciwgZGVjbCwgb3B0aW9ucykge1xuICAgIHZhciBvbGRSdWxlID0gdGhpcy5ydWxlcy5nZXQobmFtZU9yU2VsZWN0b3IpO1xuICAgIGlmICghb2xkUnVsZSkgcmV0dXJuIHRoaXMuYWRkUnVsZShuYW1lT3JTZWxlY3RvciwgZGVjbCwgb3B0aW9ucyk7XG4gICAgdmFyIG5ld1J1bGUgPSB0aGlzLnJ1bGVzLnJlcGxhY2UobmFtZU9yU2VsZWN0b3IsIGRlY2wsIG9wdGlvbnMpO1xuXG4gICAgaWYgKG5ld1J1bGUpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5qc3MucGx1Z2lucy5vblByb2Nlc3NSdWxlKG5ld1J1bGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmF0dGFjaGVkKSB7XG4gICAgICBpZiAoIXRoaXMuZGVwbG95ZWQpIHJldHVybiBuZXdSdWxlOyAvLyBEb24ndCByZXBsYWNlIC8gZGVsZXRlIHJ1bGUgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gc3RyaW5naWZpZWQgdmVyc2lvbiB5ZXQuXG4gICAgICAvLyBJdCB3aWxsIGJlIGluc2VydGVkIGFsbCB0b2dldGhlciB3aGVuIC5hdHRhY2ggaXMgY2FsbGVkLlxuXG4gICAgICBpZiAodGhpcy5yZW5kZXJlcikge1xuICAgICAgICBpZiAoIW5ld1J1bGUpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRlbGV0ZVJ1bGUob2xkUnVsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAob2xkUnVsZS5yZW5kZXJhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5yZXBsYWNlUnVsZShvbGRSdWxlLnJlbmRlcmFibGUsIG5ld1J1bGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdSdWxlO1xuICAgIH0gLy8gV2UgY2FuJ3QgcmVwbGFjZSBydWxlcyB0byBhIGRldGFjaGVkIHN0eWxlIG5vZGUuXG4gICAgLy8gV2Ugd2lsbCByZWRlcGxveSB0aGUgc2hlZXQgb25jZSB1c2VyIHdpbGwgYXR0YWNoIGl0LlxuXG5cbiAgICB0aGlzLmRlcGxveWVkID0gZmFsc2U7XG4gICAgcmV0dXJuIG5ld1J1bGU7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBydWxlIGludG8gdGhlIFN0eWxlU2hlZXRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5zZXJ0UnVsZSA9IGZ1bmN0aW9uIGluc2VydFJ1bGUocnVsZSkge1xuICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmluc2VydFJ1bGUocnVsZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIGFkZCBydWxlcy5cbiAgICogV2lsbCByZW5kZXIgYWxzbyBhZnRlciBTdHlsZSBTaGVldCB3YXMgcmVuZGVyZWQgdGhlIGZpcnN0IHRpbWUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFJ1bGVzID0gZnVuY3Rpb24gYWRkUnVsZXMoc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGFkZGVkID0gW107XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIHN0eWxlcykge1xuICAgICAgdmFyIHJ1bGUgPSB0aGlzLmFkZFJ1bGUobmFtZSwgc3R5bGVzW25hbWVdLCBvcHRpb25zKTtcbiAgICAgIGlmIChydWxlKSBhZGRlZC5wdXNoKHJ1bGUpO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRlZDtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgcnVsZSBieSBuYW1lIG9yIHNlbGVjdG9yLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXRSdWxlID0gZnVuY3Rpb24gZ2V0UnVsZShuYW1lT3JTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmdldChuYW1lT3JTZWxlY3Rvcik7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHJ1bGUgYnkgbmFtZS5cbiAgICogUmV0dXJucyBgdHJ1ZWA6IGlmIHJ1bGUgaGFzIGJlZW4gZGVsZXRlZCBmcm9tIHRoZSBET00uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbiBkZWxldGVSdWxlKG5hbWUpIHtcbiAgICB2YXIgcnVsZSA9IHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JyA/IG5hbWUgOiB0aGlzLnJ1bGVzLmdldChuYW1lKTtcblxuICAgIGlmICghcnVsZSB8fCAvLyBTdHlsZSBzaGVldCB3YXMgY3JlYXRlZCB3aXRob3V0IGxpbms6IHRydWUgYW5kIGF0dGFjaGVkLCBpbiB0aGlzIGNhc2Ugd2VcbiAgICAvLyB3b24ndCBiZSBhYmxlIHRvIHJlbW92ZSB0aGUgQ1NTIHJ1bGUgZnJvbSB0aGUgRE9NLlxuICAgIHRoaXMuYXR0YWNoZWQgJiYgIXJ1bGUucmVuZGVyYWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMucmVtb3ZlKHJ1bGUpO1xuXG4gICAgaWYgKHRoaXMuYXR0YWNoZWQgJiYgcnVsZS5yZW5kZXJhYmxlICYmIHRoaXMucmVuZGVyZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmRlbGV0ZVJ1bGUocnVsZS5yZW5kZXJhYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogR2V0IGluZGV4IG9mIGEgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YocnVsZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmluZGV4T2YocnVsZSk7XG4gIH1cbiAgLyoqXG4gICAqIERlcGxveSBwdXJlIENTUyBzdHJpbmcgdG8gYSByZW5kZXJhYmxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZXBsb3kgPSBmdW5jdGlvbiBkZXBsb3koKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXIpIHRoaXMucmVuZGVyZXIuZGVwbG95KCk7XG4gICAgdGhpcy5kZXBsb3llZCA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZnVuY3Rpb24gdmFsdWVzIHdpdGggYSBuZXcgZGF0YS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHZhciBfdGhpcyRydWxlcztcblxuICAgIChfdGhpcyRydWxlcyA9IHRoaXMucnVsZXMpLnVwZGF0ZS5hcHBseShfdGhpcyRydWxlcywgYXJndW1lbnRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgc2luZ2xlIHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZU9uZSA9IGZ1bmN0aW9uIHVwZGF0ZU9uZShydWxlLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgdGhpcy5ydWxlcy51cGRhdGVPbmUocnVsZSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgcnVsZXMgdG8gYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy50b1N0cmluZyhvcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gU3R5bGVTaGVldDtcbn0oKTtcblxudmFyIFBsdWdpbnNSZWdpc3RyeSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBsdWdpbnNSZWdpc3RyeSgpIHtcbiAgICB0aGlzLnBsdWdpbnMgPSB7XG4gICAgICBpbnRlcm5hbDogW10sXG4gICAgICBleHRlcm5hbDogW11cbiAgICB9O1xuICAgIHRoaXMucmVnaXN0cnkgPSB7fTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBQbHVnaW5zUmVnaXN0cnkucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBDYWxsIGBvbkNyZWF0ZVJ1bGVgIGhvb2tzIGFuZCByZXR1cm4gYW4gb2JqZWN0IGlmIHJldHVybmVkIGJ5IGEgaG9vay5cbiAgICovXG4gIF9wcm90by5vbkNyZWF0ZVJ1bGUgPSBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUobmFtZSwgZGVjbCwgb3B0aW9ucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vbkNyZWF0ZVJ1bGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBydWxlID0gdGhpcy5yZWdpc3RyeS5vbkNyZWF0ZVJ1bGVbaV0obmFtZSwgZGVjbCwgb3B0aW9ucyk7XG4gICAgICBpZiAocnVsZSkgcmV0dXJuIHJ1bGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYG9uUHJvY2Vzc1J1bGVgIGhvb2tzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vblByb2Nlc3NSdWxlID0gZnVuY3Rpb24gb25Qcm9jZXNzUnVsZShydWxlKSB7XG4gICAgaWYgKHJ1bGUuaXNQcm9jZXNzZWQpIHJldHVybjtcbiAgICB2YXIgc2hlZXQgPSBydWxlLm9wdGlvbnMuc2hlZXQ7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0cnkub25Qcm9jZXNzUnVsZS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5yZWdpc3RyeS5vblByb2Nlc3NSdWxlW2ldKHJ1bGUsIHNoZWV0KTtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5zdHlsZSkgdGhpcy5vblByb2Nlc3NTdHlsZShydWxlLnN0eWxlLCBydWxlLCBzaGVldCk7XG4gICAgcnVsZS5pc1Byb2Nlc3NlZCA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYG9uUHJvY2Vzc1N0eWxlYCBob29rcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub25Qcm9jZXNzU3R5bGUgPSBmdW5jdGlvbiBvblByb2Nlc3NTdHlsZShzdHlsZSwgcnVsZSwgc2hlZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0cnkub25Qcm9jZXNzU3R5bGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJ1bGUuc3R5bGUgPSB0aGlzLnJlZ2lzdHJ5Lm9uUHJvY2Vzc1N0eWxlW2ldKHJ1bGUuc3R5bGUsIHJ1bGUsIHNoZWV0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYG9uUHJvY2Vzc1NoZWV0YCBob29rcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub25Qcm9jZXNzU2hlZXQgPSBmdW5jdGlvbiBvblByb2Nlc3NTaGVldChzaGVldCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vblByb2Nlc3NTaGVldC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5yZWdpc3RyeS5vblByb2Nlc3NTaGVldFtpXShzaGVldCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYWxsIGBvblVwZGF0ZWAgaG9va3MuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9uVXBkYXRlID0gZnVuY3Rpb24gb25VcGRhdGUoZGF0YSwgcnVsZSwgc2hlZXQsIG9wdGlvbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0cnkub25VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMucmVnaXN0cnkub25VcGRhdGVbaV0oZGF0YSwgcnVsZSwgc2hlZXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FsbCBgb25DaGFuZ2VWYWx1ZWAgaG9va3MuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9uQ2hhbmdlVmFsdWUgPSBmdW5jdGlvbiBvbkNoYW5nZVZhbHVlKHZhbHVlLCBwcm9wLCBydWxlKSB7XG4gICAgdmFyIHByb2Nlc3NlZFZhbHVlID0gdmFsdWU7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0cnkub25DaGFuZ2VWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvY2Vzc2VkVmFsdWUgPSB0aGlzLnJlZ2lzdHJ5Lm9uQ2hhbmdlVmFsdWVbaV0ocHJvY2Vzc2VkVmFsdWUsIHByb3AsIHJ1bGUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9jZXNzZWRWYWx1ZTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBwbHVnaW4uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVzZSA9IGZ1bmN0aW9uIHVzZShuZXdQbHVnaW4sIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBxdWV1ZTogJ2V4dGVybmFsJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgcGx1Z2lucyA9IHRoaXMucGx1Z2luc1tvcHRpb25zLnF1ZXVlXTsgLy8gQXZvaWRzIGFwcGx5aW5nIHNhbWUgcGx1Z2luIHR3aWNlLCBhdCBsZWFzdCBiYXNlZCBvbiByZWYuXG5cbiAgICBpZiAocGx1Z2lucy5pbmRleE9mKG5ld1BsdWdpbikgIT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcGx1Z2lucy5wdXNoKG5ld1BsdWdpbik7XG4gICAgdGhpcy5yZWdpc3RyeSA9IFtdLmNvbmNhdCh0aGlzLnBsdWdpbnMuZXh0ZXJuYWwsIHRoaXMucGx1Z2lucy5pbnRlcm5hbCkucmVkdWNlKGZ1bmN0aW9uIChyZWdpc3RyeSwgcGx1Z2luKSB7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIHBsdWdpbikge1xuICAgICAgICBpZiAobmFtZSBpbiByZWdpc3RyeSkge1xuICAgICAgICAgIHJlZ2lzdHJ5W25hbWVdLnB1c2gocGx1Z2luW25hbWVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIFVua25vd24gaG9vayBcXFwiXCIgKyBuYW1lICsgXCJcXFwiLlwiKSA6IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVnaXN0cnk7XG4gICAgfSwge1xuICAgICAgb25DcmVhdGVSdWxlOiBbXSxcbiAgICAgIG9uUHJvY2Vzc1J1bGU6IFtdLFxuICAgICAgb25Qcm9jZXNzU3R5bGU6IFtdLFxuICAgICAgb25Qcm9jZXNzU2hlZXQ6IFtdLFxuICAgICAgb25DaGFuZ2VWYWx1ZTogW10sXG4gICAgICBvblVwZGF0ZTogW11cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gUGx1Z2luc1JlZ2lzdHJ5O1xufSgpO1xuXG4vKipcbiAqIFNoZWV0cyByZWdpc3RyeSB0byBhY2Nlc3MgYWxsIGluc3RhbmNlcyBpbiBvbmUgcGxhY2UuXG4gKi9cblxudmFyIFNoZWV0c1JlZ2lzdHJ5ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2hlZXRzUmVnaXN0cnkoKSB7XG4gICAgdGhpcy5yZWdpc3RyeSA9IFtdO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFNoZWV0c1JlZ2lzdHJ5LnByb3RvdHlwZTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBTdHlsZSBTaGVldC5cbiAgICovXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQoc2hlZXQpIHtcbiAgICB2YXIgcmVnaXN0cnkgPSB0aGlzLnJlZ2lzdHJ5O1xuICAgIHZhciBpbmRleCA9IHNoZWV0Lm9wdGlvbnMuaW5kZXg7XG4gICAgaWYgKHJlZ2lzdHJ5LmluZGV4T2Yoc2hlZXQpICE9PSAtMSkgcmV0dXJuO1xuXG4gICAgaWYgKHJlZ2lzdHJ5Lmxlbmd0aCA9PT0gMCB8fCBpbmRleCA+PSB0aGlzLmluZGV4KSB7XG4gICAgICByZWdpc3RyeS5wdXNoKHNoZWV0KTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEZpbmQgYSBwb3NpdGlvbi5cblxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWdpc3RyeS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlZ2lzdHJ5W2ldLm9wdGlvbnMuaW5kZXggPiBpbmRleCkge1xuICAgICAgICByZWdpc3RyeS5zcGxpY2UoaSwgMCwgc2hlZXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXNldCB0aGUgcmVnaXN0cnkuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdGhpcy5yZWdpc3RyeSA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBTdHlsZSBTaGVldC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKHNoZWV0KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5yZWdpc3RyeS5pbmRleE9mKHNoZWV0KTtcbiAgICB0aGlzLnJlZ2lzdHJ5LnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYWxsIGF0dGFjaGVkIHNoZWV0cyB0byBhIENTUyBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoX3RlbXApIHtcbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBhdHRhY2hlZCA9IF9yZWYuYXR0YWNoZWQsXG4gICAgICAgIG9wdGlvbnMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJhdHRhY2hlZFwiXSk7XG5cbiAgICB2YXIgX2dldFdoaXRlc3BhY2VTeW1ib2xzID0gZ2V0V2hpdGVzcGFjZVN5bWJvbHMob3B0aW9ucyksXG4gICAgICAgIGxpbmVicmVhayA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5saW5lYnJlYWs7XG5cbiAgICB2YXIgY3NzID0gJyc7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0cnkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzaGVldCA9IHRoaXMucmVnaXN0cnlbaV07XG5cbiAgICAgIGlmIChhdHRhY2hlZCAhPSBudWxsICYmIHNoZWV0LmF0dGFjaGVkICE9PSBhdHRhY2hlZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNzcykgY3NzICs9IGxpbmVicmVhaztcbiAgICAgIGNzcyArPSBzaGVldC50b1N0cmluZyhvcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhTaGVldHNSZWdpc3RyeSwgW3tcbiAgICBrZXk6IFwiaW5kZXhcIixcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgaGlnaGVzdCBpbmRleCBudW1iZXIuXG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWdpc3RyeS5sZW5ndGggPT09IDAgPyAwIDogdGhpcy5yZWdpc3RyeVt0aGlzLnJlZ2lzdHJ5Lmxlbmd0aCAtIDFdLm9wdGlvbnMuaW5kZXg7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNoZWV0c1JlZ2lzdHJ5O1xufSgpO1xuXG4vKipcbiAqIFRoaXMgaXMgYSBnbG9iYWwgc2hlZXRzIHJlZ2lzdHJ5LiBPbmx5IERvbVJlbmRlcmVyIHdpbGwgYWRkIHNoZWV0cyB0byBpdC5cbiAqIE9uIHRoZSBzZXJ2ZXIgb25lIHNob3VsZCB1c2UgYW4gb3duIFNoZWV0c1JlZ2lzdHJ5IGluc3RhbmNlIGFuZCBhZGQgdGhlXG4gKiBzaGVldHMgdG8gaXQsIGJlY2F1c2UgeW91IG5lZWQgdG8gbWFrZSBzdXJlIHRvIGNyZWF0ZSBhIG5ldyByZWdpc3RyeSBmb3JcbiAqIGVhY2ggcmVxdWVzdCBpbiBvcmRlciB0byBub3QgbGVhayBzaGVldHMgYWNyb3NzIHJlcXVlc3RzLlxuICovXG5cbnZhciBzaGVldHMgPSBuZXcgU2hlZXRzUmVnaXN0cnkoKTtcblxuLyogZXNsaW50LWRpc2FibGUgKi9cblxuLyoqXG4gKiBOb3cgdGhhdCBgZ2xvYmFsVGhpc2AgaXMgYXZhaWxhYmxlIG9uIG1vc3QgcGxhdGZvcm1zXG4gKiAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZ2xvYmFsVGhpcyNicm93c2VyX2NvbXBhdGliaWxpdHkpXG4gKiB3ZSBjaGVjayBmb3IgYGdsb2JhbFRoaXNgIGZpcnN0LiBgZ2xvYmFsVGhpc2AgaXMgbmVjZXNzYXJ5IGZvciBqc3NcbiAqIHRvIHJ1biBpbiBBZ29yaWMncyBzZWN1cmUgdmVyc2lvbiBvZiBKYXZhU2NyaXB0IChTRVMpLiBVbmRlciBTRVMsXG4gKiBgZ2xvYmFsVGhpc2AgZXhpc3RzLCBidXQgYHdpbmRvd2AsIGBzZWxmYCwgYW5kIGBGdW5jdGlvbigncmV0dXJuXG4gKiB0aGlzJykoKWAgYXJlIGFsbCB1bmRlZmluZWQgZm9yIHNlY3VyaXR5IHJlYXNvbnMuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcbiAqL1xudmFyIGdsb2JhbFRoaXMkMSA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PT0gTWF0aCA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxudmFyIG5zID0gJzJmMWFjYzZjM2E2MDZiMDgyZTVlZWY1ZTU0NDE0ZmZiJztcbmlmIChnbG9iYWxUaGlzJDFbbnNdID09IG51bGwpIGdsb2JhbFRoaXMkMVtuc10gPSAwOyAvLyBCdW5kbGUgbWF5IGNvbnRhaW4gbXVsdGlwbGUgSlNTIHZlcnNpb25zIGF0IHRoZSBzYW1lIHRpbWUuIEluIG9yZGVyIHRvIGlkZW50aWZ5XG4vLyB0aGUgY3VycmVudCB2ZXJzaW9uIHdpdGgganVzdCBvbmUgc2hvcnQgbnVtYmVyIGFuZCB1c2UgaXQgZm9yIGNsYXNzZXMgZ2VuZXJhdGlvblxuLy8gd2UgdXNlIGEgY291bnRlci4gQWxzbyBpdCBpcyBtb3JlIGFjY3VyYXRlLCBiZWNhdXNlIHVzZXIgY2FuIG1hbnVhbGx5IHJlZXZhbHVhdGVcbi8vIHRoZSBtb2R1bGUuXG5cbnZhciBtb2R1bGVJZCA9IGdsb2JhbFRoaXMkMVtuc10rKztcblxudmFyIG1heFJ1bGVzID0gMWUxMDtcbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGdlbmVyYXRlcyB1bmlxdWUgY2xhc3MgbmFtZXMgYmFzZWQgb24gY291bnRlcnMuXG4gKiBXaGVuIG5ldyBnZW5lcmF0b3IgZnVuY3Rpb24gaXMgY3JlYXRlZCwgcnVsZSBjb3VudGVyIGlzIHJlc2V0ZWQuXG4gKiBXZSBuZWVkIHRvIHJlc2V0IHRoZSBydWxlIGNvdW50ZXIgZm9yIFNTUiBmb3IgZWFjaCByZXF1ZXN0LlxuICovXG5cbnZhciBjcmVhdGVHZW5lcmF0ZUlkID0gZnVuY3Rpb24gY3JlYXRlR2VuZXJhdGVJZChvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgcnVsZUNvdW50ZXIgPSAwO1xuXG4gIHZhciBnZW5lcmF0ZUlkID0gZnVuY3Rpb24gZ2VuZXJhdGVJZChydWxlLCBzaGVldCkge1xuICAgIHJ1bGVDb3VudGVyICs9IDE7XG5cbiAgICBpZiAocnVsZUNvdW50ZXIgPiBtYXhSdWxlcykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBZb3UgbWlnaHQgaGF2ZSBhIG1lbW9yeSBsZWFrLiBSdWxlIGNvdW50ZXIgaXMgYXQgXCIgKyBydWxlQ291bnRlciArIFwiLlwiKSA6IHZvaWQgMDtcbiAgICB9XG5cbiAgICB2YXIganNzSWQgPSAnJztcbiAgICB2YXIgcHJlZml4ID0gJyc7XG5cbiAgICBpZiAoc2hlZXQpIHtcbiAgICAgIGlmIChzaGVldC5vcHRpb25zLmNsYXNzTmFtZVByZWZpeCkge1xuICAgICAgICBwcmVmaXggPSBzaGVldC5vcHRpb25zLmNsYXNzTmFtZVByZWZpeDtcbiAgICAgIH1cblxuICAgICAgaWYgKHNoZWV0Lm9wdGlvbnMuanNzLmlkICE9IG51bGwpIHtcbiAgICAgICAganNzSWQgPSBTdHJpbmcoc2hlZXQub3B0aW9ucy5qc3MuaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1pbmlmeSkge1xuICAgICAgLy8gVXNpbmcgXCJjXCIgYmVjYXVzZSBhIG51bWJlciBjYW4ndCBiZSB0aGUgZmlyc3QgY2hhciBpbiBhIGNsYXNzIG5hbWUuXG4gICAgICByZXR1cm4gXCJcIiArIChwcmVmaXggfHwgJ2MnKSArIG1vZHVsZUlkICsganNzSWQgKyBydWxlQ291bnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlZml4ICsgcnVsZS5rZXkgKyBcIi1cIiArIG1vZHVsZUlkICsgKGpzc0lkID8gXCItXCIgKyBqc3NJZCA6ICcnKSArIFwiLVwiICsgcnVsZUNvdW50ZXI7XG4gIH07XG5cbiAgcmV0dXJuIGdlbmVyYXRlSWQ7XG59O1xuXG4vKipcbiAqIENhY2hlIHRoZSB2YWx1ZSBmcm9tIHRoZSBmaXJzdCB0aW1lIGEgZnVuY3Rpb24gaXMgY2FsbGVkLlxuICovXG5cbnZhciBtZW1vaXplID0gZnVuY3Rpb24gbWVtb2l6ZShmbikge1xuICB2YXIgdmFsdWU7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBmbigpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbn07XG4vKipcbiAqIEdldCBhIHN0eWxlIHByb3BlcnR5IHZhbHVlLlxuICovXG5cblxudmFyIGdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlKGNzc1J1bGUsIHByb3ApIHtcbiAgdHJ5IHtcbiAgICAvLyBTdXBwb3J0IENTU1RPTS5cbiAgICBpZiAoY3NzUnVsZS5hdHRyaWJ1dGVTdHlsZU1hcCkge1xuICAgICAgcmV0dXJuIGNzc1J1bGUuYXR0cmlidXRlU3R5bGVNYXAuZ2V0KHByb3ApO1xuICAgIH1cblxuICAgIHJldHVybiBjc3NSdWxlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIElFIG1heSB0aHJvdyBpZiBwcm9wZXJ0eSBpcyB1bmtub3duLlxuICAgIHJldHVybiAnJztcbiAgfVxufTtcbi8qKlxuICogU2V0IGEgc3R5bGUgcHJvcGVydHkuXG4gKi9cblxuXG52YXIgc2V0UHJvcGVydHkgPSBmdW5jdGlvbiBzZXRQcm9wZXJ0eShjc3NSdWxlLCBwcm9wLCB2YWx1ZSkge1xuICB0cnkge1xuICAgIHZhciBjc3NWYWx1ZSA9IHZhbHVlO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBjc3NWYWx1ZSA9IHRvQ3NzVmFsdWUodmFsdWUpO1xuICAgIH0gLy8gU3VwcG9ydCBDU1NUT00uXG5cblxuICAgIGlmIChjc3NSdWxlLmF0dHJpYnV0ZVN0eWxlTWFwKSB7XG4gICAgICBjc3NSdWxlLmF0dHJpYnV0ZVN0eWxlTWFwLnNldChwcm9wLCBjc3NWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpbmRleE9mSW1wb3J0YW50RmxhZyA9IGNzc1ZhbHVlID8gY3NzVmFsdWUuaW5kZXhPZignIWltcG9ydGFudCcpIDogLTE7XG4gICAgICB2YXIgY3NzVmFsdWVXaXRob3V0SW1wb3J0YW50RmxhZyA9IGluZGV4T2ZJbXBvcnRhbnRGbGFnID4gLTEgPyBjc3NWYWx1ZS5zdWJzdHIoMCwgaW5kZXhPZkltcG9ydGFudEZsYWcgLSAxKSA6IGNzc1ZhbHVlO1xuICAgICAgY3NzUnVsZS5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCBjc3NWYWx1ZVdpdGhvdXRJbXBvcnRhbnRGbGFnLCBpbmRleE9mSW1wb3J0YW50RmxhZyA+IC0xID8gJ2ltcG9ydGFudCcgOiAnJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBJRSBtYXkgdGhyb3cgaWYgcHJvcGVydHkgaXMgdW5rbm93bi5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbiAqIFJlbW92ZSBhIHN0eWxlIHByb3BlcnR5LlxuICovXG5cblxudmFyIHJlbW92ZVByb3BlcnR5ID0gZnVuY3Rpb24gcmVtb3ZlUHJvcGVydHkoY3NzUnVsZSwgcHJvcCkge1xuICB0cnkge1xuICAgIC8vIFN1cHBvcnQgQ1NTVE9NLlxuICAgIGlmIChjc3NSdWxlLmF0dHJpYnV0ZVN0eWxlTWFwKSB7XG4gICAgICBjc3NSdWxlLmF0dHJpYnV0ZVN0eWxlTWFwLmRlbGV0ZShwcm9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3NzUnVsZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsIFwiW0pTU10gRE9NRXhjZXB0aW9uIFxcXCJcIiArIGVyci5tZXNzYWdlICsgXCJcXFwiIHdhcyB0aHJvd24uIFRyaWVkIHRvIHJlbW92ZSBwcm9wZXJ0eSBcXFwiXCIgKyBwcm9wICsgXCJcXFwiLlwiKSA6IHZvaWQgMDtcbiAgfVxufTtcbi8qKlxuICogU2V0IHRoZSBzZWxlY3Rvci5cbiAqL1xuXG5cbnZhciBzZXRTZWxlY3RvciA9IGZ1bmN0aW9uIHNldFNlbGVjdG9yKGNzc1J1bGUsIHNlbGVjdG9yVGV4dCkge1xuICBjc3NSdWxlLnNlbGVjdG9yVGV4dCA9IHNlbGVjdG9yVGV4dDsgLy8gUmV0dXJuIGZhbHNlIGlmIHNldHRlciB3YXMgbm90IHN1Y2Nlc3NmdWwuXG4gIC8vIEN1cnJlbnRseSB3b3JrcyBpbiBjaHJvbWUgb25seS5cblxuICByZXR1cm4gY3NzUnVsZS5zZWxlY3RvclRleHQgPT09IHNlbGVjdG9yVGV4dDtcbn07XG4vKipcbiAqIEdldHMgdGhlIGBoZWFkYCBlbGVtZW50IHVwb24gdGhlIGZpcnN0IGNhbGwgYW5kIGNhY2hlcyBpdC5cbiAqIFdlIGFzc3VtZSBpdCBjYW4ndCBiZSBudWxsLlxuICovXG5cblxudmFyIGdldEhlYWQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKTtcbn0pO1xuLyoqXG4gKiBGaW5kIGF0dGFjaGVkIHNoZWV0IHdpdGggYW4gaW5kZXggaGlnaGVyIHRoYW4gdGhlIHBhc3NlZCBvbmUuXG4gKi9cblxuZnVuY3Rpb24gZmluZEhpZ2hlclNoZWV0KHJlZ2lzdHJ5LCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnaXN0cnkubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc2hlZXQgPSByZWdpc3RyeVtpXTtcblxuICAgIGlmIChzaGVldC5hdHRhY2hlZCAmJiBzaGVldC5vcHRpb25zLmluZGV4ID4gb3B0aW9ucy5pbmRleCAmJiBzaGVldC5vcHRpb25zLmluc2VydGlvblBvaW50ID09PSBvcHRpb25zLmluc2VydGlvblBvaW50KSB7XG4gICAgICByZXR1cm4gc2hlZXQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEZpbmQgYXR0YWNoZWQgc2hlZXQgd2l0aCB0aGUgaGlnaGVzdCBpbmRleC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGZpbmRIaWdoZXN0U2hlZXQocmVnaXN0cnksIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IHJlZ2lzdHJ5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIHNoZWV0ID0gcmVnaXN0cnlbaV07XG5cbiAgICBpZiAoc2hlZXQuYXR0YWNoZWQgJiYgc2hlZXQub3B0aW9ucy5pbnNlcnRpb25Qb2ludCA9PT0gb3B0aW9ucy5pbnNlcnRpb25Qb2ludCkge1xuICAgICAgcmV0dXJuIHNoZWV0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBGaW5kIGEgY29tbWVudCB3aXRoIFwianNzXCIgaW5zaWRlLlxuICovXG5cblxuZnVuY3Rpb24gZmluZENvbW1lbnROb2RlKHRleHQpIHtcbiAgdmFyIGhlYWQgPSBnZXRIZWFkKCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IGhlYWQuY2hpbGROb2Rlc1tpXTtcblxuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4ICYmIG5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gdGV4dCkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEZpbmQgYSBub2RlIGJlZm9yZSB3aGljaCB3ZSBjYW4gaW5zZXJ0IHRoZSBzaGVldC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGZpbmRQcmV2Tm9kZShvcHRpb25zKSB7XG4gIHZhciByZWdpc3RyeSA9IHNoZWV0cy5yZWdpc3RyeTtcblxuICBpZiAocmVnaXN0cnkubGVuZ3RoID4gMCkge1xuICAgIC8vIFRyeSB0byBpbnNlcnQgYmVmb3JlIHRoZSBuZXh0IGhpZ2hlciBzaGVldC5cbiAgICB2YXIgc2hlZXQgPSBmaW5kSGlnaGVyU2hlZXQocmVnaXN0cnksIG9wdGlvbnMpO1xuXG4gICAgaWYgKHNoZWV0ICYmIHNoZWV0LnJlbmRlcmVyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXJlbnQ6IHNoZWV0LnJlbmRlcmVyLmVsZW1lbnQucGFyZW50Tm9kZSxcbiAgICAgICAgbm9kZTogc2hlZXQucmVuZGVyZXIuZWxlbWVudFxuICAgICAgfTtcbiAgICB9IC8vIE90aGVyd2lzZSBpbnNlcnQgYWZ0ZXIgdGhlIGxhc3QgYXR0YWNoZWQuXG5cblxuICAgIHNoZWV0ID0gZmluZEhpZ2hlc3RTaGVldChyZWdpc3RyeSwgb3B0aW9ucyk7XG5cbiAgICBpZiAoc2hlZXQgJiYgc2hlZXQucmVuZGVyZXIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhcmVudDogc2hlZXQucmVuZGVyZXIuZWxlbWVudC5wYXJlbnROb2RlLFxuICAgICAgICBub2RlOiBzaGVldC5yZW5kZXJlci5lbGVtZW50Lm5leHRTaWJsaW5nXG4gICAgICB9O1xuICAgIH1cbiAgfSAvLyBUcnkgdG8gZmluZCBhIGNvbW1lbnQgcGxhY2Vob2xkZXIgaWYgcmVnaXN0cnkgaXMgZW1wdHkuXG5cblxuICB2YXIgaW5zZXJ0aW9uUG9pbnQgPSBvcHRpb25zLmluc2VydGlvblBvaW50O1xuXG4gIGlmIChpbnNlcnRpb25Qb2ludCAmJiB0eXBlb2YgaW5zZXJ0aW9uUG9pbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIGNvbW1lbnQgPSBmaW5kQ29tbWVudE5vZGUoaW5zZXJ0aW9uUG9pbnQpO1xuXG4gICAgaWYgKGNvbW1lbnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhcmVudDogY29tbWVudC5wYXJlbnROb2RlLFxuICAgICAgICBub2RlOiBjb21tZW50Lm5leHRTaWJsaW5nXG4gICAgICB9O1xuICAgIH0gLy8gSWYgdXNlciBzcGVjaWZpZXMgYW4gaW5zZXJ0aW9uIHBvaW50IGFuZCBpdCBjYW4ndCBiZSBmb3VuZCBpbiB0aGUgZG9jdW1lbnQgLVxuICAgIC8vIGJhZCBzcGVjaWZpY2l0eSBpc3N1ZXMgbWF5IGFwcGVhci5cblxuXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBJbnNlcnRpb24gcG9pbnQgXFxcIlwiICsgaW5zZXJ0aW9uUG9pbnQgKyBcIlxcXCIgbm90IGZvdW5kLlwiKSA6IHZvaWQgMDtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogSW5zZXJ0IHN0eWxlIGVsZW1lbnQgaW50byB0aGUgRE9NLlxuICovXG5cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGUoc3R5bGUsIG9wdGlvbnMpIHtcbiAgdmFyIGluc2VydGlvblBvaW50ID0gb3B0aW9ucy5pbnNlcnRpb25Qb2ludDtcbiAgdmFyIG5leHROb2RlID0gZmluZFByZXZOb2RlKG9wdGlvbnMpO1xuXG4gIGlmIChuZXh0Tm9kZSAhPT0gZmFsc2UgJiYgbmV4dE5vZGUucGFyZW50KSB7XG4gICAgbmV4dE5vZGUucGFyZW50Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dE5vZGUubm9kZSk7XG4gICAgcmV0dXJuO1xuICB9IC8vIFdvcmtzIHdpdGggaWZyYW1lcyBhbmQgYW55IG5vZGUgdHlwZXMuXG5cblxuICBpZiAoaW5zZXJ0aW9uUG9pbnQgJiYgdHlwZW9mIGluc2VydGlvblBvaW50Lm5vZGVUeXBlID09PSAnbnVtYmVyJykge1xuICAgIHZhciBpbnNlcnRpb25Qb2ludEVsZW1lbnQgPSBpbnNlcnRpb25Qb2ludDtcbiAgICB2YXIgcGFyZW50Tm9kZSA9IGluc2VydGlvblBvaW50RWxlbWVudC5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnROb2RlKSBwYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgaW5zZXJ0aW9uUG9pbnRFbGVtZW50Lm5leHRTaWJsaW5nKTtlbHNlIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsICdbSlNTXSBJbnNlcnRpb24gcG9pbnQgaXMgbm90IGluIHRoZSBET00uJykgOiB2b2lkIDA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZ2V0SGVhZCgpLmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbi8qKlxuICogUmVhZCBqc3Mgbm9uY2Ugc2V0dGluZyBmcm9tIHRoZSBwYWdlIGlmIHRoZSB1c2VyIGhhcyBzZXQgaXQuXG4gKi9cblxuXG52YXIgZ2V0Tm9uY2UgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW3Byb3BlcnR5PVwiY3NwLW5vbmNlXCJdJyk7XG4gIHJldHVybiBub2RlID8gbm9kZS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSA6IG51bGw7XG59KTtcblxudmFyIF9pbnNlcnRSdWxlID0gZnVuY3Rpb24gaW5zZXJ0UnVsZShjb250YWluZXIsIHJ1bGUsIGluZGV4KSB7XG4gIHRyeSB7XG4gICAgaWYgKCdpbnNlcnRSdWxlJyBpbiBjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5pbnNlcnRSdWxlKHJ1bGUsIGluZGV4KTtcbiAgICB9IC8vIEtleWZyYW1lcyBydWxlLlxuICAgIGVsc2UgaWYgKCdhcHBlbmRSdWxlJyBpbiBjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZFJ1bGUocnVsZSk7XG4gICAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsIFwiW0pTU10gXCIgKyBlcnIubWVzc2FnZSkgOiB2b2lkIDA7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRhaW5lci5jc3NSdWxlc1tpbmRleF07XG59O1xuXG52YXIgZ2V0VmFsaWRSdWxlSW5zZXJ0aW9uSW5kZXggPSBmdW5jdGlvbiBnZXRWYWxpZFJ1bGVJbnNlcnRpb25JbmRleChjb250YWluZXIsIGluZGV4KSB7XG4gIHZhciBtYXhJbmRleCA9IGNvbnRhaW5lci5jc3NSdWxlcy5sZW5ndGg7IC8vIEluIGNhc2UgcHJldmlvdXMgaW5zZXJ0aW9uIGZhaWxzLCBwYXNzZWQgaW5kZXggbWlnaHQgYmUgd3JvbmdcblxuICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCB8fCBpbmRleCA+IG1heEluZGV4KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcmV0dXJuIG1heEluZGV4O1xuICB9XG5cbiAgcmV0dXJuIGluZGV4O1xufTtcblxudmFyIGNyZWF0ZVN0eWxlID0gZnVuY3Rpb24gY3JlYXRlU3R5bGUoKSB7XG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7IC8vIFdpdGhvdXQgaXQsIElFIHdpbGwgaGF2ZSBhIGJyb2tlbiBzb3VyY2Ugb3JkZXIgc3BlY2lmaWNpdHkgaWYgd2VcbiAgLy8gaW5zZXJ0IHJ1bGVzIGFmdGVyIHdlIGluc2VydCB0aGUgc3R5bGUgdGFnLlxuICAvLyBJdCBzZWVtcyB0byBraWNrLW9mZiB0aGUgc291cmNlIG9yZGVyIHNwZWNpZmljaXR5IGFsZ29yaXRobS5cblxuICBlbC50ZXh0Q29udGVudCA9ICdcXG4nO1xuICByZXR1cm4gZWw7XG59O1xuXG52YXIgRG9tUmVuZGVyZXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICAvLyBXaWxsIGJlIGVtcHR5IGlmIGxpbms6IHRydWUgb3B0aW9uIGlzIG5vdCBzZXQsIGJlY2F1c2VcbiAgLy8gaXQgaXMgb25seSBmb3IgdXNlIHRvZ2V0aGVyIHdpdGggaW5zZXJ0UnVsZSBBUEkuXG4gIGZ1bmN0aW9uIERvbVJlbmRlcmVyKHNoZWV0KSB7XG4gICAgdGhpcy5nZXRQcm9wZXJ0eVZhbHVlID0gZ2V0UHJvcGVydHlWYWx1ZTtcbiAgICB0aGlzLnNldFByb3BlcnR5ID0gc2V0UHJvcGVydHk7XG4gICAgdGhpcy5yZW1vdmVQcm9wZXJ0eSA9IHJlbW92ZVByb3BlcnR5O1xuICAgIHRoaXMuc2V0U2VsZWN0b3IgPSBzZXRTZWxlY3RvcjtcbiAgICB0aGlzLmhhc0luc2VydGVkUnVsZXMgPSBmYWxzZTtcbiAgICB0aGlzLmNzc1J1bGVzID0gW107XG4gICAgLy8gVGhlcmUgaXMgbm8gc2hlZXQgd2hlbiB0aGUgcmVuZGVyZXIgaXMgdXNlZCBmcm9tIGEgc3RhbmRhbG9uZSBTdHlsZVJ1bGUuXG4gICAgaWYgKHNoZWV0KSBzaGVldHMuYWRkKHNoZWV0KTtcbiAgICB0aGlzLnNoZWV0ID0gc2hlZXQ7XG5cbiAgICB2YXIgX3JlZiA9IHRoaXMuc2hlZXQgPyB0aGlzLnNoZWV0Lm9wdGlvbnMgOiB7fSxcbiAgICAgICAgbWVkaWEgPSBfcmVmLm1lZGlhLFxuICAgICAgICBtZXRhID0gX3JlZi5tZXRhLFxuICAgICAgICBlbGVtZW50ID0gX3JlZi5lbGVtZW50O1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCB8fCBjcmVhdGVTdHlsZSgpO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtanNzJywgJycpO1xuICAgIGlmIChtZWRpYSkgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gICAgaWYgKG1ldGEpIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWV0YScsIG1ldGEpO1xuICAgIHZhciBub25jZSA9IGdldE5vbmNlKCk7XG4gICAgaWYgKG5vbmNlKSB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdub25jZScsIG5vbmNlKTtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IHN0eWxlIGVsZW1lbnQgaW50byByZW5kZXIgdHJlZS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gRG9tUmVuZGVyZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5hdHRhY2ggPSBmdW5jdGlvbiBhdHRhY2goKSB7XG4gICAgLy8gSW4gdGhlIGNhc2UgdGhlIGVsZW1lbnQgbm9kZSBpcyBleHRlcm5hbCBhbmQgaXQgaXMgYWxyZWFkeSBpbiB0aGUgRE9NLlxuICAgIGlmICh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSB8fCAhdGhpcy5zaGVldCkgcmV0dXJuO1xuICAgIGluc2VydFN0eWxlKHRoaXMuZWxlbWVudCwgdGhpcy5zaGVldC5vcHRpb25zKTsgLy8gV2hlbiBydWxlcyBhcmUgaW5zZXJ0ZWQgdXNpbmcgYGluc2VydFJ1bGVgIEFQSSwgYWZ0ZXIgYHNoZWV0LmRldGFjaCgpLmF0dGFjaCgpYFxuICAgIC8vIG1vc3QgYnJvd3NlcnMgY3JlYXRlIGEgbmV3IENTU1N0eWxlU2hlZXQsIGV4Y2VwdCBvZiBhbGwgSUVzLlxuXG4gICAgdmFyIGRlcGxveWVkID0gQm9vbGVhbih0aGlzLnNoZWV0ICYmIHRoaXMuc2hlZXQuZGVwbG95ZWQpO1xuXG4gICAgaWYgKHRoaXMuaGFzSW5zZXJ0ZWRSdWxlcyAmJiBkZXBsb3llZCkge1xuICAgICAgdGhpcy5oYXNJbnNlcnRlZFJ1bGVzID0gZmFsc2U7XG4gICAgICB0aGlzLmRlcGxveSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIHN0eWxlIGVsZW1lbnQgZnJvbSByZW5kZXIgdHJlZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKCkge1xuICAgIGlmICghdGhpcy5zaGVldCkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnROb2RlID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTsgLy8gSW4gdGhlIG1vc3QgYnJvd3NlcnMsIHJ1bGVzIGluc2VydGVkIHVzaW5nIGluc2VydFJ1bGUoKSBBUEkgd2lsbCBiZSBsb3N0IHdoZW4gc3R5bGUgZWxlbWVudCBpcyByZW1vdmVkLlxuICAgIC8vIFRob3VnaCBJRSB3aWxsIGtlZXAgdGhlbSBhbmQgd2UgbmVlZCBhIGNvbnNpc3RlbnQgYmVoYXZpb3IuXG5cbiAgICBpZiAodGhpcy5zaGVldC5vcHRpb25zLmxpbmspIHtcbiAgICAgIHRoaXMuY3NzUnVsZXMgPSBbXTtcbiAgICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9ICdcXG4nO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogSW5qZWN0IENTUyBzdHJpbmcgaW50byBlbGVtZW50LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZXBsb3kgPSBmdW5jdGlvbiBkZXBsb3koKSB7XG4gICAgdmFyIHNoZWV0ID0gdGhpcy5zaGVldDtcbiAgICBpZiAoIXNoZWV0KSByZXR1cm47XG5cbiAgICBpZiAoc2hlZXQub3B0aW9ucy5saW5rKSB7XG4gICAgICB0aGlzLmluc2VydFJ1bGVzKHNoZWV0LnJ1bGVzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlxcblwiICsgc2hlZXQudG9TdHJpbmcoKSArIFwiXFxuXCI7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBSdWxlTGlzdCBpbnRvIGFuIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmluc2VydFJ1bGVzID0gZnVuY3Rpb24gaW5zZXJ0UnVsZXMocnVsZXMsIG5hdGl2ZVBhcmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMuaW5kZXgubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuaW5zZXJ0UnVsZShydWxlcy5pbmRleFtpXSwgaSwgbmF0aXZlUGFyZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBhIHJ1bGUgaW50byBlbGVtZW50LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbnNlcnRSdWxlID0gZnVuY3Rpb24gaW5zZXJ0UnVsZShydWxlLCBpbmRleCwgbmF0aXZlUGFyZW50KSB7XG4gICAgaWYgKG5hdGl2ZVBhcmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICBuYXRpdmVQYXJlbnQgPSB0aGlzLmVsZW1lbnQuc2hlZXQ7XG4gICAgfVxuXG4gICAgaWYgKHJ1bGUucnVsZXMpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBydWxlO1xuICAgICAgdmFyIGxhdGVzdE5hdGl2ZVBhcmVudCA9IG5hdGl2ZVBhcmVudDtcblxuICAgICAgaWYgKHJ1bGUudHlwZSA9PT0gJ2NvbmRpdGlvbmFsJyB8fCBydWxlLnR5cGUgPT09ICdrZXlmcmFtZXMnKSB7XG4gICAgICAgIHZhciBfaW5zZXJ0aW9uSW5kZXggPSBnZXRWYWxpZFJ1bGVJbnNlcnRpb25JbmRleChuYXRpdmVQYXJlbnQsIGluZGV4KTsgLy8gV2UgbmVlZCB0byByZW5kZXIgdGhlIGNvbnRhaW5lciB3aXRob3V0IGNoaWxkcmVuIGZpcnN0LlxuXG5cbiAgICAgICAgbGF0ZXN0TmF0aXZlUGFyZW50ID0gX2luc2VydFJ1bGUobmF0aXZlUGFyZW50LCBwYXJlbnQudG9TdHJpbmcoe1xuICAgICAgICAgIGNoaWxkcmVuOiBmYWxzZVxuICAgICAgICB9KSwgX2luc2VydGlvbkluZGV4KTtcblxuICAgICAgICBpZiAobGF0ZXN0TmF0aXZlUGFyZW50ID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVmQ3NzUnVsZShydWxlLCBfaW5zZXJ0aW9uSW5kZXgsIGxhdGVzdE5hdGl2ZVBhcmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaW5zZXJ0UnVsZXMocGFyZW50LnJ1bGVzLCBsYXRlc3ROYXRpdmVQYXJlbnQpO1xuICAgICAgcmV0dXJuIGxhdGVzdE5hdGl2ZVBhcmVudDtcbiAgICB9XG5cbiAgICB2YXIgcnVsZVN0ciA9IHJ1bGUudG9TdHJpbmcoKTtcbiAgICBpZiAoIXJ1bGVTdHIpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSBnZXRWYWxpZFJ1bGVJbnNlcnRpb25JbmRleChuYXRpdmVQYXJlbnQsIGluZGV4KTtcblxuICAgIHZhciBuYXRpdmVSdWxlID0gX2luc2VydFJ1bGUobmF0aXZlUGFyZW50LCBydWxlU3RyLCBpbnNlcnRpb25JbmRleCk7XG5cbiAgICBpZiAobmF0aXZlUnVsZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmhhc0luc2VydGVkUnVsZXMgPSB0cnVlO1xuICAgIHRoaXMucmVmQ3NzUnVsZShydWxlLCBpbnNlcnRpb25JbmRleCwgbmF0aXZlUnVsZSk7XG4gICAgcmV0dXJuIG5hdGl2ZVJ1bGU7XG4gIH07XG5cbiAgX3Byb3RvLnJlZkNzc1J1bGUgPSBmdW5jdGlvbiByZWZDc3NSdWxlKHJ1bGUsIGluZGV4LCBjc3NSdWxlKSB7XG4gICAgcnVsZS5yZW5kZXJhYmxlID0gY3NzUnVsZTsgLy8gV2Ugb25seSB3YW50IHRvIHJlZmVyZW5jZSB0aGUgdG9wIGxldmVsIHJ1bGVzLCBkZWxldGVSdWxlIEFQSSBkb2Vzbid0IHN1cHBvcnQgcmVtb3ZpbmcgbmVzdGVkIHJ1bGVzXG4gICAgLy8gbGlrZSBydWxlcyBpbnNpZGUgbWVkaWEgcXVlcmllcyBvciBrZXlmcmFtZXNcblxuICAgIGlmIChydWxlLm9wdGlvbnMucGFyZW50IGluc3RhbmNlb2YgU3R5bGVTaGVldCkge1xuICAgICAgdGhpcy5jc3NSdWxlcy5zcGxpY2UoaW5kZXgsIDAsIGNzc1J1bGUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGVsZXRlUnVsZSA9IGZ1bmN0aW9uIGRlbGV0ZVJ1bGUoY3NzUnVsZSkge1xuICAgIHZhciBzaGVldCA9IHRoaXMuZWxlbWVudC5zaGVldDtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YoY3NzUnVsZSk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIHNoZWV0LmRlbGV0ZVJ1bGUoaW5kZXgpO1xuICAgIHRoaXMuY3NzUnVsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogR2V0IGluZGV4IG9mIGEgQ1NTIFJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKGNzc1J1bGUpIHtcbiAgICByZXR1cm4gdGhpcy5jc3NSdWxlcy5pbmRleE9mKGNzc1J1bGUpO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIG5ldyBDU1MgcnVsZSBhbmQgcmVwbGFjZSB0aGUgZXhpc3Rpbmcgb25lLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZXBsYWNlUnVsZSA9IGZ1bmN0aW9uIHJlcGxhY2VSdWxlKGNzc1J1bGUsIHJ1bGUpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YoY3NzUnVsZSk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIHRoaXMuZWxlbWVudC5zaGVldC5kZWxldGVSdWxlKGluZGV4KTtcbiAgICB0aGlzLmNzc1J1bGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0UnVsZShydWxlLCBpbmRleCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgcnVsZXMgZWxlbWVudHMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldFJ1bGVzID0gZnVuY3Rpb24gZ2V0UnVsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zaGVldC5jc3NSdWxlcztcbiAgfTtcblxuICByZXR1cm4gRG9tUmVuZGVyZXI7XG59KCk7XG5cbnZhciBpbnN0YW5jZUNvdW50ZXIgPSAwO1xuXG52YXIgSnNzID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSnNzKG9wdGlvbnMpIHtcbiAgICB0aGlzLmlkID0gaW5zdGFuY2VDb3VudGVyKys7XG4gICAgdGhpcy52ZXJzaW9uID0gXCIxMC4xMC4wXCI7XG4gICAgdGhpcy5wbHVnaW5zID0gbmV3IFBsdWdpbnNSZWdpc3RyeSgpO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIG1pbmlmeTogZmFsc2VcbiAgICAgIH0sXG4gICAgICBjcmVhdGVHZW5lcmF0ZUlkOiBjcmVhdGVHZW5lcmF0ZUlkLFxuICAgICAgUmVuZGVyZXI6IGlzSW5Ccm93c2VyID8gRG9tUmVuZGVyZXIgOiBudWxsLFxuICAgICAgcGx1Z2luczogW11cbiAgICB9O1xuICAgIHRoaXMuZ2VuZXJhdGVJZCA9IGNyZWF0ZUdlbmVyYXRlSWQoe1xuICAgICAgbWluaWZ5OiBmYWxzZVxuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnBsdWdpbnMudXNlKHBsdWdpbnNbaV0sIHtcbiAgICAgICAgcXVldWU6ICdpbnRlcm5hbCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dXAob3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFByZXBhcmVzIHZhcmlvdXMgb3B0aW9ucywgYXBwbGllcyBwbHVnaW5zLlxuICAgKiBTaG91bGQgbm90IGJlIHVzZWQgdHdpY2Ugb24gdGhlIHNhbWUgaW5zdGFuY2UsIGJlY2F1c2UgdGhlcmUgaXMgbm8gcGx1Z2luc1xuICAgKiBkZWR1cGxpY2F0aW9uIGxvZ2ljLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBKc3MucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXR1cCA9IGZ1bmN0aW9uIHNldHVwKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuY3JlYXRlR2VuZXJhdGVJZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmNyZWF0ZUdlbmVyYXRlSWQgPSBvcHRpb25zLmNyZWF0ZUdlbmVyYXRlSWQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5pZCA9IF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMuaWQsIG9wdGlvbnMuaWQpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmNyZWF0ZUdlbmVyYXRlSWQgfHwgb3B0aW9ucy5pZCkge1xuICAgICAgdGhpcy5nZW5lcmF0ZUlkID0gdGhpcy5vcHRpb25zLmNyZWF0ZUdlbmVyYXRlSWQodGhpcy5vcHRpb25zLmlkKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pbnNlcnRpb25Qb2ludCAhPSBudWxsKSB0aGlzLm9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQgPSBvcHRpb25zLmluc2VydGlvblBvaW50O1xuXG4gICAgaWYgKCdSZW5kZXJlcicgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zLlJlbmRlcmVyID0gb3B0aW9ucy5SZW5kZXJlcjtcbiAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG5cblxuICAgIGlmIChvcHRpb25zLnBsdWdpbnMpIHRoaXMudXNlLmFwcGx5KHRoaXMsIG9wdGlvbnMucGx1Z2lucyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFN0eWxlIFNoZWV0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVTdHlsZVNoZWV0ID0gZnVuY3Rpb24gY3JlYXRlU3R5bGVTaGVldChzdHlsZXMsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgICAgaW5kZXggPSBfb3B0aW9ucy5pbmRleDtcblxuICAgIGlmICh0eXBlb2YgaW5kZXggIT09ICdudW1iZXInKSB7XG4gICAgICBpbmRleCA9IHNoZWV0cy5pbmRleCA9PT0gMCA/IDAgOiBzaGVldHMuaW5kZXggKyAxO1xuICAgIH1cblxuICAgIHZhciBzaGVldCA9IG5ldyBTdHlsZVNoZWV0KHN0eWxlcywgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIGpzczogdGhpcyxcbiAgICAgIGdlbmVyYXRlSWQ6IG9wdGlvbnMuZ2VuZXJhdGVJZCB8fCB0aGlzLmdlbmVyYXRlSWQsXG4gICAgICBpbnNlcnRpb25Qb2ludDogdGhpcy5vcHRpb25zLmluc2VydGlvblBvaW50LFxuICAgICAgUmVuZGVyZXI6IHRoaXMub3B0aW9ucy5SZW5kZXJlcixcbiAgICAgIGluZGV4OiBpbmRleFxuICAgIH0pKTtcbiAgICB0aGlzLnBsdWdpbnMub25Qcm9jZXNzU2hlZXQoc2hlZXQpO1xuICAgIHJldHVybiBzaGVldDtcbiAgfVxuICAvKipcbiAgICogRGV0YWNoIHRoZSBTdHlsZSBTaGVldCBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIHJlZ2lzdHJ5LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVTdHlsZVNoZWV0ID0gZnVuY3Rpb24gcmVtb3ZlU3R5bGVTaGVldChzaGVldCkge1xuICAgIHNoZWV0LmRldGFjaCgpO1xuICAgIHNoZWV0cy5yZW1vdmUoc2hlZXQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBydWxlIHdpdGhvdXQgYSBTdHlsZSBTaGVldC5cbiAgICogW0RlcHJlY2F0ZWRdIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVSdWxlID0gZnVuY3Rpb24gY3JlYXRlUnVsZSQxKG5hbWUsIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKHN0eWxlID09PSB2b2lkIDApIHtcbiAgICAgIHN0eWxlID0ge307XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIC8vIEVuYWJsZSBydWxlIHdpdGhvdXQgbmFtZSBmb3IgaW5saW5lIHN0eWxlcy5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVSdWxlKHVuZGVmaW5lZCwgbmFtZSwgc3R5bGUpO1xuICAgIH1cblxuICAgIHZhciBydWxlT3B0aW9ucyA9IF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAganNzOiB0aGlzLFxuICAgICAgUmVuZGVyZXI6IHRoaXMub3B0aW9ucy5SZW5kZXJlclxuICAgIH0pO1xuXG4gICAgaWYgKCFydWxlT3B0aW9ucy5nZW5lcmF0ZUlkKSBydWxlT3B0aW9ucy5nZW5lcmF0ZUlkID0gdGhpcy5nZW5lcmF0ZUlkO1xuICAgIGlmICghcnVsZU9wdGlvbnMuY2xhc3NlcykgcnVsZU9wdGlvbnMuY2xhc3NlcyA9IHt9O1xuICAgIGlmICghcnVsZU9wdGlvbnMua2V5ZnJhbWVzKSBydWxlT3B0aW9ucy5rZXlmcmFtZXMgPSB7fTtcblxuICAgIHZhciBydWxlID0gY3JlYXRlUnVsZShuYW1lLCBzdHlsZSwgcnVsZU9wdGlvbnMpO1xuXG4gICAgaWYgKHJ1bGUpIHRoaXMucGx1Z2lucy5vblByb2Nlc3NSdWxlKHJ1bGUpO1xuICAgIHJldHVybiBydWxlO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBwbHVnaW4uIFBhc3NlZCBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2l0aCBhIHJ1bGUgaW5zdGFuY2UuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVzZSA9IGZ1bmN0aW9uIHVzZSgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBsdWdpbnMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBwbHVnaW5zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICBfdGhpcy5wbHVnaW5zLnVzZShwbHVnaW4pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBKc3M7XG59KCk7XG5cbnZhciBjcmVhdGVKc3MgPSBmdW5jdGlvbiBjcmVhdGVKc3Mob3B0aW9ucykge1xuICByZXR1cm4gbmV3IEpzcyhvcHRpb25zKTtcbn07XG5cbi8qKlxuICogU2hlZXRzTWFuYWdlciBpcyBsaWtlIGEgV2Vha01hcCB3aGljaCBpcyBkZXNpZ25lZCB0byBjb3VudCBTdHlsZVNoZWV0XG4gKiBpbnN0YW5jZXMgYW5kIGF0dGFjaC9kZXRhY2ggYXV0b21hdGljYWxseS5cbiAqIFVzZWQgaW4gcmVhY3QtanNzLlxuICovXG5cbnZhciBTaGVldHNNYW5hZ2VyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2hlZXRzTWFuYWdlcigpIHtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5zaGVldHMgPSBuZXcgV2Vha01hcCgpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFNoZWV0c01hbmFnZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5zaGVldHMuZ2V0KGtleSk7XG4gICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5LnNoZWV0O1xuICB9O1xuXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQoa2V5LCBzaGVldCkge1xuICAgIGlmICh0aGlzLnNoZWV0cy5oYXMoa2V5KSkgcmV0dXJuO1xuICAgIHRoaXMubGVuZ3RoKys7XG4gICAgdGhpcy5zaGVldHMuc2V0KGtleSwge1xuICAgICAgc2hlZXQ6IHNoZWV0LFxuICAgICAgcmVmczogMFxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5tYW5hZ2UgPSBmdW5jdGlvbiBtYW5hZ2Uoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5zaGVldHMuZ2V0KGtleSk7XG5cbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGlmIChlbnRyeS5yZWZzID09PSAwKSB7XG4gICAgICAgIGVudHJ5LnNoZWV0LmF0dGFjaCgpO1xuICAgICAgfVxuXG4gICAgICBlbnRyeS5yZWZzKys7XG4gICAgICByZXR1cm4gZW50cnkuc2hlZXQ7XG4gICAgfVxuXG4gICAgd2FybmluZyhmYWxzZSwgXCJbSlNTXSBTaGVldHNNYW5hZ2VyOiBjYW4ndCBmaW5kIHNoZWV0IHRvIG1hbmFnZVwiKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIF9wcm90by51bm1hbmFnZSA9IGZ1bmN0aW9uIHVubWFuYWdlKGtleSkge1xuICAgIHZhciBlbnRyeSA9IHRoaXMuc2hlZXRzLmdldChrZXkpO1xuXG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBpZiAoZW50cnkucmVmcyA+IDApIHtcbiAgICAgICAgZW50cnkucmVmcy0tO1xuICAgICAgICBpZiAoZW50cnkucmVmcyA9PT0gMCkgZW50cnkuc2hlZXQuZGV0YWNoKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm5pbmcoZmFsc2UsIFwiU2hlZXRzTWFuYWdlcjogY2FuJ3QgZmluZCBzaGVldCB0byB1bm1hbmFnZVwiKTtcbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFNoZWV0c01hbmFnZXIsIFt7XG4gICAga2V5OiBcInNpemVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2hlZXRzTWFuYWdlcjtcbn0oKTtcblxuLyoqXG4qIEV4cG9ydCBhIGNvbnN0YW50IGluZGljYXRpbmcgaWYgdGhpcyBicm93c2VyIGhhcyBDU1NUT00gc3VwcG9ydC5cbiogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxOC8wMy9jc3NvbVxuKi9cbnZhciBoYXNDU1NUT01TdXBwb3J0ID0gdHlwZW9mIENTUyA9PT0gJ29iamVjdCcgJiYgQ1NTICE9IG51bGwgJiYgJ251bWJlcicgaW4gQ1NTO1xuXG4vKipcbiAqIEV4dHJhY3RzIGEgc3R5bGVzIG9iamVjdCB3aXRoIG9ubHkgcHJvcHMgdGhhdCBjb250YWluIGZ1bmN0aW9uIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gZ2V0RHluYW1pY1N0eWxlcyhzdHlsZXMpIHtcbiAgdmFyIHRvID0gbnVsbDtcblxuICBmb3IgKHZhciBrZXkgaW4gc3R5bGVzKSB7XG4gICAgdmFyIHZhbHVlID0gc3R5bGVzW2tleV07XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKCF0bykgdG8gPSB7fTtcbiAgICAgIHRvW2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgdmFyIGV4dHJhY3RlZCA9IGdldER5bmFtaWNTdHlsZXModmFsdWUpO1xuXG4gICAgICBpZiAoZXh0cmFjdGVkKSB7XG4gICAgICAgIGlmICghdG8pIHRvID0ge307XG4gICAgICAgIHRvW2tleV0gPSBleHRyYWN0ZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG4vKipcbiAqIEEgYmV0dGVyIGFic3RyYWN0aW9uIG92ZXIgQ1NTLlxuICpcbiAqIEBjb3B5cmlnaHQgT2xlZyBJc29uZW4gKFNsb2JvZHNrb2kpIC8gSXNvbmVuIDIwMTQtcHJlc2VudFxuICogQHdlYnNpdGUgaHR0cHM6Ly9naXRodWIuY29tL2Nzc2luanMvanNzXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xudmFyIGluZGV4ID0gY3JlYXRlSnNzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGluZGV4O1xuZXhwb3J0IHsgUnVsZUxpc3QsIFNoZWV0c01hbmFnZXIsIFNoZWV0c1JlZ2lzdHJ5LCBjcmVhdGVKc3MgYXMgY3JlYXRlLCBjcmVhdGVHZW5lcmF0ZUlkLCBjcmVhdGVSdWxlLCBnZXREeW5hbWljU3R5bGVzLCBoYXNDU1NUT01TdXBwb3J0LCBzaGVldHMsIHRvQ3NzVmFsdWUgfTtcbiIsIi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBTRFAgaGVscGVycy5cbmNvbnN0IFNEUFV0aWxzID0ge307XG5cbi8vIEdlbmVyYXRlIGFuIGFscGhhbnVtZXJpYyBpZGVudGlmaWVyIGZvciBjbmFtZSBvciBtaWRzLlxuLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODNcblNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEyKTtcbn07XG5cbi8vIFRoZSBSVENQIENOQU1FIHVzZWQgYnkgYWxsIHBlZXJjb25uZWN0aW9ucyBmcm9tIHRoZSBzYW1lIEpTLlxuU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpO1xuXG4vLyBTcGxpdHMgU0RQIGludG8gbGluZXMsIGRlYWxpbmcgd2l0aCBib3RoIENSTEYgYW5kIExGLlxuU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgcmV0dXJuIGJsb2IudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSk7XG59O1xuLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuXG5TRFBVdGlscy5zcGxpdFNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikge1xuICBjb25zdCBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xcbm09Jyk7XG4gIHJldHVybiBwYXJ0cy5tYXAoKHBhcnQsIGluZGV4KSA9PiAoaW5kZXggPiAwID9cbiAgICAnbT0nICsgcGFydCA6IHBhcnQpLnRyaW0oKSArICdcXHJcXG4nKTtcbn07XG5cbi8vIFJldHVybnMgdGhlIHNlc3Npb24gZGVzY3JpcHRpb24uXG5TRFBVdGlscy5nZXREZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgY29uc3Qgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGJsb2IpO1xuICByZXR1cm4gc2VjdGlvbnMgJiYgc2VjdGlvbnNbMF07XG59O1xuXG4vLyBSZXR1cm5zIHRoZSBpbmRpdmlkdWFsIG1lZGlhIHNlY3Rpb25zLlxuU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgY29uc3Qgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGJsb2IpO1xuICBzZWN0aW9ucy5zaGlmdCgpO1xuICByZXR1cm4gc2VjdGlvbnM7XG59O1xuXG4vLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LlxuU0RQVXRpbHMubWF0Y2hQcmVmaXggPSBmdW5jdGlvbihibG9iLCBwcmVmaXgpIHtcbiAgcmV0dXJuIFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYikuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDApO1xufTtcblxuLy8gUGFyc2VzIGFuIElDRSBjYW5kaWRhdGUgbGluZS4gU2FtcGxlIGlucHV0OlxuLy8gY2FuZGlkYXRlOjcwMjc4NjM1MCAyIHVkcCA0MTgxOTkwMiA4LjguOC44IDYwNzY5IHR5cCByZWxheSByYWRkciA4LjguOC44XG4vLyBycG9ydCA1NTk5NlwiXG4vLyBJbnB1dCBjYW4gYmUgcHJlZml4ZWQgd2l0aCBhPS5cblNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlID0gZnVuY3Rpb24obGluZSkge1xuICBsZXQgcGFydHM7XG4gIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuXG4gIGlmIChsaW5lLmluZGV4T2YoJ2E9Y2FuZGlkYXRlOicpID09PSAwKSB7XG4gICAgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMikuc3BsaXQoJyAnKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEwKS5zcGxpdCgnICcpO1xuICB9XG5cbiAgY29uc3QgY2FuZGlkYXRlID0ge1xuICAgIGZvdW5kYXRpb246IHBhcnRzWzBdLFxuICAgIGNvbXBvbmVudDogezE6ICdydHAnLCAyOiAncnRjcCd9W3BhcnRzWzFdXSB8fCBwYXJ0c1sxXSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSxcbiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSxcbiAgICBpcDogcGFydHNbNF0sXG4gICAgYWRkcmVzczogcGFydHNbNF0sIC8vIGFkZHJlc3MgaXMgYW4gYWxpYXMgZm9yIGlwLlxuICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksXG4gICAgLy8gc2tpcCBwYXJ0c1s2XSA9PSAndHlwJ1xuICAgIHR5cGU6IHBhcnRzWzddLFxuICB9O1xuXG4gIGZvciAobGV0IGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICBzd2l0Y2ggKHBhcnRzW2ldKSB7XG4gICAgICBjYXNlICdyYWRkcic6XG4gICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdycG9ydCc6XG4gICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCA9IHBhcnNlSW50KHBhcnRzW2kgKyAxXSwgMTApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RjcHR5cGUnOlxuICAgICAgICBjYW5kaWRhdGUudGNwVHlwZSA9IHBhcnRzW2kgKyAxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1ZnJhZyc6XG4gICAgICAgIGNhbmRpZGF0ZS51ZnJhZyA9IHBhcnRzW2kgKyAxXTsgLy8gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50ID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIGV4dGVuc2lvbiBoYW5kbGluZywgaW4gcGFydGljdWxhciB1ZnJhZy4gRG9uJ3Qgb3ZlcndyaXRlLlxuICAgICAgICBpZiAoY2FuZGlkYXRlW3BhcnRzW2ldXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY2FuZGlkYXRlW3BhcnRzW2ldXSA9IHBhcnRzW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNhbmRpZGF0ZTtcbn07XG5cbi8vIFRyYW5zbGF0ZXMgYSBjYW5kaWRhdGUgb2JqZWN0IGludG8gU0RQIGNhbmRpZGF0ZSBhdHRyaWJ1dGUuXG4vLyBUaGlzIGRvZXMgbm90IGluY2x1ZGUgdGhlIGE9IHByZWZpeCFcblNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gIGNvbnN0IHNkcCA9IFtdO1xuICBzZHAucHVzaChjYW5kaWRhdGUuZm91bmRhdGlvbik7XG5cbiAgY29uc3QgY29tcG9uZW50ID0gY2FuZGlkYXRlLmNvbXBvbmVudDtcbiAgaWYgKGNvbXBvbmVudCA9PT0gJ3J0cCcpIHtcbiAgICBzZHAucHVzaCgxKTtcbiAgfSBlbHNlIGlmIChjb21wb25lbnQgPT09ICdydGNwJykge1xuICAgIHNkcC5wdXNoKDIpO1xuICB9IGVsc2Uge1xuICAgIHNkcC5wdXNoKGNvbXBvbmVudCk7XG4gIH1cbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUuYWRkcmVzcyB8fCBjYW5kaWRhdGUuaXApO1xuICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7XG5cbiAgY29uc3QgdHlwZSA9IGNhbmRpZGF0ZS50eXBlO1xuICBzZHAucHVzaCgndHlwJyk7XG4gIHNkcC5wdXNoKHR5cGUpO1xuICBpZiAodHlwZSAhPT0gJ2hvc3QnICYmIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyAmJlxuICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0KSB7XG4gICAgc2RwLnB1c2goJ3JhZGRyJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTtcbiAgICBzZHAucHVzaCgncnBvcnQnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZFBvcnQpO1xuICB9XG4gIGlmIChjYW5kaWRhdGUudGNwVHlwZSAmJiBjYW5kaWRhdGUucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RjcCcpIHtcbiAgICBzZHAucHVzaCgndGNwdHlwZScpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS50Y3BUeXBlKTtcbiAgfVxuICBpZiAoY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgfHwgY2FuZGlkYXRlLnVmcmFnKSB7XG4gICAgc2RwLnB1c2goJ3VmcmFnJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgfHwgY2FuZGlkYXRlLnVmcmFnKTtcbiAgfVxuICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTtcbn07XG5cbi8vIFBhcnNlcyBhbiBpY2Utb3B0aW9ucyBsaW5lLCByZXR1cm5zIGFuIGFycmF5IG9mIG9wdGlvbiB0YWdzLlxuLy8gU2FtcGxlIGlucHV0OlxuLy8gYT1pY2Utb3B0aW9uczpmb28gYmFyXG5TRFBVdGlscy5wYXJzZUljZU9wdGlvbnMgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHJldHVybiBsaW5lLnN1YnN0cmluZygxNCkuc3BsaXQoJyAnKTtcbn07XG5cbi8vIFBhcnNlcyBhIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDpcbi8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzJcblNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkge1xuICBsZXQgcGFydHMgPSBsaW5lLnN1YnN0cmluZyg5KS5zcGxpdCgnICcpO1xuICBjb25zdCBwYXJzZWQgPSB7XG4gICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSwgLy8gd2FzOiBpZFxuICB9O1xuXG4gIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTtcblxuICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdO1xuICBwYXJzZWQuY2xvY2tSYXRlID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTsgLy8gd2FzOiBjbG9ja3JhdGVcbiAgcGFyc2VkLmNoYW5uZWxzID0gcGFydHMubGVuZ3RoID09PSAzID8gcGFyc2VJbnQocGFydHNbMl0sIDEwKSA6IDE7XG4gIC8vIGxlZ2FjeSBhbGlhcywgZ290IHJlbmFtZWQgYmFjayB0byBjaGFubmVscyBpbiBPUlRDLlxuICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJzZWQuY2hhbm5lbHM7XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG4vLyBHZW5lcmF0ZXMgYSBydHBtYXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvclxuLy8gUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLlxuU0RQVXRpbHMud3JpdGVSdHBNYXAgPSBmdW5jdGlvbihjb2RlYykge1xuICBsZXQgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGNvbnN0IGNoYW5uZWxzID0gY29kZWMuY2hhbm5lbHMgfHwgY29kZWMubnVtQ2hhbm5lbHMgfHwgMTtcbiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICtcbiAgICAgIChjaGFubmVscyAhPT0gMSA/ICcvJyArIGNoYW5uZWxzIDogJycpICsgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYSBleHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPWV4dG1hcDoyIHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXRcbi8vIGE9ZXh0bWFwOjIvc2VuZG9ubHkgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuU0RQVXRpbHMucGFyc2VFeHRtYXAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcoOSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBkaXJlY3Rpb246IHBhcnRzWzBdLmluZGV4T2YoJy8nKSA+IDAgPyBwYXJ0c1swXS5zcGxpdCgnLycpWzFdIDogJ3NlbmRyZWN2JyxcbiAgICB1cmk6IHBhcnRzWzFdLFxuICAgIGF0dHJpYnV0ZXM6IHBhcnRzLnNsaWNlKDIpLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cbi8vIEdlbmVyYXRlcyBhbiBleHRtYXAgbGluZSBmcm9tIFJUQ1J0cEhlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgb3Jcbi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi5cblNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24oaGVhZGVyRXh0ZW5zaW9uKSB7XG4gIHJldHVybiAnYT1leHRtYXA6JyArIChoZWFkZXJFeHRlbnNpb24uaWQgfHwgaGVhZGVyRXh0ZW5zaW9uLnByZWZlcnJlZElkKSArXG4gICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnXG4gICAgICAgID8gJy8nICsgaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvblxuICAgICAgICA6ICcnKSArXG4gICAgICAnICcgKyBoZWFkZXJFeHRlbnNpb24udXJpICtcbiAgICAgIChoZWFkZXJFeHRlbnNpb24uYXR0cmlidXRlcyA/ICcgJyArIGhlYWRlckV4dGVuc2lvbi5hdHRyaWJ1dGVzIDogJycpICtcbiAgICAgICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIGEgZm10cCBsaW5lLCByZXR1cm5zIGRpY3Rpb25hcnkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9Zm10cDo5NiB2YnI9b247Y25nPW9uXG4vLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b25cblNEUFV0aWxzLnBhcnNlRm10cCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFyc2VkID0ge307XG4gIGxldCBrdjtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyhsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7XG4gIGZvciAobGV0IGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhIGZtdHAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZUZtdHAgPSBmdW5jdGlvbihjb2RlYykge1xuICBsZXQgbGluZSA9ICcnO1xuICBsZXQgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5wYXJhbWV0ZXJzICYmIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmxlbmd0aCkge1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2gocGFyYW0gPT4ge1xuICAgICAgaWYgKGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGluZSArPSAnYT1mbXRwOicgKyBwdCArICcgJyArIHBhcmFtcy5qb2luKCc7JykgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gbGluZTtcbn07XG5cbi8vIFBhcnNlcyBhIHJ0Y3AtZmIgbGluZSwgcmV0dXJucyBSVENQUnRjcEZlZWRiYWNrIG9iamVjdC4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaVxuU0RQVXRpbHMucGFyc2VSdGNwRmIgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksXG4gICAgcGFyYW1ldGVyOiBwYXJ0cy5qb2luKCcgJyksXG4gIH07XG59O1xuXG4vLyBHZW5lcmF0ZSBhPXJ0Y3AtZmIgbGluZXMgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IgUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLlxuU0RQVXRpbHMud3JpdGVSdGNwRmIgPSBmdW5jdGlvbihjb2RlYykge1xuICBsZXQgbGluZXMgPSAnJztcbiAgbGV0IHB0ID0gY29kZWMucGF5bG9hZFR5cGU7XG4gIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgfVxuICBpZiAoY29kZWMucnRjcEZlZWRiYWNrICYmIGNvZGVjLnJ0Y3BGZWVkYmFjay5sZW5ndGgpIHtcbiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD9cbiAgICBjb2RlYy5ydGNwRmVlZGJhY2suZm9yRWFjaChmYiA9PiB7XG4gICAgICBsaW5lcyArPSAnYT1ydGNwLWZiOicgKyBwdCArICcgJyArIGZiLnR5cGUgK1xuICAgICAgKGZiLnBhcmFtZXRlciAmJiBmYi5wYXJhbWV0ZXIubGVuZ3RoID8gJyAnICsgZmIucGFyYW1ldGVyIDogJycpICtcbiAgICAgICAgICAnXFxyXFxuJztcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbGluZXM7XG59O1xuXG4vLyBQYXJzZXMgYSBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OlxuLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nXG5TRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3Qgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTtcbiAgY29uc3QgcGFydHMgPSB7XG4gICAgc3NyYzogcGFyc2VJbnQobGluZS5zdWJzdHJpbmcoNywgc3ApLCAxMCksXG4gIH07XG4gIGNvbnN0IGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApO1xuICBpZiAoY29sb24gPiAtMSkge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyaW5nKHNwICsgMSwgY29sb24pO1xuICAgIHBhcnRzLnZhbHVlID0gbGluZS5zdWJzdHJpbmcoY29sb24gKyAxKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cmluZyhzcCArIDEpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn07XG5cbi8vIFBhcnNlIGEgc3NyYy1ncm91cCBsaW5lIChzZWUgUkZDIDU1NzYpLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXNzcmMtZ3JvdXA6c2VtYW50aWNzIDEyIDM0XG5TRFBVdGlscy5wYXJzZVNzcmNHcm91cCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMykuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBzZW1hbnRpY3M6IHBhcnRzLnNoaWZ0KCksXG4gICAgc3NyY3M6IHBhcnRzLm1hcChzc3JjID0+IHBhcnNlSW50KHNzcmMsIDEwKSksXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyB0aGUgTUlEIChSRkMgNTg4OCkgZnJvbSBhIG1lZGlhIHNlY3Rpb24uXG4vLyBSZXR1cm5zIHRoZSBNSUQgb3IgdW5kZWZpbmVkIGlmIG5vIG1pZCBsaW5lIHdhcyBmb3VuZC5cblNEUFV0aWxzLmdldE1pZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXTtcbiAgaWYgKG1pZCkge1xuICAgIHJldHVybiBtaWQuc3Vic3RyaW5nKDYpO1xuICB9XG59O1xuXG4vLyBQYXJzZXMgYSBmaW5nZXJwcmludCBsaW5lIGZvciBEVExTLVNSVFAuXG5TRFBVdGlscy5wYXJzZUZpbmdlcnByaW50ID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDE0KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuXG4gICAgdmFsdWU6IHBhcnRzWzFdLnRvVXBwZXJDYXNlKCksIC8vIHRoZSBkZWZpbml0aW9uIGlzIHVwcGVyLWNhc2UgaW4gUkZDIDQ1NzIuXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1maW5nZXJwcmludDonKTtcbiAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZSBpbiBFZGdlLlxuICByZXR1cm4ge1xuICAgIHJvbGU6ICdhdXRvJyxcbiAgICBmaW5nZXJwcmludHM6IGxpbmVzLm1hcChTRFBVdGlscy5wYXJzZUZpbmdlcnByaW50KSxcbiAgfTtcbn07XG5cbi8vIFNlcmlhbGl6ZXMgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkge1xuICBsZXQgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcXHJcXG4nO1xuICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnAgPT4ge1xuICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXFxyXFxuJztcbiAgfSk7XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgYT1jcnlwdG8gbGluZXMgaW50b1xuLy8gICBodHRwczovL3Jhd2dpdC5jb20vYWJvYmEvZWRnZXJ0Yy9tYXN0ZXIvbXNvcnRjLXJzNC5odG1sI2RpY3Rpb25hcnktcnRjc3J0cHNkZXNwYXJhbWV0ZXJzLW1lbWJlcnNcblNEUFV0aWxzLnBhcnNlQ3J5cHRvTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyg5KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHRhZzogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBjcnlwdG9TdWl0ZTogcGFydHNbMV0sXG4gICAga2V5UGFyYW1zOiBwYXJ0c1syXSxcbiAgICBzZXNzaW9uUGFyYW1zOiBwYXJ0cy5zbGljZSgzKSxcbiAgfTtcbn07XG5cblNEUFV0aWxzLndyaXRlQ3J5cHRvTGluZSA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgcmV0dXJuICdhPWNyeXB0bzonICsgcGFyYW1ldGVycy50YWcgKyAnICcgK1xuICAgIHBhcmFtZXRlcnMuY3J5cHRvU3VpdGUgKyAnICcgK1xuICAgICh0eXBlb2YgcGFyYW1ldGVycy5rZXlQYXJhbXMgPT09ICdvYmplY3QnXG4gICAgICA/IFNEUFV0aWxzLndyaXRlQ3J5cHRvS2V5UGFyYW1zKHBhcmFtZXRlcnMua2V5UGFyYW1zKVxuICAgICAgOiBwYXJhbWV0ZXJzLmtleVBhcmFtcykgK1xuICAgIChwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMgPyAnICcgKyBwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMuam9pbignICcpIDogJycpICtcbiAgICAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyB0aGUgY3J5cHRvIGtleSBwYXJhbWV0ZXJzIGludG9cbi8vICAgaHR0cHM6Ly9yYXdnaXQuY29tL2Fib2JhL2VkZ2VydGMvbWFzdGVyL21zb3J0Yy1yczQuaHRtbCNydGNzcnRwa2V5cGFyYW0qXG5TRFBVdGlscy5wYXJzZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICBpZiAoa2V5UGFyYW1zLmluZGV4T2YoJ2lubGluZTonKSAhPT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHBhcnRzID0ga2V5UGFyYW1zLnN1YnN0cmluZyg3KS5zcGxpdCgnfCcpO1xuICByZXR1cm4ge1xuICAgIGtleU1ldGhvZDogJ2lubGluZScsXG4gICAga2V5U2FsdDogcGFydHNbMF0sXG4gICAgbGlmZVRpbWU6IHBhcnRzWzFdLFxuICAgIG1raVZhbHVlOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMF0gOiB1bmRlZmluZWQsXG4gICAgbWtpTGVuZ3RoOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMV0gOiB1bmRlZmluZWQsXG4gIH07XG59O1xuXG5TRFBVdGlscy53cml0ZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICByZXR1cm4ga2V5UGFyYW1zLmtleU1ldGhvZCArICc6J1xuICAgICsga2V5UGFyYW1zLmtleVNhbHQgK1xuICAgIChrZXlQYXJhbXMubGlmZVRpbWUgPyAnfCcgKyBrZXlQYXJhbXMubGlmZVRpbWUgOiAnJykgK1xuICAgIChrZXlQYXJhbXMubWtpVmFsdWUgJiYga2V5UGFyYW1zLm1raUxlbmd0aFxuICAgICAgPyAnfCcgKyBrZXlQYXJhbXMubWtpVmFsdWUgKyAnOicgKyBrZXlQYXJhbXMubWtpTGVuZ3RoXG4gICAgICA6ICcnKTtcbn07XG5cbi8vIEV4dHJhY3RzIGFsbCBTREVTIHBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXRDcnlwdG9QYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWNyeXB0bzonKTtcbiAgcmV0dXJuIGxpbmVzLm1hcChTRFBVdGlscy5wYXJzZUNyeXB0b0xpbmUpO1xufTtcblxuLy8gUGFyc2VzIElDRSBpbmZvcm1hdGlvbiBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LlxuU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgY29uc3QgdWZyYWcgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1pY2UtdWZyYWc6JylbMF07XG4gIGNvbnN0IHB3ZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS1wd2Q6JylbMF07XG4gIGlmICghKHVmcmFnICYmIHB3ZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHVzZXJuYW1lRnJhZ21lbnQ6IHVmcmFnLnN1YnN0cmluZygxMiksXG4gICAgcGFzc3dvcmQ6IHB3ZC5zdWJzdHJpbmcoMTApLFxuICB9O1xufTtcblxuLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuXG5TRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgbGV0IHNkcCA9ICdhPWljZS11ZnJhZzonICsgcGFyYW1zLnVzZXJuYW1lRnJhZ21lbnQgKyAnXFxyXFxuJyArXG4gICAgICAnYT1pY2UtcHdkOicgKyBwYXJhbXMucGFzc3dvcmQgKyAnXFxyXFxuJztcbiAgaWYgKHBhcmFtcy5pY2VMaXRlKSB7XG4gICAgc2RwICs9ICdhPWljZS1saXRlXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0ge1xuICAgIGNvZGVjczogW10sXG4gICAgaGVhZGVyRXh0ZW5zaW9uczogW10sXG4gICAgZmVjTWVjaGFuaXNtczogW10sXG4gICAgcnRjcDogW10sXG4gIH07XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7XG4gIGZvciAobGV0IGkgPSAzOyBpIDwgbWxpbmUubGVuZ3RoOyBpKyspIHsgLy8gZmluZCBhbGwgY29kZWNzIGZyb20gbWxpbmVbMy4uXVxuICAgIGNvbnN0IHB0ID0gbWxpbmVbaV07XG4gICAgY29uc3QgcnRwbWFwbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KFxuICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTtcbiAgICBpZiAocnRwbWFwbGluZSkge1xuICAgICAgY29uc3QgY29kZWMgPSBTRFBVdGlscy5wYXJzZVJ0cE1hcChydHBtYXBsaW5lKTtcbiAgICAgIGNvbnN0IGZtdHBzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9Zm10cDonICsgcHQgKyAnICcpO1xuICAgICAgLy8gT25seSB0aGUgZmlyc3QgYT1mbXRwOjxwdD4gaXMgY29uc2lkZXJlZC5cbiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307XG4gICAgICBjb2RlYy5ydGNwRmVlZGJhY2sgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJylcbiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7XG4gICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy5cbiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ1JFRCc6XG4gICAgICAgIGNhc2UgJ1VMUEZFQyc6XG4gICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgZGVzY3JpcHRpb24uaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKFNEUFV0aWxzLnBhcnNlRXh0bWFwKGxpbmUpKTtcbiAgfSk7XG4gIGNvbnN0IHdpbGRjYXJkUnRjcEZiID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOiogJylcbiAgICAubWFwKFNEUFV0aWxzLnBhcnNlUnRjcEZiKTtcbiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goY29kZWMgPT4ge1xuICAgIHdpbGRjYXJkUnRjcEZiLmZvckVhY2goZmI9PiB7XG4gICAgICBjb25zdCBkdXBsaWNhdGUgPSBjb2RlYy5ydGNwRmVlZGJhY2suZmluZChleGlzdGluZ0ZlZWRiYWNrID0+IHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nRmVlZGJhY2sudHlwZSA9PT0gZmIudHlwZSAmJlxuICAgICAgICAgIGV4aXN0aW5nRmVlZGJhY2sucGFyYW1ldGVyID09PSBmYi5wYXJhbWV0ZXI7XG4gICAgICB9KTtcbiAgICAgIGlmICghZHVwbGljYXRlKSB7XG4gICAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5wdXNoKGZiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIC8vIEZJWE1FOiBwYXJzZSBydGNwLlxuICByZXR1cm4gZGVzY3JpcHRpb247XG59O1xuXG4vLyBHZW5lcmF0ZXMgcGFydHMgb2YgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGRlc2NyaWJpbmcgdGhlIGNhcGFiaWxpdGllcyAvXG4vLyBwYXJhbWV0ZXJzLlxuU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGtpbmQsIGNhcHMpIHtcbiAgbGV0IHNkcCA9ICcnO1xuXG4gIC8vIEJ1aWxkIHRoZSBtbGluZS5cbiAgc2RwICs9ICdtPScgKyBraW5kICsgJyAnO1xuICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy5cbiAgc2RwICs9ICcgVURQL1RMUy9SVFAvU0FWUEYgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLm1hcChjb2RlYyA9PiB7XG4gICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVjLnBheWxvYWRUeXBlO1xuICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcblxuICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuICBzZHAgKz0gJ2E9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuJztcblxuICAvLyBBZGQgYT1ydHBtYXAgbGluZXMgZm9yIGVhY2ggY29kZWMuIEFsc28gZm10cCBhbmQgcnRjcC1mYi5cbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChjb2RlYyA9PiB7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpO1xuICB9KTtcbiAgbGV0IG1heHB0aW1lID0gMDtcbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChjb2RlYyA9PiB7XG4gICAgaWYgKGNvZGVjLm1heHB0aW1lID4gbWF4cHRpbWUpIHtcbiAgICAgIG1heHB0aW1lID0gY29kZWMubWF4cHRpbWU7XG4gICAgfVxuICB9KTtcbiAgaWYgKG1heHB0aW1lID4gMCkge1xuICAgIHNkcCArPSAnYT1tYXhwdGltZTonICsgbWF4cHRpbWUgKyAnXFxyXFxuJztcbiAgfVxuXG4gIGlmIChjYXBzLmhlYWRlckV4dGVuc2lvbnMpIHtcbiAgICBjYXBzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChleHRlbnNpb24gPT4ge1xuICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7XG4gICAgfSk7XG4gIH1cbiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuXG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mXG4vLyBSVENSdHBFbmNvZGluZ1BhcmFtZXRlcnMuXG5TRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7XG4gIGNvbnN0IGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xO1xuXG4gIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWRcbiAgY29uc3Qgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGxpbmUgPT4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSkpXG4gICAgLmZpbHRlcihwYXJ0cyA9PiBwYXJ0cy5hdHRyaWJ1dGUgPT09ICdjbmFtZScpO1xuICBjb25zdCBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYztcbiAgbGV0IHNlY29uZGFyeVNzcmM7XG5cbiAgY29uc3QgZmxvd3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmMtZ3JvdXA6RklEJylcbiAgICAubWFwKGxpbmUgPT4ge1xuICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxNykuc3BsaXQoJyAnKTtcbiAgICAgIHJldHVybiBwYXJ0cy5tYXAocGFydCA9PiBwYXJzZUludChwYXJ0LCAxMCkpO1xuICAgIH0pO1xuICBpZiAoZmxvd3MubGVuZ3RoID4gMCAmJiBmbG93c1swXS5sZW5ndGggPiAxICYmIGZsb3dzWzBdWzBdID09PSBwcmltYXJ5U3NyYykge1xuICAgIHNlY29uZGFyeVNzcmMgPSBmbG93c1swXVsxXTtcbiAgfVxuXG4gIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpID09PSAnUlRYJyAmJiBjb2RlYy5wYXJhbWV0ZXJzLmFwdCkge1xuICAgICAgbGV0IGVuY1BhcmFtID0ge1xuICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgY29kZWNQYXlsb2FkVHlwZTogcGFyc2VJbnQoY29kZWMucGFyYW1ldGVycy5hcHQsIDEwKSxcbiAgICAgIH07XG4gICAgICBpZiAocHJpbWFyeVNzcmMgJiYgc2Vjb25kYXJ5U3NyYykge1xuICAgICAgICBlbmNQYXJhbS5ydHggPSB7c3NyYzogc2Vjb25kYXJ5U3NyY307XG4gICAgICB9XG4gICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICBpZiAoaGFzUmVkKSB7XG4gICAgICAgIGVuY1BhcmFtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbmNQYXJhbSkpO1xuICAgICAgICBlbmNQYXJhbS5mZWMgPSB7XG4gICAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJyxcbiAgICAgICAgfTtcbiAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goe1xuICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgfSk7XG4gIH1cblxuICAvLyB3ZSBzdXBwb3J0IGJvdGggYj1BUyBhbmQgYj1USUFTIGJ1dCBpbnRlcnByZXQgQVMgYXMgVElBUy5cbiAgbGV0IGJhbmR3aWR0aCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2I9Jyk7XG4gIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7XG4gICAgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPVRJQVM6JykgPT09IDApIHtcbiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHJpbmcoNyksIDEwKTtcbiAgICB9IGVsc2UgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPUFTOicpID09PSAwKSB7XG4gICAgICAvLyB1c2UgZm9ybXVsYSBmcm9tIEpTRVAgdG8gY29udmVydCBiPUFTIHRvIFRJQVMgdmFsdWUuXG4gICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyaW5nKDUpLCAxMCkgKiAxMDAwICogMC45NVxuICAgICAgICAgIC0gKDUwICogNDAgKiA4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFuZHdpZHRoID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChwYXJhbXMgPT4ge1xuICAgICAgcGFyYW1zLm1heEJpdHJhdGUgPSBiYW5kd2lkdGg7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGVuY29kaW5nUGFyYW1ldGVycztcbn07XG5cbi8vIHBhcnNlcyBodHRwOi8vZHJhZnQub3J0Yy5vcmcvI3J0Y3J0Y3BwYXJhbWV0ZXJzKlxuU0RQVXRpbHMucGFyc2VSdGNwUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBydGNwUGFyYW1ldGVycyA9IHt9O1xuXG4gIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZVxuICAvLyBTU1JDcy5cbiAgY29uc3QgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKG9iaiA9PiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnKVswXTtcbiAgaWYgKHJlbW90ZVNzcmMpIHtcbiAgICBydGNwUGFyYW1ldGVycy5jbmFtZSA9IHJlbW90ZVNzcmMudmFsdWU7XG4gICAgcnRjcFBhcmFtZXRlcnMuc3NyYyA9IHJlbW90ZVNzcmMuc3NyYztcbiAgfVxuXG4gIC8vIEVkZ2UgdXNlcyB0aGUgY29tcG91bmQgYXR0cmlidXRlIGluc3RlYWQgb2YgcmVkdWNlZFNpemVcbiAgLy8gY29tcG91bmQgaXMgIXJlZHVjZWRTaXplXG4gIGNvbnN0IHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplID0gcnNpemUubGVuZ3RoID4gMDtcbiAgcnRjcFBhcmFtZXRlcnMuY29tcG91bmQgPSByc2l6ZS5sZW5ndGggPT09IDA7XG5cbiAgLy8gcGFyc2VzIHRoZSBydGNwLW11eCBhdHRy0ZZidXRlLlxuICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC5cbiAgY29uc3QgbXV4ID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLW11eCcpO1xuICBydGNwUGFyYW1ldGVycy5tdXggPSBtdXgubGVuZ3RoID4gMDtcblxuICByZXR1cm4gcnRjcFBhcmFtZXRlcnM7XG59O1xuXG5TRFBVdGlscy53cml0ZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocnRjcFBhcmFtZXRlcnMpIHtcbiAgbGV0IHNkcCA9ICcnO1xuICBpZiAocnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUpIHtcbiAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxcclxcbic7XG4gIH1cbiAgaWYgKHJ0Y3BQYXJhbWV0ZXJzLm11eCkge1xuICAgIHNkcCArPSAnYT1ydGNwLW11eFxcclxcbic7XG4gIH1cbiAgaWYgKHJ0Y3BQYXJhbWV0ZXJzLnNzcmMgIT09IHVuZGVmaW5lZCAmJiBydGNwUGFyYW1ldGVycy5jbmFtZSkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyBydGNwUGFyYW1ldGVycy5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lICsgJ1xcclxcbic7XG4gIH1cbiAgcmV0dXJuIHNkcDtcbn07XG5cblxuLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJuc1xuLy8gdGhlIGlkIG9mIHRoZSBNZWRpYVN0cmVhbSBhbmQgTWVkaWFTdHJlYW1UcmFjay5cblNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBsZXQgcGFydHM7XG4gIGNvbnN0IHNwZWMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1zaWQ6Jyk7XG4gIGlmIChzcGVjLmxlbmd0aCA9PT0gMSkge1xuICAgIHBhcnRzID0gc3BlY1swXS5zdWJzdHJpbmcoNykuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbiAgY29uc3QgcGxhbkIgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGxpbmUgPT4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSkpXG4gICAgLmZpbHRlcihtc2lkUGFydHMgPT4gbXNpZFBhcnRzLmF0dHJpYnV0ZSA9PT0gJ21zaWQnKTtcbiAgaWYgKHBsYW5CLmxlbmd0aCA+IDApIHtcbiAgICBwYXJ0cyA9IHBsYW5CWzBdLnZhbHVlLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtzdHJlYW06IHBhcnRzWzBdLCB0cmFjazogcGFydHNbMV19O1xuICB9XG59O1xuXG4vLyBTQ1RQXG4vLyBwYXJzZXMgZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMjYgZmlyc3QgYW5kIGZhbGxzIGJhY2tcbi8vIHRvIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTA1XG5TRFBVdGlscy5wYXJzZVNjdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBtbGluZSA9IFNEUFV0aWxzLnBhcnNlTUxpbmUobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgbWF4U2l6ZUxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7XG4gIGxldCBtYXhNZXNzYWdlU2l6ZTtcbiAgaWYgKG1heFNpemVMaW5lLmxlbmd0aCA+IDApIHtcbiAgICBtYXhNZXNzYWdlU2l6ZSA9IHBhcnNlSW50KG1heFNpemVMaW5lWzBdLnN1YnN0cmluZygxOSksIDEwKTtcbiAgfVxuICBpZiAoaXNOYU4obWF4TWVzc2FnZVNpemUpKSB7XG4gICAgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcbiAgfVxuICBjb25zdCBzY3RwUG9ydCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cC1wb3J0OicpO1xuICBpZiAoc2N0cFBvcnQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBwb3J0OiBwYXJzZUludChzY3RwUG9ydFswXS5zdWJzdHJpbmcoMTIpLCAxMCksXG4gICAgICBwcm90b2NvbDogbWxpbmUuZm10LFxuICAgICAgbWF4TWVzc2FnZVNpemUsXG4gICAgfTtcbiAgfVxuICBjb25zdCBzY3RwTWFwTGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNjdHBtYXA6Jyk7XG4gIGlmIChzY3RwTWFwTGluZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHBhcnRzID0gc2N0cE1hcExpbmVzWzBdXG4gICAgICAuc3Vic3RyaW5nKDEwKVxuICAgICAgLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksXG4gICAgICBwcm90b2NvbDogcGFydHNbMV0sXG4gICAgICBtYXhNZXNzYWdlU2l6ZSxcbiAgICB9O1xuICB9XG59O1xuXG4vLyBTQ1RQXG4vLyBvdXRwdXRzIHRoZSBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiB2ZXJzaW9uIHRoYXQgYWxsIGJyb3dzZXJzXG4vLyBzdXBwb3J0IGJ5IG5vdyByZWNlaXZpbmcgaW4gdGhpcyBmb3JtYXQsIHVubGVzcyB3ZSBvcmlnaW5hbGx5IHBhcnNlZFxuLy8gYXMgdGhlIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTA1IGZvcm1hdCAoaW5kaWNhdGVkIGJ5IHRoZSBtLWxpbmVcbi8vIHByb3RvY29sIG9mIERUTFMvU0NUUCAtLSB3aXRob3V0IFVEUC8gb3IgVENQLylcblNEUFV0aWxzLndyaXRlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWEsIHNjdHApIHtcbiAgbGV0IG91dHB1dCA9IFtdO1xuICBpZiAobWVkaWEucHJvdG9jb2wgIT09ICdEVExTL1NDVFAnKSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wcm90b2NvbCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cC1wb3J0OicgKyBzY3RwLnBvcnQgKyAnXFxyXFxuJyxcbiAgICBdO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IFtcbiAgICAgICdtPScgKyBtZWRpYS5raW5kICsgJyA5ICcgKyBtZWRpYS5wcm90b2NvbCArICcgJyArIHNjdHAucG9ydCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cG1hcDonICsgc2N0cC5wb3J0ICsgJyAnICsgc2N0cC5wcm90b2NvbCArICcgNjU1MzVcXHJcXG4nLFxuICAgIF07XG4gIH1cbiAgaWYgKHNjdHAubWF4TWVzc2FnZVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIG91dHB1dC5wdXNoKCdhPW1heC1tZXNzYWdlLXNpemU6JyArIHNjdHAubWF4TWVzc2FnZVNpemUgKyAnXFxyXFxuJyk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcbn07XG5cbi8vIEdlbmVyYXRlIGEgc2Vzc2lvbiBJRCBmb3IgU0RQLlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtcnRjd2ViLWpzZXAtMjAjc2VjdGlvbi01LjIuMVxuLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlXG4vLyBidXQgcmlnaHQgbm93IHRoaXMgc2hvdWxkIGJlIGFjY2VwdGFibGUgYW5kIHdpdGhpbiB0aGUgcmlnaHQgcmFuZ2VcblNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIyKTtcbn07XG5cbi8vIFdyaXRlIGJvaWxlciBwbGF0ZSBmb3Igc3RhcnQgb2YgU0RQXG4vLyBzZXNzSWQgYXJndW1lbnQgaXMgb3B0aW9uYWwgLSBpZiBub3Qgc3VwcGxpZWQgaXQgd2lsbFxuLy8gYmUgZ2VuZXJhdGVkIHJhbmRvbWx5XG4vLyBzZXNzVmVyc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gMlxuLy8gc2Vzc1VzZXIgaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvICd0aGlzaXNhZGFwdGVyb3J0YydcblNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oc2Vzc0lkLCBzZXNzVmVyLCBzZXNzVXNlcikge1xuICBsZXQgc2Vzc2lvbklkO1xuICBjb25zdCB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7XG4gIGlmIChzZXNzSWQpIHtcbiAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgfVxuICBjb25zdCB1c2VyID0gc2Vzc1VzZXIgfHwgJ3RoaXNpc2FkYXB0ZXJvcnRjJztcbiAgLy8gRklYTUU6IHNlc3MtaWQgc2hvdWxkIGJlIGFuIE5UUCB0aW1lc3RhbXAuXG4gIHJldHVybiAndj0wXFxyXFxuJyArXG4gICAgICAnbz0nICsgdXNlciArICcgJyArIHNlc3Npb25JZCArICcgJyArIHZlcnNpb24gK1xuICAgICAgICAnIElOIElQNCAxMjcuMC4wLjFcXHJcXG4nICtcbiAgICAgICdzPS1cXHJcXG4nICtcbiAgICAgICd0PTAgMFxcclxcbic7XG59O1xuXG4vLyBHZXRzIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgbWVkaWFTZWN0aW9uIG9yIHRoZSBzZXNzaW9ucGFydC5cblNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuXG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3dpdGNoIChsaW5lc1tpXSkge1xuICAgICAgY2FzZSAnYT1zZW5kcmVjdic6XG4gICAgICBjYXNlICdhPXNlbmRvbmx5JzpcbiAgICAgIGNhc2UgJ2E9cmVjdm9ubHknOlxuICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6XG4gICAgICAgIHJldHVybiBsaW5lc1tpXS5zdWJzdHJpbmcoMik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/XG4gICAgfVxuICB9XG4gIGlmIChzZXNzaW9ucGFydCkge1xuICAgIHJldHVybiBTRFBVdGlscy5nZXREaXJlY3Rpb24oc2Vzc2lvbnBhcnQpO1xuICB9XG4gIHJldHVybiAnc2VuZHJlY3YnO1xufTtcblxuU0RQVXRpbHMuZ2V0S2luZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4gbWxpbmVbMF0uc3Vic3RyaW5nKDIpO1xufTtcblxuU0RQVXRpbHMuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJztcbn07XG5cblNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGNvbnN0IHBhcnRzID0gbGluZXNbMF0uc3Vic3RyaW5nKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAga2luZDogcGFydHNbMF0sXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0sXG4gICAgZm10OiBwYXJ0cy5zbGljZSgzKS5qb2luKCcgJyksXG4gIH07XG59O1xuXG5TRFBVdGlscy5wYXJzZU9MaW5lID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdvPScpWzBdO1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IHBhcnRzWzBdLFxuICAgIHNlc3Npb25JZDogcGFydHNbMV0sXG4gICAgc2Vzc2lvblZlcnNpb246IHBhcnNlSW50KHBhcnRzWzJdLCAxMCksXG4gICAgbmV0VHlwZTogcGFydHNbM10sXG4gICAgYWRkcmVzc1R5cGU6IHBhcnRzWzRdLFxuICAgIGFkZHJlc3M6IHBhcnRzWzVdLFxuICB9O1xufTtcblxuLy8gYSB2ZXJ5IG5haXZlIGludGVycHJldGF0aW9uIG9mIGEgdmFsaWQgU0RQLlxuU0RQVXRpbHMuaXNWYWxpZFNEUCA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgaWYgKHR5cGVvZiBibG9iICE9PSAnc3RyaW5nJyB8fCBibG9iLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobGluZXNbaV0ubGVuZ3RoIDwgMiB8fCBsaW5lc1tpXS5jaGFyQXQoMSkgIT09ICc9Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBUT0RPOiBjaGVjayB0aGUgbW9kaWZpZXIgYSBiaXQgbW9yZS5cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzO1xufVxuIiwidmFyIGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XG5mdW5jdGlvbiB3YXJuaW5nKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBpZiAoIWlzUHJvZHVjdGlvbikge1xuICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGV4dCA9IFwiV2FybmluZzogXCIgKyBtZXNzYWdlO1xuXG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS53YXJuKHRleHQpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0aHJvdyBFcnJvcih0ZXh0KTtcbiAgICB9IGNhdGNoICh4KSB7fVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdhcm5pbmc7XG4iLCJpbXBvcnQgeyBUZXh0T3ZlcmxheSB9IGZyb20gJ0BlcGljZ2FtZXMtcHMvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWktdWU1LjInO1xuZXhwb3J0IGNsYXNzIExvYWRpbmdPdmVybGF5IGV4dGVuZHMgVGV4dE92ZXJsYXkge1xuICAgIC8qKlxuICAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgcm9vdCBlbGVtZW50IG9mIHRoaXMgb3ZlcmxheS5cbiAgICAqL1xuICAgIHN0YXRpYyByb290RWxlbWVudCgpIHtcbiAgICAgICAgaWYgKCFMb2FkaW5nT3ZlcmxheS5fcm9vdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll9yb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgTG9hZGluZ092ZXJsYXkuX3Jvb3RFbGVtZW50LmlkID0gXCJsb2FkaW5nT3ZlcmxheVwiO1xuICAgICAgICAgICAgTG9hZGluZ092ZXJsYXkuX3Jvb3RFbGVtZW50LmNsYXNzTmFtZSA9IFwidGV4dERpc3BsYXlTdGF0ZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMb2FkaW5nT3ZlcmxheS5fcm9vdEVsZW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGNvbnRlbnQgZWxlbWVudCBvZiB0aGlzIG92ZXJsYXksIHdoaWNoIGNvbnRhaW4gd2hhdGV2ZXIgY29udGVudCB0aGlzIGVsZW1lbnQgY29udGFpbnMsIGxpa2UgdGV4dCBvciBhIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgdGV4dEVsZW1lbnQoKSB7XG4gICAgICAgIGlmICghTG9hZGluZ092ZXJsYXkuX3RleHRFbGVtZW50KSB7XG4gICAgICAgICAgICBMb2FkaW5nT3ZlcmxheS5fdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll90ZXh0RWxlbWVudC5pZCA9ICdsb2FkaW5nT3ZlcmxheVRleHQnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMb2FkaW5nT3ZlcmxheS5fdGV4dEVsZW1lbnQ7XG4gICAgfVxuICAgIHN0YXRpYyBzcGlubmVyKCkge1xuICAgICAgICBpZiAoIUxvYWRpbmdPdmVybGF5Ll9zcGlubmVyKSB7XG4gICAgICAgICAgICAvLyBidWlsZCB0aGUgc3Bpbm5lciBkaXZcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBMb2FkaW5nT3ZlcmxheS5fcm9vdEVsZW1lbnQuY2xpZW50V2lkdGggKiAwLjAzO1xuICAgICAgICAgICAgTG9hZGluZ092ZXJsYXkuX3NwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll9zcGlubmVyLmlkID0gXCJsb2FkaW5nLXNwaW5uZXJcIjtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll9zcGlubmVyLmNsYXNzTmFtZSA9IFwibG9hZGluZy1zcGlubmVyXCI7XG4gICAgICAgICAgICBMb2FkaW5nT3ZlcmxheS5fc3Bpbm5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOiBcIiArIHNpemUgKyBcInB4OyBoZWlnaHQ6IFwiICsgc2l6ZSArIFwicHg7XCIpO1xuICAgICAgICAgICAgY29uc3QgU3Bpbm5lclNlY3Rpb25PbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgU3Bpbm5lclNlY3Rpb25PbmUuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ3aWR0aDogXCIgKyBzaXplICogMC44ICsgXCJweDsgaGVpZ2h0OiBcIiArIHNpemUgKiAwLjggKyBcInB4OyBib3JkZXItd2lkdGg6IFwiICsgc2l6ZSAqIDAuMTI1ICsgXCJweDtcIik7XG4gICAgICAgICAgICBMb2FkaW5nT3ZlcmxheS5fc3Bpbm5lci5hcHBlbmRDaGlsZChTcGlubmVyU2VjdGlvbk9uZSk7XG4gICAgICAgICAgICBjb25zdCBTcGlubmVyU2VjdGlvblR3byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBTcGlubmVyU2VjdGlvblR3by5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOiBcIiArIHNpemUgKiAwLjggKyBcInB4OyBoZWlnaHQ6IFwiICsgc2l6ZSAqIDAuOCArIFwicHg7IGJvcmRlci13aWR0aDogXCIgKyBzaXplICogMC4xMjUgKyBcInB4O1wiKTtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll9zcGlubmVyLmFwcGVuZENoaWxkKFNwaW5uZXJTZWN0aW9uVHdvKTtcbiAgICAgICAgICAgIGNvbnN0IFNwaW5uZXJTZWN0aW9uVGhyZWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgU3Bpbm5lclNlY3Rpb25UaHJlZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOiBcIiArIHNpemUgKiAwLjggKyBcInB4OyBoZWlnaHQ6IFwiICsgc2l6ZSAqIDAuOCArIFwicHg7IGJvcmRlci13aWR0aDogXCIgKyBzaXplICogMC4xMjUgKyBcInB4O1wiKTtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5Ll9zcGlubmVyLmFwcGVuZENoaWxkKFNwaW5uZXJTZWN0aW9uVGhyZWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMb2FkaW5nT3ZlcmxheS5fc3Bpbm5lcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgY29ubmVjdCBvdmVybGF5IHdpdGggYSBjb25uZWN0aW9uIGJ1dHRvbi5cbiAgICAgKiBAcGFyYW0gcGFyZW50RWxlbSB0aGUgcGFyZW50IGVsZW1lbnQgdGhpcyBvdmVybGF5IHdpbGwgYmUgaW5zZXJ0ZWQgaW50by5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudEVsZW0sIExvYWRpbmdPdmVybGF5LnJvb3RFbGVtZW50KCksIExvYWRpbmdPdmVybGF5LnRleHRFbGVtZW50KCkpO1xuICAgICAgICB0aGlzLm1heERyb3BzID0gNTA7XG4gICAgICAgIHRoaXMubWF4U2l6ZSA9IDU7XG4gICAgICAgIHRoaXMubWF4RHVyYXRpb24gPSA1O1xuICAgICAgICB0aGlzLm1pbkRlbGF5ID0gLTIwO1xuICAgICAgICB0aGlzLnJhaW5Ecm9wcyA9IFtdO1xuICAgIH1cbiAgICBhbmltYXRlKCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGV4aXN0aW5nIGRyb3BzIHRvIGhhdmUgYW4gaW5jcmVhc2VkIHNwZWVkXG4gICAgICAgIGZvciAobGV0IHJhaW5kcm9wIG9mIHRoaXMucmFpbkRyb3BzKSB7XG4gICAgICAgICAgICByYWluZHJvcC5lbGVtZW50LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYW5pbWF0aW9uLWR1cmF0aW9uOlwiICsgKDEgKyBNYXRoLnJhbmRvbSgpICogdGhpcy5tYXhEdXJhdGlvbikgKyBcInM7XCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLm1heERyb3BzKSB7XG4gICAgICAgICAgICBjb25zdCBkcm9wQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRyb3BDb250YWluZXIuaWQgPSBcImRyb3BDb250YWluZXJcIjtcbiAgICAgICAgICAgIGNvbnN0IHJhaW5kcm9wID0gbmV3IFJhaW5kcm9wKCk7XG4gICAgICAgICAgICByYWluZHJvcC5zaXplID0gTWF0aC5yYW5kb20oKSAqIHRoaXMubWF4U2l6ZSArIDAuMjtcbiAgICAgICAgICAgIHJhaW5kcm9wLmRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIHRoaXMubWluRGVsYXk7XG4gICAgICAgICAgICByYWluZHJvcC5kdXJhdGlvbiA9IE1hdGgucmFuZG9tKCkgKiB0aGlzLm1heER1cmF0aW9uO1xuICAgICAgICAgICAgcmFpbmRyb3Aub2Zmc2V0TGVmdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIExvYWRpbmdPdmVybGF5LnJvb3RFbGVtZW50KCkuY2xpZW50V2lkdGgpO1xuICAgICAgICAgICAgcmFpbmRyb3AuZWxlbWVudCA9IGRyb3BDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCBkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRyb3BcIik7XG4gICAgICAgICAgICBkcm9wLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibGVmdDogXCIgKyByYWluZHJvcC5vZmZzZXRMZWZ0ICsgXCJweDsgd2lkdGg6XCIgKyByYWluZHJvcC5zaXplICsgXCJweDsgb3ZlcmZsb3c6IHZpc2libGU7XCIpO1xuICAgICAgICAgICAgZHJvcENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImFuaW1hdGlvbi1kZWxheTpcIiArIHJhaW5kcm9wLmRlbGF5ICsgXCJzOyBhbmltYXRpb24tZHVyYXRpb246XCIgKyAoMSArIHJhaW5kcm9wLmR1cmF0aW9uKSArIFwicztcIik7XG4gICAgICAgICAgICBjb25zdCBoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGhlYWQuaWQgPSBcImRyb3BoZWFkXCI7XG4gICAgICAgICAgICByYWluZHJvcC5oZWFkc2l6ZSA9IHJhaW5kcm9wLnNpemUgKiAzO1xuICAgICAgICAgICAgaGVhZC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImxlZnQ6IC1cIiArIHJhaW5kcm9wLnNpemUgKyBcInB4OyB3aWR0aDpcIiArIHJhaW5kcm9wLmhlYWRzaXplICsgXCJweDsgaGVpZ2h0OiBcIiArIHJhaW5kcm9wLmhlYWRzaXplICsgXCJweDtcIik7XG4gICAgICAgICAgICBkcm9wLmFwcGVuZENoaWxkKGhlYWQpO1xuICAgICAgICAgICAgZHJvcENvbnRhaW5lci5hcHBlbmRDaGlsZChkcm9wKTtcbiAgICAgICAgICAgIExvYWRpbmdPdmVybGF5LnJvb3RFbGVtZW50KCkuYXBwZW5kKGRyb3BDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5yYWluRHJvcHMucHVzaChyYWluZHJvcCk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXhEcm9wcyAvPSAxLjU7XG4gICAgICAgIHRoaXMubWF4RHVyYXRpb24gLz0gMS41O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHRleHQgb3ZlcmxheXMgaW5uZXIgdGV4dFxuICAgICAqIEBwYXJhbSB0ZXh0IHRoZSB1cGRhdGUgdGV4dCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBvdmVybGF5XG4gICAgICovXG4gICAgdXBkYXRlKHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQgIT0gbnVsbCB8fCB0ZXh0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50ZXh0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgbGV0IHRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGV4dENvbnRhaW5lci5pbm5lckhUTUwgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy50ZXh0RWxlbWVudC5hcHBlbmQodGV4dENvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLnRleHRFbGVtZW50LmFwcGVuZChMb2FkaW5nT3ZlcmxheS5zcGlubmVyKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgUmFpbmRyb3Age1xufVxuIiwiaW1wb3J0IHsgTWVzc2FnZVNlbmQgfSBmcm9tICdAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVlNS4yJztcbmV4cG9ydCB2YXIgTWVzc2FnZVNlbmRUeXBlcztcbihmdW5jdGlvbiAoTWVzc2FnZVNlbmRUeXBlcykge1xuICAgIE1lc3NhZ2VTZW5kVHlwZXNbXCJTVEFUU1wiXSA9IFwic3RhdHNcIjtcbn0pKE1lc3NhZ2VTZW5kVHlwZXMgfHwgKE1lc3NhZ2VTZW5kVHlwZXMgPSB7fSkpO1xuLyoqXG4gKiBBZ2dyZWdhdGVkIFN0YXRzIE1lc3NhZ2UgV3JhcHBlclxuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZVN0YXRzIGV4dGVuZHMgTWVzc2FnZVNlbmQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVkU3RhdHMgLSBBZ2dyZWdhdGVkIFN0YXRzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdncmVnYXRlZFN0YXRzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IE1lc3NhZ2VTZW5kVHlwZXMuU1RBVFM7XG4gICAgICAgIHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMgPSBhZ2dyZWdhdGVkU3RhdHMuaW5ib3VuZFZpZGVvU3RhdHM7XG4gICAgICAgIHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMgPSBhZ2dyZWdhdGVkU3RhdHMuaW5ib3VuZEF1ZGlvU3RhdHM7XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlUGFpciA9IGFnZ3JlZ2F0ZWRTdGF0cy5jYW5kaWRhdGVQYWlyO1xuICAgICAgICB0aGlzLmRhdGFDaGFubmVsU3RhdHMgPSBhZ2dyZWdhdGVkU3RhdHMuRGF0YUNoYW5uZWxTdGF0cztcbiAgICAgICAgdGhpcy5sb2NhbENhbmRpZGF0ZXMgPSBhZ2dyZWdhdGVkU3RhdHMubG9jYWxDYW5kaWRhdGVzO1xuICAgICAgICB0aGlzLnJlbW90ZUNhbmRpZGF0ZXMgPSBhZ2dyZWdhdGVkU3RhdHMucmVtb3RlQ2FuZGlkYXRlcztcbiAgICAgICAgdGhpcy5vdXRib3VuZFZpZGVvU3RhdHMgPSBhZ2dyZWdhdGVkU3RhdHMub3V0Qm91bmRWaWRlb1N0YXRzO1xuICAgIH1cbn1cbiIsInZhciBfX3NldEZ1bmN0aW9uTmFtZSA9ICh0aGlzICYmIHRoaXMuX19zZXRGdW5jdGlvbk5hbWUpIHx8IGZ1bmN0aW9uIChmLCBuYW1lLCBwcmVmaXgpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xudmFyIF9hO1xuaW1wb3J0IHsgQXBwbGljYXRpb24sIFNldHRpbmdVSUZsYWcgfSBmcm9tICdAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVpLXVlNS4yJztcbmltcG9ydCB7IFNldHRpbmdGbGFnLCBUZXh0UGFyYW1ldGVycyB9IGZyb20gJ0BlcGljZ2FtZXMtcHMvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWU1LjInO1xuaW1wb3J0IHsgTG9hZGluZ092ZXJsYXkgfSBmcm9tICcuL0xvYWRpbmdPdmVybGF5JztcbmltcG9ydCB7IFNQU1NpZ25hbGxpbmcgfSBmcm9tICcuL1NpZ25hbGxpbmdFeHRlbnNpb24nO1xuaW1wb3J0IHsgTWVzc2FnZVN0YXRzIH0gZnJvbSAnLi9NZXNzYWdlcyc7XG5jbGFzcyBTUFNBcHBsaWNhdGlvbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy5zaWduYWxsaW5nRXh0ZW5zaW9uID0gbmV3IFNQU1NpZ25hbGxpbmcodGhpcy5zdHJlYW0ud2ViU29ja2V0Q29udHJvbGxlcik7XG4gICAgICAgIHRoaXMuc2lnbmFsbGluZ0V4dGVuc2lvbi5vbkF1dGhlbnRpY2F0aW9uUmVzcG9uc2UgPSB0aGlzLmhhbmRsZVNpZ25hbGxpbmdSZXNwb25zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNpZ25hbGxpbmdFeHRlbnNpb24ub25JbnN0YW5jZVN0YXRlQ2hhbmdlZCA9IHRoaXMuaGFuZGxlU2lnbmFsbGluZ1Jlc3BvbnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZW5mb3JjZVNwZWNpYWxTaWduYWxsaW5nU2VydmVyVXJsKCk7XG4gICAgICAgIC8vIEFkZCAnU2VuZCBTdGF0cyB0byBTZXJ2ZXInIGNoZWNrYm94XG4gICAgICAgIGNvbnN0IHNwc1NldHRpbmdzU2VjdGlvbiA9IHRoaXMuY29uZmlnVUkuYnVpbGRTZWN0aW9uV2l0aEhlYWRpbmcodGhpcy5zZXR0aW5nc1BhbmVsLnNldHRpbmdzQ29udGVudEVsZW1lbnQsIFwiU2NhbGFibGUgUGl4ZWwgU3RyZWFtaW5nXCIpO1xuICAgICAgICBjb25zdCBzZW5kU3RhdHNUb1NlcnZlclNldHRpbmcgPSBuZXcgU2V0dGluZ0ZsYWcoU1BTQXBwbGljYXRpb24uRmxhZ3Muc2VuZFRvU2VydmVyLCBcIlNlbmQgc3RhdHMgdG8gc2VydmVyXCIsIFwiU2VuZCBzZXNzaW9uIHN0YXRzIHRvIHRoZSBzZXJ2ZXJcIiwgZmFsc2UsIHRoaXMuc3RyZWFtLmNvbmZpZy51c2VVcmxQYXJhbXMpO1xuICAgICAgICBzcHNTZXR0aW5nc1NlY3Rpb24uYXBwZW5kQ2hpbGQobmV3IFNldHRpbmdVSUZsYWcoc2VuZFN0YXRzVG9TZXJ2ZXJTZXR0aW5nKS5yb290RWxlbWVudCk7XG4gICAgICAgIHRoaXMubG9hZGluZ092ZXJsYXkgPSBuZXcgTG9hZGluZ092ZXJsYXkodGhpcy5zdHJlYW0udmlkZW9FbGVtZW50UGFyZW50KTtcbiAgICAgICAgdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignc3RhdHNSZWNlaXZlZCcsICh7IGRhdGE6IHsgYWdncmVnYXRlZFN0YXRzIH0gfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRTdGF0c1RvU2VydmVyU2V0dGluZy5mbGFnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHNUb1NpZ25hbGxpbmdTZXJ2ZXIoYWdncmVnYXRlZFN0YXRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVNpZ25hbGxpbmdSZXNwb25zZShzaWduYWxsaW5nUmVzcCwgaXNFcnJvcikge1xuICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JPdmVybGF5KHNpZ25hbGxpbmdSZXNwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmdPdmVybGF5KHNpZ25hbGxpbmdSZXNwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbmZvcmNlU3BlY2lhbFNpZ25hbGxpbmdTZXJ2ZXJVcmwoKSB7XG4gICAgICAgIC8vIFNQUyBuZWVkcyBhIHNwZWNpYWwgL3dzIGFkZGVkIHRvIHRoZSBzaWduYWxsaW5nIHNlcnZlciB1cmwgc28gSzhzIGNhbiBkaXN0aW5ndWlzaCBpdFxuICAgICAgICB0aGlzLnN0cmVhbS5zZXRTaWduYWxsaW5nVXJsQnVpbGRlcigoKSA9PiB7XG4gICAgICAgICAgICBsZXQgc2lnbmFsbGluZ1VybCA9IHRoaXMuc3RyZWFtLmNvbmZpZy5nZXRUZXh0U2V0dGluZ1ZhbHVlKFRleHRQYXJhbWV0ZXJzLlNpZ25hbGxpbmdTZXJ2ZXJVcmwpO1xuICAgICAgICAgICAgaWYgKHNpZ25hbGxpbmdVcmwgJiYgc2lnbmFsbGluZ1VybCAhPT0gdW5kZWZpbmVkICYmICFzaWduYWxsaW5nVXJsLmVuZHNXaXRoKFwiL3dzXCIpKSB7XG4gICAgICAgICAgICAgICAgc2lnbmFsbGluZ1VybCA9IHNpZ25hbGxpbmdVcmwuZW5kc1dpdGgoXCIvXCIpID8gc2lnbmFsbGluZ1VybCArIFwid3NcIiA6IHNpZ25hbGxpbmdVcmwgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBcIi93c1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNpZ25hbGxpbmdVcmw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaG93TG9hZGluZ092ZXJsYXkoc2lnbmFsbGluZ1Jlc3ApIHtcbiAgICAgICAgdGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKTtcbiAgICAgICAgdGhpcy5sb2FkaW5nT3ZlcmxheS5zaG93KCk7XG4gICAgICAgIHRoaXMubG9hZGluZ092ZXJsYXkudXBkYXRlKHNpZ25hbGxpbmdSZXNwKTtcbiAgICAgICAgLy8gZGlzYWJsZSByYWluIGFuaW1hdGlvbiBmb3Igbm93IGFzIHBlcmYgaXMgdG9vIHBvb3Igb24gbW9iaWxlIGRldmljZXNcbiAgICAgICAgLy8gdGhpcy5sb2FkaW5nT3ZlcmxheS5hbmltYXRlKCk7XG4gICAgICAgIHRoaXMuY3VycmVudE92ZXJsYXkgPSB0aGlzLmxvYWRpbmdPdmVybGF5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIEFnZ3JlZ2F0ZWQgU3RhdHMgdG8gdGhlIFNpZ25hbGluZyBTZXJ2ZXJcbiAgICAgKiBAcGFyYW0gc3RhdHMgLSBBZ2dyZWdhdGVkIFN0YXRzXG4gICAgICovXG4gICAgc2VuZFN0YXRzVG9TaWduYWxsaW5nU2VydmVyKHN0YXRzKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgTWVzc2FnZVN0YXRzKHN0YXRzKTtcbiAgICAgICAgdGhpcy5zdHJlYW0ud2ViU29ja2V0Q29udHJvbGxlci53ZWJTb2NrZXQuc2VuZChkYXRhLnBheWxvYWQoKSk7XG4gICAgfVxufVxuU1BTQXBwbGljYXRpb24uRmxhZ3MgPSAoX2EgPSBjbGFzcyB7XG4gICAgfSxcbiAgICBfX3NldEZ1bmN0aW9uTmFtZShfYSwgXCJGbGFnc1wiKSxcbiAgICBfYS5zZW5kVG9TZXJ2ZXIgPSBcInNlbmRTdGF0c1RvU2VydmVyXCIsXG4gICAgX2EpO1xuZXhwb3J0IHsgU1BTQXBwbGljYXRpb24gfTtcbiIsImltcG9ydCB7IExvZ2dlciwgTWVzc2FnZVJlY3YsIE1lc3NhZ2VTZW5kLCB9IGZyb20gJ0BlcGljZ2FtZXMtcHMvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWU1LjInO1xuLyoqXG4gKiBBdXRoIFJlcXVlc3QgTWVzc2FnZSBXcmFwcGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlcXVlc3QgZXh0ZW5kcyBNZXNzYWdlU2VuZCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHRva2VuIC0gVG9rZW4gUHJvdmlkZWQgYnkgdGhlIEF1dGggUHJvdmlkZXJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgLSBOYW1lIG9mIHRoZSBwcm92aWRlciB0aGF0IGlzIHJlZ2lzdGVyZWQgaW4gdGhlIGF1dGggcGx1Z2luXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9rZW4sIHByb3ZpZGVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiYXV0aGVudGljYXRpb25SZXF1ZXN0XCI7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgIH1cbn1cbi8qKlxuICogU3RhdGVzIG9mIHRoZSBVRSBJbnN0YW5jZVxuICovXG5leHBvcnQgdmFyIEluc3RhbmNlU3RhdGU7XG4oZnVuY3Rpb24gKEluc3RhbmNlU3RhdGUpIHtcbiAgICBJbnN0YW5jZVN0YXRlW1wiVU5BTExPQ0FURURcIl0gPSBcIlVOQUxMT0NBVEVEXCI7XG4gICAgSW5zdGFuY2VTdGF0ZVtcIlBFTkRJTkdcIl0gPSBcIlBFTkRJTkdcIjtcbiAgICBJbnN0YW5jZVN0YXRlW1wiRkFJTEVEXCJdID0gXCJGQUlMRURcIjtcbiAgICBJbnN0YW5jZVN0YXRlW1wiUkVBRFlcIl0gPSBcIlJFQURZXCI7XG59KShJbnN0YW5jZVN0YXRlIHx8IChJbnN0YW5jZVN0YXRlID0ge30pKTtcbi8qKlxuICogSW5zdGFuY2UgU3RhdGUgTWVzc2FnZSB3cmFwcGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlSW5zdGFuY2VTdGF0ZSBleHRlbmRzIE1lc3NhZ2VSZWN2IHtcbn1cbi8qKlxuICogVHlwZXMgb2YgQXV0aGVudGljYXRpb24gcmVwb3Nlc1xuICovXG5leHBvcnQgdmFyIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZTtcbihmdW5jdGlvbiAoTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlKSB7XG4gICAgTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlW1wiUkVESVJFQ1RcIl0gPSBcIlJFRElSRUNUXCI7XG4gICAgTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlW1wiSU5WQUxJRF9UT0tFTlwiXSA9IFwiSU5WQUxJRF9UT0tFTlwiO1xuICAgIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZVtcIkFVVEhFTlRJQ0FURURcIl0gPSBcIkFVVEhFTlRJQ0FURURcIjtcbiAgICBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGVbXCJFUlJPUlwiXSA9IFwiRVJST1JcIjtcbn0pKE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZSB8fCAoTWVzc2FnZUF1dGhSZXNwb25zZU91dGNvbWVUeXBlID0ge30pKTtcbi8qKlxuICogQXV0aGVudGljYXRpb24gUmVzcG9uc2UgTWVzc2FnZSB3cmFwcGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlQXV0aFJlc3BvbnNlIGV4dGVuZHMgTWVzc2FnZVJlY3Yge1xufVxuLyoqXG4gKiBJbnN0YW5jZSBSZXF1ZXN0IE1lc3NhZ2UgV3JhcHBlclxuICovXG5leHBvcnQgY2xhc3MgTWVzc2FnZVJlcXVlc3RJbnN0YW5jZSBleHRlbmRzIE1lc3NhZ2VTZW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZXF1ZXN0SW5zdGFuY2VcIjtcbiAgICB9XG59XG4vKipcbiAqIFNwZWNpZmljIHNpZ25hbGxpbmcgZXh0ZW5zaW9ucyByZXF1aXJlZCBieSBTUFMuXG4gKiBGb3IgZXhhbXBsZTogYXV0aGVudGljYXRpb25SZXF1aXJlZCwgaW5zdGFuY2VTdGF0ZSwgYXV0aGVudGljYXRpb25SZXNwb25zZVxuICovXG5leHBvcnQgY2xhc3MgU1BTU2lnbmFsbGluZyB7XG4gICAgY29uc3RydWN0b3Iod2Vic29ja2V0Q29udHJvbGxlcikge1xuICAgICAgICB0aGlzLmV4dGVuZFNpZ25hbGxpbmdQcm90b2NvbCh3ZWJzb2NrZXRDb250cm9sbGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXh0ZW5kIHRoZSBzaWduYWxsaW5nIHByb3RvY29sIHdpdGggU1BTIHNwZWNpZmljIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGV4dGVuZFNpZ25hbGxpbmdQcm90b2NvbCh3ZWJTb2NrZXRDb250cm9sbGVyKSB7XG4gICAgICAgIC8vIGF1dGhlbnRpY2F0aW9uUmVxdWlyZWRcbiAgICAgICAgd2ViU29ja2V0Q29udHJvbGxlci5zaWduYWxsaW5nUHJvdG9jb2wuYWRkTWVzc2FnZUhhbmRsZXIoXCJhdXRoZW50aWNhdGlvblJlcXVpcmVkXCIsIChhdXRoUmVxUGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkFVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsIDYpO1xuICAgICAgICAgICAgY29uc3QgdXJsX3N0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh1cmxfc3RyaW5nKTtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhSZXF1ZXN0ID0gbmV3IE1lc3NhZ2VBdXRoUmVxdWVzdCh1cmwuc2VhcmNoUGFyYW1zLmdldChcImNvZGVcIiksIHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicHJvdmlkZXJcIikpO1xuICAgICAgICAgICAgd2ViU29ja2V0Q29udHJvbGxlci53ZWJTb2NrZXQuc2VuZChhdXRoUmVxdWVzdC5wYXlsb2FkKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gaW5zdGFuY2VTdGF0ZVxuICAgICAgICB3ZWJTb2NrZXRDb250cm9sbGVyLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihcImluc3RhbmNlU3RhdGVcIiwgKGluc3RhbmNlU3RhdGVQYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiSU5TVEFOQ0VfU1RBVEVcIiwgNik7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZVN0YXRlID0gSlNPTi5wYXJzZShpbnN0YW5jZVN0YXRlUGF5bG9hZCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUluc3RhbmNlU3RhdGVDaGFuZ2VkKGluc3RhbmNlU3RhdGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYXV0aGVudGljYXRpb25SZXNwb25zZVxuICAgICAgICB3ZWJTb2NrZXRDb250cm9sbGVyLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihcImF1dGhlbnRpY2F0aW9uUmVzcG9uc2VcIiwgKGF1dGhSZXNwUGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgTG9nZ2VyLkxvZyhMb2dnZXIuR2V0U3RhY2tUcmFjZSgpLCBcIkFVVEhFTlRJQ0FUSU9OX1JFU1BPTlNFXCIsIDYpO1xuICAgICAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXNwb25zZSA9IEpTT04ucGFyc2UoYXV0aFJlc3BQYXlsb2FkKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb25SZXNwb25zZShhdXRoZW50aWNhdGlvblJlc3BvbnNlKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXV0aGVudGljYXRpb25SZXNwb25zZS5vdXRjb21lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUuUkVESVJFQ1Q6IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhdXRoZW50aWNhdGlvblJlc3BvbnNlLnJlZGlyZWN0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUuQVVUSEVOVElDQVRFRDoge1xuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuTG9nKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiVXNlciBpcyBhdXRoZW50aWNhdGVkIGFuZCBub3cgcmVxdWVzdGluZyBhbiBpbnN0YW5jZVwiLCA2KTtcbiAgICAgICAgICAgICAgICAgICAgd2ViU29ja2V0Q29udHJvbGxlci53ZWJTb2NrZXQuc2VuZChuZXcgTWVzc2FnZVJlcXVlc3RJbnN0YW5jZSgpLnBheWxvYWQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZS5JTlZBTElEX1RPS0VOOiB7XG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5JbmZvKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiQXV0aGVudGljYXRpb24gZXJyb3IgOiBJbnZhbGlkIFRva2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUuRVJST1I6IHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkluZm8oTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSwgXCJBdXRoZW50aWNhdGlvbiBFcnJvciBmcm9tIHNlcnZlciBDaGVjayB3aGF0IHlvdSBhcmUgc2VuZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLkVycm9yKExvZ2dlci5HZXRTdGFja1RyYWNlKCksIFwiVGhlIE91dGNvbWUgTWVzc2FnZSBoYXMgbm90IGJlZW4gaGFuZGxlZCA6IHRoaXMgaXMgcmVhbGx5IGJhZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBTZXQgdXAgZnVuY3Rpb25hbGl0eSB0byBoYXBwZW4gd2hlbiBhbiBpbnN0YW5jZSBzdGF0ZSBjaGFuZ2Ugb2NjdXJzIGFuZCB1cGRhdGVzIHRoZSBpbmZvIG92ZXJsYXkgd2l0aCB0aGUgcmVzcG9uc2VcbiAgICAqIEBwYXJhbSBpbnN0YW5jZVN0YXRlIC0gdGhlIG1lc3NhZ2UgaW5zdGFuY2Ugc3RhdGVcbiAgICAqL1xuICAgIGhhbmRsZUluc3RhbmNlU3RhdGVDaGFuZ2VkKGluc3RhbmNlU3RhdGUpIHtcbiAgICAgICAgbGV0IGluc3RhbmNlU3RhdGVNZXNzYWdlID0gXCJcIjtcbiAgICAgICAgbGV0IGlzSW5zdGFuY2VQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIC8vIGdldCB0aGUgcmVzcG9uc2UgdHlwZVxuICAgICAgICBzd2l0Y2ggKGluc3RhbmNlU3RhdGUuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgSW5zdGFuY2VTdGF0ZS5VTkFMTE9DQVRFRDpcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiSW5zdGFuY2UgVW5hbGxvY2F0ZWQ6IFwiICsgaW5zdGFuY2VTdGF0ZS5kZXRhaWxzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBJbnN0YW5jZVN0YXRlLkZBSUxFRDpcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiVUUgSW5zdGFuY2UgRmFpbGVkOiBcIiArIGluc3RhbmNlU3RhdGUuZGV0YWlscztcbiAgICAgICAgICAgICAgICBpc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW5zdGFuY2VTdGF0ZS5QRU5ESU5HOlxuICAgICAgICAgICAgICAgIGlzSW5zdGFuY2VQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2VTdGF0ZS5kZXRhaWxzID09IHVuZGVmaW5lZCB8fCBpbnN0YW5jZVN0YXRlLmRldGFpbHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiUGVuZGluZ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZU1lc3NhZ2UgPSBpbnN0YW5jZVN0YXRlLmRldGFpbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RhbmNlU3RhdGVNZXNzYWdlID0gXCJTdGVwIDIvMzogXCIgKyBpbnN0YW5jZVN0YXRlTWVzc2FnZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW5zdGFuY2VTdGF0ZS5SRUFEWTpcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2VTdGF0ZS5kZXRhaWxzID09IHVuZGVmaW5lZCB8fCBpbnN0YW5jZVN0YXRlLmRldGFpbHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiUmVhZHlcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlU3RhdGVNZXNzYWdlID0gXCJSZWFkeTogXCIgKyBpbnN0YW5jZVN0YXRlLmRldGFpbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RhbmNlU3RhdGVNZXNzYWdlID0gXCJTdGVwIDMvMzogXCIgKyBpbnN0YW5jZVN0YXRlTWVzc2FnZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZU1lc3NhZ2UgPSBcIlVuaGFuZGxlZCBJbnN0YW5jZSBTdGF0ZVwiICsgaW5zdGFuY2VTdGF0ZS5zdGF0ZSArIFwiIFwiICsgaW5zdGFuY2VTdGF0ZS5kZXRhaWxzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgICAgICB0aGlzLm9uSW5zdGFuY2VTdGF0ZUNoYW5nZWQoaW5zdGFuY2VTdGF0ZU1lc3NhZ2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vbkluc3RhbmNlU3RhdGVDaGFuZ2VkKGluc3RhbmNlU3RhdGVNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHVwIGZ1bmN0aW9uYWxpdHkgdG8gaGFwcGVuIHdoZW4gcmVjZWl2aW5nIGFuIGF1dGggcmVzcG9uc2UgYW5kIHVwZGF0ZXMgYW4gaW5mbyBvdmVybGF5IHdpdGggdGhlIHJlc3BvbnNlXG4gICAgICogQHBhcmFtIGF1dGhSZXNwb25zZSAtIHRoZSBhdXRoIHJlc3BvbnNlIG1lc3NhZ2UgdHlwZVxuICAgICAqL1xuICAgIGhhbmRsZUF1dGhlbnRpY2F0aW9uUmVzcG9uc2UoYXV0aFJlc3BvbnNlKSB7XG4gICAgICAgIGxldCBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiXCI7XG4gICAgICAgIGxldCBpc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIC8vIGdldCB0aGUgcmVzcG9uc2UgdHlwZVxuICAgICAgICBzd2l0Y2ggKGF1dGhSZXNwb25zZS5vdXRjb21lKSB7XG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZS5BVVRIRU5USUNBVEVEOlxuICAgICAgICAgICAgICAgIGluc3RhbmNlU3RhdGVNZXNzYWdlID0gXCJTdGVwIDEvMzogUmVxdWVzdGluZyBJbnN0YW5jZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUuSU5WQUxJRF9UT0tFTjpcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiSW52YWxpZCBUb2tlbjogXCIgKyBhdXRoUmVzcG9uc2UuZXJyb3I7XG4gICAgICAgICAgICAgICAgaXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VBdXRoUmVzcG9uc2VPdXRjb21lVHlwZS5SRURJUkVDVDpcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXRlTWVzc2FnZSA9IFwiUmVkaXJlY3RpbmcgdG86IFwiICsgYXV0aFJlc3BvbnNlLnJlZGlyZWN0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQXV0aFJlc3BvbnNlT3V0Y29tZVR5cGUuRVJST1I6XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZU1lc3NhZ2UgPSBcIkVycm9yOiBcIiArIGF1dGhSZXNwb25zZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBpc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZU1lc3NhZ2UgPSBcIlVuaGFuZGxlZCBBdXRoIFJlc3BvbnNlOiBcIiArIGF1dGhSZXNwb25zZS5vdXRjb21lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25BdXRoZW50aWNhdGlvblJlc3BvbnNlKGluc3RhbmNlU3RhdGVNZXNzYWdlLCBpc0Vycm9yKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuICByZXR1cm4gc2VsZjtcbn0iLCJpbXBvcnQgdG9Qcm9wZXJ0eUtleSBmcm9tIFwiLi90b1Byb3BlcnR5S2V5LmpzXCI7XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCB0b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7XG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gXCIuL3NldFByb3RvdHlwZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcbiAgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7XG4gIHNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkge1xuICBpZiAoX3R5cGVvZihpbnB1dCkgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKF90eXBlb2YocmVzKSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlcztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIi4vdHlwZW9mLmpzXCI7XG5pbXBvcnQgdG9QcmltaXRpdmUgZnJvbSBcIi4vdG9QcmltaXRpdmUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykge1xuICB2YXIga2V5ID0gdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gXCJzeW1ib2xcIiA/IGtleSA6IFN0cmluZyhrZXkpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICB9LCBfdHlwZW9mKG9iaik7XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IFNQU0FwcGxpY2F0aW9uIH0gZnJvbSBcIi4vU1BTQXBwbGljYXRpb25cIjtcbmltcG9ydCB7IENvbmZpZywgUGl4ZWxTdHJlYW1pbmcsIFRleHRQYXJhbWV0ZXJzIH0gZnJvbSAnQGVwaWNnYW1lcy1wcy9saWItcGl4ZWxzdHJlYW1pbmdmcm9udGVuZC11ZTUuMic7XG5pbXBvcnQgeyBQaXhlbFN0cmVhbWluZ0FwcGxpY2F0aW9uU3R5bGUgfSBmcm9tICdAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVpLXVlNS4yJztcbi8vIEFwcGx5IGRlZmF1bHQgc3R5bGluZyBmcm9tIEVwaWMncyBmcm9udGVuZFxuZXhwb3J0IGNvbnN0IFBpeGVsU3RyZWFtaW5nQXBwbGljYXRpb25TdHlsZXMgPSBuZXcgUGl4ZWxTdHJlYW1pbmdBcHBsaWNhdGlvblN0eWxlKCk7XG5QaXhlbFN0cmVhbWluZ0FwcGxpY2F0aW9uU3R5bGVzLmFwcGx5U3R5bGVTaGVldCgpO1xuZG9jdW1lbnQuYm9keS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gRXhhbXBsZSBvZiBob3cgdG8gc2V0IHRoZSBsb2dnZXIgbGV2ZWxcbiAgICAvL2xpYmZyb250ZW5kLkxvZ2dlci5TZXRMb2dnZXJWZXJib3NpdHkoMTApO1xuICAgIC8vIENyZWF0ZSBhIGNvbmZpZyBvYmplY3QuXG4gICAgLy8gTm90ZTogVGhpcyBjb25maWcgaXMgZXh0cmVtZWx5IGltcG9ydGFudCwgU1BTIG9ubHkgc3VwcG9ydHMgdGhlIGJyb3dzZXIgc2VuZGluZyB0aGUgb2ZmZXIuXG4gICAgY29uc3QgY29uZmlnID0gbmV3IENvbmZpZyh7IHVzZVVybFBhcmFtczogdHJ1ZSwgaW5pdGlhbFNldHRpbmdzOiB7IE9mZmVyVG9SZWNlaXZlOiB0cnVlLCBUaW1lb3V0SWZJZGxlOiB0cnVlLCBIb3ZlcmluZ01vdXNlOiB0cnVlIH0gfSk7XG4gICAgY29uZmlnLnNldFRleHRTZXR0aW5nKFRleHRQYXJhbWV0ZXJzLlNpZ25hbGxpbmdTZXJ2ZXJVcmwsIFwid3M6Ly9zcHMtYmlvbWUtMTY2MjQyODcyMS5hcC1zb3V0aC0xLmVsYi5hbWF6b25hd3MuY29tL3FkLW5wcTdodjltbTMvd3NcIik7XG4gICAgLy8gQ3JlYXRlIGEgTmF0aXZlIERPTSBkZWxlZ2F0ZSBpbnN0YW5jZSB0aGF0IGltcGxlbWVudHMgdGhlIERlbGVnYXRlIGludGVyZmFjZSBjbGFzc1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBQaXhlbFN0cmVhbWluZyhjb25maWcpO1xuICAgIGNvbnN0IHNwc0FwcGxpY2F0aW9uID0gbmV3IFNQU0FwcGxpY2F0aW9uKHtcbiAgICAgICAgc3RyZWFtLFxuICAgICAgICBvbkNvbG9yTW9kZUNoYW5nZWQ6IChpc0xpZ2h0TW9kZSkgPT4gUGl4ZWxTdHJlYW1pbmdBcHBsaWNhdGlvblN0eWxlcy5zZXRDb2xvck1vZGUoaXNMaWdodE1vZGUpIC8qIExpZ2h0L0RhcmsgbW9kZSBzdXBwb3J0LiAqL1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3BzQXBwbGljYXRpb24ucm9vdEVsZW1lbnQpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==
